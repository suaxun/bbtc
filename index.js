import{default as e}from'https://testingcf.jsdelivr.net/npm/html2canvas/+esm';var n={31:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.douyin-bubble-container[data-v-8444c00e]{display:flex;align-items:flex-start;gap:10px;width:100%;margin-bottom:15px;padding:0 10px;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif}.my-message[data-v-8444c00e]{flex-direction:row;justify-content:flex-end}.chat-avatar[data-v-8444c00e]{width:40px;height:40px;min-width:40px;min-height:40px;border-radius:50%;background-size:cover;background-position:center;flex-shrink:0;border:1px solid #333}.message-content[data-v-8444c00e]{max-width:70%;display:flex;flex-direction:column}.my-message .message-content[data-v-8444c00e]{align-items:flex-end}.bubble[data-v-8444c00e]{padding:10px 14px;border-radius:8px;font-size:15px;line-height:1.4;word-break:break-all;position:relative}.text-bubble[data-v-8444c00e]{background-color:#252525;color:#fff;border:1px solid #333}.my-message .text-bubble[data-v-8444c00e]{background-color:#fe2c55;color:#fff;border:none}.img-bubble[data-v-8444c00e]{padding:0;background-color:transparent}.img-wrapper[data-v-8444c00e]{border-radius:8px;overflow:hidden;max-width:100%}.img-bubble img[data-v-8444c00e],.emoji-bubble img[data-v-8444c00e]{max-width:100%;display:block}.additional-text[data-v-8444c00e]{margin-top:5px;color:#fff;background-color:#252525;padding:5px 10px;border-radius:8px}.emoji-bubble[data-v-8444c00e]{padding:0;background-color:transparent;max-width:150px}.voice-bubble[data-v-8444c00e]{background-color:#252525;color:#fff;display:flex;flex-direction:column;align-items:flex-start;gap:5px;min-width:80px;border:1px solid #333;cursor:pointer}.voice-text[data-v-8444c00e]{margin-top:5px;font-size:13px;padding-top:5px;border-top:1px solid rgba(255,255,255,0.2);width:100%}.my-message .voice-bubble[data-v-8444c00e]{background-color:#fe2c55;border:none}.douyin-music[data-v-8444c00e]{max-width:250px;background-color:#252525;border-radius:8px;padding:10px;color:#fff}.system-msg[data-v-8444c00e]{width:100%;text-align:center;font-size:12px;color:#666;margin:5px 0}\n','',{version:3,sources:['webpack://./src/柏柏同层/Douyin/bubble/bubble.vue'],names:[],mappings:'AA0JA,0CACE,YAAa,CACb,sBAAuB,CACvB,QAAS,CACT,UAAW,CACX,kBAAmB,CACnB,cAAe,CACf,qBAAsB,CACtB,yFACF,CAEA,6BACE,kBAAmB,CACnB,wBACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aAAc,CACd,qBACF,CAEA,kCACE,aAAc,CACd,YAAa,CACb,qBACF,CAEA,8CACE,oBACF,CAEA,yBACE,iBAAkB,CAClB,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,iBACF,CAEA,8BACE,wBAAyB,CACzB,UAAW,CACX,qBACF,CAEA,0CACE,wBAAyB,CACzB,UAAW,CACX,WACF,CAEA,6BACE,SAAU,CACV,4BACF,CAEA,8BACE,iBAAkB,CAClB,eAAgB,CAChB,cACF,CAEA,oEAEE,cAAe,CACf,aACF,CAEA,kCACE,cAAe,CACf,UAAW,CACX,wBAAyB,CACzB,gBAAiB,CACjB,iBACF,CAEA,+BACE,SAAU,CACV,4BAA6B,CAC7B,eACF,CAEA,+BACE,wBAAyB,CACzB,UAAW,CACX,YAAa,CACb,qBAAsB,CACtB,sBAAuB,CACvB,OAAQ,CACR,cAAe,CACf,qBAAsB,CACtB,cACF,CAEA,6BACE,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,0CAA8C,CAC9C,UACF,CAEA,2CACE,wBAAyB,CACzB,WACF,CAEA,+BACE,eAAgB,CAChB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UACF,CAEA,6BACE,UAAW,CACX,iBAAkB,CAClB,cAAe,CACf,UAAW,CACX,YACF',sourcesContent:['<template>\n  <div class="douyin-bubble-container" :class="{ \'my-message\': isUser }">\n    \x3c!-- 对方头像 --\x3e\n    <div v-if="!isUser" class="chat-avatar" :style="`background-image: url(\'${headUrl}\')`"></div>\n\n    \x3c!-- 消息内容 --\x3e\n    <div class="message-content">\n      \x3c!-- 文本消息 --\x3e\n      <div v-if="props.bubble.msgtype == \'text\'" class="bubble text-bubble">\n        {{ props.bubble.content }}\n      </div>\n      \x3c!-- 图片消息 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'img\'" class="bubble img-bubble">\n        \x3c!-- 如果是 URL 则显示图片，否则显示文本框 --\x3e\n        <div v-if="isUrl(props.bubble.content)" class="img-wrapper">\n          <img :src="props.bubble.content" @error="handleImgError" />\n        </div>\n        <div v-else class="bubble text-bubble fake-img-bubble">\n          <div style="text-align: center; color: #aaa; font-size: 13px; margin-bottom: 5px">[图片]</div>\n          <div v-html="warpHandle(props.bubble.content)"></div>\n        </div>\n        <div v-if="props.bubble.additionalText" class="additional-text">{{ props.bubble.additionalText }}</div>\n      </div>\n      \x3c!-- 表情包 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'emoji\'" class="bubble emoji-bubble">\n        <div class="img-wrapper">\n          <img :src="props.bubble.emoji" @error="handleImgError" />\n        </div>\n      </div>\n      \x3c!-- 语音消息 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'voice\'" class="bubble voice-bubble" @click="toggleVoiceText">\n        <div style="display: flex; align-items: center; gap: 10px; width: 100%">\n          \x3c!-- 对方发的语音图标 --\x3e\n          <span v-if="!isUser" class="voice-icon">\n            <svg viewBox="0 0 1024 1024" width="20" height="20" fill="currentColor" style="transform: rotate(90deg)">\n              <path\n                d="M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z"\n                p-id="38915"\n              ></path>\n            </svg>\n          </span>\n          <span class="voice-duration">{{ props.bubble.voicetime || 2 }}"</span>\n          \x3c!-- 我方发的语音图标 --\x3e\n          <span v-if="isUser" class="voice-icon">\n            <svg viewBox="0 0 1024 1024" width="20" height="20" fill="currentColor" style="transform: rotate(-90deg)">\n              <path\n                d="M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z"\n                p-id="38915"\n              ></path>\n            </svg>\n          </span>\n        </div>\n        <div v-if="voiceTextVisible" class="voice-text">{{ props.bubble.content }}</div>\n      </div>\n      \x3c!-- music类型 --\x3e\n      <music\n        v-else-if="props.bubble.msgtype == \'music\'"\n        :class="`douyin-music`"\n        :song="props.bubble.song"\n        :singer="props.bubble.singer"\n      ></music>\n      \x3c!-- system类型 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'system\'" class="system-msg">\n        {{ props.bubble?.content }}\n      </div>\n      \x3c!-- 其他类型 --\x3e\n      <div v-else class="bubble text-bubble">\n        {{ props.bubble.content }}\n      </div>\n    </div>\n\n    \x3c!-- 我方头像 --\x3e\n    <div v-if="isUser" class="chat-avatar" :style="`background-image: url(\'${headUrl}\')`"></div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, defineProps, ref } from \'vue\';\nimport music from \'../../QQ/bubble/music.vue\';\nimport { addQQNpc, sharedState } from \'../../shared-state\';\n\nconst props = defineProps({\n  bubble: {\n    type: Object,\n  },\n  isGroup: {\n    type: String,\n  },\n  senderinfo: {\n    type: Object,\n  },\n  isDouyin: {\n    type: Boolean,\n  },\n});\n\nconst isUser = computed(() => {\n  return props.bubble.sender === \'user\';\n});\n\nconst headUrl = computed(() => {\n  const name = props.bubble.sender;\n\n  if (isUser.value) {\n    return sharedState.Douyin.userHead || sharedState.ST.userHead;\n  }\n\n  // 优先使用传入的 senderinfo 中的抖音头像\n  if (props.senderinfo?.douyinHead) {\n    return props.senderinfo.douyinHead;\n  }\n\n  // 其次尝试从全局 chars 中查找\n  if (sharedState.QQ.chars[name]?.douyinHead) {\n    return sharedState.QQ.chars[name].douyinHead;\n  }\n\n  // 降级到 QQ 头像\n  if (props.senderinfo?.head) {\n    return props.senderinfo.head;\n  }\n  if (sharedState.QQ.chars[name]?.head) {\n    return sharedState.QQ.chars[name].head;\n  }\n\n  return \'\';\n});\n\nif (!isUser.value && props.bubble.sender && !(props.bubble.sender in sharedState.QQ.chars)) {\n  addQQNpc(props.bubble.sender);\n}\n\nconst handleImgError = e => {\n  e.target.style.display = \'none\'; // 如果加载失败，隐藏图片\n  // 也可以选择替换为 error 占位图\n  // e.target.src = \'https://via.placeholder.com/150?text=Error\';\n};\n\nconst voiceTextVisible = ref(false);\nconst toggleVoiceText = () => {\n  voiceTextVisible.value = !voiceTextVisible.value;\n};\n\nfunction warpHandle(content) {\n  if (!content) return \'\';\n  return content.replace(/\\n/g, \'<br>\');\n}\n\nfunction isUrl(content) {\n  return /^http/.test(content);\n}\n<\/script>\n\n<style scoped>\n.douyin-bubble-container {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  width: 100%;\n  margin-bottom: 15px;\n  padding: 0 10px;\n  box-sizing: border-box;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n}\n\n.my-message {\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n.chat-avatar {\n  width: 40px;\n  height: 40px;\n  min-width: 40px;\n  min-height: 40px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n  border: 1px solid #333;\n}\n\n.message-content {\n  max-width: 70%;\n  display: flex;\n  flex-direction: column;\n}\n\n.my-message .message-content {\n  align-items: flex-end;\n}\n\n.bubble {\n  padding: 10px 14px;\n  border-radius: 8px;\n  font-size: 15px;\n  line-height: 1.4;\n  word-break: break-all;\n  position: relative;\n}\n\n.text-bubble {\n  background-color: #252525;\n  color: #fff;\n  border: 1px solid #333;\n}\n\n.my-message .text-bubble {\n  background-color: #fe2c55;\n  color: #fff;\n  border: none;\n}\n\n.img-bubble {\n  padding: 0;\n  background-color: transparent;\n}\n\n.img-wrapper {\n  border-radius: 8px;\n  overflow: hidden;\n  max-width: 100%;\n}\n\n.img-bubble img,\n.emoji-bubble img {\n  max-width: 100%;\n  display: block;\n}\n\n.additional-text {\n  margin-top: 5px;\n  color: #fff;\n  background-color: #252525;\n  padding: 5px 10px;\n  border-radius: 8px;\n}\n\n.emoji-bubble {\n  padding: 0;\n  background-color: transparent;\n  max-width: 150px;\n}\n\n.voice-bubble {\n  background-color: #252525;\n  color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 5px;\n  min-width: 80px;\n  border: 1px solid #333;\n  cursor: pointer;\n}\n\n.voice-text {\n  margin-top: 5px;\n  font-size: 13px;\n  padding-top: 5px;\n  border-top: 1px solid rgba(255, 255, 255, 0.2);\n  width: 100%;\n}\n\n.my-message .voice-bubble {\n  background-color: #fe2c55;\n  border: none;\n}\n\n.douyin-music {\n  max-width: 250px;\n  background-color: #252525;\n  border-radius: 8px;\n  padding: 10px;\n  color: #fff;\n}\n\n.system-msg {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  color: #666;\n  margin: 5px 0;\n}\n</style>\n'],sourceRoot:''}]);const s=r},142:(e,n,t)=>{var a=t(31);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('f18df746',a,!1,{ssrId:!0})},272:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.home-page[data-v-78125f6c]{width:100%;height:100%;padding:50px 24px 20px;box-sizing:border-box;display:flex;flex-direction:column;position:relative;overflow:hidden;font-family:\'SF Pro Display\',-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,sans-serif;background:#1a1a1a;background-image:radial-gradient(at 0% 0%,rgba(120,120,120,0.2) 0,transparent 50%),radial-gradient(at 100% 100%,rgba(100,100,100,0.2) 0,transparent 50%)}.home-page[data-v-78125f6c]>*{position:relative;z-index:2}.home-status[data-v-78125f6c]{display:flex;flex-direction:column;align-items:center;margin-bottom:50px;color:#fff}.home-status__time[data-v-78125f6c]{font-size:82px;font-weight:100;letter-spacing:-3px;line-height:1;background:linear-gradient(180deg,#ffffff 0%,#b0b0b0 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 4px 12px rgba(0,0,0,0.4))}.home-status__date[data-v-78125f6c]{font-size:17px;font-weight:500;color:rgba(255,255,255,0.7);margin-top:5px;letter-spacing:1px;text-transform:uppercase}.home-apps[data-v-78125f6c]{flex:1;display:flex;justify-content:center;padding-top:10px}.apps-grid[data-v-78125f6c]{display:grid;grid-template-columns:repeat(2,1fr);-moz-column-gap:40px;column-gap:40px;row-gap:40px;width:auto}.app-item[data-v-78125f6c]{display:flex;flex-direction:column;align-items:center;gap:12px;background:none;border:none;cursor:pointer;padding:0;transition:all 0.4s cubic-bezier(0.25,1,0.5,1)}.app-item[data-v-78125f6c]:active{transform:scale(0.92)}.app-item__icon-box[data-v-78125f6c]{width:78px;height:78px;border-radius:24px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;background:rgba(255,255,255,0.03);backdrop-filter:blur(3px) saturate(110%);-webkit-backdrop-filter:blur(3px) saturate(110%);box-shadow:inset 0 0 0 1px rgba(255,255,255,0.15),inset 0 1px 0 rgba(255,255,255,0.4),0 8px 20px -4px rgba(0,0,0,0.4);transition:all 0.3s ease}.app-item__icon-box[data-v-78125f6c]::before{content:\'\';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle at 50% 0%,rgba(255,255,255,0.2) 0%,transparent 50%);transform:rotate(-45deg);pointer-events:none}.app-item__img[data-v-78125f6c]{width:100%;height:100%;object-fit:cover;border-radius:24px;opacity:0.85;filter:sepia(20%) saturate(60%) contrast(0.9);mix-blend-mode:overlay}.app-item__svg[data-v-78125f6c]{width:36px;height:36px;color:rgba(255,255,255,0.95);z-index:2;filter:drop-shadow(0 0 8px rgba(255,255,255,0.3))}.app-item--qq .app-item__icon-box[data-v-78125f6c]::after{content:\'\';position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,150,255,0.05),transparent);pointer-events:none}.app-item--rednote .app-item__icon-box[data-v-78125f6c]::after{content:\'\';position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,50,50,0.05),transparent);pointer-events:none}.app-item--douyin .app-item__icon-box[data-v-78125f6c]::after{content:\'\';position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.2),transparent);pointer-events:none}.app-item__name[data-v-78125f6c]{font-size:13px;font-weight:400;color:rgba(255,255,255,0.8);letter-spacing:0.5px;text-shadow:0 1px 4px rgba(0,0,0,0.6);margin-top:8px;font-family:-apple-system,sans-serif}.home-dock[data-v-78125f6c]{width:100%;padding-bottom:24px;display:flex;justify-content:center}.home-dock__indicator[data-v-78125f6c]{width:140px;height:5px;background:rgba(255,255,255,0.25);border-radius:100px;backdrop-filter:blur(4px);box-shadow:0 2px 8px rgba(0,0,0,0.2)}\n','',{version:3,sources:['webpack://./src/柏柏同层/Home.vue'],names:[],mappings:'AAkLA,4BACE,UAAW,CACX,WAAY,CACZ,sBAAuB,CACvB,qBAAsB,CACtB,YAAa,CACb,qBAAsB,CACtB,iBAAkB,CAClB,eAAgB,CAChB,0FAMY,CAGZ,kBAAmB,CACnB,wJAGF,CAEA,8BACE,iBAAkB,CAClB,SACF,CAGA,8BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,kBAAmB,CACnB,UACF,CAEA,oCACE,cAAe,CACf,eAAgB,CAChB,mBAAoB,CACpB,aAAc,CACd,0DAA6D,CAC7D,4BAA6B,CAC7B,mCAAoC,CACpC,8CACF,CAEA,oCACE,cAAe,CACf,eAAgB,CAChB,2BAA+B,CAC/B,cAAe,CACf,kBAAmB,CACnB,wBACF,CAGA,4BACE,MAAO,CACP,YAAa,CACb,sBAAuB,CACvB,gBACF,CAEA,4BACE,YAAa,CACb,mCAAqC,CACrC,oBAAgB,CAAhB,eAAgB,CAChB,YAAa,CACb,UACF,CAGA,2BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,QAAS,CACT,eAAgB,CAChB,WAAY,CACZ,cAAe,CACf,SAAU,CACV,8CACF,CAEA,kCACE,qBACF,CAGA,qCACE,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,iBAAkB,CAClB,eAAgB,CAOhB,iCAAqC,CACrC,wCAAyC,CACzC,gDAAiD,CAGjD,qHAG+C,CAE/C,wBACF,CAGA,6CACE,UAAW,CACX,iBAAkB,CAClB,QAAS,CACT,SAAU,CACV,UAAW,CACX,WAAY,CACZ,qFAA2F,CAC3F,wBAAyB,CACzB,mBACF,CAGA,gCACE,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,kBAAmB,CACnB,YAAa,CACb,6CAA8C,CAC9C,sBACF,CAGA,gCACE,UAAW,CACX,WAAY,CACZ,4BAAgC,CAChC,SAAU,CACV,iDACF,CAOA,0DACE,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,mEAAyE,CACzE,mBACF,CAEA,+DACE,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,mEAAyE,CACzE,mBACF,CAEA,8DACE,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,8DAAoE,CACpE,mBACF,CAGA,iCACE,cAAe,CACf,eAAgB,CAChB,2BAA+B,CAC/B,oBAAqB,CACrB,qCAAyC,CACzC,cAAe,CACf,oCACF,CAGA,4BACE,UAAW,CACX,mBAAoB,CACpB,YAAa,CACb,sBACF,CAEA,uCACE,WAAY,CACZ,UAAW,CACX,iCAAqC,CACrC,mBAAoB,CACpB,yBAA0B,CAC1B,oCACF',sourcesContent:['<template>\n  <div class="home-page" :style="homeStyle">\n    \x3c!-- 顶部状态栏 --\x3e\n    <div class="home-status">\n      <div class="home-status__top">\n        <div class="home-status__time">{{ sharedState.phone.time }}</div>\n      </div>\n      <div class="home-status__date">{{ dateLabel }}</div>\n    </div>\n\n    \x3c!-- 应用图标区域 - 2x2 网格布局 --\x3e\n    <div class="home-apps">\n      <div class="apps-grid">\n        \x3c!-- QQ --\x3e\n        <button class="app-item app-item--qq" type="button" @click="openApp(\'QQ\')">\n          <div class="app-item__icon-box">\n            <img v-if="iconSrc.QQ" class="app-item__img" :src="iconSrc.QQ" alt="QQ" />\n            <svg v-else class="app-item__svg" viewBox="0 0 1024 1024" aria-hidden="true">\n              <path\n                d="M666.122449 909.061224c-10.44898 0-21.420408-1.044898-31.869388-2.612244-39.183673-4.702041-74.710204-23.510204-100.832653-53.289796-13.583673 5.22449-28.212245 5.22449-41.795918 0-21.420408 28.212245-61.64898 48.065306-108.669388 53.289796-66.35102 7.314286-138.44898-11.493878-144.718367-55.379592-5.22449-34.481633 37.093878-61.126531 81.502041-75.755102-25.6-28.212245-43.363265-63.738776-51.2-101.355102l-0.522449 0.522449c-25.077551 31.346939-41.795918 50.155102-61.126531 50.155102-2.089796 0-4.179592-0.522449-6.269388-1.044898-7.314286-2.612245-13.061224-8.881633-17.240816-18.808164-16.195918-34.481633-9.404082-100.310204 15.15102-150.465306 0 0 0-0.522449 0.522449-0.522449 12.538776-22.465306 27.689796-43.363265 45.453061-62.171428-6.269388-11.493878-10.44898-24.032653-12.016326-37.093878v-3.134694c0.522449-19.330612 10.44898-37.093878 26.644898-47.542857-10.971429-73.142857 9.926531-147.330612 58.514286-203.232653 49.110204-56.946939 120.163265-88.816327 194.873469-86.204081h4.702041c65.306122 0 129.567347 26.122449 177.110204 72.097959 49.110204 47.542857 76.8 112.326531 77.844898 180.767347v7.314285c0.522449 9.926531 0 19.330612-1.044898 29.257143 14.106122 8.881633 21.420408 20.37551 21.420408 48.065306 0 13.583673-1.044898 27.689796-9.926531 36.04898 13.061224 17.763265 28.734694 42.840816 41.27347 62.693877l2.612245 4.179592c20.37551 32.391837 23.510204 74.187755 22.987755 96.130613 0 17.240816-2.089796 58.514286-18.285714 70.530612-3.657143 2.612245-7.314286 3.657143-12.016327 3.657143h-4.179592c-26.122449 0-41.273469-23.510204-57.991837-48.587755l-1.567347-2.089796c-8.881633 36.571429-26.122449 71.053061-50.677551 99.265306 27.167347 9.404082 83.069388 31.346939 75.755103 73.142857-5.746939 35.526531-55.902041 62.171429-114.416327 62.171428z m-388.702041-63.738775z m250.253061-11.493878z m276.375511-140.016326z m-47.020409-235.102041z"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </div>\n          <span class="app-item__name">QQ</span>\n        </button>\n\n        \x3c!-- RedNote --\x3e\n        <button class="app-item app-item--rednote" type="button" @click="openApp(\'RedNote\')">\n          <div class="app-item__icon-box">\n            <img v-if="iconSrc.RedNote" class="app-item__img" :src="iconSrc.RedNote" alt="RedNote" />\n            <svg v-else class="app-item__svg" viewBox="0 0 1024 1024" aria-hidden="true">\n              <path\n                d="M95.83746 426.890159H25.742222c6.095238 91.550476-16.253968 160.954921-16.253968 160.95492l37.587302 68.957461c49.777778-21.333333 48.761905-229.912381 48.761904-229.912381zM323.433651 426.890159h-70.135873s-1.015873 208.579048 48.802539 229.912381l37.587302-68.957461s-22.349206-69.404444-16.253968-160.95492zM140.048254 636.647619h-44.210794c0 51.728254 43.68254 56.279365 43.68254 56.279365h22.349206c44.860952 0 46.730159-51.36254 46.730159-51.36254v-306.265396h-68.551111v301.348571zM375.893333 489.955556h45.673651l-34.824127 71.233015s-20.31746 40.025397 12.190476 41.36635h75.865397l30.313651-55.100953h-37.871746c-4.835556 0-7.964444-5.12-5.770159-9.427301l56.685714-111.136508h-65.706666l-3.900953 7.964444h-4.347936c-4.835556 0-7.964444-5.12-5.770159-9.427301l47.217778-90.128254h-65.706667l-56.23873 113.290158s-20.31746 40.025397 12.190476 41.36635zM385.889524 624.782222s-8.370794 0.772063-13.978413-4.835555l-34.011428 65.625396s5.566984 7.639365 17.026031 7.639366h84.317461l36.043174-68.429207h-89.396825z"\n                fill="currentColor"\n              ></path>\n              <path\n                d="M640.75581 426.890159h43.312761v-69.892064h-155.103492v69.892064h44.048254v200.086349h-65.015873l-32.711111 65.950476h231.172064v-65.950476h-65.702603z"\n                fill="currentColor"\n              ></path>\n              <path\n                d="M840.553651 425.142857h24.096508a10.40254 10.40254 0 0 1 10.402539 10.443175v42.829206h-34.499047v-53.272381z m110.896762 53.272381h-7.964445v-45.186032c0-42.300952-34.255238-76.596825-76.515555-76.596825h-26.412699v-21.333333h-67.047619v21.333333h-42.097778v68.510476h42.097778v53.272381h-67.047619v68.510476h67.047619v146.00127h67.047619v-146.00127h92.281905a16.457143 16.457143 0 0 1 16.416508 16.457143v71.964445h-63.959365c0 31.817143 25.76254 57.579683 57.539048 57.579682h17.310476c31.776508 0 57.539048-25.76254 57.539047-57.579682v-90.615873c-0.004063-36.612063-29.663492-66.31619-66.23492-66.316191z"\n                fill="currentColor"\n              ></path>\n              <path\n                d="M1016.665397 390.23746c0-18.326349-14.872381-33.239365-33.19873-33.239365s-33.19873 14.913016-33.19873 33.239365v33.239365h33.19873c18.326349 0 33.19873-14.872381 33.19873-33.239365z"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </div>\n          <span class="app-item__name">RedNote</span>\n        </button>\n\n        \x3c!-- TikTok --\x3e\n        <button class="app-item app-item--douyin" type="button" @click="openApp(\'Douyin\')">\n          <div class="app-item__icon-box">\n            <img v-if="iconSrc.Douyin" class="app-item__img" :src="iconSrc.Douyin" alt="TikTok" />\n            <svg v-else class="app-item__svg" viewBox="0 0 1024 1024" aria-hidden="true">\n              <path\n                d="M937.4 423.9c-84 0-165.7-27.3-232.9-77.8v352.3c0 179.9-138.6 325.6-309.6 325.6S85.3 878.3 85.3 698.4c0-179.9 138.6-325.6 309.6-325.6 17.1 0 33.7 1.5 49.9 4.3v186.6c-15.5-6.1-32-9.2-48.6-9.2-76.3 0-138.2 65-138.2 145.3 0 80.2 61.9 145.3 138.2 145.3 76.2 0 138.1-65.1 138.1-145.3V0H707c0 134.5 103.7 243.5 231.6 243.5v180.3l-1.2 0.1"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </div>\n          <span class="app-item__name">TikTok</span>\n        </button>\n\n        \x3c!-- Tinder --\x3e\n        <button class="app-item app-item--tinder" type="button" @click="openApp(\'Tinder\')">\n          <div class="app-item__icon-box">\n            <img v-if="iconSrc.Tinder" class="app-item__img" :src="iconSrc.Tinder" alt="Tinder" />\n            <svg v-else class="app-item__svg" viewBox="0 0 1024 1024" aria-hidden="true">\n              <path\n                d="M397.551701 403.31715a10.622543 10.622543 0 0 0 15.805832 2.687631l0.639912-0.51193c16.637718-13.854099 31.611663-28.156137 45.689732-43.386048C596.596394 213.519188 516.639364 31.112212 515.999451 29.384449a21.277081 21.277081 0 0 1 6.399122-25.340524c8.318859-5.75921 18.557454-5.119298 26.236401 1.407807 463.936354 431.460809 341.073209 760.119721 332.114438 782.260684-37.114908 133.997617-184.934629 230.976313-360.23858 235.903637-5.887192 0.351952-10.334582 0.351952-15.485875 0.351951-206.979605 0-382.955463-127.502508-382.955463-290.392161v-2.559649c0-225.984998 204.547939-448.866421 213.698683-458.337122a18.685437 18.685437 0 0 1 22.396927-4.479386c7.678947 3.231557 12.670262 10.878508 12.414297 19.229362-1.82375 44.185938 7.135021 82.548675 26.908309 115.184198v0.639913l0.095986 0.031995z"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </div>\n          <span class="app-item__name">Tinder</span>\n        </button>\n        <button class="app-item app-item--instagram" type="button" @click="openApp(\'Instagram\')">\n          <div class="app-item__icon-box app-item__icon-box--ig">\n            <img v-if="iconSrc.Instagram" class="app-item__img" :src="iconSrc.Instagram" alt="Instagram" />\n\n            \x3c!-- 替换后的 SVG --\x3e\n            <svg v-else class="app-item__svg" viewBox="0 0 1024 1024" aria-hidden="true">\n              \x3c!-- 路径1：外轮廓与基本结构 --\x3e\n              <path\n                d="M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9z m0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zM725.5 250.7c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9c-0.1-26.6-21.4-47.9-47.9-47.9z"\n                fill="currentColor"\n              ></path>\n              \x3c!-- 路径2：复杂的相机纹理细节 --\x3e\n              <path\n                d="M911.8 512c0-55.2 0.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-0.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-0.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9 0.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165z m-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </div>\n          <span class="app-item__name">Instagram</span>\n        </button>\n      </div>\n    </div>\n\n    \x3c!-- 底部 Dock --\x3e\n    <div class="home-dock">\n      \x3c!-- 移除无关图标 --\x3e\n      <div class="home-dock__indicator"></div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed, onBeforeUnmount, onMounted, ref } from \'vue\';\n\nimport { sharedState } from \'./shared-state\';\n\ntype AppName = \'QQ\' | \'RedNote\' | \'Douyin\' | \'Tinder\' | \'Instagram\';\n\nconst dateLabel = ref(buildDateLabel());\nlet timer: number | undefined;\n\nonMounted(() => {\n  timer = window.setInterval(() => {\n    dateLabel.value = buildDateLabel();\n  }, 60 * 1000);\n});\n\nonBeforeUnmount(() => {\n  if (timer) {\n    clearInterval(timer);\n  }\n});\n\nconst openApp = (app: AppName) => {\n  sharedState.phone.activeApp = app;\n};\n\nconst homeStyle = computed(() => {\n  const url = (sharedState.phone.wallpaper || \'\').trim();\n  if (!url) {\n    return {};\n  }\n  return {\n    backgroundImage: `url(\'${url}\')`,\n    backgroundSize: \'cover\',\n    backgroundPosition: \'center\',\n    backgroundRepeat: \'no-repeat\',\n  };\n});\n\nconst iconSrc = computed(() => ({\n  QQ: (sharedState.phone.icons.QQ || \'\').trim(),\n  RedNote: (sharedState.phone.icons.RedNote || \'\').trim(),\n  Douyin: (sharedState.phone.icons.Douyin || \'\').trim(),\n  Tinder: (sharedState.phone.icons.Tinder || \'\').trim(),\n  Instagram: (sharedState.phone.icons.Instagram || \'\').trim(),\n}));\n\nfunction buildDateLabel() {\n  const now = new Date();\n  const month = now.getMonth() + 1;\n  const day = now.getDate();\n  const weekdays = [\'Sunday\', \'Monday\', \'Tuesday\', \'Wednesday\', \'Thursday\', \'Friday\', \'Saturday\'];\n  // 换成英文或者更简约的中文，这里用带空格的中文显得更透气\n  return `${month}月${day}日  ${weekdays[now.getDay()]}`;\n}\n<\/script>\n\n<style scoped>\n/*\n   修正思路：\n   1. 移除 saturate(0%)，不再强制黑白，保留微弱的环境色倾向。\n   2. 大幅降低背景不透明度 (0.08 -> 0.02)，提升通透感。\n   3. 增强混合模式与高光边框，模拟水晶/光学玻璃质感。\n   4. 阴影改为更柔和的弥散光，避免脏灰感。\n*/\n\n/* 全局字体与容器设置 */\n.home-page {\n  width: 100%;\n  height: 100%;\n  padding: 50px 24px 20px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n  font-family:\n    \'SF Pro Display\',\n    -apple-system,\n    BlinkMacSystemFont,\n    \'Segoe UI\',\n    Roboto,\n    sans-serif;\n\n  /* 背景：保持原有的深色氛围，但增加一点噪点或质感，让玻璃有东西可透 */\n  background: #1a1a1a;\n  background-image:\n    radial-gradient(at 0% 0%, rgba(120, 120, 120, 0.2) 0, transparent 50%),\n    radial-gradient(at 100% 100%, rgba(100, 100, 100, 0.2) 0, transparent 50%);\n}\n\n.home-page > * {\n  position: relative;\n  z-index: 2;\n}\n\n/* ========== 顶部状态栏 ========== */\n.home-status {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 50px;\n  color: #fff;\n}\n\n.home-status__time {\n  font-size: 82px;\n  font-weight: 100;\n  letter-spacing: -3px;\n  line-height: 1;\n  background: linear-gradient(180deg, #ffffff 0%, #b0b0b0 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.4)); /* 更深邃的投影 */\n}\n\n.home-status__date {\n  font-size: 17px;\n  font-weight: 500;\n  color: rgba(255, 255, 255, 0.7);\n  margin-top: 5px;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n}\n\n/* ========== 图标网格布局 ========== */\n.home-apps {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  padding-top: 10px;\n}\n\n.apps-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  column-gap: 40px;\n  row-gap: 40px;\n  width: auto;\n}\n\n/* 应用单个容器 */\n.app-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);\n}\n\n.app-item:active {\n  transform: scale(0.92);\n}\n\n/* ========== 核心修改：清透·光学玻璃 ========== */\n.app-item__icon-box {\n  width: 78px;\n  height: 78px;\n  border-radius: 24px; /* 恢复一点圆润度 */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  overflow: hidden;\n\n  /*\n     极度通透的基底：\n     背景色几乎不可见，主要靠模糊来界定体积。\n     混合模式 luminosity 确保不抢眼，但保留光感。\n  */\n  background: rgba(255, 255, 255, 0.03); /* 极低不透明度 */\n  backdrop-filter: blur(3px) saturate(110%); /* 降低模糊，稍提亮饱和度保持通透 */\n  -webkit-backdrop-filter: blur(3px) saturate(110%);\n\n  /* 边框：利用双重阴影模拟厚度，而不是单纯的border */\n  box-shadow:\n    inset 0 0 0 1px rgba(255, 255, 255, 0.15),\n    /* 内描边，模拟切割 */ inset 0 1px 0 rgba(255, 255, 255, 0.4),\n    /* 顶部高光 */ 0 8px 20px -4px rgba(0, 0, 0, 0.4); /* 外部悬浮影 */\n\n  transition: all 0.3s ease;\n}\n\n/* 玻璃的高光流光层 - 模拟曲面反光 */\n.app-item__icon-box::before {\n  content: \'\';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.2) 0%, transparent 50%);\n  transform: rotate(-45deg); /* 斜向光 */\n  pointer-events: none;\n}\n\n/* 内部图片/SVG - 恢复一点点色相，但保持低饱和 */\n.app-item__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 24px;\n  opacity: 0.85;\n  filter: sepia(20%) saturate(60%) contrast(0.9); /* 低饱和冷淡风，不是死灰 */\n  mix-blend-mode: overlay; /* 叠加模式，让图片融入玻璃 */\n}\n\n/* 如果是SVG图标，给它一点点发光 */\n.app-item__svg {\n  width: 36px;\n  height: 36px;\n  color: rgba(255, 255, 255, 0.95);\n  z-index: 2;\n  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3)); /* 微弱辉光 */\n}\n\n/* ========== 针对特定APP的微调 (保持统一感但保留识别度) ========== */\n\n/* QQ/Tinder/Douyin 等不需要单独改颜色了，统一用上面的玻璃样式 */\n/* 如果想要一点点色调区分，可以用伪元素叠加极淡的色彩 */\n\n.app-item--qq .app-item__icon-box::after {\n  content: \'\';\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(180deg, rgba(0, 150, 255, 0.05), transparent);\n  pointer-events: none;\n}\n\n.app-item--rednote .app-item__icon-box::after {\n  content: \'\';\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(180deg, rgba(255, 50, 50, 0.05), transparent);\n  pointer-events: none;\n}\n\n.app-item--douyin .app-item__icon-box::after {\n  content: \'\';\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), transparent);\n  pointer-events: none;\n}\n\n/* 应用名称 */\n.app-item__name {\n  font-size: 13px;\n  font-weight: 400;\n  color: rgba(255, 255, 255, 0.8);\n  letter-spacing: 0.5px;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.6);\n  margin-top: 8px;\n  font-family: -apple-system, sans-serif;\n}\n\n/* ========== 底部 Dock 指示条 ========== */\n.home-dock {\n  width: 100%;\n  padding-bottom: 24px;\n  display: flex;\n  justify-content: center;\n}\n\n.home-dock__indicator {\n  width: 140px;\n  height: 5px;\n  background: rgba(255, 255, 255, 0.25);\n  border-radius: 100px;\n  backdrop-filter: blur(4px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n</style>\n'],sourceRoot:''}]);const s=r},599:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.space_emoji{width:100%;aspect-ratio:1;background-size:cover;background-repeat:no-repeat;border:1px solid rgb(215,213,213);margin-top:5px;border-radius:5px}\n','',{version:3,sources:['webpack://./src/柏柏同层/QQ/post.vue'],names:[],mappings:'AA4NA,aACE,UAAW,CACX,cAAe,CACf,qBAAsB,CACtB,2BAA4B,CAC5B,iCAAoC,CACpC,cAAe,CACf,iBACF',sourcesContent:['<template>\n  <div class="user_moment">\n    <div class="user_moment_title" style="margin-bottom: 7px">\n      <div class="QQ_home_head head" :style="`background-image:url(\'${head}\')`"></div>\n      <div style="width: 100%; display: grid; grid-template-rows: 1fr 1fr; row-gap: 4px">\n        <div style="display: flex; align-items: center">\n          <span style="color: black !important"\n            ><strong class="moment_sender">{{ props.post.sender }}</strong></span\n          >\n          <svg viewBox="0 0 1024 1024" width="18" height="18" style="margin-left: auto">\n            <path\n              d="M512.4 429.1c22.3 0 41.7 7.9 58.1 23.6 7.9 7.9 13.9 16.9 18.2 27.1 4.3 10.2 6.4 20.8 6.4 32 0 22.3-8.2 41.7-24.6 58.1-3.3 3.3-6.6 6.1-9.9 8.4s-6.9 4.4-10.8 6.4c-3.9 2-8 3.6-12.3 4.9-4.3 1.3-8.5 2.5-12.8 3.4-4.2 1-8.3 1.5-12.3 1.5-23 0-42.5-8.2-58.6-24.6s-24.1-35.9-24.1-58.6c0-22.6 7.9-42.2 23.6-58.6 5.3-4.6 11-8.9 17.2-12.8 6.2-3.9 13-6.7 20.2-8.4 7.2-1.6 14.4-2.4 21.7-2.4z m326.8 0c23 0 42.3 7.9 58.1 23.6 5.3 5.3 9.7 11 13.3 17.2 3.6 6.2 6.4 13 8.4 20.2 2 7.2 3 14.4 3 21.7 0 22.3-8.2 41.7-24.6 58.1-3.3 3.9-7.2 7.4-11.8 10.3-4.6 2.9-9.4 5.4-14.3 7.4s-10.2 3.6-15.8 4.9-11 2-16.3 2c-23 0-42.5-8.2-58.6-24.6-16.1-16.4-24.1-35.9-24.1-58.6 0-22.6 8.2-42.2 24.6-58.6 7.2-7.2 16.1-13 26.6-17.2 10.5-4.2 21-6.3 31.5-6.4z m-654.6 0c23 0 42.3 7.9 58.1 23.6 5.3 5.3 9.7 11 13.3 17.2 3.6 6.2 6.4 13 8.4 20.2s3 14.4 3 21.7c0 22.3-8 41.7-24.1 58.1s-35.6 24.6-58.6 24.6-42.3-8.2-58.1-24.6c-7.9-7.9-13.9-16.9-18.2-27.1-4.3-10.2-6.4-20.5-6.4-31 0-23 8.2-42.7 24.6-59.1 7.2-7.2 16.1-13 26.6-17.2 10.4-4.2 20.9-6.3 31.4-6.4z"\n              p-id="14923"\n              fill="#000000"\n            ></path>\n          </svg>\n        </div>\n        <span style="color: #626367; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 12px">{{\n          props.post.time\n        }}</span>\n      </div>\n    </div>\n    <span\n      style="color: black !important; font-size: 15px; line-height: 1.3"\n      class="moment_message"\n      v-html="spaceContent"\n    ></span>\n    <template v-for="img of props.post.imgs">\n      <div v-if="img.imgtype == \'img\'" class="space_fakeimg">{{ img.content }}</div>\n      <div v-if="img.imgtype == \'emoji\'" class="space_emoji" :style="`background-Image:url(\'${img.url}\')`"></div\n    ></template>\n\n    <div style="background-color: #f7f7f7; padding: 10px; border-radius: 8px; margin-top: 10px">\n      <div style="display: flex; align-items: center; gap: 3px; margin-bottom: 5px">\n        <svg class="icon" viewBox="0 0 1024 1024" width="13" height="13">\n          <path\n            d="M773.6 912.7h-1.2c-37.2-0.4-74.5-0.4-111.8-0.4h-56.9c-38 0-76 0-114.1-0.5-21.1-0.6-41.9-5-61.5-13-33.3-13-52.3-42-52.2-79.7l0.1-141.4c0-78.3 0-156.7 0.7-235 0.1-21.3 13.8-41.3 25.5-51.8 45.3-41.4 94.5-93 115.1-162.6 5.7-19.4 7.9-40.8 10.2-63.4 4.6-45 33.8-74.3 72.8-74.3 15.3 0 30.6 4.6 45.6 13.5 30.1 18.1 50.2 46.5 61.3 87 17.8 64.3 8.7 126.7-1.3 180.2v0.2c-2.3 12.5 7.1 24.1 19.9 24.1h130c22.4 0 54.5 2.8 74.3 26.8 14.4 17.5 18.5 41.1 12.4 72.3-18.6 95.9-41.4 192.6-63.2 282.7-6.8 28.1-18.1 54.1-29 79.3l-4.7 10.8c-12.4 29.2-38 45.2-72 45.2zM216.1 903.3h-11.9c-43 0-78.2-35.2-78.2-78.2V476.6c0-43 35.2-78.2 78.2-78.2h11.9c43 0 78.2 35.2 78.2 78.2V825c0.1 43.1-35.1 78.3-78.2 78.3z"\n            fill="#000000"\n            p-id="34839"\n          ></path>\n        </svg>\n        <span style="color: #474545; font-size: 14px">{{ props.post.like }}人已赞</span>\n      </div>\n      <div class="user_leave_message_list" style="padding-top: 5px; border-top: 1px solid #e0e0e0">\n        <div v-for="value in props.post.comment" class="user_leave_message" style="margin-bottom: 3px; font-size: 14px">\n          <span style="color: #3b5998; font-weight: bold; cursor: pointer">{{ value.sender }}</span>\n          <span style="color: #333">：{{ value.content }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div\n      style="\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n        gap: 15px;\n        margin-top: 10px;\n        color: #666;\n        font-size: 13px;\n      "\n    >\n      <div style="display: flex; align-items: center; gap: 3px">\n        <svg viewBox="0 0 1024 1024" width="16" height="16">\n          <path\n            d="M512 416a96 96 0 1 1-96 96 96 96 0 0 1 96-96m0-64a160 160 0 1 0 160 160 160 160 0 0 0-160-160z"\n            fill="#a1a1a1"\n          ></path>\n          <path\n            d="M512 298.88c188.64 0 288 113.92 366.72 213.12C800 611.36 700.64 725.12 512 725.12S224 611.36 145.28 512C224 412.64 323.36 298.88 512 298.88m0-64C264.64 234.88 147.52 406.56 64 512c83.52 105.44 200.64 277.12 448 277.12S876.48 617.44 960 512c-83.52-105.44-200.64-277.12-448-277.12z"\n            fill="#a1a1a1"\n          ></path>\n        </svg>\n        <span>{{ props.post.see }}</span>\n      </div>\n      <div style="display: flex; align-items: center; gap: 3px; cursor: pointer">\n        <svg viewBox="0 0 1024 1024" width="16" height="16">\n          <path\n            d="M190.193 471.412c14.446 0 26.14-11.72 26.14-26.139 0-14.445-11.693-26.165-26.14-26.165-0.271 0-0.49 0.15-0.737 0.15l-62.496 0.146c-1.425-0.195-2.9-0.296-4.374-0.296-19.677 0-35.621 16.142-35.621 36.115L86.622 888.55c0 19.95 15.968 35.598 35.67 35.598 1.917 0 3.809 0.293 5.65 0l61.023 0.023c0.1 0 0.148 0.048 0.248 0.048 0.097 0 0.146-0.048 0.244-0.048l0.737 0 0-0.148c13.413-0.54 24.175-11.422 24.175-24.96 0-13.56-10.76-24.442-24.175-24.982l0-0.394-50.95 0 1.45-402.276L190.193 471.41z"\n            fill="#666"\n          ></path>\n          <path\n            d="M926.522 433.948c-19.283-31.445-47.34-44.172-81.29-45.546-1.77-0.247-3.536-0.393-5.38-0.393l-205.447-0.689c13.463-39.06 22.699-85.59 22.699-129.317 0-28.35-3.194-55.963-9.042-82.543l-0.49 0.05c-10.638-46.58-51.736-81.315-100.967-81.315-57.264 0-95.466 48.15-95.466 106.126 0 3.242-0.295 6.387 0 9.532-2.996 108.387-91.24 195.549-196.236 207.513l0 54.882-0.786 222.227 0 229.745 10.71 0 500.025 0.222 8.746-0.244c19.357 0.05 30.24-4.818 47.804-16.116 16.683-10.76 29.237-25.5 37.49-42.156 2.26-3.34 4.03-7.075 5.107-11.201l77.018-344.324c1.056-4.053 1.349-8.181 1.056-12.16-2.287-32.535-7.149-55.037-19.408-75.033z"\n            fill="#666"\n          ></path>\n        </svg>\n        <span>点赞</span>\n      </div>\n      <div style="display: flex; align-items: center; gap: 3px; cursor: pointer" @click="focusCommentInput">\n        <svg viewBox="0 0 1024 1024" width="16" height="16">\n          <path\n            d="M871.04 89.77L120.064 380.16a51.2 51.2 0 0 0-1.792 94.763l303.36 130.56 131.072 303.957a51.2 51.2 0 0 0 94.805-1.877l289.792-751.573a51.2 51.2 0 0 0-66.261-66.133z m-41.13 107.392l-231.98 601.643-97.962-227.115-3.584-7.339a85.333 85.333 0 0 0-41.045-37.248l-226.56-97.536 601.173-232.405z"\n            fill="#666"\n          ></path>\n        </svg>\n        <span>评论</span>\n      </div>\n    </div>\n\n    <div style="display: flex; align-items: center; gap: 3px; margin-top: 10px">\n      <div class="user_avatar" style="width: 30px; min-width: 30px; height: 30px; border-radius: 50%"></div>\n      <div\n        style="\n          display: flex;\n          align-items: center;\n          width: 100%;\n          background-color: #f5f5f5;\n          padding-right: 5px;\n          margin-left: 5px;\n        "\n      >\n        <input\n          ref="commentInput"\n          v-model="comment"\n          type="text"\n          placeholder="说点什么吧..."\n          style="\n            height: 30px;\n            width: 100%;\n            margin-left: 5px !important;\n            border-radius: 4px !important;\n            background-color: #f5f5f5 !important;\n            padding: 6px;\n            border: none !important;\n          "\n        />\n        <svg viewBox="0 0 1024 1024" width="20" height="20" class="moment_comment" @click="sendComment">\n          <path\n            d="M871.04 89.770667L120.064 380.16a51.2 51.2 0 0 0-1.792 94.762667l303.36 130.56 131.072 303.957333a51.2 51.2 0 0 0 94.805333-1.877333l289.792-751.573334a51.2 51.2 0 0 0-66.261333-66.133333z m-41.130667 107.392l-231.978666 601.642666-97.962667-227.114666-3.584-7.338667a85.333333 85.333333 0 0 0-41.045333-37.248l-226.56-97.536 601.173333-232.405333z"\n            fill="#a1a1a1"\n            p-id="18561"\n          ></path>\n        </svg>\n      </div>\n    </div>\n    <div\n      style="\n        width: 110%;\n        height: 8px;\n        background-color: #e9e9e9;\n        margin-left: -7px;\n        margin-top: 10px;\n        margin-bottom: 10px;\n      "\n    ></div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, defineProps, ref } from \'vue\';\nimport { addQQNpc, sharedState } from \'../shared-state\';\nconst props = defineProps([\'post\']);\nconsole.log(`创建新QQ动态内容:${JSON.stringify(props)}  ${props.post.id}`);\n\naddQQNpc(props.post.sender);\nconst head = computed(() => {\n  const sender = props.post.sender;\n  if (sender in sharedState.QQ.chars) {\n    if (sharedState.QQ.chars[sender].head) {\n      return sharedState.QQ.chars[sender].head;\n    } else {\n      return \'\';\n    }\n  } else {\n    return \'\';\n  }\n});\n\nconst phone = computed(() => {\n  // return;\n  const sender = props.post.sender;\n  if (sender in sharedState.QQ.chars == false) {\n    return \'隐藏机型\';\n  }\n  if (\'phone\' in sharedState.QQ.chars[sender] == false) {\n    return \'隐藏机型\';\n  }\n\n  return sharedState.QQ.chars[sender].phone;\n});\nconst spaceContent = computed(() => {\n  // return;\n  return props.post.content.replace(/\\\\n/g, \'<br>\');\n});\n\nconst comment = ref(\'\');\nconst commentInput = ref(null);\n\nfunction focusCommentInput() {\n  if (commentInput.value) {\n    commentInput.value.focus();\n  }\n}\n\nfunction sendComment() {\n  if (!comment.value) {\n    return;\n  }\n\n  const message = `\n(在${props.post.sender}发的QQ动态${props.post.id}中评论:${comment.value})\nQQ.Comment(\'${props.post.id}\',\'${sharedState.ST.userName}\',\'${comment.value}\');`;\n\n  const old_content = $(\'#send_textarea\').val().trim();\n  const new_content = old_content + message;\n  $(\'#send_textarea\')\n    .val(new_content.trim() || \'\')[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  // 本地立即显示评论（可选，为了即时反馈）\n  props.post.comment.push({\n    sender: sharedState.ST.userName,\n    content: comment.value,\n  });\n\n  comment.value = \'\';\n}\n<\/script>\n\n<style>\n.space_emoji {\n  width: 100%;\n  aspect-ratio: 1;\n  background-size: cover;\n  background-repeat: no-repeat;\n  border: 1px solid rgb(215, 213, 213);\n  margin-top: 5px;\n  border-radius: 5px;\n}\n</style>\n'],sourceRoot:''}]);const s=r},1234:(e,n,t)=>{var a=t(4785);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('58c6f716',a,!1,{ssrId:!0})},1314:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if('function'==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i='sourceMappingURL=data:application/json;charset=utf-8;base64,'.concat(a),o='/*# '.concat(i,' */');return[n].concat([o]).join('\n')}return[n].join('\n')}},1331:(e,n,t)=>{var a=t(3074);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('56dbfeb0',a,!1,{ssrId:!0})},1392:(e,n,t)=>{var a=t(5741);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('366080f7',a,!1,{ssrId:!0})},1400:(e,n)=>{n.A=(e,n)=>{const t=e.__vccOpts||e;for(const[e,a]of n)t[e]=a;return t}},1540:(e,n,t)=>{var a=t(5001);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('97daf074',a,!1,{ssrId:!0})},1798:(e,n,t)=>{var a=t(7225);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('14a264da',a,!1,{ssrId:!0})},1821:(e,n,t)=>{var a=t(272);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('5fc6acd7',a,!1,{ssrId:!0})},1939:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.edge-catcher{position:absolute;left:0;top:0;bottom:0;width:30px;touch-action:none;z-index:5}.drawer-wrap{overflow:hidden;max-height:0;transition:max-height 0.24s ease}.drawer-wrap.open{max-height:250px}.drawer-enter-active,.drawer-leave-active{transition:transform 0.24s ease,opacity 0.24s ease;will-change:transform,opacity}.drawer-enter-from,.drawer-leave-to{transform:translateY(100%);opacity:0}.drawer-enter-to,.drawer-leave-from{transform:translateY(0);opacity:1}\n','',{version:3,sources:['webpack://./src/柏柏同层/QQ/chat_page.vue'],names:[],mappings:'AAmpCA,cACE,iBAAkB,CAClB,MAAO,CACP,KAAM,CACN,QAAS,CACT,UAAW,CACX,iBAAkB,CAClB,SACF,CAGA,aACE,eAAgB,CAChB,YAAa,CACb,gCACF,CACA,kBACE,gBACF,CAGA,0CAEE,kDAEoB,CACpB,6BACF,CACA,oCAEE,0BAA2B,CAC3B,SACF,CACA,oCAEE,uBAAwB,CACxB,SACF',sourcesContent:['<template>\n  <transition name="slide-fade">\n    <div\n      v-if="props.value.chartype != \'npc\'"\n      class="QQ_chat_page"\n      :style="`width: 100%; height: 100%; padding-top: 0px;${backgroundImg}`"\n    >\n      <div style="padding-top: 7px; backdrop-filter: blur(1px); background-color: rgb(255, 255, 255, 0.1)">\n        <div\n          style="\n            width: 100%;\n            height: 20px;\n            display: grid;\n            top: 0;\n            left: 0;\n            grid-template-columns: auto 1fr auto;\n            align-items: center;\n            margin-top: 20px;\n          "\n        >\n          <svg\n            class="QQ-close-btn"\n            viewBox="0 0 1024 1024"\n            style="height: 14px; width: 14px; margin-left: 8px"\n            @click="returnHome"\n          >\n            <path\n              d="M769.137778 153.372444L444.984889 512l324.152889 358.684444c36.408889 35.043556 36.408889 91.989333 0 126.976a95.744 95.744 0 0 1-131.868445 0l-377.571555-417.678222c-1.536-1.365333-3.584-1.877333-5.063111-3.299555A87.438222 87.438222 0 0 1 227.555556 512c-0.341333-23.324444 8.533333-46.876444 27.079111-64.739556 1.479111-1.422222 3.527111-1.934222 5.063111-3.185777L637.269333 26.339556a95.744 95.744 0 0 1 131.868445 0c36.408889 35.043556 36.408889 91.932444 0 127.032888z"\n              fill="#666666"\n              p-id="1570"\n            ></path>\n          </svg>\n          <div style="display: flex; align-items: center; max-width: 100%; overflow: hidden; margin-left: 5px">\n            <div\n              v-show="sharedState.QQ.allUnRead > 0"\n              class="new_tips"\n              style="\n                background-color: gray;\n                color: #fff;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                justify-content: center;\n                align-items: center;\n                font-size: 12px;\n                display: flex;\n              "\n            >\n              {{ sharedState.QQ.allUnRead }}\n            </div>\n            <span class="QQ_chat_username">{{ props.value.name }}</span>\n          </div>\n          <svg\n            id="QQ_chat_page_setting"\n            viewBox="0 0 1024 1024"\n            style="height: 15px; width: 15px; margin-right: 14px"\n            @click="openSetting"\n          >\n            <path\n              d="M901.632 896H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808zM901.632 568.32H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808zM901.632 240.64H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808z"\n              p-id="4301"\n              fill="#666666"\n            ></path>\n          </svg>\n        </div>\n        <div\n          style="width: 100%; height: 0.5px; background-color: #eee; margin-top: 5px; border-top: 1px solid #9a9a9a"\n        ></div>\n      </div>\n      <div\n        ref="msgContentRef"\n        class="msgcontent"\n        :style="{ marginBottom: computedMargin }"\n        style="padding-top: 15px; padding-bottom: 0"\n        @click="\n          containerShow.show = false;\n          containerShow.showtype = \'\';\n          isIncrease = false;\n        "\n      >\n        <bubble\n          v-for="msg in sharedState.QQ.chathistory[props.name]?.msgs || []"\n          :bubble="msg"\n          :is-group="sharedState.QQ.chathistory[props.name]?.chartype"\n          :senderinfo="sharedState.QQ.chars[msg?.sender]"\n        ></bubble>\n      </div>\n      \x3c!-- <div\n        style="display: none"\n        v-if="inputShow"\n        class="input-container"\n        :style="`background-color:${sharedState.QQ.chars[props.name].inputColor}`"\n      >\n        <div style="display: flex; align-items: center; width: 100%">\n          <div style="flex-grow: 1; margin-left: 5px; margin-right: 2%">\n            <input\n              v-model="text_value"\n              @keyup.enter="sendText(false)"\n              class="userInput"\n              type="text"\n              name=""\n              style="\n                box-sizing: border-box;\n                background-color: transparent;\n                background-color: unset !important;\n                border: 1px solid rgb(0, 0, 0, 0.5) !important;\n                color: black !important;\n              "\n            />\n          </div>\n          <div @click="sendText(true)" style="margin-right: 7px" id="QQ_chat_send-btn">\n            <button\n              style="\n                background-color: #fff;\n                border-radius: 10px;\n                height: 31px;\n                display: block;\n                width: 3.5rem;\n                background-color: transparent;\n                border: 1px solid rgb(0, 0, 0, 0.5);\n                color: black !important;\n              "\n            >\n              发送\n            </button>\n          </div>\n        </div>\n        <div class="QQ_chatpage_function">\n          <svg\n            @click="function_click(\'voice\')"\n            :class="`QQ_chatpage_function_voice${containerShow.showtype == \'voice\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            width="28"\n            height="25"\n          >\n            <path\n              d="M320.093091 234.682182a191.906909 191.906909 0 1 1 383.813818 0V512a191.906909 191.906909 0 1 1-383.813818 0V234.682182zM512 127.906909a106.728727 106.728727 0 0 0-106.728727 106.775273V512a106.728727 106.728727 0 1 0 213.457454 0V234.682182A106.728727 106.728727 0 0 0 512 127.906909zM192 448.093091c23.505455 0 42.589091 19.083636 42.589091 42.589091a277.410909 277.410909 0 0 0 554.821818 0 42.589091 42.589091 0 0 1 85.178182 0 362.589091 362.589091 0 0 1-320 360.122182v87.877818a42.589091 42.589091 0 0 1-85.178182 0v-87.924364a362.635636 362.635636 0 0 1-320-360.075636c0-23.552 19.083636-42.589091 42.589091-42.589091z"\n              p-id="8419"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'img\')"\n            :class="`QQ_chatpage_function_img${containerShow.showtype == \'img\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"\n              p-id="10905"\n            ></path>\n          </svg>\n          <svg class="QQ_chatpage_function_camera" viewBox="0 0 1024 1024" width="28" height="28">\n            <path\n              d="M269.44 256l23.296-75.381333A74.666667 74.666667 0 0 1 364.074667 128h295.850666a74.666667 74.666667 0 0 1 71.338667 52.618667L754.56 256H821.333333c64.8 0 117.333333 52.533333 117.333334 117.333333v426.666667c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V373.333333c0-64.8 52.533333-117.333333 117.333334-117.333333h66.773333z m23.605333 64H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v426.666667a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V373.333333a53.333333 53.333333 0 0 0-53.333334-53.333333h-90.378666a32 32 0 0 1-30.570667-22.549333l-30.272-97.930667a10.666667 10.666667 0 0 0-10.186667-7.52H364.074667a10.666667 10.666667 0 0 0-10.186667 7.52l-30.272 97.92A32 32 0 0 1 293.045333 320zM512 725.333333c-88.362667 0-160-71.637333-160-160 0-88.362667 71.637333-160 160-160 88.362667 0 160 71.637333 160 160 0 88.362667-71.637333 160-160 160z m0-64a96 96 0 1 0 0-192 96 96 0 0 0 0 192z"\n              p-id="6401"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'transfer\')"\n            :class="`QQ_chatpage_function_redpacket${containerShow.showtype == \'transfer\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            p-id="12169"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M827 357.60909131a522.16363653 522.16363653 0 0 1-159.83181826 81.9 155.45454521 155.45454521 0 0 1-310.33636348 0A522.16363653 522.16363653 0 0 1 197 357.60909131V798.36363652A90 90 0 0 0 287 888.36363653h450a90 90 0 0 0 90-90V357.60909131z m0-85.58181826V225.63636348A90 90 0 0 0 737 135.63636347H287A90 90 0 0 0 197 225.63636348v46.34999999a457.93636347 457.93636347 0 0 0 169.97727305 102.06818174 155.49545479 155.49545479 0 0 1 290.0454539 0A457.89545479 457.89545479 0 0 0 827 272.02727305zM287 70.18181826h450A155.45454521 155.45454521 0 0 1 892.45454521 225.63636348v572.72727304a155.45454521 155.45454521 0 0 1-155.45454521 155.45454522H287A155.45454521 155.45454521 0 0 1 131.54545479 798.36363652V225.63636348A155.45454521 155.45454521 0 0 1 287 70.18181826z m225 450a90 90 0 1 0 0-180 90 90 0 0 0 0 180z"\n              p-id="12170"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'emoji\')"\n            :class="`QQ_chatpage_function_emoji${containerShow.showtype == \'emoji\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            p-id="13480"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M512 64a448 448 0 1 1 0 896A448 448 0 0 1 512 64z m0 64a384 384 0 1 0 0 768A384 384 0 0 0 512 128zM282.624 611.2H351.36c35.52 60.416 82.112 96.128 160.64 96.128 73.92 0 117.888-27.072 155.008-84.928l6.848-11.2h67.52a246.208 246.208 0 0 1-453.76 11.84l-4.992-11.84H351.36z m387.2-251.264a48 48 0 1 1 0 96 48 48 0 0 1 0-96z m-315.2 0a48 48 0 1 1 0 96 48 48 0 0 1 0-96z"\n              p-id="13481"\n            ></path>\n          </svg>\n          <svg class="QQ_chatpage_function_other" viewBox="0 0 1024 1024" p-id="14615" width="28" height="28">\n            <path\n              d="M512 958.016611c-119.648434 0-232.1288-46.367961-316.736783-130.559656-84.640667-84.255342-131.263217-196.255772-131.263217-315.455235 0-119.168499 46.624271-231.199892 131.232254-315.424271 84.607983-84.191695 197.088348-130.559656 316.736783-130.559656s232.1288 46.367961 316.704099 130.559656c84.67163 84.224378 131.263217 196.255772 131.263217 315.391587 0.032684 119.199462-46.591587 231.232576-131.263217 315.455235C744.1288 911.615966 631.648434 958.016611 512 958.016611zM512 129.983389c-102.623626 0-199.071738 39.743475-271.583282 111.936783-72.480581 72.12794-112.416718 168.063432-112.416718 270.079828s39.903454 197.951888 112.384034 270.047144c72.511544 72.191587 168.959656 111.936783 271.583282 111.936783 102.592662 0 199.071738-39.743475 271.583282-111.936783 72.480581-72.160624 112.416718-168.063432 112.384034-270.079828 0-102.016396-39.903454-197.919204-112.384034-270.016181C711.071738 169.759548 614.592662 129.983389 512 129.983389z"\n              p-id="14616"\n            ></path>\n            <path\n              d="M736.00086 480.00086 544.00086 480.00086 544.00086 288.00086c0-17.664722-14.336138-32.00086-32.00086-32.00086s-32.00086 14.336138-32.00086 32.00086l0 192L288.00086 480.00086c-17.664722 0-32.00086 14.336138-32.00086 32.00086s14.336138 32.00086 32.00086 32.00086l192 0 0 192c0 17.695686 14.336138 32.00086 32.00086 32.00086s32.00086-14.303454 32.00086-32.00086L544.00258 544.00086l192 0c17.695686 0 32.00086-14.336138 32.00086-32.00086S753.696546 480.00086 736.00086 480.00086z"\n              p-id="14617"\n            ></path>\n          </svg>\n        </div>\n        <div class="drawer-wrap" :class="{ open: containerShow.show }">\n          <transition name="drawer">\n            <div\n              v-show="containerShow.show"\n              class="chat_function_container"\n              style="width: 100%; height: 250px; margin-top: 5px; border-top: #d7d5d5 1px solid"\n            >\n              <div v-show="containerShow.showtype == \'emoji\'" class="emoji_container">\n                <img\n                  v-for="(value, key) in sharedState.emoji"\n                  @click="sendEmoji(value, key)"\n                  :data-name="key"\n                  :src="value"\n                  alt="加载失败"\n                  loading="lazy"\n                  class="emoji_container_img"\n                />\n              </div>\n              <div\n                v-show="containerShow.showtype == \'voice\' || containerShow.showtype == \'img\'"\n                class="input_container"\n              >\n                <span>文字描述:</span>\n                <input v-model="specialText" type="text" placeholder="发送内容的文字描述" />\n                <button @click="sendSpecial" class="chat_function_input_container_button">确定</button>\n              </div>\n              <div v-show="containerShow.showtype == \'transfer\'" class="input_container">\n                <span>给对方转账:</span>\n                <input v-model="specialText" type="text" placeholder="输入转账金额,无需单位" />\n                <button @click="sendSpecial" class="chat_function_input_container_button">确定转账</button>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </div> --\x3e\n      <footer\n        v-if="inputShow"\n        class="chat-bar-wrap"\n        :class="{ \'is-mobile\': sharedState.ST.isMobile }"\n        role="contentinfo"\n        aria-label="聊天输入栏"\n        :style="`background-color:${sharedState.QQ.chars[props.name].inputColor || \'#f2f3f5\'}`"\n      >\n        <div class="chat-bar" aria-label="输入工具栏">\n          \x3c!-- 加号：更多功能入口 --\x3e\n          <button class="icon-btn" aria-label="更多功能" @click="special.show = !special.show">\n            <svg\n              class="icon"\n              viewBox="0 0 24 24"\n              fill="none"\n              stroke="currentColor"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              aria-hidden="true"\n            >\n              <path d="M12 5v14M5 12h14" />\n            </svg>\n          </button>\n\n          \x3c!-- 输入框主体 --\x3e\n          <div\n            class="input-shell"\n            style="\n              flex: 1 !important;\n              display: flex !important;\n              align-items: center !important;\n              background: #ffffff !important;\n              border-radius: 8px !important;\n              padding: 10px 12px !important;\n              box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04) !important;\n              min-width: 0 !important;\n            "\n          >\n            \x3c!-- input本体：先清空继承，再设定所需样式 --\x3e\n            <input\n              id="messageInput"\n              v-model="text_value"\n              placeholder="输入消息…"\n              style="\n                all: unset !important; /* 清空全局影响 */\n                box-sizing: border-box !important;\n                display: block !important;\n                width: 100% !important;\n                font-size: 15px !important;\n                line-height: 20px !important;\n                color: #333 !important;\n                background: transparent !important;\n                caret-color: #4a90e2 !important; /* 光标颜色可选 */\n              "\n              @keyup.enter="sendText(false)"\n            />\n          </div>\n\n          \x3c!-- 表情按钮（在右边，与发送键同侧） --\x3e\n          <button class="icon-btn" aria-label="表情" @click="function_click(\'emoji\')">\n            <svg\n              class="icon"\n              viewBox="0 0 24 24"\n              fill="none"\n              stroke="currentColor"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              aria-hidden="true"\n            >\n              <circle cx="12" cy="12" r="10" />\n              <path d="M8 10h.01M16 10h.01" />\n              <path d="M8.5 15c1 .8 2.2 1.2 3.5 1.2s2.5-.4 3.5-1.2" />\n            </svg>\n          </button>\n\n          \x3c!-- 发送按钮（始终可见；输入为空时置灰）:disabled="!text_value.trim()" --\x3e\n          <button\n            id="sendBtn"\n            :class="{ active: isAnimating }"\n            class="send-btn"\n            aria-label="发送"\n            @click="sendText(true)"\n          >\n            <svg\n              class="plane"\n              viewBox="0 0 24 24"\n              fill="none"\n              stroke="currentColor"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              aria-hidden="true"\n            >\n              <path d="m22 2-7 20-3-9-9-3Z" />\n              <path d="M22 2 11 13" />\n            </svg>\n          </button>\n        </div>\n        <div class="drawer-wrap" :class="{ open: containerShow.show }">\n          <transition name="drawer">\n            <div\n              v-show="containerShow.show"\n              class="chat_function_container"\n              style="width: 100%; height: 250px; margin-top: 5px; border-top: #d7d5d5 1px solid"\n            >\n              <div v-show="containerShow.showtype == \'emoji\'" class="emoji_container">\n                <img\n                  v-for="(value, key) in sharedState.emoji"\n                  :data-name="key"\n                  :src="value"\n                  alt="加载失败"\n                  loading="lazy"\n                  class="emoji_container_img"\n                  @click="sendEmoji(value, key)"\n                />\n              </div>\n              <div\n                v-show="containerShow.showtype == \'voice\' || containerShow.showtype == \'img\'"\n                class="input_container"\n              >\n                <span>文字描述:</span>\n                <input v-model="specialText" type="text" placeholder="发送内容的文字描述" />\n                <button class="chat_function_input_container_button" @click="sendSpecial">确定</button>\n              </div>\n              <div v-show="containerShow.showtype == \'transfer\'" class="input_container">\n                <span>给对方转账:</span>\n                <input v-model="specialText" type="text" placeholder="输入转账金额,无需单位" />\n                <button class="chat_function_input_container_button" @click="sendSpecial">确定转账</button>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </footer>\n      <transition name="popup">\n        <div v-show="setting.enable && props.value.chartype != \'Group\'" class="chat-setting-popup">\n          <div class="chat-setting-header">\n            <span>聊天设置</span>\n            <svg class="close-setting-btn" viewBox="0 0 1024 1024" width="20" height="20" @click="closeSetting(false)">\n              <path\n                d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\n                fill="#666666"\n              ></path>\n            </svg>\n          </div>\n          <div class="chat-setting-content">\n            <div class="setting-item">\n              <span>气泡颜色</span>\n              <div style="flex: 1">\n                <input\n                  id="bubble-color-input"\n                  v-model="setting.bubble"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="颜色值"\n                />\n              </div>\n              <input id="bubble-color" v-model="setting.bubble" type="color" class="color-picker" />\n            </div>\n            <div class="setting-item">\n              <span>字体颜色</span>\n              <div style="flex: 1">\n                <input\n                  id="text-color-input"\n                  v-model="setting.text"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="颜色值"\n                />\n              </div>\n              <input id="text-color" v-model="setting.text" type="color" class="color-picker" />\n            </div>\n            <div class="setting-item">\n              <span>输入框色</span>\n              <div style="flex: 1">\n                <input\n                  id="text-color-input"\n                  v-model="setting.inputColor"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="颜色值"\n                />\n              </div>\n              <input id="text-color" v-model="setting.inputColor" type="color" class="color-picker" />\n            </div>\n            <div v-if="props.value.chartype == \'friend\'" class="setting-item">\n              <span>角色备注</span>\n              <div style="flex: 1">\n                <input\n                  id="chatbg-input"\n                  v-model="setting.name"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="对角色的备注"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="bg">选择文件</button>\n            </div>\n            <div class="setting-item">\n              <span>聊天壁纸</span>\n              <div style="flex: 1">\n                <input\n                  id="chatbg-input"\n                  v-model="setting.background"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入图片URL"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="bg">选择文件</button>\n            </div>\n            <div class="setting-item">\n              <span>聊天头像</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.head"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入图片URL"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="head">选择文件</button>\n            </div>\n            <div class="setting-item">\n              <span>使用机型</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.phone"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入手机型号"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="head">选择文件</button>\n            </div>\n            <div class="preview" style="margin: 0 auto">\n              <div\n                id="chat-setting-preview"\n                class="QQ_chat_msgdiv"\n                data-name="${username}"\n                :style="{\n                  margin: \'0 auto\',\n                  \'background-color\': setting.bubble,\n                  color: setting.text,\n                }"\n              >\n                <span>这是预览文本</span>\n              </div>\n            </div>\n            <input id="pickfile-input" type="file" accept="image/*" capture="camera" style="display: none" />\n          </div>\n          <div class="chat-setting-footer">\n            <button id="randomcolor-setting-btn" style="background-color: #919bec; color: white" @click="randomColor">\n              随机\n            </button>\n            <button id="save-setting-btn" @click="closeSetting(true)">保存</button>\n            <button id="cancel-setting-btn" @click="closeSetting(false)">取消</button>\n          </div>\n          <div style="font-size: 14px; color: gray; margin-left: 10px; margin-bottom: 5px">\n            聊天头像输入\'char\'就是用卡封面当头像\n          </div>\n          <div style="font-size: 14px; color: gray; margin-left: 10px; margin-bottom: 5px">\n            输入框颜色留空（就是不输入）就是透明\n          </div>\n        </div>\n      </transition>\n\n      <transition name="popup">\n        <div v-show="setting.enable && props.value.chartype == \'Group\'" class="chat-setting-popup">\n          <div class="chat-setting-header">\n            <span>聊天设置</span>\n            <svg class="close-setting-btn" viewBox="0 0 1024 1024" width="20" height="20" @click="closeSetting(false)">\n              <path\n                d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\n                fill="#666666"\n              ></path>\n            </svg>\n          </div>\n          <div class="chat-setting-content">\n            <div class="setting-item">\n              <span>群名称</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="groupSetting.name"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入群名"\n                />\n              </div>\n            </div>\n            <div class="setting-item">\n              <span>群壁纸</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.background"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="聊天壁纸"\n                />\n              </div>\n            </div>\n            <div class="setting-item">\n              <span>群头像</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.head"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="群聊头像"\n                />\n              </div>\n            </div>\n            <div class="setting-item" style="align-items: start">\n              <span style="margin-top: 5px">群成员</span>\n              <div style="flex: 1">\n                <textarea\n                  v-model="groupSetting.members"\n                  rows="4"\n                  placeholder="告诉Ai群里都有谁，怎么输入都行没有格式规范，写个‘一群随机路人’进去也行"\n                ></textarea>\n              </div>\n            </div>\n            <div class="setting-item" style="align-items: start">\n              <span style="margin-top: 5px">群说明</span>\n              <div style="flex: 1">\n                <textarea\n                  v-model="groupSetting.content"\n                  rows="4"\n                  placeholder="告诉Ai角色们会在这里聊什么之类的，比如分享日常，聊八卦"\n                ></textarea>\n              </div>\n            </div>\n          </div>\n          <div style="font-size: 14px; color: gray; margin-left: 10px; margin-bottom: 5px">\n            点击保存后,会自动创建一个条目存放这些内容<br />\n            默认为蓝灯D4,可在创建后自行修改<br />\n            条目名称为：群聊{{ props.name }}\n          </div>\n          <div class="chat-setting-footer">\n            <button\n              id="randomcolor-setting-btn"\n              style="background-color: rgb(243 112 112); color: white"\n              @click="removeChar"\n            >\n              删除\n            </button>\n            <button id="save-setting-btn" @click="closeSettingGroup(true)">保存</button>\n            <button id="cancel-setting-btn" @click="closeSettingGroup(false)">取消</button>\n          </div>\n        </div>\n      </transition>\n\n      <transition name="fade">\n        <div v-show="setting.enable || special.show" class="popup-overlay"></div>\n      </transition>\n    </div>\n  </transition>\n</template>\n\n<script setup>\nimport { computed, nextTick, onBeforeUnmount, onMounted, ref, watch } from \'vue\';\nimport { sharedState } from \'../shared-state\';\nimport bubble from \'./bubble/bubble.vue\';\n\nconst props = defineProps([\'value\', \'name\']);\nconst text_value = ref(\'\');\nconst isAnimating = ref(false);\nconst msgContentRef = ref(null);\nconst currentMsgs = computed(() => sharedState.QQ.chathistory[props.name]?.msgs || []);\nconst setting = ref({\n  enable: false,\n  bubble: props.value.bubble || \'#FFFFFF\',\n  text: props.value.text || \'#000000\',\n  inputColor: props.value.inputColor || \'#FFFFFF\',\n  head: props.value.head,\n  background: props.value.background,\n  phone: props.value?.phone || \'隐藏机型\',\n  name: props.value.name || \'\',\n});\nconst backupSetting = JSON.parse(JSON.stringify(setting.value));\nconst containerShow = ref({\n  show: false,\n  showtype: \'\',\n});\nconst special = ref({\n  show: false,\n  msgtype: \'\',\n  text: {\n    voice: \'\',\n    img: \'\',\n    transfer: \'\',\n  },\n});\nconst backgroundImg = computed(() => {\n  if (props.name in sharedState.QQ.chars) {\n    const img = sharedState.QQ.chars[props.name].background;\n    if (img) {\n      return `background-image:url(\'${img}\')`;\n    } else {\n      return \'\';\n    }\n  } else {\n    console.log(`没有壁纸`);\n    return \'\';\n  }\n});\nconst inputShow = computed(() => {\n  if (\'banSend\' in props.value && props.value.banSend) {\n    return false;\n  } else {\n    return true;\n  }\n});\nconst groupSetting = ref({\n  name: \'\',\n  content: \'\',\n  members: \'\',\n});\n\nfunction openSetting() {\n  if (props.value.chartype == \'Group\') {\n    loadGroupSetting();\n  }\n  setting.value.enable = !setting.value.enable;\n}\n\nfunction loadGroupSetting() {\n  const char = sharedState.QQ.chars[props.name];\n  if (!char) return;\n  groupSetting.value.name = char.name;\n  groupSetting.value.members = char.members;\n  groupSetting.value.content = char.content;\n  setting.value.head = char.head;\n}\n\n// 定义你的变量（假设叫isIncrease，为true时增加margin-bottom）\nconst isIncrease = ref(false); // 你可以从props、store或其他地方设置这个值\n\n// 定义增加的数值（单位px，你可以改成变量）\nconst extraMargin = 250;\n\n// 计算margin-bottom的值\nconst computedMargin = computed(() => {\n  return \'0px\';\n  const base = 85; // 原有基础值\n  return `${base + (isIncrease.value ? extraMargin : 0)}px`;\n});\n\nwatch(\n  // 同步变动设置界面里的值\n  () => props.value,\n  newValue => {\n    setting.value.bubble = newValue.bubble;\n    setting.value.text = newValue.text;\n    setting.value.head = newValue.head;\n    setting.value.background = newValue.background;\n  },\n  { deep: true },\n); // 使用 deep: true 来侦听 props.value 对象内部属性的变化\n\nwatch(\n  () => sharedState.QQ.chathistory[props.name]?.msgs?.length,\n  newValue => {\n    scrollToBottom();\n  },\n);\n\nlet ro = null;\nlet prevClientH = 0;\nlet suspendRO = false; // 程序化滚动时暂停 RO 改写\nlet pendingShowBaseline = false; // 从隐藏回显示后的第一次，仅同步基线\nconst visible = computed(() => props.value?.chartype !== \'npc\');\nfunction teardownObserver() {\n  ro?.disconnect();\n  ro = null;\n}\n\nfunction setupObserver() {\n  const el = msgContentRef.value;\n  if (!el) return; // ref 还没到位，直接返回\n\n  // 先安全读取一次高度\n  prevClientH = el.clientHeight || 0;\n\n  // 每次重绑都先清理\n  teardownObserver();\n\n  ro = new ResizeObserver(() => {\n    const el = msgContentRef.value;\n    if (!el) return;\n\n    if (el.clientHeight === 0) {\n      pendingShowBaseline = true;\n      return;\n    }\n    if (suspendRO) {\n      prevClientH = el.clientHeight;\n      return;\n    }\n    if (pendingShowBaseline) {\n      pendingShowBaseline = false;\n      prevClientH = el.clientHeight;\n      return;\n    }\n\n    // 保底：如果已在底部就强贴底\n    const atBottom = el.scrollHeight - (el.scrollTop + el.clientHeight) <= 20;\n    if (atBottom) {\n      el.scrollTop = el.scrollHeight - el.clientHeight;\n      prevClientH = el.clientHeight;\n      return;\n    }\n\n    // 非底部时保持 bottomGap 不变\n    const bottomGap = el.scrollHeight - (el.scrollTop + prevClientH);\n    el.scrollTop = el.scrollHeight - el.clientHeight - bottomGap;\n    prevClientH = el.clientHeight;\n  });\n\n  ro.observe(el);\n}\n\nonMounted(async () => {\n  // 等下一帧，确保过了 transition 初始渲染\n  await nextTick();\n  if (visible.value) setupObserver();\n});\n\n// 当 v-if 切换或 ref 变化时，动态（重）绑定/解绑\nwatch([visible, msgContentRef], async ([isVisible]) => {\n  if (isVisible) {\n    await nextTick();\n    setupObserver();\n  } else {\n    teardownObserver();\n  }\n});\n\nonBeforeUnmount(() => {\n  teardownObserver();\n});\n\n// —— 其它函数里也加保险 ——\nconst scrollToBottom = () => {\n  const el = msgContentRef.value;\n  if (!el) return; // 防空\n  suspendRO = true;\n  nextTick(() => {\n    requestAnimationFrame(() => {\n      el.scrollTop = el.scrollHeight;\n      prevClientH = el.clientHeight || 0;\n      requestAnimationFrame(() => {\n        suspendRO = false;\n      });\n    });\n  });\n};\n\n// 进入会话时滚到底\nwatch(\n  () => sharedState.QQ.activeChatId,\n  newId => {\n    if (newId && newId === props.name) {\n      scrollToBottom();\n    }\n  },\n);\n\nfunction returnHome() {\n  sharedState.QQ.activeChatId = null;\n}\n\nfunction sendText(send) {\n  const sendValue = text_value.value;\n  if (sharedState.generate || !inputShow.value) {\n    return;\n  }\n  text_value.value = \'\';\n  const name = props.name;\n  console.log(`给${name}发送消息:${sendValue}`);\n  if (!sendValue.match(/\\S/) && sharedState.QQ.cacheMsg.length == 0) {\n    return;\n  }\n\n  isAnimating.value = true;\n  setTimeout(() => (isAnimating.value = false), 120);\n\n  if (name in sharedState.QQ.chathistory == false) {\n    sharedState.QQ.chathistory[name] = {\n      chartype: sharedState.QQ.chars[name].chartype == \'Group\' ? \'Group\' : \'private\',\n      msgs: [],\n    };\n  }\n\n  const time = new Date().toLocaleTimeString([], { hour: \'2-digit\', minute: \'2-digit\' });\n  if (sendValue) {\n    sharedState.QQ.addMsg(name, {\n      msgtype: \'text\',\n      content: sendValue,\n      sender: \'user\',\n      time: time,\n    });\n  }\n\n  const chartype = sharedState.QQ.chars[props.name]?.chartype;\n  const msgTag = `\n<msg>{{user}}|${props.name}|${sendValue}|${time}</msg>`;\n\n  if (sharedState.phone.sendModel == \'尾附\') {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message += `\n在群聊${props.name}中发送消息:${sendValue}`;\n    } else {\n      message += `\n给${props.name}发送消息:${sendValue}`;\n    }\n    // 添加 tag\n    message += msgTag;\n\n    const old_content = $(\'#send_textarea\').val().trim();\n    const new_content = old_content + message;\n    $(\'#send_textarea\')\n      .val(new_content.trim() || \'\')[0]\n      .dispatchEvent(new Event(\'input\', { bubbles: true }));\n    sharedState.QQ.cacheMsg = [];\n    return;\n  }\n\n  if (send) {\n    let message = sharedState.QQ.cacheMsg.join(\'\\n\').trim();\n    if (sendValue) {\n      if (chartype == \'Group\') {\n        message += `\n在群聊${props.name}中发送消息:${sendValue}`;\n      } else {\n        message += `\n给${props.name}发送消息:${sendValue}`;\n      }\n      message += msgTag;\n    }\n    sharedState.QQ.cacheMsg = [];\n    triggerSlash(`/send ${message.trim()}|/trigger`);\n  } else if (sendValue) {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message = `\n在群聊${props.name}中发送消息:${sendValue}`;\n    } else {\n      message = `\n给${props.name}发送消息:${sendValue}`;\n    }\n    message += msgTag;\n    sharedState.QQ.cacheMsg.push(message.trim());\n  }\n\n  // 不确定需不需要反正归零了就对了\n  sharedState.QQ.chathistory[name].unread = 0;\n}\n\nfunction closeSetting(save) {\n  setting.value.enable = false;\n  if (!save) {\n    setting.value = JSON.parse(JSON.stringify(backupSetting));\n    return;\n  }\n\n  if (setting.value.text) {\n    sharedState.QQ.chars[props.name].text = setting.value.text;\n  }\n  if (setting.value.bubble) {\n    sharedState.QQ.chars[props.name].bubble = setting.value.bubble;\n  }\n  if (setting.value.head) {\n    sharedState.QQ.chars[props.name].head = setting.value.head;\n  }\n  if (setting.value.background) {\n    sharedState.QQ.chars[props.name].background = setting.value.background;\n  }\n  if (setting.value.phone) {\n    sharedState.QQ.chars[props.name].phone = setting.value.phone;\n  }\n  if (props.value.chartype == \'friend\' && setting.value.name) {\n    sharedState.QQ.chars[props.name].name = setting.value.name;\n  }\n\n  // 输入框颜色为空则为透明\n  let inputColor = setting.value.inputColor;\n  if (!inputColor || inputColor == \'留空\' || inputColor == \'透明\') {\n    inputColor = \'transparent\';\n  }\n  sharedState.QQ.chars[props.name].inputColor = inputColor;\n\n  sharedState.QQ.saveChars();\n}\n\nasync function closeSettingGroup(save) {\n  setting.value.enable = false;\n\n  if (!save) {\n    loadGroupSetting();\n    return;\n  }\n\n  if (setting.value.background) {\n    sharedState.QQ.chars[props.name].background = setting.value.background;\n  }\n  if (setting.value.head) {\n    sharedState.QQ.chars[props.name].head = setting.value.head;\n  }\n  if (groupSetting.value.name) {\n    sharedState.QQ.chars[props.name].name = groupSetting.value.name;\n  }\n  if (groupSetting.value.members) {\n    sharedState.QQ.chars[props.name].members = groupSetting.value.members;\n  }\n  if (groupSetting.value.content) {\n    sharedState.QQ.chars[props.name].content = groupSetting.value.content;\n  }\n  await sharedState.QQ.saveChars();\n}\n\nfunction removeChar() {\n  alert(\'删除还没做,过几天再做\');\n  return;\n  if (!confirm(\'确定要删除吗?\\n聊天记录内的有关内容也会一起删除\')) {\n    return;\n  }\n  const isGroup = props.value.chartype == \'Group\';\n  console.log(`删除角色:${props.name}`);\n\n  // 先删除楼层的聊天记录\n\n  // 再删除世界书里的内容\n  const entryName = `群聊：${props.name}`;\n}\n\nfunction randomColor() {\n  const { bgColor, textColor } = sharedState.generateBubbleColor();\n  setting.value.bubble = bgColor;\n  setting.value.text = textColor;\n}\n\nfunction function_click(type) {\n  if (containerShow.value.showtype == type) {\n    containerShow.value.show = false;\n    containerShow.value.showtype = \'\';\n    isIncrease.value = false;\n  } else {\n    containerShow.value.show = true;\n    containerShow.value.showtype = type;\n    isIncrease.value = true;\n  }\n}\n\nfunction sendSpecial(type) {\n  if (sharedState.generate || !inputShow.value) {\n    return;\n  }\n  const name = props.name;\n  const send = false;\n  console.log(type, special.value.text[type]);\n  if (!special.value.text[type]) {\n    return;\n  }\n\n  const specialValue = special.value.text[type];\n  let sendType = \'\';\n  if (type == \'voice\') {\n    sendType = \'yy\';\n  } else if (type == \'transfer\') {\n    sendType = \'zz\';\n  } else {\n    sendType = type;\n  }\n  let sendMsg;\n  if (type != \'transfer\') {\n    sendMsg = `[${sendType}-${specialValue}]`;\n  } else {\n    sendMsg = `[${sendType}-${specialValue}元]`;\n  }\n  console.log(`发送出去的文本:${sendMsg}`);\n\n  if (name in sharedState.QQ.chathistory == false) {\n    sharedState.QQ.chathistory[name] = {\n      chartype: sharedState.QQ.chars[name].chartype == \'Group\' ? \'Group\' : \'private\',\n      msgs: [],\n    };\n  }\n\n  if (specialValue) {\n    const obj = {\n      msgtype: type,\n      content: specialValue,\n      sender: \'user\',\n      time: \'\',\n    };\n    if (type == \'transfer\') {\n      obj[\'count\'] = specialValue + \'元\';\n    }\n    sharedState.QQ.addMsg(name, obj);\n  }\n  const chartype = sharedState.QQ.chars[props.name]?.chartype;\n  if (sharedState.phone.sendModel == \'尾附\') {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message += `\n在群聊${props.name}中发送消息:${sendMsg}`;\n    } else {\n      message += `\n给${props.name}发送消息:${sendMsg}`;\n    }\n    const old_content = $(\'#send_textarea\').val().trim();\n    const new_content = old_content + message;\n    $(\'#send_textarea\')\n      .val(new_content.trim() || \'\')[0]\n      .dispatchEvent(new Event(\'input\', { bubbles: true }));\n    special.value.text[type] = \'\';\n    return;\n  }\n  if (send) {\n    let message = sharedState.QQ.cacheMsg.join(\'\\n\').trim();\n    if (specialValue) {\n      if (chartype == \'Group\') {\n        message += `\n在群聊${props.name}中发送消息:${sendMsg}`;\n      } else {\n        message += `\n给${props.name}发送消息:${sendMsg}`;\n      }\n    }\n    sharedState.QQ.cacheMsg = [];\n    triggerSlash(`/send ${message.trim()}|/trigger`);\n  } else {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message = `\n在群聊${props.name}中发送消息:${sendMsg}`;\n    } else {\n      message = `\n给${props.name}发送消息:${sendMsg}`;\n    }\n    sharedState.QQ.cacheMsg.push(message);\n  }\n  special.value.text[type] = \'\';\n  // 不确定需不需要反正归零了就对了\n  sharedState.QQ.chathistory[name].unread = 0;\n\n  special.value.show = false;\n}\n\nfunction sendEmoji(url, name) {\n  if (sharedState.generate || !inputShow.value) {\n    return;\n  }\n\n  if (props.name in sharedState.QQ.chathistory == false) {\n    console.log(`重置了聊天:${name}`);\n    console.log(JSON.stringify(sharedState.QQ.chathistory));\n    sharedState.QQ.chathistory[props.name] = {\n      chartype: sharedState.QQ.chars[props.name].chartype == \'Group\' ? \'Group\' : \'private\',\n      msgs: [],\n    };\n  }\n\n  sharedState.QQ.addMsg(props.name, {\n    msgtype: \'emoji\',\n    emoji: url,\n    content: name,\n    sender: \'user\',\n    time: \'\',\n  });\n\n  const chartype = sharedState.QQ.chars[props.name]?.chartype;\n  const sendMsg = `[bqb-${name}]`;\n  let message = \'\';\n\n  if (sharedState.phone.sendModel == \'尾附\') {\n    if (chartype == \'Group\') {\n      message += `\n在群聊${props.name}中发送消息:${sendMsg}`;\n    } else {\n      message += `\n给${props.name}发送消息:${sendMsg}`;\n    }\n    const old_content = $(\'#send_textarea\').val().trim();\n    const new_content = old_content + message;\n    $(\'#send_textarea\')\n      .val(new_content.trim() || \'\')[0]\n      .dispatchEvent(new Event(\'input\', { bubbles: true }));\n    return;\n  }\n\n  if (chartype == \'Group\') {\n    message = `\n在群聊${props.name}中发送消息:${sendMsg}`;\n  } else {\n    message = `\n给${props.name}发送消息:${sendMsg}`;\n  }\n  sharedState.QQ.cacheMsg.push(message);\n}\n<\/script>\n\n\x3c!-- 弹出框动画 --\x3e\n<style scoped>\n/* 遮罩层 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n/* 弹框动画 */\n.popup-enter-active,\n.popup-leave-active {\n  transition:\n    opacity 0.2s ease,\n    transform 0.2s ease;\n}\n.popup-enter-from,\n.popup-leave-to {\n  opacity: 0;\n  transform: translate(-50%, -46%) scale(0.96); /* 轻缩小+上移 */\n}\n.popup-enter-to,\n.popup-leave-from {\n  opacity: 1;\n  transform: translate(-50%, -50%) scale(1);\n}\n</style>\n\n<style>\n.edge-catcher {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 30px; /* 可调 */\n  touch-action: none; /* 全放开，保证横向可捕获 */\n  z-index: 5; /* 确保在内容之上接收事件 */\n}\n\n/* 外层：占位 + 裁切，用 max-height 过渡实现“推开” */\n.drawer-wrap {\n  overflow: hidden;\n  max-height: 0; /* 关闭时不占空间 */\n  transition: max-height 0.24s ease;\n}\n.drawer-wrap.open {\n  max-height: 250px; /* 打开时占 250px 空间（你的固定高度） */\n}\n\n/* 内层：只做 transform/opacity，避免动布局属性 */\n.drawer-enter-active,\n.drawer-leave-active {\n  transition:\n    transform 0.24s ease,\n    opacity 0.24s ease;\n  will-change: transform, opacity;\n}\n.drawer-enter-from,\n.drawer-leave-to {\n  transform: translateY(100%); /* 从自身高度以下滑入/滑出 */\n  opacity: 0;\n}\n.drawer-enter-to,\n.drawer-leave-from {\n  transform: translateY(0);\n  opacity: 1;\n}\n</style>\n'],sourceRoot:''}]);const s=r},1980:(e,n,t)=>{var a=t(2565);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('a167753e',a,!1,{ssrId:!0})},2193:(e,n,t)=>{var a=t(6934);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('1add1b72',a,!1,{ssrId:!0})},2235:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.QQ_chat_page{padding-top:10px;background-color:rgb(244,245,246);width:100%;height:100%;background-size:cover;background-repeat:no-repeat;background-position:top center;display:flex;flex-direction:column;overflow-y:auto;box-sizing:border-box;position:relative;overflow-x:hidden}.input-container{max-width:100%;bottom:0px;left:0;width:100%;border-bottom-right-radius:10px;border-bottom-left-radius:10px;box-sizing:border-box;padding:10px 0 5px 0;border-top:1px solid black}.msgcontent{flex:1;overflow-y:auto;box-sizing:border-box;scrollbar-width:none !important;-ms-overflow-style:none !important}.msgcontent::-webkit-scrollbar{display:none !important}.userInput{font:inherit;height:30px;border-radius:8px;letter-spacing:0.7px;width:100%;padding-left:10px;padding-right:10px;border:1px solid rgb(0,0,0,0.5)}.chat-setting-popup{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;max-width:350px;max-height:80%;background-color:#fff;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.2);z-index:1000;display:flex;flex-direction:column;color:black}.chat-setting-header{padding:15px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}.chat-setting-header span{font-weight:bold;font-size:16px}.close-setting-btn{cursor:pointer}.chat-setting-content{padding:15px;display:flex;flex-direction:column;gap:15px;overflow-y:auto}.setting-item{display:flex;justify-content:space-between;align-items:center;gap:10px}.setting-item span{font-size:14px}.setting-item input[type=\'text\']{flex:1;padding:5px;border:1px solid #ccc;border-radius:5px}.setting-item input[type=\'number\']{flex:1;padding:5px;border:1px solid #ccc;border-radius:5px}.setting-item textarea{flex:1;padding:5px;border:1px solid #ccc;border-radius:5px}.color-picker{width:30px;height:30px;padding:0;border:1px solid #ccc;border-radius:3px;cursor:pointer}.chat-setting-footer{padding:10px 15px;text-align:right;border-top:1px solid #eee}.chat-setting-footer button{padding:6px 15px;margin-left:10px;border:none;border-radius:5px;cursor:pointer}#save-setting-btn{background-color:#019aff;color:white}.pickfile-setting-btn{background-color:#68baf0;color:white;border:none;border-radius:5px;padding:3px 7px}#cancel-setting-btn{background-color:#f5f5f5;color:#333}.popup-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);z-index:999}.QQ_chat_fakeimg{width:100%;background-color:white;aspect-ratio:1/1;padding:5px 18px 0 20px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:1.3em;-ms-overflow-style:none !important;scrollbar-width:none !important;text-align:center}.QQ_chat_fakeimg::-webkit-scrollbar{display:none !important}.QQ_chat_fakeimg div{max-height:100%;display:flex;align-items:flex-start;overflow-y:auto;-ms-overflow-style:none !important;scrollbar-width:none !important}.QQ_chat_fakeimg div::-webkit-scrollbar{display:none !important}.QQ_chatpage_function{margin-top:7px;width:100%;height:30px;display:flex;background-color:transparent;align-items:center;justify-content:space-around}.QQ_chatpage_function svg{fill:#2c2c2c}.QQ_chatpage_function svg.svg_selected{fill:#2396e9}.QQ_chat_username{margin-left:8px;color:#000;font-size:14px;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-bar-wrap{--bg:#f2f3f5;--bar-height:56px;--radius:8px;--icon:#9aa0a6;--icon-hover:#7b838c;--text:#333;--hint:#9aa0a6;--send:#4a90e2;--send-hover:#3f7fca;--shadow:0 -1px 3px rgba(0,0,0,0.05);--inner-shadow:0 1px 2px rgba(0,0,0,0.04);background:var(--bg);box-shadow:var(--shadow)}.chat-bar{max-width:720px;margin:0 auto;height:var(--bar-height);display:flex;align-items:center;gap:10px;padding:8px 12px}.icon-btn{appearance:none;-webkit-appearance:none;border:0;background:transparent;padding:8px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background 0.15s ease,color 0.15s ease,opacity 0.15s ease;color:var(--icon)}.icon-btn:hover{background:rgba(0,0,0,0.04);color:var(--icon-hover)}.icon-btn:active{transform:translateY(0.5px)}.icon{width:22px;height:22px;display:block}.input-shell{flex:1;display:flex;align-items:center;background:#fff;border-radius:var(--radius);padding:10px 12px;box-shadow:var(--inner-shadow);min-width:0}.input-shell input{flex:1;border:0;outline:0;font-size:15px;line-height:20px;color:var(--text);background:transparent;min-width:0}.input-shell input::placeholder{color:var(--hint)}.send-btn{appearance:none;-webkit-appearance:none;border:0;height:36px;padding:0 12px;border-radius:8px;background:var(--send);color:#fff;font-weight:600;display:inline-flex;align-items:center;gap:8px;cursor:pointer;transition:background 0.15s ease,opacity 0.15s ease}.send-btn .plane{width:16px;height:16px}.send-btn:hover{background:var(--send-hover)}.send-btn:disabled{opacity:0.5;cursor:not-allowed}.send-btn.active{transform:translateY(1px)}@media (max-width:360px){:root{--bar-height:52px}.icon{width:20px;height:20px}.send-btn{height:34px;padding:0 10px}}.chat-bar-wrap.is-mobile{--bar-height:50px;--shadow:0 -1px 2px rgba(0,0,0,0.04)}.chat-bar-wrap.is-mobile .chat-bar{padding:6px 10px;gap:8px}.chat-bar-wrap.is-mobile .input-shell{padding:8px 10px}.chat-bar-wrap.is-mobile .icon{width:20px;height:20px}.chat-bar-wrap.is-mobile .icon-btn{padding:6px;border-radius:8px}.chat-bar-wrap.is-mobile .send-btn{height:32px;padding:0 10px;border-radius:6px}\n','',{version:3,sources:['webpack://./src/柏柏同层/QQ/chat.css'],names:[],mappings:'AAAA,cACE,gBAAiB,CACjB,iCAAoC,CACpC,UAAW,CACX,WAAY,CAGZ,qBAAsB,CACtB,2BAA4B,CAC5B,8BAA+B,CAC/B,YAAa,CACb,qBAAsB,CACtB,eAAgB,CAEhB,qBAAsB,CAItB,iBAAkB,CAClB,iBAIF,CAEA,iBACE,cAAe,CAGf,UAAW,CACX,MAAO,CACP,UAAW,CAGX,+BAAgC,CAChC,8BAA+B,CAC/B,qBAAsB,CACtB,oBAAqB,CACrB,0BACF,CAEA,YACE,MAAO,CACP,eAAgB,CAChB,qBAAsB,CAEtB,+BAAgC,CAChC,kCACF,CAEA,+BACE,uBACF,CAEA,WACE,YAAa,CACb,WAAY,CACZ,iBAAkB,CAClB,oBAAqB,CACrB,UAAW,CACX,iBAAkB,CAClB,kBAAmB,CACnB,+BACF,CAGA,oBACE,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,8BAAgC,CAChC,SAAU,CACV,eAAgB,CAChB,cAAe,CACf,qBAAsB,CACtB,kBAAmB,CACnB,mCAAuC,CACvC,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,WACF,CAEA,qBACE,YAAa,CACb,4BAA6B,CAC7B,YAAa,CACb,6BAA8B,CAC9B,kBACF,CAEA,0BACE,gBAAiB,CACjB,cACF,CAEA,mBACE,cACF,CAEA,sBACE,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,eACF,CAEA,cAEE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,QACF,CAEA,mBACE,cACF,CAEA,iCACE,MAAO,CACP,WAAY,CACZ,qBAAsB,CACtB,iBACF,CAEA,mCACE,MAAO,CACP,WAAY,CACZ,qBAAsB,CACtB,iBACF,CAEA,uBACE,MAAO,CACP,WAAY,CACZ,qBAAsB,CACtB,iBACF,CAEA,cACE,UAAW,CACX,WAAY,CACZ,SAAU,CACV,qBAAsB,CACtB,iBAAkB,CAClB,cACF,CAEA,qBACE,iBAAkB,CAClB,gBAAiB,CACjB,yBACF,CAEA,4BACE,gBAAiB,CACjB,gBAAiB,CACjB,WAAY,CACZ,iBAAkB,CAClB,cACF,CAEA,kBACE,wBAAyB,CACzB,WACF,CAEA,sBACE,wBAAyB,CACzB,WAAY,CACZ,WAAY,CACZ,iBAAkB,CAClB,eACF,CAEA,oBACE,wBAAyB,CACzB,UACF,CAGA,eACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,gCAAoC,CACpC,WACF,CAEA,iBACE,UAAW,CACX,sBAAuB,CACvB,gBAAmB,CACnB,uBAAwB,CACxB,YAAa,CACb,qBAAsB,CACtB,sBAAuB,CACvB,kBAAmB,CACnB,eAAgB,CAEhB,kCAAmC,CACnC,+BAAgC,CAChC,iBACF,CAEA,oCACE,uBACF,CAEA,qBACE,eAAgB,CAChB,YAAa,CACb,sBAAuB,CACvB,eAAgB,CAChB,kCAAmC,CACnC,+BACF,CAEA,wCACE,uBACF,CAEA,sBACE,cAAe,CACf,UAAW,CACX,WAAY,CACZ,YAAa,CACb,4BAA6B,CAC7B,kBAAmB,CACnB,4BACF,CAEA,0BACE,YACF,CAEA,uCACE,YACF,CAEA,kBACE,eAAgB,CAChB,UAAW,CACX,cAAe,CACf,MAAO,CACP,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAKA,eACE,YAAa,CACb,iBAAkB,CAClB,YAAa,CACb,cAAe,CACf,oBAAqB,CACrB,WAAY,CACZ,cAAe,CACf,cAAe,CACf,oBAAqB,CACrB,oCAAwC,CACxC,yCAA6C,CAM7C,oBAAqB,CACrB,wBACF,CACA,UACE,eAAgB,CAChB,aAAc,CACd,wBAAyB,CACzB,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,gBACF,CAGA,UACE,eAAgB,CAChB,uBAAwB,CACxB,QAAS,CACT,sBAAuB,CACvB,WAAY,CACZ,kBAAmB,CACnB,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,oEAGoB,CACpB,iBACF,CACA,gBACE,2BAA+B,CAC/B,uBACF,CACA,iBACE,2BACF,CACA,MACE,UAAW,CACX,WAAY,CACZ,aACF,CAGA,aACE,MAAO,CACP,YAAa,CACb,kBAAmB,CACnB,eAAgB,CAChB,2BAA4B,CAC5B,iBAAkB,CAClB,8BAA+B,CAC/B,WACF,CACA,mBACE,MAAO,CACP,QAAS,CACT,SAAU,CACV,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,sBAAuB,CACvB,WACF,CACA,gCACE,iBACF,CAGA,UACE,eAAgB,CAChB,uBAAwB,CACxB,QAAS,CACT,WAAY,CACZ,cAAe,CACf,iBAAkB,CAClB,sBAAuB,CACvB,UAAW,CACX,eAAgB,CAChB,mBAAoB,CACpB,kBAAmB,CACnB,OAAQ,CACR,cAAe,CACf,mDAGF,CACA,iBACE,UAAW,CACX,WACF,CACA,gBACE,4BACF,CACA,mBACE,WAAY,CACZ,kBACF,CACA,iBACE,yBACF,CAEA,yBACE,MACE,iBACF,CACA,MACE,UAAW,CACX,WACF,CACA,UACE,WAAY,CACZ,cACF,CACF,CAGA,yBACE,iBAAkB,CAClB,oCACF,CAEA,mCACE,gBAAiB,CACjB,OACF,CAEA,sCACE,gBACF,CAEA,+BACE,UAAW,CACX,WACF,CAEA,mCACE,WAAY,CACZ,iBACF,CAEA,mCACE,WAAY,CACZ,cAAe,CACf,iBACF',sourcesContent:['.QQ_chat_page {\r\n  padding-top: 10px;\r\n  background-color: rgb(244, 245, 246);\r\n  width: 100%;\r\n  height: 100%;\r\n  /* 填满视口高度 */\r\n  /* background-image: url("http://sharkpan.xyz/f/eWhZ/00017-2763077315.png"); */\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  background-position: top center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-y: auto;\r\n  /* 允许内容区域垂直滚动 */\r\n  box-sizing: border-box;\r\n  /* 防止内边距溢出 */\r\n  /* padding-bottom: 60px; */\r\n\r\n  position: relative;\r\n  overflow-x: hidden;\r\n\r\n  /* z-index: 9999; */\r\n  /* font-family: "字魂萌宠天地体"; */\r\n}\r\n\r\n.input-container {\r\n  max-width: 100%;\r\n  /* position: absolute; */\r\n  /* bottom: 20px; */\r\n  bottom: 0px;\r\n  left: 0;\r\n  width: 100%;\r\n  /* background-color: rgb(255, 255, 255, 0.2); */\r\n  /* background-color: white; */\r\n  border-bottom-right-radius: 10px;\r\n  border-bottom-left-radius: 10px;\r\n  box-sizing: border-box;\r\n  padding: 10px 0 5px 0;\r\n  border-top: 1px solid black;\r\n}\r\n\r\n.msgcontent {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  box-sizing: border-box;\r\n  /* margin-bottom: 85px; */\r\n  scrollbar-width: none !important;\r\n  -ms-overflow-style: none !important;\r\n}\r\n\r\n.msgcontent::-webkit-scrollbar {\r\n  display: none !important;\r\n}\r\n\r\n.userInput {\r\n  font: inherit;\r\n  height: 30px;\r\n  border-radius: 8px;\r\n  letter-spacing: 0.7px;\r\n  width: 100%;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n  border: 1px solid rgb(0, 0, 0, 0.5);\r\n}\r\n\r\n/* 聊天设置弹窗样式 */\r\n.chat-setting-popup {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 80%;\r\n  max-width: 350px;\r\n  max-height: 80%;\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\r\n  z-index: 1000;\r\n  display: flex;\r\n  flex-direction: column;\r\n  color: black;\r\n}\r\n\r\n.chat-setting-header {\r\n  padding: 15px;\r\n  border-bottom: 1px solid #eee;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.chat-setting-header span {\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n}\r\n\r\n.close-setting-btn {\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-setting-content {\r\n  padding: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.setting-item {\r\n  /* margin-bottom: 15px; */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.setting-item span {\r\n  font-size: 14px;\r\n}\r\n\r\n.setting-item input[type=\'text\'] {\r\n  flex: 1;\r\n  padding: 5px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n}\r\n\r\n.setting-item input[type=\'number\'] {\r\n  flex: 1;\r\n  padding: 5px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n}\r\n\r\n.setting-item textarea {\r\n  flex: 1;\r\n  padding: 5px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n}\r\n\r\n.color-picker {\r\n  width: 30px;\r\n  height: 30px;\r\n  padding: 0;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n}\r\n\r\n.chat-setting-footer {\r\n  padding: 10px 15px;\r\n  text-align: right;\r\n  border-top: 1px solid #eee;\r\n}\r\n\r\n.chat-setting-footer button {\r\n  padding: 6px 15px;\r\n  margin-left: 10px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n#save-setting-btn {\r\n  background-color: #019aff;\r\n  color: white;\r\n}\r\n\r\n.pickfile-setting-btn {\r\n  background-color: #68baf0;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  padding: 3px 7px;\r\n}\r\n\r\n#cancel-setting-btn {\r\n  background-color: #f5f5f5;\r\n  color: #333;\r\n}\r\n\r\n/* 弹窗遮罩层 */\r\n.popup-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  z-index: 999;\r\n}\r\n\r\n.QQ_chat_fakeimg {\r\n  width: 100%;\r\n  background-color: white;\r\n  aspect-ratio: 1 / 1;\r\n  padding: 5px 18px 0 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 1.3em;\r\n  /* overflow-y: auto; */\r\n  -ms-overflow-style: none !important;\r\n  scrollbar-width: none !important;\r\n  text-align: center;\r\n}\r\n\r\n.QQ_chat_fakeimg::-webkit-scrollbar {\r\n  display: none !important;\r\n}\r\n\r\n.QQ_chat_fakeimg div {\r\n  max-height: 100%;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  overflow-y: auto;\r\n  -ms-overflow-style: none !important;\r\n  scrollbar-width: none !important;\r\n}\r\n\r\n.QQ_chat_fakeimg div::-webkit-scrollbar {\r\n  display: none !important;\r\n}\r\n\r\n.QQ_chatpage_function {\r\n  margin-top: 7px;\r\n  width: 100%;\r\n  height: 30px;\r\n  display: flex;\r\n  background-color: transparent;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n}\r\n\r\n.QQ_chatpage_function svg {\r\n  fill: #2c2c2c;\r\n}\r\n\r\n.QQ_chatpage_function svg.svg_selected {\r\n  fill: #2396e9;\r\n}\r\n\r\n.QQ_chat_username {\r\n  margin-left: 8px;\r\n  color: #000;\r\n  font-size: 14px;\r\n  flex: 1;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* 新输入框的样式 */\r\n\r\n/* 底部输入栏 */\r\n.chat-bar-wrap {\r\n  --bg: #f2f3f5; /* 底栏灰底 */\r\n  --bar-height: 56px; /* 推荐高度 52–56 */\r\n  --radius: 8px; /* 一致圆角 */\r\n  --icon: #9aa0a6; /* 中灰图标 */\r\n  --icon-hover: #7b838c; /* 悬停更深一点 */\r\n  --text: #333; /* 输入文字色 */\r\n  --hint: #9aa0a6; /* 占位符 */\r\n  --send: #4a90e2; /* 发送主色 */\r\n  --send-hover: #3f7fca; /* 发送悬停 */\r\n  --shadow: 0 -1px 3px rgba(0, 0, 0, 0.05);\r\n  --inner-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);\r\n\r\n  /* position: sticky;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0; */\r\n  background: var(--bg);\r\n  box-shadow: var(--shadow);\r\n}\r\n.chat-bar {\r\n  max-width: 720px;\r\n  margin: 0 auto;\r\n  height: var(--bar-height);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 8px 12px;\r\n}\r\n\r\n/* 按钮通用样式 */\r\n.icon-btn {\r\n  appearance: none;\r\n  -webkit-appearance: none;\r\n  border: 0;\r\n  background: transparent;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition:\r\n    background 0.15s ease,\r\n    color 0.15s ease,\r\n    opacity 0.15s ease;\r\n  color: var(--icon);\r\n}\r\n.icon-btn:hover {\r\n  background: rgba(0, 0, 0, 0.04);\r\n  color: var(--icon-hover);\r\n}\r\n.icon-btn:active {\r\n  transform: translateY(0.5px);\r\n}\r\n.icon {\r\n  width: 22px;\r\n  height: 22px;\r\n  display: block;\r\n}\r\n\r\n/* 输入框容器 */\r\n.input-shell {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  background: #fff;\r\n  border-radius: var(--radius);\r\n  padding: 10px 12px;\r\n  box-shadow: var(--inner-shadow);\r\n  min-width: 0;\r\n}\r\n.input-shell input {\r\n  flex: 1;\r\n  border: 0;\r\n  outline: 0;\r\n  font-size: 15px;\r\n  line-height: 20px;\r\n  color: var(--text);\r\n  background: transparent;\r\n  min-width: 0;\r\n}\r\n.input-shell input::placeholder {\r\n  color: var(--hint);\r\n}\r\n\r\n/* 发送按钮 */\r\n.send-btn {\r\n  appearance: none;\r\n  -webkit-appearance: none;\r\n  border: 0;\r\n  height: 36px;\r\n  padding: 0 12px;\r\n  border-radius: 8px;\r\n  background: var(--send);\r\n  color: #fff;\r\n  font-weight: 600;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  cursor: pointer;\r\n  transition:\r\n    background 0.15s ease,\r\n    opacity 0.15s ease;\r\n}\r\n.send-btn .plane {\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n.send-btn:hover {\r\n  background: var(--send-hover);\r\n}\r\n.send-btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n.send-btn.active {\r\n  transform: translateY(1px);\r\n}\r\n/* 更紧凑的小屏微调 */\r\n@media (max-width: 360px) {\r\n  :root {\r\n    --bar-height: 52px;\r\n  }\r\n  .icon {\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n  .send-btn {\r\n    height: 34px;\r\n    padding: 0 10px;\r\n  }\r\n}\r\n\r\n/* —— 移动端收紧样式（基于 sharedState.ST.isMobile 动态加的类） —— */\r\n.chat-bar-wrap.is-mobile {\r\n  --bar-height: 50px; /* 原 56，改为 50，更接近微信 */\r\n  --shadow: 0 -1px 2px rgba(0, 0, 0, 0.04); /* 阴影更轻，减少“厚重感” */\r\n}\r\n\r\n.chat-bar-wrap.is-mobile .chat-bar {\r\n  padding: 6px 10px; /* 原 8/12 -> 6/10，整体更紧凑 */\r\n  gap: 8px; /* 元素间距略缩 */\r\n}\r\n\r\n.chat-bar-wrap.is-mobile .input-shell {\r\n  padding: 8px 10px; /* 原 10/12 -> 8/10，保证输入区域高度控制 */\r\n}\r\n\r\n.chat-bar-wrap.is-mobile .icon {\r\n  width: 20px;\r\n  height: 20px; /* 图标略缩，避免撑高 */\r\n}\r\n\r\n.chat-bar-wrap.is-mobile .icon-btn {\r\n  padding: 6px; /* 原 8 -> 6，按钮更小巧 */\r\n  border-radius: 8px;\r\n}\r\n\r\n.chat-bar-wrap.is-mobile .send-btn {\r\n  height: 32px; /* 原 36 -> 32 */\r\n  padding: 0 10px; /* 原 0 12 -> 0 10 */\r\n  border-radius: 6px; /* 角略小，显得更利落 */\r\n}\r\n'],sourceRoot:''}]);const s=r},2527:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},2565:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.Tinder_chat_container{display:flex;margin-bottom:20px;align-items:flex-start;gap:10px;width:100%}.Tinder_chat_mymsg{flex-direction:row-reverse;justify-content:flex-start}.Tinder_chat_charmsg{flex-direction:row}.Tinder_chat_head{border-radius:50%;background-size:cover;background-position:center;background-color:#e0e0e0;flex-shrink:0}.Tinder_content_wrapper{display:flex;flex-direction:column;max-width:70%}.Tinder_chat_mymsg .Tinder_content_wrapper{align-items:flex-end}.Tinder_chat_charmsg .Tinder_content_wrapper{align-items:flex-start}.Tinder_chat_name{font-size:12px;color:#999;margin-bottom:4px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.Tinder_chat_msgdiv{padding:10px 14px;font-size:var(--v76d025d9);line-height:1.4;word-wrap:break-word;position:relative;box-shadow:0 1px 2px rgba(0,0,0,0.1)}.Tinder_user_bubble{background:linear-gradient(135deg,#fd297b,#ff655b);color:white;border-radius:18px 18px 4px 18px}.Tinder_other_bubble{background-color:#f1f2f6;color:#333;border-radius:18px 18px 18px 4px}.Tinder_chat_img{max-width:100%;border-radius:8px;display:block}.Tinder_img_container{display:flex;flex-direction:column}.Tinder_additional_text{margin-top:5px;font-size:0.9em;opacity:0.9}.Tinder_voice_container{display:flex;flex-direction:column;cursor:pointer;min-width:80px}.Tinder_voice_main{display:flex;align-items:center;gap:8px}.Tinder_voice_duration{font-weight:500}.Tinder_voice_text{margin-top:5px;font-size:13px;padding-top:5px;border-top:1px solid rgba(0,0,0,0.1);width:100%}.Tinder_user_bubble .Tinder_voice_text{border-top:1px solid rgba(255,255,255,0.3)}.Tinder_fake_img{padding:10px;background:rgba(0,0,0,0.05);border-radius:8px}\n','',{version:3,sources:['webpack://./src/柏柏同层/Tinder/bubble/bubble.vue'],names:[],mappings:'AAgOA,uBACE,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,QAAS,CACT,UACF,CAEA,mBACE,0BAA2B,CAC3B,0BACF,CAEA,qBACE,kBACF,CAEA,kBACE,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBAAyB,CACzB,aACF,CAEA,wBACE,YAAa,CACb,qBAAsB,CACtB,aACF,CAEA,2CACE,oBACF,CAEA,6CACE,sBACF,CAEA,kBACE,cAAe,CACf,UAAW,CACX,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAEA,oBACE,iBAAkB,CAClB,0BAA2B,CAC3B,eAAgB,CAChB,oBAAqB,CACrB,iBAAkB,CAClB,oCACF,CAEA,oBACE,kDAAqD,CACrD,WAAY,CACZ,gCACF,CAEA,qBACE,wBAAyB,CACzB,UAAW,CACX,gCACF,CAEA,iBACE,cAAe,CACf,iBAAkB,CAClB,aACF,CAEA,sBACE,YAAa,CACb,qBACF,CAEA,wBACE,cAAe,CACf,eAAgB,CAChB,WACF,CAEA,wBACE,YAAa,CACb,qBAAsB,CACtB,cAAe,CACf,cACF,CAEA,mBACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,uBACE,eACF,CAEA,mBACE,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,oCAAwC,CACxC,UACF,CAEA,uCACE,0CACF,CAEA,iBACE,YAAa,CACb,2BAA+B,CAC/B,iBACF',sourcesContent:['<template>\n  <div\n    class="Tinder_chat_container"\n    :class="props.bubble.sender == \'user\' ? \'Tinder_chat_mymsg\' : \'Tinder_chat_charmsg\'"\n  >\n    \x3c!-- Avatar (Left) --\x3e\n    <div\n      :data-name="props.bubble.sender"\n      class="Tinder_chat_head"\n      :style="{\n        backgroundImage: `url(\'${getAvatar(props.bubble.sender)}\')`,\n        width: headSize,\n        height: headSize,\n        minWidth: headSize,\n        minHeight: headSize,\n      }"\n    ></div>\n\n    \x3c!-- Content Wrapper --\x3e\n    <div class="Tinder_content_wrapper">\n      \x3c!-- Name (Group/Context) --\x3e\n      <span\n        v-if="props.bubble.sender != \'user\' && (props.bubble.chartype == \'Group\' || props.bubble.displayName)"\n        class="Tinder_chat_name"\n        >{{ getName(props.bubble.sender) }}</span\n      >\n\n      \x3c!-- Message Bubble --\x3e\n      <div\n        class="Tinder_chat_msgdiv"\n        :class="props.bubble.sender == \'user\' ? \'Tinder_user_bubble\' : \'Tinder_other_bubble\'"\n      >\n        \x3c!-- Text --\x3e\n        \x3c!-- Fix: User messages might be missing msgtype initially, default to text if content exists --\x3e\n        <div v-if="props.bubble.msgtype == \'text\' || (!props.bubble.msgtype && props.bubble.content)" v-html="formatContent(props.bubble.content)"></div>\n\n        \x3c!-- Image --\x3e\n        <div v-else-if="props.bubble.msgtype == \'img\'" class="Tinder_img_container">\n          <div v-if="isUrl(props.bubble.content)">\n            <img :src="props.bubble.content" class="Tinder_chat_img" />\n          </div>\n          <div v-else class="Tinder_fake_img">\n            <div style="text-align: center; opacity: 0.6; font-size: 12px; margin-bottom: 5px">[图片]</div>\n            <div v-html="formatContent(props.bubble.content)"></div>\n          </div>\n          <div v-if="props.bubble.additionalText" class="Tinder_additional_text">\n            {{ props.bubble.additionalText }}\n          </div>\n        </div>\n\n        \x3c!-- Voice --\x3e\n        <div v-else-if="props.bubble.msgtype == \'voice\'" class="Tinder_voice_container" @click="toggleVoiceText">\n          <div class="Tinder_voice_main">\n            \x3c!-- Received Voice Icon --\x3e\n            <span v-if="props.bubble.sender != \'user\'" class="Tinder_voice_icon">\n              <svg viewBox="0 0 1024 1024" width="20" height="20" fill="currentColor" style="transform: rotate(90deg)">\n                <path\n                  d="M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z"\n                  p-id="38915"\n                ></path>\n              </svg>\n            </span>\n            <span class="Tinder_voice_duration">{{ props.bubble.voicetime || 2 }}"</span>\n            \x3c!-- Sent Voice Icon --\x3e\n            <span v-if="props.bubble.sender == \'user\'" class="Tinder_voice_icon">\n              <svg viewBox="0 0 1024 1024" width="20" height="20" fill="currentColor" style="transform: rotate(-90deg)">\n                <path\n                  d="M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z"\n                  p-id="38915"\n                ></path>\n              </svg>\n            </span>\n          </div>\n          <div v-if="voiceTextVisible" class="Tinder_voice_text">\n            {{ props.bubble.content }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed, ref } from \'vue\';\nimport { sharedState } from \'../../shared-state\';\n\nconst props = defineProps<{\n  bubble: any;\n  senderinfo?: any;\n}>();\n\n// 获取名字\nconst getName = (sender: string) => {\n  if (sender === \'user\') {\n    return sharedState.Tinder.userName || sharedState.ST.userName;\n  }\n\n  // 1. 优先尝试从 chars 中获取 tinderName\n  let char = sharedState.QQ.chars[sender];\n  if (!char) {\n    const lowerSender = sender.toLowerCase();\n    char = Object.values(sharedState.QQ.chars).find((c: any) => c.name && c.name.toLowerCase() === lowerSender);\n  }\n  if (char && char.tinderName) {\n    return char.tinderName;\n  }\n\n  // 2. 尝试从 senderinfo 获取 tinderName\n  if (props.senderinfo && props.senderinfo.tinderName) {\n    return props.senderinfo.tinderName;\n  }\n\n  // 3. 尝试从 matches 中获取\n  const match = sharedState.Tinder.matches.find((m: any) => m.name === sender || m.id === sender);\n  if (match) {\n    return match.name;\n  }\n\n  // 4. 如果 sender 本身就是某个角色的 tinderName\n  const charByTinderName = Object.values(sharedState.QQ.chars).find((c: any) => c.tinderName === sender);\n  if (charByTinderName) {\n    return sender;\n  }\n\n  // 5. 回退到 displayName (如果有)\n  if (props.bubble.displayName) {\n    return props.bubble.displayName;\n  }\n\n  // 6. 回退到 senderinfo.name\n  if (props.senderinfo && props.senderinfo.name) {\n    return props.senderinfo.name;\n  }\n\n  // 7. 回退到 char.name\n  if (char) {\n    return char.name;\n  }\n\n  // 8. 最后返回 sender\n  return sender;\n};\n\n// 获取头像 URL\nconst getAvatar = (sender: string) => {\n  let head = \'\';\n\n  if (sender === \'user\') {\n    head = sharedState.Tinder.userHead || sharedState.ST.userHead;\n  } else {\n    // 优先使用 props.senderinfo\n    if (props.senderinfo) {\n      head = props.senderinfo.tinderHead || props.senderinfo.head;\n    }\n\n    if (!head) {\n      // 尝试在 sharedState.QQ.chars 中查找\n      let char = sharedState.QQ.chars[sender];\n      if (!char) {\n        const lowerSender = sender.toLowerCase();\n        char = Object.values(sharedState.QQ.chars).find((c: any) => c.name && c.name.toLowerCase() === lowerSender);\n      }\n      if (char) {\n        head = char.tinderHead || char.head;\n      }\n    }\n\n    if (!head) {\n      // 再尝试通过 tinderName 查找\n      const charByTinderName = Object.values(sharedState.QQ.chars).find((c: any) => c.tinderName === sender);\n      if (charByTinderName) {\n        head = (charByTinderName as any).tinderHead || (charByTinderName as any).head;\n      }\n    }\n\n    if (!head) {\n      // 最后尝试在 matches 里查找\n      const match = sharedState.Tinder.matches.find((m: any) => m.name === sender || m.id === sender);\n      if (match) {\n        head = match.head;\n      }\n    }\n  }\n\n  // 默认头像\n  return head || \'https://sharkpan.xyz/f/k7eU6/ComfyUI_00033_.png\';\n};\n\n// 格式化文本内容\nconst formatContent = (content: string) => {\n  if (!content) return \'\';\n  return content.replace(/\\n/g, \'<br>\');\n};\n\nconst isUrl = (content: string) => {\n  return /^http/.test(content);\n};\n\nconst voiceTextVisible = ref(false);\nconst toggleVoiceText = () => {\n  voiceTextVisible.value = !voiceTextVisible.value;\n};\n\n// 响应式尺寸\nconst headSize = computed(() => {\n  if (sharedState.ST.isMobile) {\n    return \'32px\';\n  } else {\n    return \'40px\';\n  }\n});\n\nconst fontSize = computed(() => {\n  if (sharedState.ST.isMobile) {\n    return \'14px\';\n  } else {\n    return \'15px\';\n  }\n});\n<\/script>\n\n<style>\n/* Global styles for Tinder insertion to avoid scope issues */\n\n.Tinder_chat_container {\n  display: flex;\n  margin-bottom: 20px;\n  align-items: flex-start; /* Align top for name display */\n  gap: 10px;\n  width: 100%;\n}\n\n.Tinder_chat_mymsg {\n  flex-direction: row-reverse; /* Swap avatar and bubble for user */\n  justify-content: flex-start;\n}\n\n.Tinder_chat_charmsg {\n  flex-direction: row;\n}\n\n.Tinder_chat_head {\n  border-radius: 50%; /* Rounded avatars like QQ/Tinder App */\n  background-size: cover;\n  background-position: center;\n  background-color: #e0e0e0;\n  flex-shrink: 0;\n}\n\n.Tinder_content_wrapper {\n  display: flex;\n  flex-direction: column;\n  max-width: 70%;\n}\n\n.Tinder_chat_mymsg .Tinder_content_wrapper {\n  align-items: flex-end;\n}\n\n.Tinder_chat_charmsg .Tinder_content_wrapper {\n  align-items: flex-start;\n}\n\n.Tinder_chat_name {\n  font-size: 12px;\n  color: #999;\n  margin-bottom: 4px;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.Tinder_chat_msgdiv {\n  padding: 10px 14px;\n  font-size: v-bind(fontSize);\n  line-height: 1.4;\n  word-wrap: break-word;\n  position: relative;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.Tinder_user_bubble {\n  background: linear-gradient(135deg, #fd297b, #ff655b); /* Tinder Gradient */\n  color: white;\n  border-radius: 18px 18px 4px 18px; /* Rounded with corner */\n}\n\n.Tinder_other_bubble {\n  background-color: #f1f2f6; /* Light gray */\n  color: #333;\n  border-radius: 18px 18px 18px 4px; /* Rounded with corner */\n}\n\n.Tinder_chat_img {\n  max-width: 100%;\n  border-radius: 8px;\n  display: block;\n}\n\n.Tinder_img_container {\n  display: flex;\n  flex-direction: column;\n}\n\n.Tinder_additional_text {\n  margin-top: 5px;\n  font-size: 0.9em;\n  opacity: 0.9;\n}\n\n.Tinder_voice_container {\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  min-width: 80px;\n}\n\n.Tinder_voice_main {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.Tinder_voice_duration {\n  font-weight: 500;\n}\n\n.Tinder_voice_text {\n  margin-top: 5px;\n  font-size: 13px;\n  padding-top: 5px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  width: 100%;\n}\n\n.Tinder_user_bubble .Tinder_voice_text {\n  border-top: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n.Tinder_fake_img {\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 8px;\n}\n</style>\n'],sourceRoot:''}]);const s=r},2669:e=>{var n={};e.exports=function(e,t){var a=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!a)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insert\' parameter is invalid.');a.appendChild(t)}},2869:(e,n,t)=>{var a=t(6424);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('16c56592',a,!1,{ssrId:!0})},2916:(e,n,t)=>{var a=t(4895);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('39ee356e',a,!1,{ssrId:!0})},3074:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.QQ_chat_mymsg,.QQ_chat_charmsg{margin-bottom:var(--v646cf16c)}.QQ_chat_head{width:var(--v66874cc9);height:var(--v66874cc9);border-radius:50%;background-size:cover;min-width:var(--v66874cc9)}.groupmsg{margin-top:6px}.QQ_chat_msgdiv{background-color:var(--v0765126f);span{color:var(--v38b56c6e)}font-size:var(--v82588890)}\n','',{version:3,sources:['webpack://./src/柏柏同层/QQ/bubble/bubble.vue'],names:[],mappings:'AAsbA,gCAEE,8BACF,CAEA,cACE,sBAAuB,CACvB,uBAAwB,CACxB,iBAAkB,CAClB,qBAAsB,CACtB,0BACF,CAEA,UACE,cACF,CAEA,gBACE,iCAAqC,CACrC,KACE,sBACF,CACA,0BACF',sourcesContent:['<template>\n  <div\n    v-if="props.bubble.msgtype != \'system\'"\n    :class="props.bubble.sender == \'user\' ? \'QQ_chat_mymsg\' : \'QQ_chat_charmsg\'"\n    :style="`${props.bubble.msgtype == \'emoji\' ? \'max-width: min(50%,300px);\' : \'\'}`"\n  >\n    <div\n      v-if="props.bubble.sender != \'user\'"\n      :data-name="props.bubble.sender"\n      class="QQ_chat_head"\n      :style="{\n        backgroundImage: `url(${headUrl})`,\n      }"\n    ></div>\n    <div\n      :style="`width: ${props.bubble.msgtype == \'transfer\' && props.bubble.sender == \'user\' ? \'100%\' : \'auto\'}; height: auto; margin-top: 4px; `"\n    >\n      <span\n        v-if="props.isGroup == \'Group\' && props.bubble.sender != \'user\' && props.bubble.sender != \'user\'"\n        :style="`overflow: hidden; text-overflow: ellipsis; display: block; max-width: 100%;${sharedState.ST.isMobile ? \'font-size:13px;\' : \'\'}`"\n        >{{ sharedState.QQ.chars[props.bubble.sender]?.name || props.bubble.sender }}</span\n      >\n      \x3c!-- 这里是消息内容 --\x3e\n      \x3c!-- text类型 --\x3e\n      <div\n        v-if="props.bubble.msgtype == \'text\'"\n        :class="`QQ_chat_msgdiv ${props.isGroup == \'Group\' && props.bubble.sender != \'user\' ? \'groupmsg\' : \'\'}`"\n        :data-name="props.bubble.sender"\n      >\n        <span>{{ props.bubble.content }}</span>\n      </div>\n      \x3c!-- img类型 --\x3e\n      <div\n        v-if="props.bubble.msgtype == \'img\'"\n        :class="`QQ_chat_msgdiv ${props.isGroup == \'Group\' && props.bubble.sender != \'user\' ? \'groupmsg\' : \'\'}`"\n        :data-name="props.bubble.sender"\n      >\n        <div\n          class="QQ_chat_fakeimg"\n          :style="`text-align: center;${props.bubble.additionalText ? \'margin-bottom:5px;\' : \'\'}`"\n        >\n          <div v-html="warpHandle(props.bubble.content)"></div>\n        </div>\n        {{ props.bubble.additionalText }}\n      </div>\n      \x3c!-- emoji类型 --\x3e\n      <div\n        v-if="props.bubble.msgtype == \'emoji\'"\n        :class="`QQ_chat_msgdiv ${props.isGroup == \'Group\' && props.bubble.sender != \'user\' ? \'groupmsg\' : \'\'}`"\n        :data-name="props.bubble.sender"\n      >\n        <div style="width: 100%; background-color: white; aspect-ratio: 1">\n          <img\n            class="msgimg"\n            loading="lazy"\n            :src="props.bubble.emoji"\n            :alt="props.bubble.emoji ? \'图片加载失败,可能是网络问题\' : \'Ai编了个不存在的表情包\'"\n          />\n        </div>\n        <span v-if="props.bubble.additionalText" style="margin-top: 5px; display: block">\n          {{ props.bubble.additionalText }}\n        </span>\n      </div>\n      \x3c!-- music类型 --\x3e\n      <music\n        v-if="props.bubble.msgtype == \'music\'"\n        :class="`QQ_chat_music ${props.isGroup == \'Group\' && props.bubble.sender != \'user\' ? \'groupmsg\' : \'\'}`"\n        :song="props.bubble.song"\n        :singer="props.bubble.singer"\n      ></music>\n      \x3c!-- voice类型 --\x3e\n      <div\n        v-if="props.bubble.msgtype == \'voice\'"\n        :class="`QQ_chat_msgdiv ${props.isGroup == \'Group\' && props.bubble.sender != \'user\' ? \'groupmsg\' : \'\'}`"\n        :data-name="props.bubble.sender"\n      >\n        <div\n          v-if="props.bubble.sender == \'user\'"\n          class="QQ_chat_voice"\n          @click="voice2text"\n          style="width: 100%; display: flex; gap: 5px; align-items: center"\n        >\n          <span style="display: block" class="totext">\n            <svg\n              style="margin-right: 30px; display: flex; align-items: center"\n              viewBox="0 0 1024 1024"\n              width="24"\n              height="24"\n            >\n              <path\n                d="M999.611733 387.697778a37.831111 37.831111 0 0 0-48.355555 22.641778v0.512l-1.592889 5.233777c-58.88-241.208889-302.648889-388.892444-543.857778-330.012444A446.805333 446.805333 0 0 0 124.546844 295.253333a39.139556 39.139556 0 0 0 13.653334 53.077334 39.310222 39.310222 0 0 0 18.944 5.233777c13.084444 0 25.201778-6.826667 32.540444-18.375111a374.158222 374.158222 0 0 1 359.480889-183.978666 381.952 381.952 0 0 1 337.351111 334.279111 384.568889 384.568889 0 0 1-3.128889 115.086222v2.616889a38.855111 38.855111 0 0 0 21.560889 48.355555c19.456 6.826667 41.528889-3.185778 48.355556-22.641777l68.835555-192.284445a39.310222 39.310222 0 0 0-22.584889-48.924444z m-148.764444 348.956444a38.115556 38.115556 0 0 0-31.004445 16.839111 373.077333 373.077333 0 0 1-355.214222 157.639111 381.212444 381.212444 0 0 1-323.185778-306.346666 396.344889 396.344889 0 0 1 0-140.856889v-1.592889a39.139556 39.139556 0 0 0-22.072888-48.355556 38.058667 38.058667 0 0 0-48.355556 22.584889l-68.835556 191.317334a38.513778 38.513778 0 0 0 23.608889 48.867555c19.456 7.395556 40.96-3.128889 48.355556-22.584889v-3.697777c58.88 241.208889 302.705778 388.892444 543.914667 330.012444A448.739556 448.739556 0 0 0 881.851733 798.151111a38.684444 38.684444 0 0 0-8.362666-54.158222 31.857778 31.857778 0 0 0-22.641778-7.338667z"\n                p-id="41017"\n                fill="currentColor"\n              ></path>\n              <path\n                d="M310.687289 693.020444a50.517333 50.517333 0 0 0-33.166222 19.456 40.96 40.96 0 0 0 0 31.573334c1.592889 4.721778 3.697778 9.443556 6.257777 14.165333a26.794667 26.794667 0 0 0 13.198223 11.036445 30.833778 30.833778 0 0 0 12.060444 2.104888h5.290667c6.826667-1.080889 13.653333-2.616889 20.48-4.721777 15.758222-5.290667 32.028444-11.605333 48.924444-18.432 16.782222-6.826667 34.133333-15.758222 49.322667-23.608889 15.246222-7.907556 32.597333-17.863111 46.250667-26.282667 14.222222-8.419556 24.177778-15.758222 35.271111-24.177778 24.632889 19.456 50.915556 36.238222 78.791111 49.891556 33.621333 17.351111 68.835556 31.004444 105.073778 42.097778a56.32 56.32 0 0 0 20.48 3.640889 33.905778 33.905778 0 0 0 34.190222-26.282667 39.025778 39.025778 0 0 0-1.592889-35.726222 49.322667 49.322667 0 0 0-26.225778-18.375111 540.842667 540.842667 0 0 1-85.162667-33.621334 603.932444 603.932444 0 0 1-63.601777-38.912c20.48-23.096889 37.831111-48.355556 52.565333-75.662222a465.294222 465.294222 0 0 0 38.343111-98.304h49.436445a38.456889 38.456889 0 0 0 26.282666-12.060444 46.762667 46.762667 0 0 0 7.850667-26.282667 44.032 44.032 0 0 0-8.931556-28.899556 37.432889 37.432889 0 0 0-26.282666-11.036444H568.6784a116.167111 116.167111 0 0 0-9.500444-17.863111c-10.467556-12.629333-22.584889-25.770667-34.702223-38.912a47.786667 47.786667 0 0 0-27.818666-18.375111h-4.209778a36.636444 36.636444 0 0 0-24.177778 8.419555 35.896889 35.896889 0 0 0-18.375111 29.923556 51.2 51.2 0 0 0 16.270222 33.109333l6.314667 6.314667H315.352178a34.133333 34.133333 0 0 0-26.282667 12.629333 45.852444 45.852444 0 0 0-6.826667 26.282667c-0.512 10.467556 2.104889 20.48 7.907556 28.899555 6.826667 6.826667 16.270222 11.036444 26.282667 11.036445h47.274666c5.233778 15.758222 10.524444 32.028444 16.839111 47.786666a419.271111 419.271111 0 0 0 50.403556 94.094223c8.419556 11.036444 17.351111 22.584889 26.282667 33.109333a389.461333 389.461333 0 0 1-64.625778 39.936c-26.282667 12.629333-54.101333 23.096889-81.976889 32.028444z m131.299555-246.954666h140.344889c-6.826667 23.096889-16.839111 45.169778-28.387555 66.730666a325.290667 325.290667 0 0 1-39.936 55.751112 319.146667 319.146667 0 0 1-39.424-52.622223l-2.616889-4.209777a388.778667 388.778667 0 0 1-29.980445-65.649778z"\n                p-id="41018"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </span>\n          <div style="display: flex; align-items: center; gap: 5px; margin-left: auto">\n            <span style="display: block">\n              <svg\n                style="transform: rotate(-90deg); display: flex; align-items: center"\n                t="1742985508017"\n                class="icon"\n                viewBox="0 0 1024 1024"\n                version="1.1"\n                xmlns="http://www.w3.org/2000/svg"\n                p-id="38914"\n                width="20"\n                height="20"\n              >\n                <path\n                  d="M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z"\n                  p-id="38915"\n                  fill="currentColor"\n                ></path>\n              </svg>\n            </span>\n            <span>{{ props.bubble?.voicetime }}"</span>\n          </div>\n        </div>\n        <div\n          v-if="props.bubble.sender != \'user\'"\n          class="QQ_chat_voice"\n          @click="voice2text"\n          style="width: 100%; display: flex; gap: 5px; align-items: center"\n        >\n          <span style="margin-left: 2px">{{ props.bubble?.voicetime }}"</span>\n          <span style="display: block">\n            <svg\n              style="transform: rotate(90deg); display: flex; align-items: center"\n              class="icon"\n              viewBox="0 0 1024 1024"\n              width="20"\n              height="20"\n            >\n              <path\n                d="M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z"\n                p-id="38915"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </span>\n\n          <span style="display: block; margin-left: auto" class="totext">\n            <svg\n              style="margin-left: 30px; display: flex; align-items: center"\n              viewBox="0 0 1024 1024"\n              width="24"\n              height="24"\n            >\n              <path\n                d="M999.611733 387.697778a37.831111 37.831111 0 0 0-48.355555 22.641778v0.512l-1.592889 5.233777c-58.88-241.208889-302.648889-388.892444-543.857778-330.012444A446.805333 446.805333 0 0 0 124.546844 295.253333a39.139556 39.139556 0 0 0 13.653334 53.077334 39.310222 39.310222 0 0 0 18.944 5.233777c13.084444 0 25.201778-6.826667 32.540444-18.375111a374.158222 374.158222 0 0 1 359.480889-183.978666 381.952 381.952 0 0 1 337.351111 334.279111 384.568889 384.568889 0 0 1-3.128889 115.086222v2.616889a38.855111 38.855111 0 0 0 21.560889 48.355555c19.456 6.826667 41.528889-3.185778 48.355556-22.641777l68.835555-192.284445a39.310222 39.310222 0 0 0-22.584889-48.924444z m-148.764444 348.956444a38.115556 38.115556 0 0 0-31.004445 16.839111 373.077333 373.077333 0 0 1-355.214222 157.639111 381.212444 381.212444 0 0 1-323.185778-306.346666 396.344889 396.344889 0 0 1 0-140.856889v-1.592889a39.139556 39.139556 0 0 0-22.072888-48.355556 38.058667 38.058667 0 0 0-48.355556 22.584889l-68.835556 191.317334a38.513778 38.513778 0 0 0 23.608889 48.867555c19.456 7.395556 40.96-3.128889 48.355556-22.584889v-3.697777c58.88 241.208889 302.705778 388.892444 543.914667 330.012444A448.739556 448.739556 0 0 0 881.851733 798.151111a38.684444 38.684444 0 0 0-8.362666-54.158222 31.857778 31.857778 0 0 0-22.641778-7.338667z"\n                p-id="41017"\n                fill="currentColor"\n              ></path>\n              <path\n                d="M310.687289 693.020444a50.517333 50.517333 0 0 0-33.166222 19.456 40.96 40.96 0 0 0 0 31.573334c1.592889 4.721778 3.697778 9.443556 6.257777 14.165333a26.794667 26.794667 0 0 0 13.198223 11.036445 30.833778 30.833778 0 0 0 12.060444 2.104888h5.290667c6.826667-1.080889 13.653333-2.616889 20.48-4.721777 15.758222-5.290667 32.028444-11.605333 48.924444-18.432 16.782222-6.826667 34.133333-15.758222 49.322667-23.608889 15.246222-7.907556 32.597333-17.863111 46.250667-26.282667 14.222222-8.419556 24.177778-15.758222 35.271111-24.177778 24.632889 19.456 50.915556 36.238222 78.791111 49.891556 33.621333 17.351111 68.835556 31.004444 105.073778 42.097778a56.32 56.32 0 0 0 20.48 3.640889 33.905778 33.905778 0 0 0 34.190222-26.282667 39.025778 39.025778 0 0 0-1.592889-35.726222 49.322667 49.322667 0 0 0-26.225778-18.375111 540.842667 540.842667 0 0 1-85.162667-33.621334 603.932444 603.932444 0 0 1-63.601777-38.912c20.48-23.096889 37.831111-48.355556 52.565333-75.662222a465.294222 465.294222 0 0 0 38.343111-98.304h49.436445a38.456889 38.456889 0 0 0 26.282666-12.060444 46.762667 46.762667 0 0 0 7.850667-26.282667 44.032 44.032 0 0 0-8.931556-28.899556 37.432889 37.432889 0 0 0-26.282666-11.036444H568.6784a116.167111 116.167111 0 0 0-9.500444-17.863111c-10.467556-12.629333-22.584889-25.770667-34.702223-38.912a47.786667 47.786667 0 0 0-27.818666-18.375111h-4.209778a36.636444 36.636444 0 0 0-24.177778 8.419555 35.896889 35.896889 0 0 0-18.375111 29.923556 51.2 51.2 0 0 0 16.270222 33.109333l6.314667 6.314667H315.352178a34.133333 34.133333 0 0 0-26.282667 12.629333 45.852444 45.852444 0 0 0-6.826667 26.282667c-0.512 10.467556 2.104889 20.48 7.907556 28.899555 6.826667 6.826667 16.270222 11.036444 26.282667 11.036445h47.274666c5.233778 15.758222 10.524444 32.028444 16.839111 47.786666a419.271111 419.271111 0 0 0 50.403556 94.094223c8.419556 11.036444 17.351111 22.584889 26.282667 33.109333a389.461333 389.461333 0 0 1-64.625778 39.936c-26.282667 12.629333-54.101333 23.096889-81.976889 32.028444z m131.299555-246.954666h140.344889c-6.826667 23.096889-16.839111 45.169778-28.387555 66.730666a325.290667 325.290667 0 0 1-39.936 55.751112 319.146667 319.146667 0 0 1-39.424-52.622223l-2.616889-4.209777a388.778667 388.778667 0 0 1-29.980445-65.649778z"\n                p-id="41018"\n                fill="currentColor"\n              ></path>\n            </svg>\n          </span>\n        </div>\n        <div class="voice2text" v-show="totext">\n          <div style="width: 100%; height: 1px; background-color: black; margin-top: 10px; margin-bottom: 8px"></div>\n          <span>{{ props.bubble?.content }}</span>\n        </div>\n      </div>\n      \x3c!-- transfer类型 --\x3e\n      <div v-if="props.bubble.msgtype == \'transfer\' && props.bubble.sender != \'user\'" class="give_money">\n        <div\n          style="\n            background-color: #4396f7;\n            height: 80px;\n            width: 100%;\n            color: #ffffff;\n            padding-top: 20px;\n            padding-left: 12px;\n            display: flex;\n            flex-direction: column;\n            gap: 5px;\n            position: relative;\n          "\n        >\n          <span>{{ props.bubble?.count }}</span>\n          <span>已转入你的余额</span>\n          <div\n            style="\n              border-radius: 50%;\n              background-color: #9fccf1;\n              width: 50px;\n              height: 50px;\n              position: absolute;\n              right: 10px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              top: 15px;\n            "\n          >\n            <svg\n              t="1738258225266"\n              class="icon"\n              viewBox="0 0 1024 1024"\n              version="1.1"\n              xmlns="http://www.w3.org/2000/svg"\n              p-id="4449"\n              width="33"\n              height="33"\n            >\n              <path\n                d="M954.014 510.695c-31.51 0.303-185.995-88.917-190.874-93.568-11.734-11.188-7.3-25.115 4.673-27.02s79.203-9.898 79.203-9.898c-41.318-110.437-133.518-198.636-254.527-227.223-193.138-45.643-392.87 83.827-437.013 281.424-0.38 1.685-3.047 21.83-19.045 21.191-10.83-0.432-46.309-14.539-59.136-20.556-14.644-6.868-18.601-5.094-14.16-27.201C113.37 156.643 370.632-12.653 617.554 45.272c204.919 48.063 347.27 225.878 362.91 428.477 2.619 27.151-11.203 36.797-26.451 36.944z m-322.516 55.059c20.284 0 36.729 16.427 36.729 36.727 0 20.265-16.445 36.729-36.729 36.729h-73.456v45.909c0 25.359-20.551 45.911-45.911 45.911-25.358 0-45.91-20.551-45.91-45.911V639.21h-73.456c-20.284 0-36.727-16.465-36.727-36.729 0-20.302 16.444-36.727 36.727-36.727h73.456v-36.73h-73.456c-20.284 0-36.727-16.461-36.727-36.726 0-20.3 16.444-36.729 36.727-36.729h73.456v-2.512l-81.508-81.491c-14.445-14.455-14.445-37.875 0-52.313s37.858-14.437 52.304 0l74.497 74.478 74.786-74.784c14.444-14.419 37.859-14.419 52.303 0 14.446 14.454 14.446 37.877 0 52.313l-80.558 80.559v3.749h73.456c20.284 0 36.729 16.429 36.729 36.729 0 20.267-16.445 36.726-36.729 36.726h-73.456v36.73h73.456z m-368.471 51.828c16.112 10.302 12.229 30.994-5.477 32.836s-73.153 6.725-73.153 6.725C228.353 760.157 317.44 841.379 432.63 868.585c193.137 45.623 390.651-77.582 434.806-275.179 0.906-4.054 0.877-3.418 2.457-12.122s4.139-21.945 21.142-16.052 58.475 18.085 71.394 21.539 11.465 8.548 9.846 20.553c-0.493 3.651-1.238 6.994-2.017 10.509-57.81 256.921-309.451 417.196-562.049 357.924-204.677-48.01-346.947-225.429-362.865-427.724-2.159-34.762 22.4-41.857 47.505-28.577 19.75 10.447 154.064 87.822 170.176 98.124z"\n                p-id="4450"\n                fill="#4090ee"\n              ></path>\n            </svg>\n          </div>\n        </div>\n        <div\n          style="\n            background-color: #ffffff;\n            width: 100%;\n            height: 30px;\n            color: #959598;\n            font-size: 13px;\n            padding-left: 10px;\n            padding-top: 8px;\n          "\n        >\n          QQ转账\n        </div>\n      </div>\n      <div v-if="props.bubble.msgtype == \'transfer\' && props.bubble.sender == \'user\'" class="give_money">\n        <div\n          style="\n            background-color: #4396f7;\n            height: 80px;\n            width: 100%;\n            color: #ffffff;\n            padding-top: 20px;\n            padding-left: 12px;\n            padding-right: 12px;\n            display: flex;\n            gap: 5px;\n            position: relative;\n          "\n        >\n          <div\n            style="\n              border-radius: 50%;\n              background-color: #9fccf1;\n              width: 50px;\n              min-width: 50px;\n              min-height: 50px;\n              height: 50px;\n              right: 10px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              top: 15px;\n            "\n          >\n            <svg\n              t="1738258225266"\n              class="icon"\n              viewBox="0 0 1024 1024"\n              version="1.1"\n              xmlns="http://www.w3.org/2000/svg"\n              p-id="4449"\n              width="33"\n              height="33"\n            >\n              <path\n                d="M954.014 510.695c-31.51 0.303-185.995-88.917-190.874-93.568-11.734-11.188-7.3-25.115 4.673-27.02s79.203-9.898 79.203-9.898c-41.318-110.437-133.518-198.636-254.527-227.223-193.138-45.643-392.87 83.827-437.013 281.424-0.38 1.685-3.047 21.83-19.045 21.191-10.83-0.432-46.309-14.539-59.136-20.556-14.644-6.868-18.601-5.094-14.16-27.201C113.37 156.643 370.632-12.653 617.554 45.272c204.919 48.063 347.27 225.878 362.91 428.477 2.619 27.151-11.203 36.797-26.451 36.944z m-322.516 55.059c20.284 0 36.729 16.427 36.729 36.727 0 20.265-16.445 36.729-36.729 36.729h-73.456v45.909c0 25.359-20.551 45.911-45.911 45.911-25.358 0-45.91-20.551-45.91-45.911V639.21h-73.456c-20.284 0-36.727-16.465-36.727-36.729 0-20.302 16.444-36.727 36.727-36.727h73.456v-36.73h-73.456c-20.284 0-36.727-16.461-36.727-36.726 0-20.3 16.444-36.729 36.727-36.729h73.456v-2.512l-81.508-81.491c-14.445-14.455-14.445-37.875 0-52.313s37.858-14.437 52.304 0l74.497 74.478 74.786-74.784c14.444-14.419 37.859-14.419 52.303 0 14.446 14.454 14.446 37.877 0 52.313l-80.558 80.559v3.749h73.456c20.284 0 36.729 16.429 36.729 36.729 0 20.267-16.445 36.726-36.729 36.726h-73.456v36.73h73.456z m-368.471 51.828c16.112 10.302 12.229 30.994-5.477 32.836s-73.153 6.725-73.153 6.725C228.353 760.157 317.44 841.379 432.63 868.585c193.137 45.623 390.651-77.582 434.806-275.179 0.906-4.054 0.877-3.418 2.457-12.122s4.139-21.945 21.142-16.052 58.475 18.085 71.394 21.539 11.465 8.548 9.846 20.553c-0.493 3.651-1.238 6.994-2.017 10.509-57.81 256.921-309.451 417.196-562.049 357.924-204.677-48.01-346.947-225.429-362.865-427.724-2.159-34.762 22.4-41.857 47.505-28.577 19.75 10.447 154.064 87.822 170.176 98.124z"\n                p-id="4450"\n                fill="#4090ee"\n              ></path>\n            </svg>\n          </div>\n          <div style="display: flex; flex-direction: column; gap: 5px; margin-left: 5px">\n            <span style="text-align: start">{{ props.bubble?.count }}</span>\n            <span style="text-align: start">已转入好友余额</span>\n          </div>\n        </div>\n        <div\n          style="\n            background-color: #ffffff;\n            width: 100%;\n            height: 30px;\n            color: #959598;\n            font-size: 13px;\n            padding-left: 10px;\n            padding-top: 8px;\n            text-align: start;\n          "\n        >\n          QQ转账\n        </div>\n      </div>\n    </div>\n    <div\n      v-if="props.bubble.sender == \'user\'"\n      class="user_avatar Chat_MyHead"\n      :style="`height: ${headSize}; width: ${headSize}; min-width: ${headSize}; background-size: cover;background-image:url(\'${sharedState.ST.userHead}\')`"\n    ></div>\n  </div>\n\n  \x3c!-- system类型 --\x3e\n  <div\n    v-if="props.bubble.msgtype == \'system\'"\n    style="color: #959597; font-size: 12px; text-align: center; margin-bottom: 20px"\n  >\n    {{ props.bubble?.content }}\n  </div>\n</template>\n\n<script setup>\nimport { defineProps, computed } from \'vue\';\nimport { sharedState, addQQNpc } from \'../../shared-state\';\nimport music from \'./music.vue\';\nconst props = defineProps({\n  bubble: {\n    type: Object,\n  },\n  isGroup: {\n    type: String,\n  },\n  senderinfo: {\n    type: Object,\n  },\n  isDouyin: {\n    type: Boolean,\n  },\n});\n\nif (\'sender\' in props.bubble == false) {\n  console.log(`这条消息没有sender:\\n${JSON.stringify(props.bubble)}`);\n}\n\nconst headUrl = computed(() => {\n  const name = props.bubble.sender;\n\n  if (props.isDouyin) {\n    if (props.senderinfo?.douyinHead) {\n      return props.senderinfo.douyinHead;\n    }\n    if (sharedState.QQ.chars[name]?.douyinHead) {\n      return sharedState.QQ.chars[name].douyinHead;\n    }\n  }\n\n  if (props.senderinfo?.head) {\n    return props.senderinfo?.head;\n  }\n\n  try {\n    if (name in sharedState.QQ.chars == false) {\n      return \'\';\n    }\n  } catch (e) {\n    console.error(`这里出的问题${e}`);\n  }\n\n  if (sharedState.QQ.chars[name]?.head) {\n    return sharedState.QQ.chars[name].head;\n  }\n  return \'\';\n});\n\nif (props.bubble?.sender && props.bubble?.sender != \'user\' && props.bubble?.sender in sharedState.QQ.chars == false) {\n  // 随机出现的路人\n  addQQNpc(props.bubble?.sender);\n}\n\nconst bubbleColor = computed(() => {\n  if (props.bubble.sender == \'user\') {\n    return sharedState.QQ.default.bubble;\n  }\n  if (props.bubble.sender in sharedState.QQ.chars) {\n    return sharedState.QQ.chars[props.bubble.sender].bubble;\n  }\n  const color = props.senderinfo?.bubble || sharedState.QQ.default.bubble;\n  return color;\n});\n\nconst textColor = computed(() => {\n  if (props.bubble.sender == \'user\') {\n    return sharedState.QQ.default.text;\n  }\n  if (props.bubble.sender in sharedState.QQ.chars) {\n    return sharedState.QQ.chars[props.bubble.sender].text;\n  }\n  const color = props.senderinfo?.text || sharedState.QQ.default.text;\n  return color;\n});\n\nlet totext = ref(false);\nfunction voice2text() {\n  totext.value = !totext.value;\n}\n\nfunction warpHandle(content) {\n  console.log(`warp:${content}`);\n  return content.replace(/\\n/g, \'<br>\');\n}\n\nfunction emojiHandle() {}\n\nconst fontSize = computed(() => {\n  if (sharedState.ST.isMobile) {\n    return \'13px\';\n  } else {\n    return \'15px\';\n  }\n});\n\nconst headSize = computed(() => {\n  if (sharedState.ST.isMobile) {\n    return \'32px\';\n  } else {\n    return \'40px\';\n  }\n});\n\nconst messageBottom = computed(() => {\n  if (sharedState.ST.isMobile) {\n    return \'10px\';\n  } else {\n    return \'20px\';\n  }\n});\n<\/script>\n\n<style>\n.QQ_chat_mymsg,\n.QQ_chat_charmsg {\n  margin-bottom: v-bind(messageBottom);\n}\n\n.QQ_chat_head {\n  width: v-bind(headSize);\n  height: v-bind(headSize);\n  border-radius: 50%;\n  background-size: cover;\n  min-width: v-bind(headSize);\n}\n\n.groupmsg {\n  margin-top: 6px;\n}\n\n.QQ_chat_msgdiv {\n  background-color: v-bind(bubbleColor);\n  span {\n    color: v-bind(textColor);\n  }\n  font-size: v-bind(fontSize);\n}\n</style>\n'],sourceRoot:''}]);const s=r},3566:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute('nonce',n)}},3842:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.douyin-chat-detail[data-v-09f996fe]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#161823;color:#fff;z-index:90;display:flex;flex-direction:column}.chat-header[data-v-09f996fe]{height:50px;display:flex;align-items:center;justify-content:space-between;padding:0 10px;border-bottom:1px solid #222;background-color:#161823;z-index:10}.back-btn[data-v-09f996fe],.chat-actions[data-v-09f996fe]{width:40px;height:100%;display:flex;align-items:center;justify-content:center}.chat-title[data-v-09f996fe]{font-size:16px;font-weight:600}.chat-messages[data-v-09f996fe]{flex:1;overflow-y:auto;padding:15px 0;display:flex;flex-direction:column}[data-v-09f996fe] .douyin-bubble-container{margin-bottom:15px}.time-stamp[data-v-09f996fe]{width:100%;text-align:center;font-size:12px;color:#666;margin:5px 0}.chat-input-area[data-v-09f996fe]{min-height:50px;padding:8px 10px;background-color:#161823;border-top:1px solid #222;display:flex;align-items:center;gap:10px}.input-wrapper[data-v-09f996fe]{flex:1;background-color:#252525;border-radius:20px;display:flex;align-items:center;padding:0 10px}.input-wrapper input[data-v-09f996fe]{flex:1;background:transparent;border:none;color:#fff;padding:10px 5px;outline:none;font-size:15px}.emoji-btn[data-v-09f996fe]{font-size:24px;color:#888;cursor:pointer}.send-btn[data-v-09f996fe]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer}\n','',{version:3,sources:['webpack://./src/柏柏同层/Douyin/chat_detail.vue'],names:[],mappings:'AAsKA,qCACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,UAAW,CACX,UAAW,CACX,YAAa,CACb,qBACF,CAEA,8BACE,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cAAe,CACf,4BAA6B,CAC7B,wBAAyB,CACzB,UACF,CAEA,0DAEE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,6BACE,cAAe,CACf,eACF,CAEA,gCACE,MAAO,CACP,eAAgB,CAChB,cAAe,CACf,YAAa,CACb,qBAEF,CAGA,2CACE,kBACF,CAEA,6BACE,UAAW,CACX,iBAAkB,CAClB,cAAe,CACf,UAAW,CACX,YACF,CAEA,kCACE,eAAgB,CAChB,gBAAiB,CACjB,wBAAyB,CACzB,yBAA0B,CAC1B,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,gCACE,MAAO,CACP,wBAAyB,CACzB,kBAAmB,CACnB,YAAa,CACb,kBAAmB,CACnB,cACF,CAEA,sCACE,MAAO,CACP,sBAAuB,CACvB,WAAY,CACZ,UAAW,CACX,gBAAiB,CACjB,YAAa,CACb,cACF,CAEA,4BACE,cAAe,CACf,UAAW,CACX,cACF,CAEA,2BACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cACF',sourcesContent:['<template>\n  <div class="douyin-chat-detail">\n    <div class="chat-header">\n      <div class="back-btn" @click="$emit(\'back\')">\n        <svg viewBox="0 0 1024 1024" width="24" height="24" fill="#ffffff">\n          <path\n            d="M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z"\n          />\n        </svg>\n      </div>\n      <div class="chat-title">{{ displayName }}</div>\n      <div class="chat-actions">\n        <svg viewBox="0 0 1024 1024" width="24" height="24" fill="#ffffff">\n          <path\n            d="M512 256a64 64 0 1 0 0-128 64 64 0 0 0 0 128z m0 320a64 64 0 1 0 0-128 64 64 0 0 0 0 128z m0 320a64 64 0 1 0 0-128 64 64 0 0 0 0 128z"\n          />\n        </svg>\n      </div>\n    </div>\n\n    <div ref="msgContainer" class="chat-messages">\n      <div v-for="(msg, index) in messages" :key="index" class="message-wrapper">\n        <div v-if="msg.msgtype === \'system\' || msg.msgtype === \'time\'" class="time-stamp">\n          {{ msg.content }}\n        </div>\n        <DouyinBubble\n          v-else\n          :bubble="msg"\n          :senderinfo="sharedState.QQ.chars[msg.sender]"\n          :isDouyin="true"\n        />\n      </div>\n    </div>\n\n    <div class="chat-input-area">\n      <div class="input-wrapper">\n        <input v-model="inputText" placeholder="发送消息..." type="text" @keyup.enter="sendMessage" />\n        <div class="emoji-btn">☺</div>\n      </div>\n      <div class="send-btn" :class="{ active: !!inputText.trim() }" @click="sendMessage">\n        <svg viewBox="0 0 1024 1024" width="24" height="24" :fill="inputText.trim() ? \'#fe2c55\' : \'#666\'">\n          <path\n            d="M925.3376 484.096L143.6672 96.256c-17.5616-8.704-38.656-5.12-52.48 8.8064-13.824 13.9264-17.152 35.2256-8.192 52.6336l113.1008 219.8016c4.608 8.96 13.2608 15.2064 23.1424 16.6912l320.6144 48.0256c17.5616 2.6112 17.5616 27.6992 0 30.3104l-320.6144 48.0256c-9.8816 1.4848-18.5344 7.7312-23.1424 16.6912L82.9952 757.0944c-8.96 17.408-5.632 38.7072 8.192 52.6336 8.704 8.7552 20.3264 13.2608 31.9488 13.2608 7.0656 0 14.1312-1.7408 20.5312-5.12l781.6704-387.84c17.2032-8.5504 28.0064-26.2144 28.0064-45.3632s-10.8032-36.8128-28.0064-45.3632z"\n          />\n        </svg>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed, nextTick, onMounted, ref, watch } from \'vue\';\nimport { sharedState } from \'../shared-state\';\nimport DouyinBubble from \'./bubble/bubble.vue\';\n\nconst props = defineProps<{\n  chatId: string;\n}>();\n\nconst emit = defineEmits([\'back\']);\n\nconst inputText = ref(\'\');\nconst msgContainer = ref<HTMLElement | null>(null);\n\n// 【修改点1】从 QQ.chars 获取角色信息是通用的，不需要改，但显示名称优先取 douyinName\nconst charInfo = computed(() => {\n  // 1. 直接匹配 ID\n  if (sharedState.QQ.chars[props.chatId]) {\n    return sharedState.QQ.chars[props.chatId];\n  }\n  // 2. 尝试匹配 name (备注)\n  const found = Object.values(sharedState.QQ.chars).find((c: any) => c.name === props.chatId);\n  if (found) return found;\n\n  return {};\n});\n\nconst displayName = computed(() => {\n  const info = charInfo.value;\n  // 1. 优先显示设置的抖音昵称\n  if (info.douyinName) return info.douyinName;\n\n  // 2. 如果是群聊，显示群名\n  if (info.chartype === \'Group\') return info.name || props.chatId;\n\n  // 3. 尝试反查 ID (key) 作为默认昵称\n  // 因为 info.name 可能是备注，而 key 通常是原始名字\n  const key = Object.keys(sharedState.QQ.chars).find(k => sharedState.QQ.chars[k] === info);\n  if (key) return key;\n\n  // 4. 其他情况（好友/NPC），直接返回 ID，避免显示备注\n  return props.chatId;\n});\n\n// 【修改点2】核心修复：数据源改为 sharedState.Douyin.chathistory\nconst messages = computed(() => {\n  return sharedState.Douyin.chathistory[props.chatId]?.msgs || [];\n});\n\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (msgContainer.value) {\n      msgContainer.value.scrollTop = msgContainer.value.scrollHeight;\n    }\n  });\n};\n\nonMounted(() => {\n  scrollToBottom();\n  // 【修改点3】清除抖音的未读红点\n  if (sharedState.Douyin.chathistory[props.chatId]) {\n    sharedState.Douyin.chathistory[props.chatId].unread = 0;\n  }\n});\n\nwatch(\n  messages,\n  () => {\n    scrollToBottom();\n  },\n  { deep: true },\n);\n\nconst sendMessage = () => {\n  const text = inputText.value.trim();\n  if (!text) return;\n\n  const currentTime = new Date().toLocaleTimeString(\'en-US\', { hour12: false, hour: \'2-digit\', minute: \'2-digit\' });\n  sharedState.Douyin.addMsg(props.chatId, {\n    msgtype: \'text\',\n    content: text,\n    sender: \'user\',\n    time: currentTime,\n  });\n\n  // 2. --- 修改这里 ---\n  // 修正 Prompt 格式为：ID|User|内容|时间\n  // 去掉原先多余的 "text" 字段，并添加当前时间\n\n  // 参考 QQ 的发送格式，只发送简单的描述文本\n  // 避免将 <douyin_msg> 示例格式直接暴露给 LLM，防止 LLM 在回复中模仿该格式\n  // 构建 XML 标签用于持久化存储 (Sender|Recipient|Content|Time)\n  const msgTag = `\n<douyin_msg>{{user}}|${props.chatId}|${text}|${currentTime}</douyin_msg>`;\n\n  const message = `\n{{user}}给${props.chatId}发送抖音私信：${text}${msgTag}`;\n\n  const val = $(\'#send_textarea\').val();\n  // 确保 old_content 是字符串\n  const old_content = (typeof val === \'string\' ? val : \'\').trim();\n  const new_content = old_content + message;\n\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  toastr.success(\'已生成私信指令，请点击发送\');\n\n  inputText.value = \'\';\n};\n\ndefineExpose({ scrollToBottom });\n<\/script>\n\n<style scoped>\n.douyin-chat-detail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #161823;\n  color: #fff;\n  z-index: 90;\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-header {\n  height: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 10px;\n  border-bottom: 1px solid #222;\n  background-color: #161823;\n  z-index: 10;\n}\n\n.back-btn,\n.chat-actions {\n  width: 40px;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.chat-title {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 15px 0; /* Removing horizontal padding as bubbles have their own */\n  display: flex;\n  flex-direction: column;\n  /* gap: 15px; Remove gap as bubbles have margin-bottom */\n}\n\n/* Override bubble margin to avoid double spacing if needed, but 15px margin is fine */\n:deep(.douyin-bubble-container) {\n  margin-bottom: 15px;\n}\n\n.time-stamp {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  color: #666;\n  margin: 5px 0;\n}\n\n.chat-input-area {\n  min-height: 50px;\n  padding: 8px 10px;\n  background-color: #161823;\n  border-top: 1px solid #222;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.input-wrapper {\n  flex: 1;\n  background-color: #252525;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  padding: 0 10px;\n}\n\n.input-wrapper input {\n  flex: 1;\n  background: transparent;\n  border: none;\n  color: #fff;\n  padding: 10px 5px;\n  outline: none;\n  font-size: 15px;\n}\n\n.emoji-btn {\n  font-size: 24px;\n  color: #888;\n  cursor: pointer;\n}\n\n.send-btn {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n</style>\n'],sourceRoot:''}]);const s=r},3866:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.tinder-container[data-v-7cc11f32]{width:100%;height:100%;background:#fff;display:flex;flex-direction:column;position:relative;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif}.header[data-v-7cc11f32]{height:50px;display:flex;justify-content:space-between;align-items:center;padding:0 15px;background:#fff;border-bottom:1px solid #f0f0f0}.logo[data-v-7cc11f32]{font-size:22px;font-weight:800;background:linear-gradient(to right,#fd297b,#ff655b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;cursor:pointer}.nav-icons[data-v-7cc11f32]{display:flex;gap:25px}.nav-icon[data-v-7cc11f32]{font-size:22px;color:#d4d8de;cursor:pointer;transition:color 0.2s}.nav-icon.active[data-v-7cc11f32]{color:#fe3c72}.explore-tab[data-v-7cc11f32]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#f4f6f8;overflow:hidden}.card-container[data-v-7cc11f32]{width:85%;height:70%;position:relative;margin-bottom:30px}.tinder-card[data-v-7cc11f32]{width:100%;height:100%;background:#fff;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.08);position:absolute;top:0;left:0;overflow:hidden;cursor:grab}.tinder-card[data-v-7cc11f32]:active{cursor:grabbing}.card-image[data-v-7cc11f32]{width:100%;height:70%;background-size:cover;background-position:center}.card-info[data-v-7cc11f32]{padding:12px 15px;height:30%;box-sizing:border-box}.card-name[data-v-7cc11f32]{font-size:20px;font-weight:700;margin-bottom:5px;color:#333}.card-bio[data-v-7cc11f32]{font-size:13px;color:#666;line-height:1.4;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.overlay[data-v-7cc11f32]{position:absolute;top:30px;padding:5px 12px;border:3px solid;border-radius:6px;font-size:28px;font-weight:800;opacity:0;z-index:10}.like[data-v-7cc11f32]{left:30px;color:#4cd964;border-color:#4cd964;transform:rotate(-15deg)}.nope[data-v-7cc11f32]{right:30px;color:#ff3b30;border-color:#ff3b30;transform:rotate(15deg)}.action-buttons[data-v-7cc11f32]{margin-top:10px;display:flex;gap:20px;align-items:center}.btn-nope[data-v-7cc11f32],.btn-like[data-v-7cc11f32],.btn-superlike[data-v-7cc11f32]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px;box-shadow:0 4px 10px rgba(0,0,0,0.08);cursor:pointer;background:#fff;transition:transform 0.1s}.btn-nope[data-v-7cc11f32]{color:#ff3b30}.btn-superlike[data-v-7cc11f32]{color:#3ca4ff;width:40px;height:40px;font-size:18px}.btn-like[data-v-7cc11f32]{color:#4cd964}.btn-nope[data-v-7cc11f32]:active,.btn-like[data-v-7cc11f32]:active,.btn-superlike[data-v-7cc11f32]:active,.btn-search[data-v-7cc11f32]:active,.btn-save[data-v-7cc11f32]:active{transform:scale(0.9)}.btn-search[data-v-7cc11f32],.btn-save[data-v-7cc11f32]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;box-shadow:0 4px 10px rgba(0,0,0,0.08);cursor:pointer;background:#f0f0f0;color:#666;transition:transform 0.1s}.no-profiles[data-v-7cc11f32]{display:flex;flex-direction:column;align-items:center;color:#999;margin-top:50px;z-index:10}.radar[data-v-7cc11f32]{width:50px;height:50px;border:3px solid #fe3c72;border-radius:50%;margin-bottom:15px;cursor:pointer}.radar.pulsing[data-v-7cc11f32]{animation:pulse 1.5s infinite}.matches-tab[data-v-7cc11f32]{flex:1;display:flex;flex-direction:column;background:#fff;overflow-y:auto}.matches-header[data-v-7cc11f32],.messages-header[data-v-7cc11f32]{padding:12px 15px;font-weight:700;color:#fe3c72;font-size:13px;text-transform:uppercase;letter-spacing:0.5px}.matches-list-horizontal[data-v-7cc11f32]{display:flex;gap:15px;padding:0 15px 15px;overflow-x:auto;border-bottom:1px solid #f5f5f5}.match-avatar-item[data-v-7cc11f32]{display:flex;flex-direction:column;align-items:center;width:60px;cursor:pointer}.match-avatar[data-v-7cc11f32]{width:56px;height:56px;border-radius:50%;background-size:cover;background-position:center;margin-bottom:6px;border:2px solid #fe3c72;padding:1px}.match-name-small[data-v-7cc11f32]{font-size:11px;color:#444;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;text-align:center}.messages-list[data-v-7cc11f32]{flex:1}.message-item[data-v-7cc11f32]{display:flex;padding:12px 15px;align-items:center;cursor:pointer;transition:background 0.2s}.message-item[data-v-7cc11f32]:hover{background:#fafafa}.msg-avatar[data-v-7cc11f32]{width:50px;height:50px;border-radius:50%;background-size:cover;background-position:center;margin-right:15px}.msg-content[data-v-7cc11f32]{flex:1;overflow:hidden}.msg-name[data-v-7cc11f32]{font-weight:600;margin-bottom:4px;font-size:15px;color:#222}.msg-preview[data-v-7cc11f32]{color:#888;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.unread-dot[data-v-7cc11f32]{width:8px;height:8px;background:#fe3c72;border-radius:50%}.profile-tab[data-v-7cc11f32]{flex:1;background:#f4f6f8;display:flex;flex-direction:column;align-items:center;position:relative;overflow-y:auto;padding-bottom:20px}.profile-header-bg[data-v-7cc11f32]{width:100%;height:140px;background:linear-gradient(135deg,#fd297b,#ff655b);position:absolute;top:0;left:0;z-index:0;border-bottom-left-radius:50% 20px;border-bottom-right-radius:50% 20px}.profile-content[data-v-7cc11f32]{width:100%;max-width:360px;padding:0 15px;display:flex;flex-direction:column;gap:15px;z-index:1;margin-top:100px;box-sizing:border-box}.profile-card-refined[data-v-7cc11f32]{background:#fff;border-radius:20px;padding:0 20px 25px;display:flex;flex-direction:column;align-items:center;box-shadow:0 10px 25px rgba(0,0,0,0.05)}.avatar-wrapper[data-v-7cc11f32]{position:relative;margin-top:-60px;margin-bottom:15px}.my-avatar-large[data-v-7cc11f32]{width:120px;height:120px;border-radius:50%;background-size:cover;background-position:center;border:5px solid #fff;box-shadow:0 5px 15px rgba(0,0,0,0.1);position:relative;cursor:pointer}.edit-avatar-hint[data-v-7cc11f32]{position:absolute;bottom:0;width:100%;text-align:center;background:rgba(0,0,0,0.5);color:white;font-size:12px;padding:4px 0;opacity:0;transition:opacity 0.2s}.my-avatar-large:hover .edit-avatar-hint[data-v-7cc11f32]{opacity:1}.profile-fields[data-v-7cc11f32]{width:100%}.field-group[data-v-7cc11f32]{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.refined-input[data-v-7cc11f32],.refined-textarea[data-v-7cc11f32]{width:100%;border:none;font-size:14px;color:#333;background:transparent;text-align:center;transition:all 0.3s ease;box-sizing:border-box}.name-input[data-v-7cc11f32]{font-size:20px;font-weight:700;margin-bottom:5px}.bio-input[data-v-7cc11f32]{height:50px;resize:none;font-family:inherit;color:#666;line-height:1.4}.refined-input[data-v-7cc11f32]:focus,.refined-textarea[data-v-7cc11f32]:focus{outline:none;background:#f9f9f9;border-radius:8px}.album-section[data-v-7cc11f32]{margin-top:10px}.section-header[data-v-7cc11f32]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.section-title[data-v-7cc11f32]{font-size:13px;font-weight:700;color:#888;text-transform:uppercase;letter-spacing:0.5px}.counter[data-v-7cc11f32]{background:#f0f0f0;color:#888;padding:2px 6px;border-radius:10px;font-size:11px;font-weight:600}.album-grid[data-v-7cc11f32]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.album-item[data-v-7cc11f32]{position:relative;width:100%;aspect-ratio:3/4;border-radius:10px;overflow:hidden;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:transform 0.2s;background:#eee}.album-item[data-v-7cc11f32]:active{transform:scale(0.96)}.album-img[data-v-7cc11f32]{width:100%;height:100%;background-size:cover;background-position:center}.album-text-content[data-v-7cc11f32]{position:absolute;bottom:0;left:0;width:100%;background:linear-gradient(to top,rgba(0,0,0,0.7) 0%,rgba(0,0,0,0) 100%);color:white;font-size:11px;font-weight:500;padding:15px 5px 5px;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.album-remove[data-v-7cc11f32]{position:absolute;top:4px;right:4px;background:rgba(0,0,0,0.4);color:white;border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:12px;opacity:0;transition:opacity 0.2s}.album-item:hover .album-remove[data-v-7cc11f32]{opacity:1}.album-add[data-v-7cc11f32]{width:100%;aspect-ratio:3/4;border:2px dashed #e0e0e0;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#fafafa;transition:border-color 0.2s}.album-add[data-v-7cc11f32]:hover{border-color:#fe3c72}.add-icon[data-v-7cc11f32]{font-size:24px;color:#ccc;font-weight:300}.album-add:hover .add-icon[data-v-7cc11f32]{color:#fe3c72}.modal-overlay[data-v-7cc11f32]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:200;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(2px)}.modal-content[data-v-7cc11f32]{background:white;padding:20px;border-radius:16px;width:80%;max-width:280px;box-shadow:0 10px 40px rgba(0,0,0,0.2)}.modal-content h3[data-v-7cc11f32]{margin:0 0 15px;font-size:16px;color:#333;text-align:center}.input-group[data-v-7cc11f32]{margin-bottom:12px}.input-group label[data-v-7cc11f32]{display:block;font-size:11px;color:#999;margin-bottom:4px;font-weight:600}.modal-input[data-v-7cc11f32]{width:100%;padding:10px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;box-sizing:border-box;outline:none}.modal-input[data-v-7cc11f32]:focus{border-color:#fe3c72}.modal-buttons[data-v-7cc11f32]{display:flex;justify-content:space-between;margin-top:20px;gap:10px}.modal-buttons button[data-v-7cc11f32]{flex:1;padding:10px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer}.cancel-btn[data-v-7cc11f32]{background:#f0f0f0;color:#666}.confirm-btn[data-v-7cc11f32]{background:#fe3c72;color:white}.settings-section.refined[data-v-7cc11f32]{background:#fff;border-radius:16px;padding:15px 20px;box-shadow:0 5px 15px rgba(0,0,0,0.03)}.settings-section.refined h3[data-v-7cc11f32]{font-size:12px;color:#aaa;font-weight:700;text-transform:uppercase;margin:0 0 10px;letter-spacing:1px}.settings-item[data-v-7cc11f32]{display:flex;align-items:center;padding:8px 0;cursor:pointer}.icon-box[data-v-7cc11f32]{width:36px;height:36px;border-radius:10px;background:#fff0f5;color:#fe3c72;display:flex;align-items:center;justify-content:center;font-size:18px;margin-right:12px}.setting-text[data-v-7cc11f32]{display:flex;flex-direction:column}.setting-text span[data-v-7cc11f32]{font-size:15px;font-weight:500;color:#333}.setting-text small[data-v-7cc11f32]{font-size:11px;color:#999;margin-top:2px}.chat-detail[data-v-7cc11f32]{position:absolute;top:0;left:0;width:100%;height:100%;background:#fff;z-index:100;display:flex;flex-direction:column}.chat-header[data-v-7cc11f32]{height:50px;border-bottom:1px solid #eee;display:flex;align-items:center;padding:0 10px}.back-btn[data-v-7cc11f32]{font-size:24px;color:#fe3c72;padding:10px;cursor:pointer}.chat-avatar[data-v-7cc11f32]{width:32px;height:32px;border-radius:50%;background-size:cover;background-position:center;margin:0 10px}.chat-name[data-v-7cc11f32]{font-weight:600;font-size:15px}.chat-messages[data-v-7cc11f32]{flex:1;overflow-y:auto;padding:15px;display:flex;flex-direction:column;gap:15px}.chat-row[data-v-7cc11f32]{display:flex;width:100%;gap:10px;align-items:flex-end}.row-sent[data-v-7cc11f32]{justify-content:flex-end}.row-received[data-v-7cc11f32]{justify-content:flex-start}.chat-avatar-small[data-v-7cc11f32]{width:32px;height:32px;border-radius:50%;background-size:cover;background-position:center;flex-shrink:0;cursor:pointer}.chat-bubble[data-v-7cc11f32]{max-width:70%;padding:10px 14px;border-radius:18px;font-size:15px;line-height:1.4;position:relative;word-wrap:break-word}.bubble-sent[data-v-7cc11f32]{background:linear-gradient(135deg,#fd297b,#ff655b);color:#fff;border-bottom-right-radius:4px}.bubble-received[data-v-7cc11f32]{background:#f1f2f6;color:#333;border-bottom-left-radius:4px}.chat-input-area[data-v-7cc11f32]{padding:10px;border-top:1px solid #eee;display:flex;gap:10px;align-items:center;background:#fff}.chat-input-area input[data-v-7cc11f32]{flex:1;padding:8px 15px;border-radius:20px;border:1px solid #ddd;outline:none;font-size:14px}.send-btn[data-v-7cc11f32]{color:#fe3c72;font-weight:600;cursor:pointer;padding:5px 10px;font-size:14px}.other-profile-overlay[data-v-7cc11f32]{position:absolute;top:0;left:0;width:100%;height:100%;background:#fff;z-index:150;overflow-y:auto;padding-bottom:20px}.other-profile-content[data-v-7cc11f32]{position:relative}.other-profile-close[data-v-7cc11f32]{position:absolute;top:15px;right:15px;width:30px;height:30px;background:rgba(0,0,0,0.5);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10}.other-avatar[data-v-7cc11f32]{width:100%;height:350px;background-size:cover;background-position:center;border-bottom-left-radius:20px;border-bottom-right-radius:20px}.other-info[data-v-7cc11f32]{padding:15px 20px}.other-name[data-v-7cc11f32]{font-size:26px;font-weight:800;color:#333;margin-bottom:5px;display:flex;align-items:center;gap:10px}.edit-icon[data-v-7cc11f32]{font-size:16px;color:#fe3c72;cursor:pointer;opacity:0.6}.edit-icon[data-v-7cc11f32]:hover{opacity:1}.other-bio[data-v-7cc11f32]{font-size:14px;color:#666;line-height:1.5}.other-actions[data-v-7cc11f32]{position:fixed;bottom:20px;left:0;width:100%;display:flex;justify-content:center;padding-bottom:10px;pointer-events:none}.btn-like-small[data-v-7cc11f32]{pointer-events:auto;background:linear-gradient(45deg,#fd297b,#ff655b);color:white;padding:10px 40px;border-radius:30px;font-weight:700;letter-spacing:1px;box-shadow:0 5px 15px rgba(253,41,123,0.3);cursor:pointer;transition:transform 0.1s}.btn-like-small[data-v-7cc11f32]:active{transform:scale(0.95)}.btn-message-small[data-v-7cc11f32]{pointer-events:auto;background:linear-gradient(45deg,#2196f3,#00bcd4);color:white;padding:10px 40px;border-radius:30px;font-weight:700;letter-spacing:1px;box-shadow:0 5px 15px rgba(33,150,243,0.3);cursor:pointer;transition:transform 0.1s}.btn-message-small[data-v-7cc11f32]:active{transform:scale(0.95)}.view-profile-btn[data-v-7cc11f32]{position:absolute;bottom:15px;right:15px;background:rgba(255,255,255,0.8);padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;color:#333;cursor:pointer}.text-album[data-v-7cc11f32]{display:flex;align-items:center;justify-content:center;padding:10px;box-sizing:border-box}.album-text-content-centered[data-v-7cc11f32]{font-size:12px;font-weight:600;color:#444;text-align:center;word-break:break-word;line-height:1.4;max-height:100%;overflow:hidden}.album-text-content[data-v-7cc11f32]{display:none}\n','',{version:3,sources:['webpack://./src/柏柏同层/Tinder/Tinder.vue'],names:[],mappings:'AAijCA,mCACE,UAAW,CACX,WAAY,CACZ,eAAgB,CAChB,YAAa,CACb,qBAAsB,CACtB,iBAAkB,CAClB,eAAgB,CAChB,yFACF,CAEA,yBACE,WAAY,CACZ,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,eAAgB,CAChB,+BACF,CAEA,uBACE,cAAe,CACf,eAAgB,CAChB,oDAAuD,CACvD,4BAA6B,CAC7B,mCAAoC,CACpC,cACF,CAEA,4BACE,YAAa,CACb,QACF,CAEA,2BACE,cAAe,CACf,aAAc,CACd,cAAe,CACf,qBACF,CAEA,kCACE,aACF,CAGA,8BACE,MAAO,CACP,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CAEvB,kBAAmB,CACnB,eACF,CAEA,iCACE,SAAU,CACV,UAAW,CAGX,iBAAkB,CAClB,kBACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,sCAA0C,CAC1C,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,eAAgB,CAChB,WACF,CAEA,qCACE,eACF,CAEA,6BACE,UAAW,CACX,UAAW,CACX,qBAAsB,CACtB,0BACF,CAEA,4BACE,iBAAkB,CAClB,UAAW,CACX,qBACF,CAEA,4BACE,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,UACF,CAEA,2BACE,cAAe,CACf,UAAW,CACX,eAAgB,CAChB,eAAgB,CAChB,sBAAuB,CACvB,mBAAoB,CACpB,oBAAqB,CACrB,2BACF,CAEA,0BACE,iBAAkB,CAClB,QAAS,CACT,gBAAiB,CACjB,gBAAiB,CACjB,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,SAAU,CACV,UACF,CAEA,uBACE,SAAU,CACV,aAAc,CACd,oBAAqB,CACrB,wBACF,CAEA,uBACE,UAAW,CACX,aAAc,CACd,oBAAqB,CACrB,uBACF,CAEA,iCACE,eAAgB,CAChB,YAAa,CACb,QAAS,CACT,kBACF,CAEA,sFAGE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,sCAA0C,CAC1C,cAAe,CACf,eAAgB,CAChB,yBACF,CAEA,2BACE,aACF,CACA,gCACE,aAAc,CACd,UAAW,CACX,WAAY,CACZ,cACF,CACA,2BACE,aACF,CAEA,iLAKE,oBACF,CAEA,wDAEE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,sCAA0C,CAC1C,cAAe,CACf,kBAAmB,CACnB,UAAW,CACX,yBACF,CAEA,8BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,UAAW,CACX,eAAgB,CAChB,UACF,CAEA,wBACE,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,iBAAkB,CAClB,kBAAmB,CAEnB,cACF,CAEA,gCACE,6BACF,CAGA,8BACE,MAAO,CACP,YAAa,CACb,qBAAsB,CACtB,eAAgB,CAChB,eACF,CAEA,mEAEE,iBAAkB,CAClB,eAAgB,CAChB,aAAc,CACd,cAAe,CACf,wBAAyB,CACzB,oBACF,CAEA,0CACE,YAAa,CACb,QAAS,CACT,mBAAoB,CACpB,eAAgB,CAChB,+BACF,CAEA,oCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,UAAW,CACX,cACF,CAEA,+BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,iBAAkB,CAClB,wBAAyB,CACzB,WACF,CAEA,mCACE,cAAe,CACf,UAAW,CACX,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CACnB,UAAW,CACX,iBACF,CAEA,gCACE,MACF,CAEA,+BACE,YAAa,CACb,iBAAkB,CAClB,kBAAmB,CACnB,cAAe,CACf,0BACF,CAEA,qCACE,kBACF,CAEA,6BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,iBACF,CAEA,8BACE,MAAO,CACP,eACF,CAEA,2BACE,eAAgB,CAChB,iBAAkB,CAClB,cAAe,CACf,UACF,CAEA,8BACE,UAAW,CACX,cAAe,CACf,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,6BACE,SAAU,CACV,UAAW,CACX,kBAAmB,CACnB,iBACF,CAGA,8BACE,MAAO,CACP,kBAAmB,CACnB,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,iBAAkB,CAClB,eAAgB,CAChB,mBACF,CAEA,oCACE,UAAW,CACX,YAAa,CACb,kDAAqD,CACrD,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,SAAU,CACV,kCAAmC,CACnC,mCACF,CAEA,kCACE,UAAW,CACX,eAAgB,CAChB,cAAe,CACf,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,SAAU,CACV,gBAAiB,CACjB,qBACF,CAEA,uCACE,eAAgB,CAChB,kBAAmB,CACnB,mBAAoB,CACpB,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,uCACF,CAEA,iCACE,iBAAkB,CAClB,gBAAiB,CACjB,kBACF,CAEA,kCACE,WAAY,CACZ,YAAa,CACb,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,qBAAsB,CACtB,qCAAyC,CACzC,iBAAkB,CAClB,cACF,CAEA,mCACE,iBAAkB,CAClB,QAAS,CACT,UAAW,CACX,iBAAkB,CAClB,0BAA8B,CAC9B,WAAY,CACZ,cAAe,CACf,aAAc,CACd,SAAU,CACV,uBACF,CAEA,0DACE,SACF,CAEA,iCACE,UACF,CAEA,8BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,kBACF,CAEA,mEAEE,UAAW,CACX,WAAY,CACZ,cAAe,CACf,UAAW,CACX,sBAAuB,CACvB,iBAAkB,CAClB,wBAAyB,CACzB,qBACF,CAEA,6BACE,cAAe,CACf,eAAgB,CAChB,iBACF,CAEA,4BACE,WAAY,CACZ,WAAY,CACZ,mBAAoB,CACpB,UAAW,CACX,eACF,CAEA,+EAEE,YAAa,CACb,kBAAmB,CACnB,iBACF,CAGA,gCACE,eACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,kBACF,CAEA,gCACE,cAAe,CACf,eAAgB,CAChB,UAAW,CACX,wBAAyB,CACzB,oBACF,CAEA,0BACE,kBAAmB,CACnB,UAAW,CACX,eAAgB,CAChB,kBAAmB,CACnB,cAAe,CACf,eACF,CAEA,6BACE,YAAa,CACb,mCAAqC,CACrC,QACF,CAEA,6BACE,iBAAkB,CAClB,UAAW,CACX,gBAAiB,CACjB,kBAAmB,CACnB,eAAgB,CAChB,cAAe,CACf,oCAAwC,CACxC,yBAA0B,CAC1B,eACF,CAEA,oCACE,qBACF,CAEA,4BACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,0BACF,CAEA,qCACE,iBAAkB,CAClB,QAAS,CACT,MAAO,CACP,UAAW,CACX,wEAAiF,CACjF,WAAY,CACZ,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,qBAAsB,CACtB,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,+BACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,0BAA8B,CAC9B,WAAY,CACZ,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,SAAU,CACV,uBACF,CAEA,iDACE,SACF,CAEA,4BACE,UAAW,CACX,gBAAiB,CACjB,yBAA0B,CAC1B,kBAAmB,CACnB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,kBAAmB,CACnB,4BACF,CAEA,kCACE,oBACF,CAEA,2BACE,cAAe,CACf,UAAW,CACX,eACF,CAEA,4CACE,aACF,CAGA,gCACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,0BAA8B,CAC9B,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,yBACF,CAEA,gCACE,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,SAAU,CACV,eAAgB,CAChB,sCACF,CAEA,mCACE,eAAgB,CAChB,cAAe,CACf,UAAW,CACX,iBACF,CAEA,8BACE,kBACF,CAEA,oCACE,aAAc,CACd,cAAe,CACf,UAAW,CACX,iBAAkB,CAClB,eACF,CAEA,8BACE,UAAW,CACX,YAAa,CACb,wBAAyB,CACzB,iBAAkB,CAClB,cAAe,CACf,qBAAsB,CACtB,YACF,CAEA,oCACE,oBACF,CAEA,gCACE,YAAa,CACb,6BAA8B,CAC9B,eAAgB,CAChB,QACF,CAEA,uCACE,MAAO,CACP,YAAa,CACb,WAAY,CACZ,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,cACF,CAEA,6BACE,kBAAmB,CACnB,UACF,CAEA,8BACE,kBAAmB,CACnB,WACF,CAGA,2CACE,eAAgB,CAChB,kBAAmB,CACnB,iBAAkB,CAClB,sCACF,CAEA,8CACE,cAAe,CACf,UAAW,CACX,eAAgB,CAChB,wBAAyB,CACzB,eAAgB,CAChB,kBACF,CAEA,gCACE,YAAa,CACb,kBAAmB,CACnB,aAAc,CACd,cACF,CAEA,2BACE,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,kBAAmB,CACnB,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,iBACF,CAEA,+BACE,YAAa,CACb,qBACF,CAEA,oCACE,cAAe,CACf,eAAgB,CAChB,UACF,CAEA,qCACE,cAAe,CACf,UAAW,CACX,cACF,CAGA,8BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,eAAgB,CAChB,WAAY,CACZ,YAAa,CACb,qBACF,CAEA,8BACE,WAAY,CACZ,4BAA6B,CAC7B,YAAa,CACb,kBAAmB,CACnB,cACF,CAEA,2BACE,cAAe,CACf,aAAc,CACd,YAAa,CACb,cACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aACF,CAEA,4BACE,eAAgB,CAChB,cACF,CAEA,gCACE,MAAO,CACP,eAAgB,CAChB,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,2BACE,YAAa,CACb,UAAW,CACX,QAAS,CACT,oBACF,CAEA,2BACE,wBACF,CAEA,+BACE,0BACF,CAEA,oCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aAAc,CACd,cACF,CAEA,8BACE,aAAc,CACd,iBAAkB,CAClB,kBAAmB,CACnB,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,oBACF,CAEA,8BACE,kDAAqD,CACrD,UAAW,CACX,8BACF,CAEA,kCACE,kBAAmB,CACnB,UAAW,CACX,6BACF,CAEA,kCACE,YAAa,CACb,yBAA0B,CAC1B,YAAa,CACb,QAAS,CACT,kBAAmB,CACnB,eACF,CAEA,wCACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,qBAAsB,CACtB,YAAa,CACb,cACF,CAEA,2BACE,aAAc,CACd,eAAgB,CAChB,cAAe,CACf,gBAAiB,CACjB,cACF,CAGA,wCACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,eAAgB,CAChB,WAAY,CACZ,eAAgB,CAChB,mBACF,CAEA,wCACE,iBACF,CAEA,sCACE,iBAAkB,CAClB,QAAS,CACT,UAAW,CACX,UAAW,CACX,WAAY,CACZ,0BAA8B,CAC9B,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,UACF,CAEA,+BACE,UAAW,CACX,YAAa,CACb,qBAAsB,CACtB,0BAA2B,CAC3B,8BAA+B,CAC/B,+BACF,CAEA,6BACE,iBACF,CAEA,6BACE,cAAe,CACf,eAAgB,CAChB,UAAW,CACX,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,4BACE,cAAe,CACf,aAAc,CACd,cAAe,CACf,WACF,CAEA,kCACE,SACF,CAEA,4BACE,cAAe,CACf,UAAW,CACX,eACF,CAEA,gCACE,cAAe,CACf,WAAY,CACZ,MAAO,CACP,UAAW,CACX,YAAa,CACb,sBAAuB,CACvB,mBAAoB,CACpB,mBACF,CAEA,iCACE,mBAAoB,CACpB,iDAAoD,CACpD,WAAY,CACZ,iBAAkB,CAClB,kBAAmB,CACnB,eAAgB,CAChB,kBAAmB,CACnB,0CAA8C,CAC9C,cAAe,CACf,yBACF,CAEA,wCACE,qBACF,CAEA,oCACE,mBAAoB,CACpB,iDAAoD,CACpD,WAAY,CACZ,iBAAkB,CAClB,kBAAmB,CACnB,eAAgB,CAChB,kBAAmB,CACnB,0CAA8C,CAC9C,cAAe,CACf,yBACF,CAEA,2CACE,qBACF,CAEA,mCACE,iBAAkB,CAClB,WAAY,CACZ,UAAW,CACX,gCAAoC,CACpC,eAAgB,CAChB,kBAAmB,CACnB,cAAe,CACf,eAAgB,CAChB,UAAW,CACX,cACF,CAEA,6BACE,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,YAAa,CACb,qBACF,CAEA,8CACE,cAAe,CACf,eAAgB,CAChB,UAAW,CACX,iBAAkB,CAClB,qBAAsB,CACtB,eAAgB,CAChB,eAAgB,CAChB,eACF,CAEA,qCACE,YACF',sourcesContent:['<template>\n  <div v-show="sharedState.phone.activeApp == \'Tinder\'" class="tinder-container">\n    <div class="header">\n      <div class="logo" @click="goHome">🔥 Tinder</div>\n      <div class="nav-icons">\n        <div class="nav-icon" :class="{ active: currentTab === \'explore\' }" @click="currentTab = \'explore\'">🔍</div>\n        <div class="nav-icon" :class="{ active: currentTab === \'matches\' }" @click="currentTab = \'matches\'">💬</div>\n        <div class="nav-icon" :class="{ active: currentTab === \'profile\' }" @click="currentTab = \'profile\'">👤</div>\n      </div>\n    </div>\n\n    <div v-if="currentTab === \'explore\'" class="explore-tab">\n      <div v-if="currentProfile" class="card-container">\n        <div\n          class="tinder-card"\n          :style="{\n            transform: `translateX(${dragX}px) rotate(${dragX * 0.05}deg)`,\n            transition: isDragging ? \'none\' : \'transform 0.3s ease\',\n          }"\n          @mousedown="startDrag"\n          @touchstart="startDrag"\n          @mousemove="onDrag"\n          @touchmove="onDrag"\n          @mouseup="endDrag"\n          @touchend="endDrag"\n          @mouseleave="endDrag"\n        >\n          <div class="card-image" :style="`background-image: url(\'${currentProfile.head || defaultHead}\')`"></div>\n\n          <div class="card-info">\n            <div class="card-name">\n              {{ currentProfile.name }}\n            </div>\n            <div class="card-bio">{{ currentProfile.bio || \'No bio yet.\' }}</div>\n          </div>\n\n          <div class="view-profile-btn" @click.stop="openOtherProfile(currentProfile)">Info ⓘ</div>\n\n          <div class="overlay nope" :style="{ opacity: dragX < 0 ? Math.min(Math.abs(dragX) / 100, 1) : 0 }">NOPE</div>\n          <div class="overlay like" :style="{ opacity: dragX > 0 ? Math.min(Math.abs(dragX) / 100, 1) : 0 }">YES</div>\n        </div>\n      </div>\n\n      <div v-else class="no-profiles">\n        <div class="radar" :class="{ pulsing: isGenerating }" @click="generateStrangers"></div>\n        <p v-if="isGenerating">Searching for new people...</p>\n        <p v-else style="cursor: pointer; text-decoration: underline" @click="generateStrangers">\n          Tap radar to find more people\n        </p>\n      </div>\n\n      <div class="action-buttons">\n        <div class="btn-nope" @click="swipeLeft">✖</div>\n        <div class="btn-superlike" @click="superLike">⭐</div>\n        <div class="btn-like" @click="swipeRight">♥</div>\n        <div class="btn-search" title="Find New People" @click="generateStrangers">🔍</div>\n        <div class="btn-save" title="Save Card" @click="saveCardImage">💾</div>\n      </div>\n    </div>\n\n    <div v-if="currentTab === \'matches\'" class="matches-tab">\n      <div class="matches-header">New Matches</div>\n      <div class="matches-list-horizontal">\n        <div\n          v-for="match in sharedState.Tinder.matches"\n          :key="match.id"\n          class="match-avatar-item"\n          @click="openOtherProfile(match)"\n        >\n          <div class="match-avatar" :style="`background-image: url(\'${match.head || defaultHead}\')`"></div>\n          <div class="match-name-small">{{ match.name }}</div>\n        </div>\n        <div v-if="sharedState.Tinder.matches.length === 0" class="no-matches-hint">No matches yet</div>\n      </div>\n\n      <div class="messages-header">Messages</div>\n      <div class="messages-list">\n        <div\n          v-for="(chat, id) in sharedState.Tinder.chathistory"\n          :key="id"\n          class="message-item"\n          @click="openChat({ id: id })"\n        >\n          <div class="msg-avatar" :style="`background-image: url(\'${getHead(String(id))}\')`"></div>\n          <div class="msg-content">\n            <div class="msg-name">{{ getDisplayName(String(id)) }}</div>\n            <div class="msg-preview">{{ chat.lastMsg }}</div>\n          </div>\n          <div v-if="chat.unread" class="unread-dot"></div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="currentTab === \'profile\'" class="profile-tab">\n      <div class="profile-header-bg"></div>\n      <div class="profile-content">\n        <div class="profile-card-refined">\n          <div class="avatar-wrapper">\n            <div\n              class="my-avatar-large"\n              :style="`background-image: url(\'${sharedState.Tinder.userHead || sharedState.ST.userHead || defaultHead}\')`"\n              @click="editAvatar"\n            >\n              <div class="edit-avatar-hint">Edit</div>\n            </div>\n          </div>\n\n          <div class="profile-fields">\n            <div class="field-group">\n              <input\n                v-model="userName"\n                type="text"\n                placeholder="Your Name"\n                class="refined-input name-input"\n                @change="saveProfile"\n              />\n              <textarea\n                v-model="userBio"\n                placeholder="Write something about yourself..."\n                class="refined-textarea bio-input"\n                @change="saveProfile"\n              ></textarea>\n            </div>\n\n            <div class="album-section">\n              <div class="section-header">\n                <span class="section-title">My Text-Moments</span>\n                <span class="counter">{{ userAlbum.length }}</span>\n              </div>\n              <div class="album-grid">\n                <div\n                  v-for="(photo, index) in userAlbum"\n                  :key="index"\n                  class="album-item text-album"\n                  :style="{ background: photo.bg || \'#eee\' }"\n                >\n                  <div class="album-text-content-centered">\n                    <span>{{ photo.text }}</span>\n                  </div>\n                  <div class="album-remove" @click.stop="removePhoto(index)">✖</div>\n                </div>\n                <div class="album-add" @click="openAddPhoto(\'user\')">\n                  <div class="add-icon">+</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="settings-section refined">\n          <h3>Settings</h3>\n          <div class="settings-item" @click="resetMatches">\n            <div class="icon-box">↺</div>\n            <div class="setting-text">\n              <span>Reset Matches</span>\n              <small>Start over with everyone</small>\n            </div>\n          </div>\n          <div class="settings-item" @click="deleteAccount">\n            <div class="icon-box" style="color: #ff3b30; background: #fff0f0">✖</div>\n            <div class="setting-text">\n              <span style="color: #ff3b30">Delete Account</span>\n              <small>Permanently delete your account</small>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="showAddPhoto" class="modal-overlay" @click.self="showAddPhoto = false">\n      <div class="modal-content">\n        <h3>Add to Album</h3>\n        <div class="input-group">\n          <label>Text / Caption</label>\n          <input v-model="newPhotoText" placeholder="Say something..." class="modal-input" />\n        </div>\n        <div class="modal-buttons">\n          <button class="cancel-btn" @click="showAddPhoto = false">Cancel</button>\n          <button class="confirm-btn" @click="addPhoto">Add</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="showEditAvatar" class="modal-overlay" @click.self="showEditAvatar = false">\n      <div class="modal-content">\n        <h3>Edit Profile Picture</h3>\n        <div class="input-group">\n          <label>Image URL</label>\n          <input v-model="newAvatarUrl" placeholder="https://..." class="modal-input" />\n        </div>\n        <div class="modal-buttons">\n          <button class="cancel-btn" @click="showEditAvatar = false">Cancel</button>\n          <button class="confirm-btn" @click="saveAvatar">Save</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="showDeleteAccount" class="modal-overlay" @click.self="showDeleteAccount = false">\n      <div class="modal-content">\n        <h3>Delete Account</h3>\n        <p style="font-size: 13px; color: #666; margin-bottom: 15px">Are you sure? This cannot be undone.</p>\n        <div class="input-group">\n          <label>Reason for leaving (Optional)</label>\n          <textarea\n            v-model="deleteReason"\n            placeholder="I found someone..."\n            class="modal-input"\n            style="height: 60px; resize: none"\n          ></textarea>\n        </div>\n        <div class="modal-buttons">\n          <button class="cancel-btn" @click="showDeleteAccount = false">Cancel</button>\n          <button class="confirm-btn" style="background: #ff3b30" @click="confirmDeleteAccount">Delete</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="activeChatMatch" class="chat-detail">\n      <div class="chat-header">\n        <div class="back-btn" @click="closeChat">←</div>\n        <div\n          class="chat-avatar"\n          :style="`background-image: url(\'${getHead(activeChatMatch.id)}\')`"\n          @click="goToProfileFromChat"\n        ></div>\n        <div class="chat-name" @click="goToProfileFromChat">{{ getDisplayName(activeChatMatch.id) }}</div>\n      </div>\n\n      <div ref="chatContainer" class="chat-messages">\n        <bubble\n          v-for="(msg, index) in currentChatMsgs"\n          :key="index"\n          :bubble="msg"\n          :is-group="\'Private\'"\n          :senderinfo="activeChatMatch"\n        ></bubble>\n      </div>\n\n      <div class="chat-input-area">\n        <input v-model="chatInput" placeholder="Type a message..." @keyup.enter="sendMessage" />\n        <div class="send-btn" @click="sendMessage">Send</div>\n      </div>\n    </div>\n\n    <div v-if="otherProfile" class="other-profile-overlay">\n      <div class="other-profile-content">\n        <div class="other-profile-close" @click="closeOtherProfile">✖</div>\n\n        <div v-if="!isEditingOther">\n          <div class="other-avatar" :style="`background-image: url(\'${otherProfile.head}\')`"></div>\n          <div class="other-info">\n            <div class="other-name">\n              {{ otherProfile.name }}\n              <span class="edit-icon" @click="startEditOther">✎</span>\n            </div>\n            <div class="other-bio">{{ otherProfile.bio }}</div>\n          </div>\n        </div>\n        <div v-else class="other-info">\n          <div class="input-group">\n            <label>Avatar URL</label>\n            <input v-model="editOtherHead" class="modal-input" />\n          </div>\n          <div class="input-group">\n            <label>Name</label>\n            <input v-model="editOtherName" class="modal-input" />\n          </div>\n          <div class="input-group">\n            <label>Bio</label>\n            <textarea v-model="editOtherBio" class="modal-input" style="height: 60px"></textarea>\n          </div>\n\n          <div class="album-section">\n            <div class="section-header">\n              <span class="section-title">Moments</span>\n            </div>\n            <div class="album-grid">\n              <div\n                v-for="(photo, index) in otherProfile.album"\n                :key="index"\n                class="album-item text-album"\n                :style="{ background: photo.bg || \'#eee\' }"\n              >\n                <div class="album-text-content-centered">\n                  <span>{{ photo.text }}</span>\n                </div>\n                <div class="album-remove" @click.stop="removePhotoFromOther(index)">✖</div>\n              </div>\n              <div class="album-add" @click="openAddPhoto(\'other\')">\n                <div class="add-icon">+</div>\n              </div>\n            </div>\n          </div>\n\n          <div class="modal-buttons">\n            <button class="cancel-btn" @click="isEditingOther = false">Cancel</button>\n            <button class="confirm-btn" @click="saveOtherProfile">Save</button>\n          </div>\n        </div>\n\n        <div v-if="!isEditingOther" class="album-section">\n          <div class="section-header">\n            <span class="section-title">Moments</span>\n          </div>\n          <div class="album-grid">\n            <div\n              v-for="(photo, index) in otherProfile.album"\n              :key="index"\n              class="album-item text-album"\n              :style="{ background: photo.bg || \'#eee\' }"\n            >\n              <div class="album-text-content-centered">\n                <span>{{ photo.text }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="other-actions">\n          <div\n            v-if="!isMatched(otherProfile) && currentProfile && currentProfile.name === otherProfile.name"\n            class="btn-like-small"\n            @click="\n              () => {\n                swipeRight();\n                closeOtherProfile();\n              }\n            "\n          >\n            LIKE\n          </div>\n          <div v-else-if="isMatched(otherProfile)" class="btn-message-small" @click="startChatFromProfile">MESSAGE</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport html2canvas from \'html2canvas\';\nimport toastr from \'toastr\';\nimport { computed, nextTick, onMounted, ref, watch } from \'vue\';\nimport { sharedState } from \'../shared-state\';\nimport bubble from \'./bubble/bubble.vue\';\n\nconst currentTab = ref(\'explore\');\nconst defaultHead = \'https://sharkpan.xyz/f/k7eU6/ComfyUI_00033_.png\'; // Fallback\nconst userBio = ref(sharedState.Tinder.userBio || \'\');\nconst userName = ref(sharedState.Tinder.userName || sharedState.ST.userName);\nconst userAlbum = ref(sharedState.Tinder.userAlbum || []);\nconst showAddPhoto = ref(false);\nconst addPhotoTarget = ref<\'user\' | \'other\'>(\'user\'); // Track where to add photo\nconst showEditAvatar = ref(false);\nconst showDeleteAccount = ref(false);\nconst newPhotoText = ref(\'\');\nconst newAvatarUrl = ref(\'\');\nconst deleteReason = ref(\'\');\nconst otherProfile = ref<any>(null); // For viewing other user\'s profile\nconst isEditingOther = ref(false);\nconst editOtherName = ref(\'\');\nconst editOtherBio = ref(\'\');\nconst editOtherHead = ref(\'\');\n\nconst getRandomPastel = () => {\n  const hue = Math.floor(Math.random() * 360);\n  return `hsl(${hue}, 70%, 90%)`;\n};\n\nconst goHome = () => {\n  sharedState.phone.activeApp = \'home\';\n};\n\n// --- Explore / Swipe Logic ---\nconst profiles = ref<any[]>([]);\nconst currentProfileIndex = ref(0);\n\nconst currentProfile = computed(() => {\n  return profiles.value[currentProfileIndex.value] || null;\n});\n\n// Dragging State\nconst isDragging = ref(false);\nconst dragX = ref(0);\nconst startX = ref(0);\nconst isGenerating = ref(false);\n\nconst saveCardImage = async () => {\n  if (!currentProfile.value) return;\n  const cardElement = document.querySelector(\'.tinder-card\') as HTMLElement;\n  if (!cardElement) return;\n\n  try {\n    toastr.info(\'Saving card...\');\n    const canvas = await html2canvas(cardElement, {\n      useCORS: true,\n      scale: 2,\n      backgroundColor: null,\n    });\n\n    const link = document.createElement(\'a\');\n    link.download = `tinder-${currentProfile.value.name}.png`;\n    link.href = canvas.toDataURL(\'image/png\');\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    toastr.success(\'Card saved!\');\n  } catch (e) {\n    console.error(e);\n    toastr.error(\'Failed to save card\');\n  }\n};\n\nonMounted(() => {\n  if (!sharedState.Tinder.chathistory) sharedState.Tinder.chathistory = {};\n  if (!sharedState.Tinder.matches) sharedState.Tinder.matches = [];\n  if (!sharedState.Tinder.noped) sharedState.Tinder.noped = [];\n  if (!sharedState.Tinder.generatedStrangers) sharedState.Tinder.generatedStrangers = [];\n  loadProfiles();\n});\n\n// 修改位置：script setup 内\nconst generateStrangers = async () => {\n  if (isGenerating.value) return;\n  isGenerating.value = true;\n  toastr.info(\'Scanning for new people...\');\n\n  try {\n    // 提示词：强调只要JSON，虽然我们代码会做清洗，但提示词越准越好\n    const prompt = `生成10个Tinder人物资料。\n    格式必须是纯JSON数组，包含 name, age, bio。\n    范例：[{"name":"Momo","age":23,"bio":"简介..."}]\n    不要Markdown，不要解释。`;\n\n    let result = \'\';\n\n    // 1. 网络请求层面的容错：捕获 disconnected port 错误\n    try {\n      console.log(\'开始生成数据\');\n      result = await generate({\n        user_input: prompt,\n        max_chat_history: 0,\n      });\n    } catch (netErr: any) {\n      // 如果是那个著名的 disconnected port 错误，我们在控制台记录一下就行，不弹窗\n      // 往往这时候 result 可能是 undefined，但如果不影响后续逻辑就无视\n      console.warn(\'Network warning (ignorable):\', netErr);\n    }\n\n    if (!result) {\n      // 如果真的没拿到任何数据，停止\n      isGenerating.value = false;\n      return;\n    }\n\n    console.log(\'AI Raw Output:\', result);\n\n    // =============================================\n    // 核心提取逻辑：手术刀式提取 [...]\n    // =============================================\n\n    let jsonStr = \'\';\n\n    // 1. 去掉 <thinking> 标签（以防万一）\n    const cleanText = result.replace(/<thinking>[\\s\\S]*?<\\/thinking>/gi, \'\');\n\n    // 2. 寻找 JSON 数组的开始\n    // FIX: 寻找 JSON 数组的开始 (如 "[{") 以避免匹配到 "[地点]" 等非 JSON 内容\n    const matchStart = cleanText.match(/\\[\\s*\\{/);\n    let newProfiles = [];\n\n    if (matchStart && matchStart.index !== undefined) {\n      const start = matchStart.index;\n      // 从后往前寻找 \']\'，尝试解析直到成功\n      // 这样可以应对 AI 输出末尾包含 "[注意] ..." 这种非 JSON 内容导致 lastIndexOf(\']\') 找错的情况\n      const closingIndices: number[] = [];\n      for (let i = cleanText.length - 1; i > start; i--) {\n        if (cleanText[i] === \']\') {\n          closingIndices.push(i);\n        }\n      }\n\n      let parsed = false;\n      for (const end of closingIndices) {\n        const candidate = cleanText.substring(start, end + 1);\n        try {\n          const result = JSON.parse(candidate);\n          if (Array.isArray(result)) {\n            newProfiles = result;\n            jsonStr = candidate; // 记录下来用于后续判断（虽然这里已经成功了）\n            parsed = true;\n            break; // 成功解析，跳出循环\n          }\n        } catch (e) {\n          // 解析失败，说明包含有多余的尾部字符，继续尝试下一个 \']\'\n          // 也可以在这里尝试 replace 修复末尾逗号，但通常 AI 生成的正确 JSON 只需要截取正确即可\n          try {\n            // 尝试最后的补救：去掉末尾多余的逗号 (例如: [{"a":1},])\n            const fixed = candidate.replace(/,(\\s*\\])/g, \'$1\');\n            const result = JSON.parse(fixed);\n            if (Array.isArray(result)) {\n              newProfiles = result;\n              jsonStr = fixed;\n              parsed = true;\n              break;\n            }\n          } catch (e2) {\n            // ignore\n          }\n        }\n      }\n\n      if (!parsed) {\n        console.warn(\'Failed to parse any JSON candidate\');\n      }\n    } else {\n      console.warn(\'No JSON start pattern found.\');\n    }\n\n    // =============================================\n    // 数据入库：转换成卡片格式\n    // =============================================\n\n    if (Array.isArray(newProfiles) && newProfiles.length > 0) {\n      let count = 0;\n      for (const p of newProfiles) {\n        // 必须要有名字才算有效数据\n        if (!p.name) continue;\n\n        const profile = {\n          id: Math.random().toString(36).substring(2),\n          name: p.name,\n          age: p.age || 20 + Math.floor(Math.random() * 10),\n          bio: p.bio || \'这个人很懒，什么都没写\',\n          // 随机给个头像，不然都是同一个默认头像很丑\n          head: sharedState.RedNote?.getRandomHead() ? sharedState.RedNote.getRandomHead() : defaultHead,\n          album: [],\n          isGenerated: true,\n        };\n        sharedState.Tinder.addGeneratedStranger(profile);\n        count++;\n      }\n\n      // 保存并刷新界面\n      sharedState.Tinder.saveSettings();\n      loadProfiles(); // 这个函数会把新数据加载到 profiles 变量，界面上的卡片就会更新\n      toastr.success(`Found ${count} new people!`);\n    } else if (jsonStr) {\n      // 只有真的没提取到数据才报错\n      toastr.warning(\'Format incorrect, try again.\');\n    }\n  } catch (err: any) {\n    console.error(\'General Error:\', err);\n    // 再次过滤掉 disconnected port 错误，防止它在最后弹窗\n    if (!err.message?.includes(\'disconnected port\')) {\n      toastr.error(\'Error generating profiles\');\n    }\n  } finally {\n    isGenerating.value = false;\n  }\n};\n\nconst loadProfiles = () => {\n  const potential = [] as any[];\n\n  // 1. From QQ.chars\n  for (const [key, val] of Object.entries(sharedState.QQ.chars)) {\n    const c = val as any;\n    const isUser = c.name === sharedState.ST.userName;\n    const isGroup = c.chartype === \'Group\';\n    const isFriendOrNPC = c.chartype === \'friend\' || c.chartype === \'npc\';\n\n    if (!isUser && !isGroup && isFriendOrNPC) {\n      potential.push({\n        id: key, // Use key as ID for stability\n        name: c.tinderName || c.name,\n        head: c.tinderHead || c.head || c.douyinHead || defaultHead,\n        bio:\n          c.tinderBio ||\n          (c.douyinId ? `Douyin: ${c.douyinId}` : c.chartype === \'npc\' ? \'NPC Profile\' : \'Friend Profile\'),\n        age: 20 + Math.floor(Math.random() * 10),\n        album: (c.tinderAlbum || []).map((p: any) => ({\n          ...p,\n          bg: p.bg || getRandomPastel(),\n        })),\n      });\n    }\n  }\n\n  // 2. From Generated Strangers\n  if (sharedState.Tinder.generatedStrangers) {\n    potential.push(\n      ...sharedState.Tinder.generatedStrangers.map((s: any) => ({\n        ...s,\n        // Ensure missing fields have defaults\n        head: s.head || defaultHead,\n        bio: s.bio || \'\',\n        album: s.album || [],\n      })),\n    );\n  }\n\n  // 3. Dummies (only if absolutely no profiles)\n  if (potential.length === 0) {\n    potential.push({\n      id: \'dummy1\',\n      name: \'Alice\',\n      head: defaultHead,\n      bio: \'Love hiking and coffee.\',\n      age: 24,\n      album: [],\n    });\n    potential.push({ id: \'dummy2\', name: \'Bob\', head: defaultHead, bio: \'Tech enthusiast.\', age: 27, album: [] });\n  }\n\n  // Filter out already matched OR noped profiles\n  profiles.value = potential.filter(p => {\n    const isMatched = sharedState.Tinder.matches.find((m: any) => (m.id && p.id ? m.id === p.id : m.name === p.name));\n    const isNoped = sharedState.Tinder.noped && sharedState.Tinder.noped.includes(p.id || p.name);\n    return !isMatched && !isNoped;\n  });\n};\n\nconst startDrag = (e: MouseEvent | TouchEvent) => {\n  isDragging.value = true;\n  startX.value = \'touches\' in e ? e.touches[0].clientX : e.clientX;\n};\n\nconst onDrag = (e: MouseEvent | TouchEvent) => {\n  if (!isDragging.value) return;\n  const currentX = \'touches\' in e ? e.touches[0].clientX : e.clientX;\n  dragX.value = currentX - startX.value;\n};\n\nconst endDrag = () => {\n  if (!isDragging.value) return;\n  isDragging.value = false;\n\n  const threshold = 80;\n  if (dragX.value > threshold) {\n    swipeRight();\n  } else if (dragX.value < -threshold) {\n    swipeLeft();\n  } else {\n    dragX.value = 0;\n  }\n};\n\nconst swipeLeft = () => {\n  dragX.value = -500;\n  const profile = currentProfile.value;\n  if (profile) {\n    // Use ID if available, otherwise name as fallback ID\n    const id = profile.id || profile.name;\n    sharedState.Tinder.addNope(id);\n    sharedState.Tinder.saveSettings();\n  }\n  setTimeout(nextProfile, 300);\n};\n\nconst swipeRight = () => {\n  dragX.value = 500;\n  const profile = currentProfile.value;\n  if (profile) {\n    sharedState.Tinder.addMatch(profile);\n    sharedState.Tinder.saveSettings();\n    openChat(profile);\n    currentTab.value = \'matches\';\n  }\n  setTimeout(nextProfile, 300);\n};\n\nconst superLike = () => {\n  swipeRight();\n};\n\nconst nextProfile = () => {\n  dragX.value = 0;\n  currentProfileIndex.value++;\n  if (currentProfileIndex.value >= profiles.value.length) {\n    currentProfileIndex.value = profiles.value.length;\n  }\n};\n\n// --- Profile Logic ---\nconst saveProfile = () => {\n  sharedState.Tinder.userName = userName.value;\n  sharedState.Tinder.userBio = userBio.value;\n  sharedState.Tinder.userAlbum = userAlbum.value;\n  sharedState.Tinder.saveSettings();\n};\n\nconst editAvatar = () => {\n  newAvatarUrl.value = sharedState.Tinder.userHead || sharedState.ST.userHead || \'\';\n  showEditAvatar.value = true;\n};\n\nconst saveAvatar = () => {\n  if (newAvatarUrl.value) {\n    sharedState.Tinder.userHead = newAvatarUrl.value;\n    saveProfile();\n    showEditAvatar.value = false;\n  }\n};\n\nconst deleteAccount = () => {\n  showDeleteAccount.value = true;\n};\n\nconst confirmDeleteAccount = () => {\n  sharedState.Tinder.accountStatus = \'deleted\';\n  sharedState.Tinder.deletionReason = deleteReason.value;\n  sharedState.Tinder.matches = [];\n  sharedState.Tinder.chathistory = {};\n  sharedState.Tinder.noped = [];\n  sharedState.Tinder.userAlbum = [];\n  sharedState.Tinder.userName = \'\';\n  sharedState.Tinder.userBio = \'\';\n  sharedState.Tinder.userHead = \'\';\n\n  // Reset local refs\n  userName.value = \'\';\n  userBio.value = \'\';\n  userAlbum.value = [];\n\n  sharedState.Tinder.saveSettings();\n  showDeleteAccount.value = false;\n  toastr.info(\'Account deleted successfully.\');\n  goHome();\n};\n\nconst openAddPhoto = (target: \'user\' | \'other\') => {\n  addPhotoTarget.value = target;\n  showAddPhoto.value = true;\n};\n\nconst addPhoto = () => {\n  if (newPhotoText.value) {\n    const newPhoto = {\n      img: \'\',\n      text: newPhotoText.value,\n      bg: getRandomPastel(),\n    };\n\n    if (addPhotoTarget.value === \'user\') {\n      userAlbum.value.push(newPhoto);\n      saveProfile();\n    } else if (addPhotoTarget.value === \'other\' && otherProfile.value) {\n      if (!otherProfile.value.album) otherProfile.value.album = [];\n      otherProfile.value.album.push(newPhoto);\n      // We don\'t save automatically here for other profile, user must click Save in profile edit\n      // But maybe we should? The current flow for other profile is "Save" button.\n      // However, removing/adding photos usually feels immediate.\n      // Let\'s rely on the main "Save" button for the other profile to persist everything.\n    }\n\n    newPhotoText.value = \'\';\n    showAddPhoto.value = false;\n  }\n};\n\nconst removePhoto = (index: any) => {\n  userAlbum.value.splice(index, 1);\n  saveProfile();\n};\n\nconst removePhotoFromOther = (index: number | string) => {\n  if (otherProfile.value && otherProfile.value.album) {\n    otherProfile.value.album.splice(Number(index), 1);\n  }\n};\n\nconst resetMatches = () => {\n  sharedState.Tinder.matches = [];\n  sharedState.Tinder.noped = []; // Reset noped list too\n  sharedState.Tinder.chathistory = {};\n  currentProfileIndex.value = 0;\n  loadProfiles();\n  toastr.info(\'Matches & History reset.\');\n};\n\nconst isMatched = (profile: any) => {\n  if (!profile) return false;\n  return sharedState.Tinder.matches.some((m: any) =>\n    m.id && profile.id ? m.id === profile.id : m.name === profile.name,\n  );\n};\n\n// --- Chat Logic ---\nconst activeChatMatch = ref<any>(null);\nconst chatInput = ref(\'\');\nconst chatContainer = ref<HTMLElement | null>(null);\n\nconst currentChatMsgs = computed(() => {\n  if (!activeChatMatch.value) return [];\n  const id = activeChatMatch.value.id;\n  return sharedState.Tinder.chathistory[id]?.msgs || [];\n});\n\nconst openChat = (match: any) => {\n  activeChatMatch.value = match;\n  if (sharedState.Tinder.chathistory[match.id]) {\n    sharedState.Tinder.chathistory[match.id].unread = 0;\n  }\n  nextTick(scrollToBottom);\n};\n\nconst getDisplayName = (idOrName: string) => {\n  // Try to find by ID in matches\n  const matchById = sharedState.Tinder.matches.find((m: any) => m.id === idOrName);\n  if (matchById) return matchById.name;\n\n  // Try to find in chars (by ID, Name, or TinderName)\n  let char = sharedState.QQ.chars[idOrName];\n  if (!char) {\n    const lower = idOrName.toLowerCase();\n    char = Object.values(sharedState.QQ.chars).find(\n      (c: any) => (c.name && c.name.toLowerCase() === lower) || (c.tinderName && c.tinderName.toLowerCase() === lower),\n    );\n  }\n  if (char) return char.tinderName || char.name;\n\n  // Fallback: maybe it IS the name (legacy or temp match)\n  // Check if any match has this name\n  const matchByName = sharedState.Tinder.matches.find(\n    (m: any) => m.name && m.name.toLowerCase() === idOrName.toLowerCase(),\n  );\n  if (matchByName) return matchByName.name;\n\n  return idOrName;\n};\n\nconst openOtherProfile = (profile: any) => {\n  // Generate fake album if empty\n  if (!profile.album || profile.album.length === 0) {\n    const quotes = [\n      \'Loving life!\',\n      \'Coffee addict ☕\',\n      \'Adventure awaits\',\n      \'Just vibing\',\n      \'Music is my life\',\n      \'Hello world\',\n    ];\n    const count = 3 + Math.floor(Math.random() * 4);\n    const album = [];\n    for (let i = 0; i < count; i++) {\n      album.push({\n        text: quotes[Math.floor(Math.random() * quotes.length)],\n        bg: getRandomPastel(),\n      });\n    }\n    profile.album = album;\n  }\n  otherProfile.value = profile;\n  isEditingOther.value = false;\n};\n\nconst goToProfileFromChat = () => {\n  if (activeChatMatch.value) {\n    const id = activeChatMatch.value.id;\n\n    // Try to find match object with full details\n    let match = sharedState.Tinder.matches.find((m: any) => m.id === id);\n\n    // Fallback to name match if id match fails\n    if (!match) match = sharedState.Tinder.matches.find((m: any) => m.name === id);\n\n    if (!match) {\n      // Construct a basic profile object if not found in matches\n      const char = sharedState.QQ.chars[id];\n      if (char) {\n        match = {\n          id: id,\n          name: char.tinderName || char.name,\n          head: char.tinderHead || char.head || defaultHead,\n          bio: char.tinderBio || (char.douyinId ? `Douyin: ${char.douyinId}` : \'No bio available\'),\n          age: 25,\n          album: (char.tinderAlbum || []).map((p: any) => ({\n            ...p,\n            bg: p.bg || getRandomPastel(),\n          })),\n        };\n      } else {\n        match = {\n          id: id,\n          name: id,\n          head: defaultHead,\n          bio: \'No bio available\',\n          age: 25,\n          album: [],\n        };\n      }\n    }\n    openOtherProfile(match);\n  }\n};\n\nconst closeOtherProfile = () => {\n  otherProfile.value = null;\n  isEditingOther.value = false;\n};\n\nconst startChatFromProfile = () => {\n  if (otherProfile.value) {\n    const profile = otherProfile.value;\n    openChat(profile);\n    closeOtherProfile();\n    currentTab.value = \'matches\';\n  }\n};\n\nconst startEditOther = () => {\n  if (otherProfile.value) {\n    editOtherName.value = otherProfile.value.name;\n    editOtherBio.value = otherProfile.value.bio;\n    editOtherHead.value = otherProfile.value.head;\n    isEditingOther.value = true;\n  }\n};\n\nconst saveOtherProfile = async () => {\n  if (otherProfile.value) {\n    const oldName = otherProfile.value.name;\n    const newName = editOtherName.value;\n    const id = otherProfile.value.id;\n\n    otherProfile.value.name = newName;\n    otherProfile.value.bio = editOtherBio.value;\n    otherProfile.value.head = editOtherHead.value;\n\n    // Try to update corresponding char entry if it exists\n    // Use ID (key) for lookup directly\n    let char = sharedState.QQ.chars[id];\n\n    // Fallback: try finding by name if ID lookup failed (e.g. legacy matches where ID=Name)\n    if (!char) {\n      const key = Object.keys(sharedState.QQ.chars).find(k => sharedState.QQ.chars[k].name === id);\n      if (key) char = sharedState.QQ.chars[key];\n    }\n\n    if (char) {\n      char.tinderName = newName;\n      char.tinderBio = editOtherBio.value;\n      char.tinderHead = editOtherHead.value;\n      // Save album without bg (as requested to keep worldbook entry clean)\n      char.tinderAlbum = otherProfile.value.album.map((p: any) => {\n        const { bg, ...rest } = p;\n        return rest;\n      });\n      // Also update "手机-角色" worldbook entry with new tinderName\n      console.log(`Saving Tinder profile for ${char.name} (ID: ${id}) to worldbook...`);\n      await sharedState.QQ.saveChars();\n    }\n\n    // If it\'s a match, update in matches list\n    const matchIndex = sharedState.Tinder.matches.findIndex((m: any) =>\n      m.id && id ? m.id === id : m.name === oldName,\n    );\n    if (matchIndex !== -1) {\n      sharedState.Tinder.matches[matchIndex] = { ...otherProfile.value };\n\n      // Migrate chat history if name changed\n      if (oldName !== newName && sharedState.Tinder.chathistory[oldName]) {\n        sharedState.Tinder.chathistory[newName] = sharedState.Tinder.chathistory[oldName];\n        delete sharedState.Tinder.chathistory[oldName];\n      }\n\n      await sharedState.Tinder.saveSettings();\n    }\n\n    isEditingOther.value = false;\n    toastr.success(\'Profile updated\');\n  }\n};\n\nconst closeChat = () => {\n  activeChatMatch.value = null;\n};\n\nconst getHead = (idOrName: string) => {\n  // Try ID match first\n  const match = sharedState.Tinder.matches.find((m: any) => m.id === idOrName);\n  if (match) return match.head;\n\n  // Try Char (ID, Name, or TinderName)\n  let char = sharedState.QQ.chars[idOrName];\n  if (!char) {\n    const lower = idOrName.toLowerCase();\n    char = Object.values(sharedState.QQ.chars).find(\n      (c: any) => (c.name && c.name.toLowerCase() === lower) || (c.tinderName && c.tinderName.toLowerCase() === lower),\n    );\n  }\n  if (char) return char.tinderHead || char.head;\n\n  // Fallback name match\n  const matchByName = sharedState.Tinder.matches.find(\n    (m: any) => m.name && m.name.toLowerCase() === idOrName.toLowerCase(),\n  );\n  if (matchByName) return matchByName.head;\n\n  // Special case for composite keys (A & B)\n  if (idOrName.includes(\' & \')) {\n    const names = idOrName.split(\' & \');\n    // Try to get head for the first person (who is not user, typically)\n    // names are sorted, so just pick first one.\n    const first = names[0];\n    const lowerFirst = first.toLowerCase();\n    const firstChar = Object.values(sharedState.QQ.chars).find(\n      (c: any) =>\n        (c.name && c.name.toLowerCase() === lowerFirst) || (c.tinderName && c.tinderName.toLowerCase() === lowerFirst),\n    );\n    if (firstChar) return (firstChar as any).tinderHead || (firstChar as any).head;\n  }\n\n  return defaultHead;\n};\n\nconst sendMessage = () => {\n  if (!chatInput.value.trim() || !activeChatMatch.value) return;\n\n  const content = chatInput.value.trim();\n  const id = activeChatMatch.value.id;\n  // Resolve display name for the prompt\n  const displayName = getDisplayName(id);\n\n  const time = new Date().toLocaleTimeString([], { hour: \'2-digit\', minute: \'2-digit\' });\n\n  const userMsg = {\n    sender: \'user\',\n    content: content,\n    time: time,\n  };\n  sharedState.Tinder.addMsg(id, userMsg);\n\n  // 参考 QQ 的发送格式，只发送简单的描述文本\n  // 避免将 XML 示例格式直接暴露给 LLM\n  // 使用 id (即真名) 而不是 display name (可能是昵称)\n  // 构建 XML 标签用于持久化存储 (Sender|Recipient|Content|Time)\n  const msgTag = `\n<tinder>{{user}}|${id}|${content}|${time}</tinder>`;\n\n  const message = `\n{{user}}在Tinder向${id}发送了消息: ${content}${msgTag}`;\n\n  const val = $(\'#send_textarea\').val();\n  const old_content = (typeof val === \'string\' ? val : \'\').trim();\n  const new_content = old_content ? old_content + \'\\n\\n\' + message : message;\n\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  chatInput.value = \'\';\n  nextTick(scrollToBottom);\n};\n\nconst scrollToBottom = () => {\n  if (chatContainer.value) {\n    chatContainer.value.scrollTop = chatContainer.value.scrollHeight;\n  }\n};\n\nwatch(\n  currentChatMsgs,\n  () => {\n    if (activeChatMatch.value) {\n      nextTick(scrollToBottom);\n    }\n  },\n  { deep: true },\n);\n<\/script>\n\n<style scoped>\n.tinder-container {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n}\n\n.header {\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 15px;\n  background: #fff;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.logo {\n  font-size: 22px;\n  font-weight: 800;\n  background: linear-gradient(to right, #fd297b, #ff655b);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  cursor: pointer;\n}\n\n.nav-icons {\n  display: flex;\n  gap: 25px;\n}\n\n.nav-icon {\n  font-size: 22px;\n  color: #d4d8de;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n\n.nav-icon.active {\n  color: #fe3c72;\n}\n\n/* Explore Tab */\n.explore-tab {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  /* padding: 20px 0; */\n  background: #f4f6f8;\n  overflow: hidden;\n}\n\n.card-container {\n  width: 85%;\n  height: 70%;\n  /* max-width: 300px; */\n  /* max-height: 480px; */\n  position: relative;\n  margin-bottom: 30px;\n}\n\n.tinder-card {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);\n  position: absolute;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  cursor: grab;\n}\n\n.tinder-card:active {\n  cursor: grabbing;\n}\n\n.card-image {\n  width: 100%;\n  height: 70%;\n  background-size: cover;\n  background-position: center;\n}\n\n.card-info {\n  padding: 12px 15px;\n  height: 30%;\n  box-sizing: border-box;\n}\n\n.card-name {\n  font-size: 20px;\n  font-weight: 700;\n  margin-bottom: 5px;\n  color: #333;\n}\n\n.card-bio {\n  font-size: 13px;\n  color: #666;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n}\n\n.overlay {\n  position: absolute;\n  top: 30px;\n  padding: 5px 12px;\n  border: 3px solid;\n  border-radius: 6px;\n  font-size: 28px;\n  font-weight: 800;\n  opacity: 0;\n  z-index: 10;\n}\n\n.like {\n  left: 30px;\n  color: #4cd964;\n  border-color: #4cd964;\n  transform: rotate(-15deg);\n}\n\n.nope {\n  right: 30px;\n  color: #ff3b30;\n  border-color: #ff3b30;\n  transform: rotate(15deg);\n}\n\n.action-buttons {\n  margin-top: 10px;\n  display: flex;\n  gap: 20px;\n  align-items: center;\n}\n\n.btn-nope,\n.btn-like,\n.btn-superlike {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 22px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);\n  cursor: pointer;\n  background: #fff;\n  transition: transform 0.1s;\n}\n\n.btn-nope {\n  color: #ff3b30;\n}\n.btn-superlike {\n  color: #3ca4ff;\n  width: 40px;\n  height: 40px;\n  font-size: 18px;\n}\n.btn-like {\n  color: #4cd964;\n}\n\n.btn-nope:active,\n.btn-like:active,\n.btn-superlike:active,\n.btn-search:active,\n.btn-save:active {\n  transform: scale(0.9);\n}\n\n.btn-search,\n.btn-save {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);\n  cursor: pointer;\n  background: #f0f0f0;\n  color: #666;\n  transition: transform 0.1s;\n}\n\n.no-profiles {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #999;\n  margin-top: 50px;\n  z-index: 10;\n}\n\n.radar {\n  width: 50px;\n  height: 50px;\n  border: 3px solid #fe3c72;\n  border-radius: 50%;\n  margin-bottom: 15px;\n  /* animation: pulse 1.5s infinite; */\n  cursor: pointer;\n}\n\n.radar.pulsing {\n  animation: pulse 1.5s infinite;\n}\n\n/* Matches Tab */\n.matches-tab {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  overflow-y: auto;\n}\n\n.matches-header,\n.messages-header {\n  padding: 12px 15px;\n  font-weight: 700;\n  color: #fe3c72;\n  font-size: 13px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.matches-list-horizontal {\n  display: flex;\n  gap: 15px;\n  padding: 0 15px 15px;\n  overflow-x: auto;\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.match-avatar-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 60px;\n  cursor: pointer;\n}\n\n.match-avatar {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  margin-bottom: 6px;\n  border: 2px solid #fe3c72;\n  padding: 1px;\n}\n\n.match-name-small {\n  font-size: 11px;\n  color: #444;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n  text-align: center;\n}\n\n.messages-list {\n  flex: 1;\n}\n\n.message-item {\n  display: flex;\n  padding: 12px 15px;\n  align-items: center;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.message-item:hover {\n  background: #fafafa;\n}\n\n.msg-avatar {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  margin-right: 15px;\n}\n\n.msg-content {\n  flex: 1;\n  overflow: hidden;\n}\n\n.msg-name {\n  font-weight: 600;\n  margin-bottom: 4px;\n  font-size: 15px;\n  color: #222;\n}\n\n.msg-preview {\n  color: #888;\n  font-size: 13px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.unread-dot {\n  width: 8px;\n  height: 8px;\n  background: #fe3c72;\n  border-radius: 50%;\n}\n\n/* Profile Tab - Refined */\n.profile-tab {\n  flex: 1;\n  background: #f4f6f8;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  overflow-y: auto;\n  padding-bottom: 20px;\n}\n\n.profile-header-bg {\n  width: 100%;\n  height: 140px;\n  background: linear-gradient(135deg, #fd297b, #ff655b);\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n  border-bottom-left-radius: 50% 20px;\n  border-bottom-right-radius: 50% 20px;\n}\n\n.profile-content {\n  width: 100%;\n  max-width: 360px;\n  padding: 0 15px;\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  z-index: 1;\n  margin-top: 100px; /* Moved down further */\n  box-sizing: border-box;\n}\n\n.profile-card-refined {\n  background: #fff;\n  border-radius: 20px;\n  padding: 0 20px 25px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);\n}\n\n.avatar-wrapper {\n  position: relative;\n  margin-top: -60px;\n  margin-bottom: 15px;\n}\n\n.my-avatar-large {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 5px solid #fff;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n  position: relative;\n  cursor: pointer;\n}\n\n.edit-avatar-hint {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  text-align: center;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 12px;\n  padding: 4px 0;\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n\n.my-avatar-large:hover .edit-avatar-hint {\n  opacity: 1;\n}\n\n.profile-fields {\n  width: 100%;\n}\n\n.field-group {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.refined-input,\n.refined-textarea {\n  width: 100%;\n  border: none;\n  font-size: 14px;\n  color: #333;\n  background: transparent;\n  text-align: center;\n  transition: all 0.3s ease;\n  box-sizing: border-box;\n}\n\n.name-input {\n  font-size: 20px;\n  font-weight: 700;\n  margin-bottom: 5px;\n}\n\n.bio-input {\n  height: 50px;\n  resize: none;\n  font-family: inherit;\n  color: #666;\n  line-height: 1.4;\n}\n\n.refined-input:focus,\n.refined-textarea:focus {\n  outline: none;\n  background: #f9f9f9;\n  border-radius: 8px;\n}\n\n/* Album Section */\n.album-section {\n  margin-top: 10px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.section-title {\n  font-size: 13px;\n  font-weight: 700;\n  color: #888;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.counter {\n  background: #f0f0f0;\n  color: #888;\n  padding: 2px 6px;\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.album-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 10px;\n}\n\n.album-item {\n  position: relative;\n  width: 100%;\n  aspect-ratio: 3/4; /* Portrait ratio for \'card\' feel */\n  border-radius: 10px;\n  overflow: hidden;\n  cursor: pointer;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: transform 0.2s;\n  background: #eee;\n}\n\n.album-item:active {\n  transform: scale(0.96);\n}\n\n.album-img {\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-position: center;\n}\n\n.album-text-content {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0) 100%);\n  color: white;\n  font-size: 11px;\n  font-weight: 500;\n  padding: 15px 5px 5px;\n  box-sizing: border-box;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.album-remove {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  background: rgba(0, 0, 0, 0.4);\n  color: white;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n\n.album-item:hover .album-remove {\n  opacity: 1;\n}\n\n.album-add {\n  width: 100%;\n  aspect-ratio: 3/4;\n  border: 2px dashed #e0e0e0;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  background: #fafafa;\n  transition: border-color 0.2s;\n}\n\n.album-add:hover {\n  border-color: #fe3c72;\n}\n\n.add-icon {\n  font-size: 24px;\n  color: #ccc;\n  font-weight: 300;\n}\n\n.album-add:hover .add-icon {\n  color: #fe3c72;\n}\n\n/* Modal */\n.modal-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 200;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  backdrop-filter: blur(2px);\n}\n\n.modal-content {\n  background: white;\n  padding: 20px;\n  border-radius: 16px;\n  width: 80%;\n  max-width: 280px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n}\n\n.modal-content h3 {\n  margin: 0 0 15px;\n  font-size: 16px;\n  color: #333;\n  text-align: center;\n}\n\n.input-group {\n  margin-bottom: 12px;\n}\n\n.input-group label {\n  display: block;\n  font-size: 11px;\n  color: #999;\n  margin-bottom: 4px;\n  font-weight: 600;\n}\n\n.modal-input {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 14px;\n  box-sizing: border-box;\n  outline: none;\n}\n\n.modal-input:focus {\n  border-color: #fe3c72;\n}\n\n.modal-buttons {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  gap: 10px;\n}\n\n.modal-buttons button {\n  flex: 1;\n  padding: 10px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.cancel-btn {\n  background: #f0f0f0;\n  color: #666;\n}\n\n.confirm-btn {\n  background: #fe3c72;\n  color: white;\n}\n\n/* Settings Section */\n.settings-section.refined {\n  background: #fff;\n  border-radius: 16px;\n  padding: 15px 20px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);\n}\n\n.settings-section.refined h3 {\n  font-size: 12px;\n  color: #aaa;\n  font-weight: 700;\n  text-transform: uppercase;\n  margin: 0 0 10px;\n  letter-spacing: 1px;\n}\n\n.settings-item {\n  display: flex;\n  align-items: center;\n  padding: 8px 0;\n  cursor: pointer;\n}\n\n.icon-box {\n  width: 36px;\n  height: 36px;\n  border-radius: 10px;\n  background: #fff0f5;\n  color: #fe3c72;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  margin-right: 12px;\n}\n\n.setting-text {\n  display: flex;\n  flex-direction: column;\n}\n\n.setting-text span {\n  font-size: 15px;\n  font-weight: 500;\n  color: #333;\n}\n\n.setting-text small {\n  font-size: 11px;\n  color: #999;\n  margin-top: 2px;\n}\n\n/* Chat Detail Overlay */\n.chat-detail {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-header {\n  height: 50px;\n  border-bottom: 1px solid #eee;\n  display: flex;\n  align-items: center;\n  padding: 0 10px;\n}\n\n.back-btn {\n  font-size: 24px;\n  color: #fe3c72;\n  padding: 10px;\n  cursor: pointer;\n}\n\n.chat-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  margin: 0 10px;\n}\n\n.chat-name {\n  font-weight: 600;\n  font-size: 15px;\n}\n\n.chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.chat-row {\n  display: flex;\n  width: 100%;\n  gap: 10px;\n  align-items: flex-end;\n}\n\n.row-sent {\n  justify-content: flex-end;\n}\n\n.row-received {\n  justify-content: flex-start;\n}\n\n.chat-avatar-small {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n  cursor: pointer;\n}\n\n.chat-bubble {\n  max-width: 70%;\n  padding: 10px 14px;\n  border-radius: 18px;\n  font-size: 15px;\n  line-height: 1.4;\n  position: relative;\n  word-wrap: break-word;\n}\n\n.bubble-sent {\n  background: linear-gradient(135deg, #fd297b, #ff655b);\n  color: #fff;\n  border-bottom-right-radius: 4px;\n}\n\n.bubble-received {\n  background: #f1f2f6;\n  color: #333;\n  border-bottom-left-radius: 4px;\n}\n\n.chat-input-area {\n  padding: 10px;\n  border-top: 1px solid #eee;\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  background: #fff;\n}\n\n.chat-input-area input {\n  flex: 1;\n  padding: 8px 15px;\n  border-radius: 20px;\n  border: 1px solid #ddd;\n  outline: none;\n  font-size: 14px;\n}\n\n.send-btn {\n  color: #fe3c72;\n  font-weight: 600;\n  cursor: pointer;\n  padding: 5px 10px;\n  font-size: 14px;\n}\n\n/* Other Profile Overlay */\n.other-profile-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  z-index: 150;\n  overflow-y: auto;\n  padding-bottom: 20px;\n}\n\n.other-profile-content {\n  position: relative;\n}\n\n.other-profile-close {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  width: 30px;\n  height: 30px;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  z-index: 10;\n}\n\n.other-avatar {\n  width: 100%;\n  height: 350px;\n  background-size: cover;\n  background-position: center;\n  border-bottom-left-radius: 20px;\n  border-bottom-right-radius: 20px;\n}\n\n.other-info {\n  padding: 15px 20px;\n}\n\n.other-name {\n  font-size: 26px;\n  font-weight: 800;\n  color: #333;\n  margin-bottom: 5px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.edit-icon {\n  font-size: 16px;\n  color: #fe3c72;\n  cursor: pointer;\n  opacity: 0.6;\n}\n\n.edit-icon:hover {\n  opacity: 1;\n}\n\n.other-bio {\n  font-size: 14px;\n  color: #666;\n  line-height: 1.5;\n}\n\n.other-actions {\n  position: fixed;\n  bottom: 20px;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding-bottom: 10px;\n  pointer-events: none;\n}\n\n.btn-like-small {\n  pointer-events: auto;\n  background: linear-gradient(45deg, #fd297b, #ff655b);\n  color: white;\n  padding: 10px 40px;\n  border-radius: 30px;\n  font-weight: 700;\n  letter-spacing: 1px;\n  box-shadow: 0 5px 15px rgba(253, 41, 123, 0.3);\n  cursor: pointer;\n  transition: transform 0.1s;\n}\n\n.btn-like-small:active {\n  transform: scale(0.95);\n}\n\n.btn-message-small {\n  pointer-events: auto;\n  background: linear-gradient(45deg, #2196f3, #00bcd4);\n  color: white;\n  padding: 10px 40px;\n  border-radius: 30px;\n  font-weight: 700;\n  letter-spacing: 1px;\n  box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);\n  cursor: pointer;\n  transition: transform 0.1s;\n}\n\n.btn-message-small:active {\n  transform: scale(0.95);\n}\n\n.view-profile-btn {\n  position: absolute;\n  bottom: 15px;\n  right: 15px;\n  background: rgba(255, 255, 255, 0.8);\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n  color: #333;\n  cursor: pointer;\n}\n\n.text-album {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 10px;\n  box-sizing: border-box;\n}\n\n.album-text-content-centered {\n  font-size: 12px;\n  font-weight: 600;\n  color: #444;\n  text-align: center;\n  word-break: break-word;\n  line-height: 1.4;\n  max-height: 100%;\n  overflow: hidden;\n}\n\n.album-text-content {\n  display: none; /* Hide old text overlay */\n}\n</style>\n'],sourceRoot:''}]);const s=r},4069:(e,n,t)=>{var a=t(3866);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('3a64e078',a,!1,{ssrId:!0})},4424:(e,n,t)=>{function a(e,n){for(var t=[],a={},i=0;i<n.length;i++){var o=n[i],r=o[0],s={id:e+':'+i,css:o[1],media:o[2],sourceMap:o[3]};a[r]?a[r].parts.push(s):t.push(a[r]={id:r,parts:[s]})}return t}t.d(n,{A:()=>A});var i='undefined'!=typeof document;if('undefined'!=typeof DEBUG&&DEBUG&&!i)throw new Error('vue-style-loader cannot be used in a non-browser environment. Use { target: \'node\' } in your Webpack config to indicate a server-rendering environment.');var o={},r=i&&(document.head||document.getElementsByTagName('head')[0]),s=null,l=0,c=!1,d=function(){},p=null,m='data-vue-ssr-id',u='undefined'!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function A(e,n,t,i){c=t,p=i||{};var r=a(e,n);return h(r),function(n){for(var t=[],i=0;i<r.length;i++){var s=r[i];(l=o[s.id]).refs--,t.push(l)}n?h(r=a(e,n)):r=[];for(i=0;i<t.length;i++){var l;if(0===(l=t[i]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete o[l.id]}}}}function h(e){for(var n=0;n<e.length;n++){var t=e[n],a=o[t.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](t.parts[i]);for(;i<t.parts.length;i++)a.parts.push(C(t.parts[i]));a.parts.length>t.parts.length&&(a.parts.length=t.parts.length)}else{var r=[];for(i=0;i<t.parts.length;i++)r.push(C(t.parts[i]));o[t.id]={id:t.id,refs:1,parts:r}}}}function g(){var e=document.createElement('style');return e.type='text/css',r.appendChild(e),e}function C(e){var n,t,a=document.querySelector('style['+m+'~="'+e.id+'"]');if(a){if(c)return d;a.parentNode.removeChild(a)}if(u){var i=l++;a=s||(s=g()),n=b.bind(null,a,i,!1),t=b.bind(null,a,i,!0)}else a=g(),n=x.bind(null,a),t=function(){a.parentNode.removeChild(a)};return n(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;n(e=a)}else t()}}var f,v=(f=[],function(e,n){return f[e]=n,f.filter(Boolean).join('\n')});function b(e,n,t,a){var i=t?'':a.css;if(e.styleSheet)e.styleSheet.cssText=v(n,i);else{var o=document.createTextNode(i),r=e.childNodes;r[n]&&e.removeChild(r[n]),r.length?e.insertBefore(o,r[n]):e.appendChild(o)}}function x(e,n){var t=n.css,a=n.media,i=n.sourceMap;if(a&&e.setAttribute('media',a),p.ssrId&&e.setAttribute(m,n.id),i&&(t+='\n/*# sourceURL='+i.sources[0]+' */',t+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+' */'),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},4469:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.ig-user-profile[data-v-70b58da6]{width:100%;height:100%;background-color:#ffffff;display:flex;flex-direction:column;color:#262626;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif;overflow:hidden}.ig-profile-header[data-v-70b58da6]{height:44px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;border-bottom:1px solid #dbdbdb;background-color:#fff;z-index:10}.ig-header-left[data-v-70b58da6]{display:flex;align-items:center;gap:4px}.ig-username[data-v-70b58da6]{font-weight:600;font-size:16px;margin:0}.ig-header-right[data-v-70b58da6]{display:flex;align-items:center;gap:20px}.ig-icon-btn[data-v-70b58da6]{cursor:pointer}.ig-profile-content[data-v-70b58da6]{flex:1;overflow-y:auto;overflow-x:hidden}.ig-profile-info[data-v-70b58da6]{padding:16px 16px 0 16px}.ig-profile-avatar-row[data-v-70b58da6]{display:flex;align-items:center;margin-bottom:12px}.ig-profile-avatar-container[data-v-70b58da6]{position:relative;margin-right:28px;cursor:pointer}.ig-profile-avatar[data-v-70b58da6]{width:77px;height:77px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #dbdbdb}.ig-plus-badge[data-v-70b58da6]{position:absolute;bottom:2px;right:2px;background-color:#0095f6;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;border:2px solid #fff}.ig-profile-stats[data-v-70b58da6]{flex:1;display:flex;justify-content:space-between;padding-right:12px}.ig-stat-item[data-v-70b58da6]{display:flex;flex-direction:column;align-items:center;cursor:pointer}.ig-stat-num[data-v-70b58da6]{font-weight:600;font-size:18px;color:#262626}.ig-stat-label[data-v-70b58da6]{font-size:13px;color:#262626}.ig-profile-bio[data-v-70b58da6]{margin-bottom:16px}.ig-bio-name[data-v-70b58da6]{font-weight:600;font-size:14px;display:block;margin-bottom:2px}.ig-bio-desc[data-v-70b58da6]{font-size:14px;white-space:pre-wrap;margin:0;color:#262626}.ig-bio-edit[data-v-70b58da6]{display:flex;flex-direction:column;gap:8px}.ig-edit-input[data-v-70b58da6]{border:1px solid #dbdbdb;border-radius:4px;padding:6px;font-size:14px}.ig-edit-textarea[data-v-70b58da6]{border:1px solid #dbdbdb;border-radius:4px;padding:6px;font-size:14px;min-height:60px;resize:none}.ig-edit-actions[data-v-70b58da6]{display:flex;gap:10px;justify-content:flex-end}.ig-btn-primary[data-v-70b58da6]{background-color:#0095f6;color:white;border:none;padding:6px 12px;border-radius:4px;font-weight:600;cursor:pointer}.ig-btn-secondary[data-v-70b58da6]{background-color:transparent;color:#262626;border:1px solid #dbdbdb;padding:6px 12px;border-radius:4px;font-weight:600;cursor:pointer}.ig-profile-actions[data-v-70b58da6]{display:flex;gap:8px;margin-bottom:16px}.ig-action-button[data-v-70b58da6]{flex:1;background-color:#efefef;border:none;border-radius:8px;padding:7px 0;font-size:14px;font-weight:600;color:#262626;cursor:pointer}.ig-highlights[data-v-70b58da6]{padding:0 16px 16px 16px;display:flex;gap:16px;overflow-x:auto;scrollbar-width:none}.ig-highlights[data-v-70b58da6]::-webkit-scrollbar{display:none}.ig-highlight-item[data-v-70b58da6]{display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer}.ig-highlight-ring[data-v-70b58da6]{width:60px;height:60px;border-radius:50%;border:1px solid #dbdbdb;display:flex;align-items:center;justify-content:center}.ig-highlight-text[data-v-70b58da6]{font-size:11px;color:#262626}.ig-profile-tabs[data-v-70b58da6]{display:flex;border-top:1px solid #dbdbdb;height:44px}.ig-tab[data-v-70b58da6]{flex:1;display:flex;align-items:center;justify-content:center;cursor:pointer}.ig-tab.active[data-v-70b58da6]{border-bottom:1px solid #262626}.ig-tab.active svg[data-v-70b58da6]{fill:#262626;color:#262626}.ig-profile-grid[data-v-70b58da6]{display:grid;grid-template-columns:repeat(3,1fr);gap:1px}.ig-grid-item[data-v-70b58da6]{aspect-ratio:1/1;background-color:#efefef;background-size:cover;background-position:center;cursor:pointer}\n','',{version:3,sources:['webpack://./src/柏柏同层/Instagram/UserProfile.vue'],names:[],mappings:'AA4fA,kCACE,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,YAAa,CACb,qBAAsB,CACtB,aAAc,CACd,yFAAgG,CAChG,eACF,CAEA,oCACE,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cAAe,CACf,+BAAgC,CAChC,qBAAsB,CACtB,UACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,8BACE,eAAgB,CAChB,cAAe,CACf,QACF,CAEA,kCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,8BACE,cACF,CAEA,qCACE,MAAO,CACP,eAAgB,CAChB,iBACF,CAEA,kCACE,wBACF,CAEA,wCACE,YAAa,CACb,kBAAmB,CACnB,kBACF,CAEA,8CACE,iBAAkB,CAClB,iBAAkB,CAClB,cACF,CAEA,oCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBACF,CAEA,gCACE,iBAAkB,CAClB,UAAW,CACX,SAAU,CACV,wBAAyB,CACzB,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,qBACF,CAEA,mCACE,MAAO,CACP,YAAa,CACb,6BAA8B,CAC9B,kBACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,cACF,CAEA,8BACE,eAAgB,CAChB,cAAe,CACf,aACF,CAEA,gCACE,cAAe,CACf,aACF,CAEA,iCACE,kBACF,CAEA,8BACE,eAAgB,CAChB,cAAe,CACf,aAAc,CACd,iBACF,CAEA,8BACE,cAAe,CACf,oBAAqB,CACrB,QAAS,CACT,aACF,CAEA,8BACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,gCACE,wBAAyB,CACzB,iBAAkB,CAClB,WAAY,CACZ,cACF,CAEA,mCACE,wBAAyB,CACzB,iBAAkB,CAClB,WAAY,CACZ,cAAe,CACf,eAAgB,CAChB,WACF,CAEA,kCACE,YAAa,CACb,QAAS,CACT,wBACF,CAEA,iCACE,wBAAyB,CACzB,WAAY,CACZ,WAAY,CACZ,gBAAiB,CACjB,iBAAkB,CAClB,eAAgB,CAChB,cACF,CAEA,mCACE,4BAA6B,CAC7B,aAAc,CACd,wBAAyB,CACzB,gBAAiB,CACjB,iBAAkB,CAClB,eAAgB,CAChB,cACF,CAEA,qCACE,YAAa,CACb,OAAQ,CACR,kBACF,CAEA,mCACE,MAAO,CACP,wBAAyB,CACzB,WAAY,CACZ,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,aAAc,CACd,cACF,CAEA,gCACE,wBAAyB,CACzB,YAAa,CACb,QAAS,CACT,eAAgB,CAChB,oBACF,CACA,mDACE,YACF,CAEA,oCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,OAAQ,CACR,cACF,CAEA,oCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,wBAAyB,CACzB,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,oCACE,cAAe,CACf,aACF,CAEA,kCACE,YAAa,CACb,4BAA6B,CAC7B,WACF,CAEA,yBACE,MAAO,CACP,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cACF,CAEA,gCACE,+BACF,CACA,oCACE,YAAa,CACb,aACF,CAEA,kCACE,YAAa,CACb,mCAAqC,CACrC,OACF,CAEA,+BACE,gBAAiB,CACjB,wBAAyB,CACzB,qBAAsB,CACtB,0BAA2B,CAC3B,cACF',sourcesContent:['<template>\n  <div class="ig-user-profile">\n    \x3c!-- Header --\x3e\n    <header class="ig-profile-header">\n      <div class="ig-header-left">\n        <h1 class="ig-username">{{ currentUser?.name }}</h1>\n        <svg\n          aria-label="Down Chevron"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="12"\n          role="img"\n          viewBox="0 0 24 24"\n          width="12"\n        >\n          <path\n            d="M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z"\n            transform="rotate(180 12 12)"\n          ></path>\n        </svg>\n      </div>\n      <div class="ig-header-right">\n        <div class="ig-icon-btn" @click="sharedState.phone.activeApp = \'home\'">\n          \x3c!-- Close/Back Icon --\x3e\n          <svg\n            aria-label="Back"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="21"\n              x2="3"\n              y1="12"\n              y2="12"\n            ></line>\n            <polyline\n              fill="none"\n              points="9 6 3 12 9 18"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></polyline>\n          </svg>\n        </div>\n        <div class="ig-icon-btn">\n          <svg\n            aria-label="Options"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="3"\n              x2="21"\n              y1="4"\n              y2="4"\n            ></line>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="3"\n              x2="21"\n              y1="12"\n              y2="12"\n            ></line>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="3"\n              x2="21"\n              y1="20"\n              y2="20"\n            ></line>\n          </svg>\n        </div>\n      </div>\n    </header>\n\n    <main v-if="currentUser" class="ig-profile-content">\n      \x3c!-- Profile Info --\x3e\n      <div class="ig-profile-info">\n        <div class="ig-profile-avatar-row">\n          <div class="ig-profile-avatar-container" @click="editAvatar">\n            <div class="ig-profile-avatar" :style="{ backgroundImage: `url(\'${currentUser.head}\')` }"></div>\n            <div v-if="currentUser.isSelf" class="ig-plus-badge">\n              <svg\n                aria-label="Plus"\n                class="x1lliihq x1n2onr6 x5n08af"\n                fill="#ffffff"\n                height="12"\n                role="img"\n                viewBox="0 0 24 24"\n                width="12"\n              >\n                <path\n                  d="M21 11.3h-8.2V3c0-.4-.3-.8-.8-.8s-.8.4-.8.8v8.3H3c-.4 0-.8.3-.8.8s.3.8.8.8h8.2V21c0 .4.3.8.8.8s.8-.3.8-.8v-8.2H21c.4 0 .8-.3.8-.8s-.3-.8-.8-.8z"\n                ></path>\n              </svg>\n            </div>\n          </div>\n          <div class="ig-profile-stats">\n            <div class="ig-stat-item">\n              <span class="ig-stat-num">{{ currentUser.posts.length }}</span>\n              <span class="ig-stat-label">帖子</span>\n            </div>\n            <div class="ig-stat-item" @click="editStat(\'followers\')">\n              <span class="ig-stat-num">{{ currentUser.followers || \'0\' }}</span>\n              <span class="ig-stat-label">粉丝</span>\n            </div>\n            <div class="ig-stat-item" @click="editStat(\'following\')">\n              <span class="ig-stat-num">{{ currentUser.following || \'0\' }}</span>\n              <span class="ig-stat-label">关注</span>\n            </div>\n          </div>\n        </div>\n\n        <div class="ig-profile-bio">\n          <div v-if="!isEditingBio" class="ig-bio-text-display" @click="isEditingBio = true">\n            <span class="ig-bio-name">{{ currentUser.name }}</span>\n            <p class="ig-bio-desc">{{ currentUser.bio || \'点击编辑简介\' }}</p>\n          </div>\n          <div v-else class="ig-bio-edit">\n            <input v-model="editForm.name" placeholder="Name" class="ig-edit-input" />\n            <textarea v-model="editForm.bio" placeholder="Bio" class="ig-edit-textarea"></textarea>\n            <div class="ig-edit-actions">\n              <button class="ig-btn-secondary" @click="cancelEditBio">取消</button>\n              <button class="ig-btn-primary" @click="saveBio">保存</button>\n            </div>\n          </div>\n        </div>\n\n        <div class="ig-profile-actions">\n          <button v-if="currentUser.isSelf" class="ig-action-button" @click="isEditingBio = true">编辑主页</button>\n          <button v-if="currentUser.isSelf" class="ig-action-button">分享主页</button>\n\n          <button\n            v-if="!currentUser.isSelf"\n            class="ig-action-button"\n            style="background-color: #0095f6; color: white"\n            @click="emit(\'message\', currentUser.id)"\n          >\n            发消息\n          </button>\n          <button v-if="!currentUser.isSelf" class="ig-action-button">关注</button>\n        </div>\n      </div>\n\n      \x3c!-- Highlights (Placeholder) --\x3e\n      <div class="ig-highlights">\n        <div class="ig-highlight-item">\n          <div class="ig-highlight-ring">\n            <svg\n              aria-label="Plus"\n              class="x1lliihq x1n2onr6 x5n08af"\n              fill="#262626"\n              height="24"\n              role="img"\n              viewBox="0 0 24 24"\n              width="24"\n            >\n              <path\n                d="M21 11.3h-8.2V3c0-.4-.3-.8-.8-.8s-.8.4-.8.8v8.3H3c-.4 0-.8.3-.8.8s.3.8.8.8h8.2V21c0 .4.3.8.8.8s.8-.3.8-.8v-8.2H21c.4 0 .8-.3.8-.8s-.3-.8-.8-.8z"\n              ></path>\n            </svg>\n          </div>\n          <span class="ig-highlight-text">新建</span>\n        </div>\n      </div>\n\n      \x3c!-- Tabs --\x3e\n      <div class="ig-profile-tabs">\n        <div class="ig-tab active">\n          <svg\n            aria-label="Posts"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <rect\n              fill="none"\n              height="18"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              width="18"\n              x="3"\n              y="3"\n            ></rect>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="9.015"\n              x2="9.015"\n              y1="3"\n              y2="21"\n            ></line>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="14.985"\n              x2="14.985"\n              y1="3"\n              y2="21"\n            ></line>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="21"\n              x2="3"\n              y1="9.015"\n              y2="9.015"\n            ></line>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="21"\n              x2="3"\n              y1="14.985"\n              y2="14.985"\n            ></line>\n          </svg>\n        </div>\n        <div class="ig-tab">\n          <svg\n            aria-label="Reels"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="#8e8e8e"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="2.049"\n              x2="21.95"\n              y1="7.002"\n              y2="7.002"\n            ></line>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="13.504"\n              x2="16.362"\n              y1="2.001"\n              y2="7.002"\n            ></line>\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="7.207"\n              x2="10.002"\n              y1="2.11"\n              y2="7.002"\n            ></line>\n            <path\n              d="M2 12.001v3.449c0 2.849.698 4.006 1.606 4.945.94.908 2.098 1.607 4.946 1.607h6.896c2.848 0 4.006-.699 4.946-1.607.908-.939 1.606-2.096 1.606-4.945V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z"\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></path>\n            <path\n              d="M9.763 17.664a.908.908 0 0 1-.454-.787V11.63a.909.909 0 0 1 1.364-.788l4.545 2.624a.909.909 0 0 1 0 1.575l-4.545 2.624a.91.91 0 0 1-.91 0Z"\n              fill-rule="evenodd"\n            ></path>\n          </svg>\n        </div>\n        <div class="ig-tab">\n          <svg\n            aria-label="Tagged"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="#8e8e8e"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="M10.201 3.797 12 1.997l1.799 1.8a1.59 1.59 0 0 0 1.124.465h5.259A1.818 1.818 0 0 1 22 6.08v14.104a1.818 1.818 0 0 1-1.818 1.818H3.818A1.818 1.818 0 0 1 2 20.184V6.08a1.818 1.818 0 0 1 1.818-1.818h5.26a1.59 1.59 0 0 0 1.123-.465Z"\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></path>\n            <path\n              d="M18.598 22.002V21.4a3.949 3.949 0 0 0-3.948-3.949H9.495A3.949 3.949 0 0 0 5.547 21.4v.602"\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></path>\n            <circle\n              cx="12.072"\n              cy="11.075"\n              fill="none"\n              r="3.556"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></circle>\n          </svg>\n        </div>\n      </div>\n\n      \x3c!-- Grid --\x3e\n      <div class="ig-profile-grid">\n        <div\n          v-for="post in currentUser.posts"\n          :key="post.id"\n          class="ig-grid-item"\n          :style="{ backgroundImage: `url(${getPostImage(post)})` }"\n          @click="emit(\'view-post\', post)"\n        ></div>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed, ref, watch } from \'vue\';\nimport { sharedState } from \'../shared-state\';\n\nconst props = defineProps({\n  userId: {\n    type: String,\n    default: \'user\',\n  },\n});\n\nconst emit = defineEmits([\'back\', \'view-post\', \'message\']);\n\nconst isEditingBio = ref(false);\n\nconst currentUser = computed(() => {\n  if (props.userId === \'user\') {\n    return {\n      id: \'user\',\n      name: sharedState.Instagram.userName || sharedState.ST.userName,\n      bio: sharedState.Instagram.userBio || \'\',\n      head: sharedState.Instagram.userHead || sharedState.ST.userHead,\n      posts: sharedState.Instagram.posts.filter(\n        (p: any) =>\n          p.sender === \'user\' || p.sender === sharedState.Instagram.userName || p.sender === sharedState.ST.userName,\n      ),\n      followers: sharedState.Instagram.followers,\n      following: sharedState.Instagram.following,\n      isSelf: true,\n    };\n  } else {\n    const char = sharedState.QQ.chars[props.userId];\n    if (!char) return null;\n    return {\n      id: props.userId,\n      name: char.instagramName || char.name,\n      bio: char.instagramBio || \'这里空空如也\',\n      head: char.instagramHead || char.head,\n      posts: sharedState.Instagram.posts.filter(\n        (p: any) =>\n          p.sender === props.userId ||\n          p.sender === char.name ||\n          p.sender === char.instagramName ||\n          p.sender === char.instagramId,\n      ),\n      followers: char.instagramFollowers || \'100\', // Mock data for now\n      following: char.instagramFollowing || \'50\', // Mock data for now\n      isSelf: false,\n    };\n  }\n});\n\nconst editForm = ref({\n  name: \'\',\n  bio: \'\',\n});\n\n// Initialize form when user changes or edit mode starts\nwatch(\n  () => [currentUser.value, isEditingBio.value],\n  () => {\n    if (currentUser.value) {\n      editForm.value.name = currentUser.value.name;\n      editForm.value.bio = currentUser.value.bio;\n    }\n  },\n  { immediate: true },\n);\n\nfunction getPostImage(post: any) {\n  if (post.imgs && post.imgs.length > 0) {\n    return post.imgs[0].content || post.imgs[0].url;\n  }\n  // Extract from content if needed, simplified\n  const imgTagMatch = post.content.match(/\\[img-(.+?)\\]/);\n  if (imgTagMatch) return imgTagMatch[1];\n  return \'\';\n}\n\nfunction saveBio() {\n  if (props.userId === \'user\') {\n    sharedState.Instagram.userName = editForm.value.name;\n    sharedState.Instagram.userBio = editForm.value.bio;\n    sharedState.Instagram.saveSettings();\n  } else {\n    const char = sharedState.QQ.chars[props.userId];\n    if (char) {\n      char.instagramName = editForm.value.name;\n      char.instagramBio = editForm.value.bio;\n      sharedState.QQ.saveChars();\n    }\n  }\n  isEditingBio.value = false;\n}\n\nfunction cancelEditBio() {\n  isEditingBio.value = false;\n}\n\nfunction editAvatar() {\n  const currentHead = currentUser.value?.head || \'\';\n  const url = prompt(\'请输入新的头像链接:\', currentHead);\n  if (url) {\n    if (props.userId === \'user\') {\n      sharedState.Instagram.userHead = url;\n      sharedState.Instagram.saveSettings();\n    } else {\n      const char = sharedState.QQ.chars[props.userId];\n      if (char) {\n        char.instagramHead = url;\n        sharedState.QQ.saveChars();\n      }\n    }\n  }\n}\n\nfunction editStat(type: \'followers\' | \'following\') {\n  const current = currentUser.value?.[type] || \'0\';\n  const newVal = prompt(`修改 ${type}:`, current);\n  if (newVal !== null) {\n    if (props.userId === \'user\') {\n      sharedState.Instagram[type] = newVal;\n      sharedState.Instagram.saveSettings();\n    } else {\n      const char = sharedState.QQ.chars[props.userId];\n      if (char) {\n        if (type === \'followers\') char.instagramFollowers = newVal;\n        if (type === \'following\') char.instagramFollowing = newVal;\n        sharedState.QQ.saveChars();\n      }\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n.ig-user-profile {\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  color: #262626;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n  overflow: hidden;\n}\n\n.ig-profile-header {\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  border-bottom: 1px solid #dbdbdb;\n  background-color: #fff;\n  z-index: 10;\n}\n\n.ig-header-left {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.ig-username {\n  font-weight: 600;\n  font-size: 16px;\n  margin: 0;\n}\n\n.ig-header-right {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.ig-icon-btn {\n  cursor: pointer;\n}\n\n.ig-profile-content {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.ig-profile-info {\n  padding: 16px 16px 0 16px;\n}\n\n.ig-profile-avatar-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.ig-profile-avatar-container {\n  position: relative;\n  margin-right: 28px;\n  cursor: pointer;\n}\n\n.ig-profile-avatar {\n  width: 77px;\n  height: 77px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid #dbdbdb;\n}\n\n.ig-plus-badge {\n  position: absolute;\n  bottom: 2px;\n  right: 2px;\n  background-color: #0095f6;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid #fff;\n}\n\n.ig-profile-stats {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  padding-right: 12px;\n}\n\n.ig-stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n}\n\n.ig-stat-num {\n  font-weight: 600;\n  font-size: 18px;\n  color: #262626;\n}\n\n.ig-stat-label {\n  font-size: 13px;\n  color: #262626;\n}\n\n.ig-profile-bio {\n  margin-bottom: 16px;\n}\n\n.ig-bio-name {\n  font-weight: 600;\n  font-size: 14px;\n  display: block;\n  margin-bottom: 2px;\n}\n\n.ig-bio-desc {\n  font-size: 14px;\n  white-space: pre-wrap;\n  margin: 0;\n  color: #262626;\n}\n\n.ig-bio-edit {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.ig-edit-input {\n  border: 1px solid #dbdbdb;\n  border-radius: 4px;\n  padding: 6px;\n  font-size: 14px;\n}\n\n.ig-edit-textarea {\n  border: 1px solid #dbdbdb;\n  border-radius: 4px;\n  padding: 6px;\n  font-size: 14px;\n  min-height: 60px;\n  resize: none;\n}\n\n.ig-edit-actions {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.ig-btn-primary {\n  background-color: #0095f6;\n  color: white;\n  border: none;\n  padding: 6px 12px;\n  border-radius: 4px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.ig-btn-secondary {\n  background-color: transparent;\n  color: #262626;\n  border: 1px solid #dbdbdb;\n  padding: 6px 12px;\n  border-radius: 4px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.ig-profile-actions {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n\n.ig-action-button {\n  flex: 1;\n  background-color: #efefef;\n  border: none;\n  border-radius: 8px;\n  padding: 7px 0;\n  font-size: 14px;\n  font-weight: 600;\n  color: #262626;\n  cursor: pointer;\n}\n\n.ig-highlights {\n  padding: 0 16px 16px 16px;\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  scrollbar-width: none;\n}\n.ig-highlights::-webkit-scrollbar {\n  display: none;\n}\n\n.ig-highlight-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  cursor: pointer;\n}\n\n.ig-highlight-ring {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  border: 1px solid #dbdbdb;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.ig-highlight-text {\n  font-size: 11px;\n  color: #262626;\n}\n\n.ig-profile-tabs {\n  display: flex;\n  border-top: 1px solid #dbdbdb;\n  height: 44px;\n}\n\n.ig-tab {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n\n.ig-tab.active {\n  border-bottom: 1px solid #262626;\n}\n.ig-tab.active svg {\n  fill: #262626;\n  color: #262626;\n}\n\n.ig-profile-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1px;\n}\n\n.ig-grid-item {\n  aspect-ratio: 1/1;\n  background-color: #efefef;\n  background-size: cover;\n  background-position: center;\n  cursor: pointer;\n}\n</style>\n'],sourceRoot:''}]);const s=r},4785:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.rednote-postpage-bottom{display:flex;align-items:center;width:100%;height:45px;padding:0px 10px;border-top:1px solid #f6f6f6;gap:3px}.rednote-postpage-comment{display:flex;align-items:start;gap:8px}.rednote-postpage-content::-webkit-scrollbar{display:none !important}.rednote-postpage-content{display:flex;flex:1;flex-direction:column;width:100%;overflow-y:auto;scrollbar-width:none !important;-ms-overflow-style:none !important}.rednote-postpage-top{display:flex;align-items:center;gap:8px;padding:0 10px 10px;border-bottom:1px solid #eaedf2}.rednote-postpage{background-color:white;width:100%;height:100%;padding-top:30px;display:flex;flex-direction:column}.rednote-homepage-bottom-button{color:#939393;width:3rem;font-size:16px;text-align:center}.rednote-homepage-bottom{width:100%;height:50px;display:flex;justify-content:space-evenly;align-items:center;background-color:#ffffff;border-top:1px solid #e4e4e4}.rednote-homepage-post-title{font-size:16px;text-align:start;color:black !important}.rednote-homepage-post-author{display:flex;align-items:center;gap:5px;margin-top:10px}.rednote-homepage-post-info{padding:10px}.post-img-blue{background-color:#ebe8f9}.post-img-pink{background-color:#fbe7f0}.post-img-green{background-color:#edefc8}.post-img-purple{background-color:#d9c0ff}.rednote-homepage-post-img{font-size:20px;padding:2.5rem 1.5rem;border-radius:5px;text-align:center}.rednote-homepage-post{width:100%;margin-top:5px;background-color:#ffffff;border-radius:5px;height:-moz-fit-content;height:fit-content}.rednote-homepage-content::-webkit-scrollbar{display:none !important}.rednote-homepage-content{width:100%;height:auto;flex:1;display:grid;grid-template-columns:50% 50%;gap:5px;padding:5px;overflow-y:auto;scrollbar-width:none !important;-ms-overflow-style:none !important}.rednote-homepage{width:100%;height:100%;padding-top:35px;display:flex;flex-direction:column;background-color:#f8fcfd}.rednote-homepage-top{display:flex;font-size:18px;align-items:center;justify-content:space-between;padding:0px 15px 10px;border-bottom:1px solid #e4e4e4}.rednote-homepage{letter-spacing:1px;line-height:1.4}\n','',{version:3,sources:['webpack://./src/柏柏同层/RedNote/RedNote.vue'],names:[],mappings:'AA8OA,yBACE,YAAa,CACb,kBAAmB,CACnB,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,4BAA6B,CAC7B,OACF,CACA,0BACE,YAAa,CACb,iBAAkB,CAClB,OAEF,CACA,6CACE,uBACF,CACA,0BACE,YAAa,CACb,MAAO,CACP,qBAAsB,CACtB,UAAW,CACX,eAAgB,CAChB,+BAAgC,CAChC,kCACF,CACA,sBACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,mBAAoB,CACpB,+BACF,CACA,kBACE,sBAAuB,CACvB,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,YAAa,CACb,qBACF,CACA,gCACE,aAAc,CACd,UAAW,CACX,cAAe,CACf,iBACF,CACA,yBACE,UAAW,CACX,WAAY,CAEZ,YAAa,CACb,4BAA6B,CAC7B,kBAAmB,CACnB,wBAAyB,CACzB,4BACF,CACA,6BACE,cAAe,CACf,gBAAiB,CACjB,sBACF,CACA,8BACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eACF,CACA,4BACE,YACF,CACA,eACE,wBACF,CACA,eACE,wBACF,CACA,gBACE,wBACF,CACA,iBACE,wBACF,CACA,2BACE,cAAe,CACf,qBAAsB,CACtB,iBAAkB,CAClB,iBACF,CACA,uBACE,UAAW,CACX,cAAe,CACf,wBAAyB,CACzB,iBAAkB,CAClB,uBAAmB,CAAnB,kBAEF,CACA,6CACE,uBACF,CACA,0BACE,UAAW,CACX,WAAY,CACZ,MAAO,CACP,YAAa,CACb,6BAA8B,CAC9B,OAAQ,CACR,WAAY,CACZ,eAAgB,CAChB,+BAAgC,CAChC,kCACF,CACA,kBACE,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,YAAa,CACb,qBAAsB,CACtB,wBACF,CACA,sBACE,YAAa,CACb,cAAe,CACf,kBAAmB,CACnB,6BAA8B,CAC9B,qBAAsB,CAEtB,+BACF,CACA,kBACE,kBAAmB,CACnB,eACF',sourcesContent:['<template>\n  <div v-show="!sharedState.RedNote.activePost || sharedState.RedNote.post.length == 0" class="rednote-homepage">\n    <div class="rednote-homepage-top">\n      <div\n        class="user_avatar"\n        style="\n          width: 35px;\n          height: 35px;\n          border-radius: 50%;\n          background-size: cover;\n          background-position: top center;\n          background-repeat: no-repeat;\n          background-color: black;\n          aspect-ratio: 1;\n          min-width: 35px;\n        "\n        @click="sharedState.phone.activeApp = \'home\'"\n      ></div>\n      <div style="display: flex; margin-bottom: -5px; flex: 1; justify-content: space-evenly">\n        <div style="font-size: 16px; color: rgb(100, 100, 100) !important; white-space: nowrap !important">关注</div>\n        <div\n          style="\n            display: flex;\n            flex-direction: column;\n            gap: 5px;\n            align-items: center;\n            color: black !important;\n            white-space: nowrap !important;\n          "\n        >\n          <div>发现</div>\n          <div style="width: 3rem; height: 4px; background-color: #e73f4c; border-radius: 10px"></div>\n        </div>\n        <div style="font-size: 16px; color: rgb(100, 100, 100) !important; white-space: nowrap !important">同城</div>\n      </div>\n\n      <div\n        style="\n          width: 35px;\n          height: 35px;\n          border-radius: 50%;\n          aspect-ratio: 1;\n          min-width: 35px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        "\n      >\n        <svg viewBox="0 0 1024 1024" width="20" height="20" style="margin-top: -5px">\n          <path\n            d="M704.448 648.768L956.48 900.736l-55.744 55.68L648.64 704.384a393.856 393.856 0 1 1 55.808-55.68z m-82.24-26.56a315.072 315.072 0 1 0-437.76-453.248 315.072 315.072 0 0 0 437.76 453.248z"\n            p-id="16026"\n            fill="#303030"\n          ></path>\n        </svg>\n      </div>\n    </div>\n    <div class="rednote-homepage-content">\n      <div style="display: flex; flex-direction: column; width: 100%">\n        <Card\n          v-for="value of sharedState.RedNote.post.filter((_, index) => index % 2 === 0)"\n          :card-content="value"\n          @click="\n            sharedState.RedNote.activePost = value.id;\n            console.log(value.id);\n          "\n        ></Card>\n      </div>\n      <div style="display: flex; flex-direction: column; width: 100%">\n        <Card\n          v-for="value of sharedState.RedNote.post.filter((_, index) => index % 2 === 1)"\n          :card-content="value"\n          @click="\n            sharedState.RedNote.activePost = value.id;\n            console.log(value.id);\n          "\n        ></Card>\n      </div>\n    </div>\n    <div class="rednote-homepage-bottom">\n      <div class="rednote-homepage-bottom-button" style="color: black; font-size: 18px">首页</div>\n      <div class="rednote-homepage-bottom-button">市集</div>\n<div\n  style="width: 3rem; height: 40px; background-color: #ea3e4a; border-radius: 9px; position: relative"\n  @click="showPublishDialog = true"\n>\n        <div\n          style="\n            width: 50%;\n            background-color: white;\n            height: 4px;\n            position: absolute;\n            border-radius: 5px;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n          "\n        ></div>\n        <div\n          style="\n            width: 50%;\n            background-color: white;\n            height: 4px;\n            position: absolute;\n            border-radius: 5px;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%) rotate(90deg);\n          "\n        ></div>\n      </div>\n      <div class="rednote-homepage-bottom-button">消息</div>\n      <div class="rednote-homepage-bottom-button">我的</div>\n    </div>\n  </div>\n\n  \x3c!-- 帖子详情页 --\x3e\n  <transition name="slide-fade">\n    <div v-show="sharedState.RedNote.activePost" class="rednote-postpage-list" style="width: 100%; height: 100%">\n      <post v-for="value of sharedState.RedNote.post" :post-content="value"></post>\n    </div>\n  </transition>\n  \x3c!-- 发布弹窗 --\x3e\n  <transition name="slide-fade">\n    <div v-show="showPublishDialog" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: white; z-index: 1000; padding-top: 35px; display: flex; flex-direction: column;">\n      \x3c!-- 顶部栏 --\x3e\n      <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px 15px; border-bottom: 1px solid #e4e4e4;">\n        <div style="color: #666; font-size: 16px;" @click="showPublishDialog = false">取消</div>\n        <div style="font-size: 16px; font-weight: bold;">发布笔记</div>\n        <div style="color: #ea3e4a; font-size: 16px;" @click="publishPost">发布</div>\n      </div>\n\n      \x3c!-- 表单内容 --\x3e\n      <div style="flex: 1; overflow-y: auto; padding: 15px;">\n        \x3c!-- 一级标题 --\x3e\n        <div style="margin-bottom: 15px;">\n          <div style="color: #666; font-size: 14px; margin-bottom: 8px;">一级标题（震撼效果）</div>\n          <input\n            v-model="newPost.title1"\n            type="text"\n            placeholder="例如：震惊！上班族10分钟做出米其林级别早餐"\n            style="width: 100%; padding: 10px; border: 1px solid #e4e4e4; border-radius: 5px; font-size: 14px;"\n          />\n        </div>\n\n        \x3c!-- 二级标题 --\x3e\n        <div style="margin-bottom: 15px;">\n          <div style="color: #666; font-size: 14px; margin-bottom: 8px;">二级标题（温馨实用）</div>\n          <input\n            v-model="newPost.title2"\n            type="text"\n            placeholder="例如：懒人必学：营养美味的快手早餐"\n            style="width: 100%; padding: 10px; border: 1px solid #e4e4e4; border-radius: 5px; font-size: 14px;"\n          />\n        </div>\n\n        \x3c!-- 帖子内容 --\x3e\n        <div style="margin-bottom: 15px;">\n          <div style="color: #666; font-size: 14px; margin-bottom: 8px;">帖子内容</div>\n          <textarea\n            v-model="newPost.content"\n            placeholder="分享你的生活，记录美好瞬间...&#10;&#10;提示：可以用 [img-图片描述] 来表示配图"\n            style="width: 100%; min-height: 200px; padding: 10px; border: 1px solid #e4e4e4; border-radius: 5px; font-size: 14px; resize: vertical;"\n          ></textarea>\n        </div>\n\n        \x3c!-- 提示信息 --\x3e\n        <div style="background-color: #fff7e6; padding: 10px; border-radius: 5px; font-size: 12px; color: #ff8800;">\n          <div style="margin-bottom: 5px;">📝 发布提示：</div>\n          <div>• 一级标题要有震撼效果</div>\n          <div>• 二级标题要温馨实用</div>\n          <div>• 内容中可用 [img-描述] 表示图片</div>\n        </div>\n      </div>\n    </div>\n  </transition>\n\n</template>\n<script setup>\nimport { ref } from \'vue\';\nimport { sharedState } from \'../shared-state\';\nimport Card from \'./card.vue\';\nimport post from \'./post.vue\';\n\nconst showPublishDialog = ref(false);\nconst newPost = ref({\n  title1: \'\',  // 一级标题\n  title2: \'\',  // 二级标题\n  content: \'\'  // 帖子内容\n});\n\n// 生成随机帖子ID（6位英文数字）\nfunction generatePostId() {\n  const chars = \'abcdefghijklmnopqrstuvwxyz0123456789\';\n  let id = \'\';\n  for (let i = 0; i < 6; i++) {\n    id += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return id;\n}\n\nfunction publishPost() {\n  // 验证必填项\n  if (!newPost.value.title1.trim() || !newPost.value.title2.trim() || !newPost.value.content.trim()) {\n    alert(\'请填写完整的标题和内容\');\n    return;\n  }\n\n  // 生成帖子ID\n  const postId = generatePostId();\n\n  // 构建小红书格式的消息\n  let message = `{{user}}发布了小红书帖子，请按照规范格式输出该帖子及3-5条评论：\\n\\n`;\n  message += `帖子ID: ${postId}\\n`;\n  message += `一级标题: ${newPost.value.title1}\\n`;\n  message += `二级标题: ${newPost.value.title2}\\n`;\n  message += `帖子内容: ${newPost.value.content}`;\n\n  // 将消息放入对话框，不立即发送\n  const old_content = $(\'#send_textarea\').val().trim();\n  const new_content = old_content ? old_content + \'\\n\\n\' + message : message;\n\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  // 重置表单\n  newPost.value = {\n    title1: \'\',\n    title2: \'\',\n    content: \'\'\n  };\n\n  showPublishDialog.value = false;\n}\n\n<\/script>\n<style>\n.rednote-postpage-bottom {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 45px;\n  padding: 0px 10px;\n  border-top: 1px solid #f6f6f6;\n  gap: 3px;\n}\n.rednote-postpage-comment {\n  display: flex;\n  align-items: start;\n  gap: 8px;\n  /* margin-bottom: 25px; */\n}\n.rednote-postpage-content::-webkit-scrollbar {\n  display: none !important;\n}\n.rednote-postpage-content {\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  width: 100%;\n  overflow-y: auto;\n  scrollbar-width: none !important;\n  -ms-overflow-style: none !important;\n}\n.rednote-postpage-top {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 0 10px 10px;\n  border-bottom: 1px solid #eaedf2;\n}\n.rednote-postpage {\n  background-color: white;\n  width: 100%;\n  height: 100%;\n  padding-top: 30px;\n  display: flex;\n  flex-direction: column;\n}\n.rednote-homepage-bottom-button {\n  color: #939393;\n  width: 3rem;\n  font-size: 16px;\n  text-align: center;\n}\n.rednote-homepage-bottom {\n  width: 100%;\n  height: 50px;\n  /* padding-top: 5px; */\n  display: flex;\n  justify-content: space-evenly;\n  align-items: center;\n  background-color: #ffffff;\n  border-top: 1px solid #e4e4e4;\n}\n.rednote-homepage-post-title {\n  font-size: 16px;\n  text-align: start;\n  color: black !important;\n}\n.rednote-homepage-post-author {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  margin-top: 10px;\n}\n.rednote-homepage-post-info {\n  padding: 10px;\n}\n.post-img-blue {\n  background-color: #ebe8f9;\n}\n.post-img-pink {\n  background-color: #fbe7f0;\n}\n.post-img-green {\n  background-color: #edefc8;\n}\n.post-img-purple {\n  background-color: #d9c0ff;\n}\n.rednote-homepage-post-img {\n  font-size: 20px;\n  padding: 2.5rem 1.5rem;\n  border-radius: 5px;\n  text-align: center;\n}\n.rednote-homepage-post {\n  width: 100%;\n  margin-top: 5px;\n  background-color: #ffffff;\n  border-radius: 5px;\n  height: fit-content;\n  /* box-shadow: 2px 2px 2px rgba(15, 15, 15, 0.3); */\n}\n.rednote-homepage-content::-webkit-scrollbar {\n  display: none !important;\n}\n.rednote-homepage-content {\n  width: 100%;\n  height: auto;\n  flex: 1;\n  display: grid;\n  grid-template-columns: 50% 50%;\n  gap: 5px;\n  padding: 5px;\n  overflow-y: auto;\n  scrollbar-width: none !important;\n  -ms-overflow-style: none !important;\n}\n.rednote-homepage {\n  width: 100%;\n  height: 100%;\n  padding-top: 35px;\n  display: flex;\n  flex-direction: column;\n  background-color: #f8fcfd;\n}\n.rednote-homepage-top {\n  display: flex;\n  font-size: 18px;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0px 15px 10px;\n  /* gap: 30px; */\n  border-bottom: 1px solid #e4e4e4;\n}\n.rednote-homepage {\n  letter-spacing: 1px;\n  line-height: 1.4;\n}\n</style>\n'],sourceRoot:''}]);const s=r},4799:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.instagram-container[data-v-06daa26e]{width:100%;height:100%;background-color:#ffffff;display:flex;flex-direction:column;color:#262626;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif;overflow:hidden;box-sizing:border-box;padding-top:35px}.ig-search-bar-container[data-v-06daa26e]{padding:8px 16px;background-color:#fff}.ig-search-box[data-v-06daa26e]{background-color:#efefef;border-radius:8px;padding:8px 16px;display:flex;align-items:center;gap:8px}.ig-search-input[data-v-06daa26e]{border:none;background:none;flex:1;font-size:16px;outline:none}.ig-explore-grid[data-v-06daa26e]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.ig-explore-cta[data-v-06daa26e]{cursor:pointer;padding:20px;border:1px dashed #dbdbdb;border-radius:12px;width:100%;box-sizing:border-box}.ig-explore-cta[data-v-06daa26e]:active{background-color:#fafafa}.ig-explore-icon[data-v-06daa26e]{font-size:40px;margin-bottom:10px}.ig-sub-text[data-v-06daa26e]{color:#8e8e8e;font-size:13px;margin-top:4px}.ig-loading-state[data-v-06daa26e]{display:flex;flex-direction:column;align-items:center;color:#8e8e8e}.ig-spinner[data-v-06daa26e]{width:30px;height:30px;border:3px solid #dbdbdb;border-top-color:#8e8e8e;border-radius:50%;animation:spin-06daa26e 1s linear infinite;margin-bottom:10px}@keyframes spin-06daa26e{to{transform:rotate(360deg)}}.ig-header[data-v-06daa26e]{height:44px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;border-bottom:1px solid #dbdbdb;background-color:#fff;z-index:10}.ig-logo[data-v-06daa26e]{font-family:\'Instagram Sans\',cursive;font-size:24px;font-weight:600;margin:0;letter-spacing:-1px}.ig-header-left[data-v-06daa26e]{display:flex;align-items:center;cursor:pointer}.ig-header-right[data-v-06daa26e]{display:flex;gap:20px}.ig-icon-btn[data-v-06daa26e]{cursor:pointer}.ig-content[data-v-06daa26e]{flex:1;overflow-y:auto;overflow-x:hidden;scrollbar-width:none}.ig-content[data-v-06daa26e]::-webkit-scrollbar{display:none}.ig-stories[data-v-06daa26e]{display:flex;gap:14px;padding:14px 0 14px 16px;border-bottom:1px solid #efefef;overflow-x:auto;scrollbar-width:none}.ig-stories[data-v-06daa26e]::-webkit-scrollbar{display:none}.ig-story-item[data-v-06daa26e]{display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer}.ig-story-ring[data-v-06daa26e]{width:66px;height:66px;border-radius:50%;padding:2px;background:linear-gradient(45deg,#f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);display:flex;justify-content:center;align-items:center}.ig-story-ring.your-story[data-v-06daa26e]{background:none;position:relative}.ig-story-avatar[data-v-06daa26e]{width:58px;height:58px;border-radius:50%;background-size:cover;background-position:center;border:2px solid #fff}.ig-story-add-icon[data-v-06daa26e]{position:absolute;bottom:0;right:0;background-color:#0095f6;color:white;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;border:2px solid #fff}.ig-story-username[data-v-06daa26e]{font-size:11px;color:#262626;max-width:64px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ig-feed[data-v-06daa26e]{padding-bottom:50px}.ig-empty-state[data-v-06daa26e]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#8e8e8e}.ig-empty-icon[data-v-06daa26e]{margin-bottom:16px;color:#262626}.ig-empty-state p[data-v-06daa26e]{margin:4px 0;font-weight:600;font-size:20px;color:#262626}.ig-empty-state .ig-empty-sub[data-v-06daa26e]{font-weight:400;font-size:14px;color:#8e8e8e}.ig-bottom-nav[data-v-06daa26e]{height:48px;display:flex;justify-content:space-around;align-items:center;border-top:1px solid #dbdbdb;background-color:#fff;z-index:10}.ig-nav-item[data-v-06daa26e]{cursor:pointer;display:flex;align-items:center;justify-content:center}.ig-nav-avatar[data-v-06daa26e]{width:24px;height:24px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #dbdbdb}.ig-publish-modal[data-v-06daa26e]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fff;z-index:100;display:flex;flex-direction:column;box-sizing:border-box;padding-top:35px}.ig-publish-content[data-v-06daa26e]{background-color:#fff;height:100%;display:flex;flex-direction:column}.ig-publish-header[data-v-06daa26e]{height:44px;border-bottom:1px solid #dbdbdb;display:flex;align-items:center;justify-content:space-between;padding:0 16px;background-color:#fff}.ig-text-btn[data-v-06daa26e]{background:none;border:none;font-size:16px;cursor:pointer;padding:0}.ig-text-btn.cancel[data-v-06daa26e]{color:#262626}.ig-text-btn.submit[data-v-06daa26e]{color:#0095f6;font-weight:600}.ig-publish-title[data-v-06daa26e]{font-weight:600;font-size:16px}.ig-publish-body[data-v-06daa26e]{flex:1;overflow-y:auto}.ig-publish-row[data-v-06daa26e]{display:flex;padding:16px;gap:12px}.ig-publish-avatar[data-v-06daa26e]{width:30px;height:30px;border-radius:50%;background-size:cover;background-position:center;flex-shrink:0}.ig-publish-input[data-v-06daa26e]{flex:1;border:none;resize:none;font-family:inherit;font-size:15px;outline:none;min-height:60px;margin-top:4px}.ig-thumbnail-preview[data-v-06daa26e]{width:48px;height:48px;background-size:cover;background-position:center;border-radius:2px}.ig-section-title[data-v-06daa26e]{padding:12px 16px;font-weight:600;font-size:15px;color:#262626}.ig-image-scroller[data-v-06daa26e]{display:flex;gap:10px;overflow-x:auto;padding:0 16px 16px 16px;scrollbar-width:none}.ig-image-scroller[data-v-06daa26e]::-webkit-scrollbar{display:none}.ig-scroller-item[data-v-06daa26e]{width:100px;height:100px;border-radius:4px;background-size:cover;background-position:center;flex-shrink:0;position:relative;border:1px solid #efefef}.ig-remove-badge[data-v-06daa26e]{position:absolute;top:4px;right:4px;background:rgba(0,0,0,0.5);color:white;width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer}.ig-add-card[data-v-06daa26e]{width:100px;height:100px;border-radius:4px;border:1px dashed #dbdbdb;display:flex;flex-direction:column;align-items:center;justify-content:center;flex-shrink:0;cursor:pointer;color:#8e8e8e}.ig-plus[data-v-06daa26e]{font-size:24px;font-weight:300}.ig-add-text[data-v-06daa26e]{font-size:12px;margin-top:4px}.ig-divider[data-v-06daa26e]{height:1px;background-color:#efefef}.ig-action-row[data-v-06daa26e]{padding:14px 16px;display:flex;justify-content:space-between;align-items:center;font-size:16px;color:#262626;cursor:pointer}.ig-action-label[data-v-06daa26e]{flex:1}.ig-action-right[data-v-06daa26e]{display:flex;align-items:center;gap:8px}.ig-action-value[data-v-06daa26e]{color:#0095f6;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:15px}.ig-chevron[data-v-06daa26e]{color:#8e8e8e;font-size:20px}.ig-tag-list[data-v-06daa26e]{flex:1;overflow-y:auto;padding:0 16px}.ig-tag-item[data-v-06daa26e]{display:flex;align-items:center;justify-content:space-between;padding:12px 0;cursor:pointer}.ig-tag-user-info[data-v-06daa26e]{display:flex;align-items:center;gap:12px}.ig-tag-avatar[data-v-06daa26e]{width:44px;height:44px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #dbdbdb}.ig-tag-username[data-v-06daa26e]{font-size:14px;font-weight:600;color:#262626}.ig-checkbox[data-v-06daa26e]{width:24px;height:24px;border-radius:50%;border:1px solid #dbdbdb;display:flex;align-items:center;justify-content:center}.ig-checkbox.checked[data-v-06daa26e]{background-color:#0095f6;border-color:#0095f6}.slide-up-enter-active[data-v-06daa26e],.slide-up-leave-active[data-v-06daa26e]{transition:transform 0.3s ease}.slide-up-enter-from[data-v-06daa26e],.slide-up-leave-to[data-v-06daa26e]{transform:translateY(100%)}.ig-comment-overlay[data-v-06daa26e]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:200;display:flex;flex-direction:column;justify-content:flex-end}.ig-comment-backdrop[data-v-06daa26e]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5)}.ig-comment-box[data-v-06daa26e]{background-color:#fff;z-index:201;border-top-left-radius:12px;border-top-right-radius:12px;padding-bottom:20px;width:100%;max-height:80%;display:flex;flex-direction:column}.ig-comment-header-bar[data-v-06daa26e]{display:flex;justify-content:center;padding:10px 0}.ig-comment-handle[data-v-06daa26e]{width:40px;height:4px;background-color:#dbdbdb;border-radius:2px}.ig-comment-title-row[data-v-06daa26e]{text-align:center;font-weight:600;font-size:16px;padding-bottom:10px;border-bottom:1px solid #efefef}.ig-comment-input-area[data-v-06daa26e]{padding:12px 16px;display:flex;align-items:center;gap:12px}.ig-comment-my-avatar[data-v-06daa26e]{width:32px;height:32px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #efefef;flex-shrink:0}.ig-input-wrapper[data-v-06daa26e]{flex:1;display:flex;align-items:center;border:1px solid #dbdbdb;border-radius:22px;padding:0 12px;height:44px}.ig-comment-input[data-v-06daa26e]{flex:1;border:none;outline:none;font-size:14px;padding:8px 0}.ig-comment-send[data-v-06daa26e]{background:none;border:none;color:#0095f6;font-weight:600;font-size:14px;cursor:pointer;padding-left:8px}.ig-comment-send[data-v-06daa26e]:disabled{color:#b2dffc;cursor:default}.fade-enter-active[data-v-06daa26e],.fade-leave-active[data-v-06daa26e]{transition:opacity 0.2s ease}.fade-enter-from[data-v-06daa26e],.fade-leave-to[data-v-06daa26e]{opacity:0}\n','',{version:3,sources:['webpack://./src/柏柏同层/Instagram/Instagram.vue'],names:[],mappings:'AA8+BA,sCACE,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,YAAa,CACb,qBAAsB,CACtB,aAAc,CACd,yFAAgG,CAChG,eAAgB,CAChB,qBAAsB,CACtB,gBACF,CAGA,0CACE,gBAAiB,CACjB,qBACF,CACA,gCACE,wBAAyB,CACzB,iBAAkB,CAClB,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CACA,kCACE,WAAY,CACZ,eAAgB,CAChB,MAAO,CACP,cAAe,CACf,YACF,CACA,kCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CACvB,iBAAkB,CAClB,iBACF,CACA,iCACE,cAAe,CACf,YAAa,CACb,yBAA0B,CAC1B,kBAAmB,CACnB,UAAW,CACX,qBACF,CACA,wCACE,wBACF,CACA,kCACE,cAAe,CACf,kBACF,CACA,8BACE,aAAc,CACd,cAAe,CACf,cACF,CACA,mCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,aACF,CACA,6BACE,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,wBAAyB,CACzB,iBAAkB,CAClB,0CAAkC,CAClC,kBACF,CACA,yBACE,GACE,wBACF,CACF,CAGA,4BACE,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cAAe,CACf,+BAAgC,CAChC,qBAAsB,CACtB,UACF,CAEA,0BACE,oCAAsC,CACtC,cAAe,CACf,eAAgB,CAChB,QAAS,CACT,mBACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,cACF,CAEA,kCACE,YAAa,CACb,QACF,CAEA,8BACE,cACF,CAGA,6BACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,oBACF,CACA,gDACE,YACF,CAGA,6BACE,YAAa,CACb,QAAS,CACT,wBAAyB,CACzB,+BAAgC,CAChC,eAAgB,CAChB,oBACF,CACA,gDACE,YACF,CAEA,gCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,OAAQ,CACR,cACF,CAEA,gCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,WAAY,CACZ,6FAAmG,CACnG,YAAa,CACb,sBAAuB,CACvB,kBACF,CAEA,2CACE,eAAgB,CAChB,iBACF,CAEA,kCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,qBACF,CAEA,oCACE,iBAAkB,CAClB,QAAS,CACT,OAAQ,CACR,wBAAyB,CACzB,WAAY,CACZ,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,qBACF,CAEA,oCACE,cAAe,CACf,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAGA,0BACE,mBACF,CAGA,iCACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CACvB,iBAAkB,CAClB,iBAAkB,CAClB,aACF,CAEA,gCACE,kBAAmB,CACnB,aACF,CAEA,mCACE,YAAa,CACb,eAAgB,CAChB,cAAe,CACf,aACF,CAEA,+CACE,eAAgB,CAChB,cAAe,CACf,aACF,CAGA,gCACE,WAAY,CACZ,YAAa,CACb,4BAA6B,CAC7B,kBAAmB,CACnB,4BAA6B,CAC7B,qBAAsB,CACtB,UACF,CAEA,8BACE,cAAe,CACf,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,gCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBACF,CAGA,mCACE,cAAe,CACf,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,WAAY,CACZ,YAAa,CACb,qBAAsB,CACtB,qBAAsB,CACtB,gBACF,CAEA,qCACE,qBAAsB,CACtB,WAAY,CACZ,YAAa,CACb,qBACF,CAEA,oCACE,WAAY,CACZ,+BAAgC,CAChC,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cAAe,CACf,qBACF,CAEA,8BACE,eAAgB,CAChB,WAAY,CACZ,cAAe,CACf,cAAe,CACf,SACF,CAEA,qCACE,aACF,CAEA,qCACE,aAAc,CACd,eACF,CAEA,mCACE,eAAgB,CAChB,cACF,CAEA,kCACE,MAAO,CACP,eACF,CAEA,iCACE,YAAa,CACb,YAAa,CACb,QACF,CAEA,oCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aACF,CAEA,mCACE,MAAO,CACP,WAAY,CACZ,WAAY,CACZ,mBAAoB,CACpB,cAAe,CACf,YAAa,CACb,eAAgB,CAChB,cACF,CAEA,uCACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,0BAA2B,CAC3B,iBACF,CAEA,mCACE,iBAAkB,CAClB,eAAgB,CAChB,cAAe,CACf,aACF,CAEA,oCACE,YAAa,CACb,QAAS,CACT,eAAgB,CAChB,wBAAyB,CACzB,oBACF,CACA,uDACE,YACF,CAEA,mCACE,WAAY,CACZ,YAAa,CACb,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aAAc,CACd,iBAAkB,CAClB,wBACF,CAEA,kCACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,0BAA8B,CAC9B,WAAY,CACZ,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,cACF,CAEA,8BACE,WAAY,CACZ,YAAa,CACb,iBAAkB,CAClB,yBAA0B,CAC1B,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,sBAAuB,CACvB,aAAc,CACd,cAAe,CACf,aACF,CAEA,0BACE,cAAe,CACf,eACF,CACA,8BACE,cAAe,CACf,cACF,CAEA,6BACE,UAAW,CACX,wBACF,CAEA,gCACE,iBAAkB,CAClB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,aAAc,CACd,cACF,CAEA,kCACE,MACF,CAEA,kCACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,kCACE,aAAc,CACd,eAAgB,CAChB,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,cACF,CAEA,6BACE,aAAc,CACd,cACF,CAEA,8BACE,MAAO,CACP,eAAgB,CAChB,cACF,CACA,8BACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cAAe,CACf,cACF,CACA,mCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CACA,gCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBACF,CACA,kCACE,cAAe,CACf,eAAgB,CAChB,aACF,CACA,8BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,wBAAyB,CACzB,YAAa,CACb,kBAAmB,CACnB,sBACF,CACA,sCACE,wBAAyB,CACzB,oBACF,CAGA,gFAEE,8BACF,CAEA,0EAEE,0BACF,CAGA,qCACE,cAAe,CACf,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,WAAY,CACZ,YAAa,CACb,qBAAsB,CACtB,wBACF,CAEA,sCACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,gCACF,CAEA,iCACE,qBAAsB,CACtB,WAAY,CACZ,2BAA4B,CAC5B,4BAA6B,CAC7B,mBAAoB,CACpB,UAAW,CACX,cAAe,CACf,YAAa,CACb,qBACF,CAEA,wCACE,YAAa,CACb,sBAAuB,CACvB,cACF,CAEA,oCACE,UAAW,CACX,UAAW,CACX,wBAAyB,CACzB,iBACF,CAEA,uCACE,iBAAkB,CAClB,eAAgB,CAChB,cAAe,CACf,mBAAoB,CACpB,+BACF,CAEA,wCACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,uCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBAAyB,CACzB,aACF,CAEA,mCACE,MAAO,CACP,YAAa,CACb,kBAAmB,CACnB,wBAAyB,CACzB,kBAAmB,CACnB,cAAe,CACf,WACF,CAEA,mCACE,MAAO,CACP,WAAY,CACZ,YAAa,CACb,cAAe,CACf,aACF,CAEA,kCACE,eAAgB,CAChB,WAAY,CACZ,aAAc,CACd,eAAgB,CAChB,cAAe,CACf,cAAe,CACf,gBACF,CACA,2CACE,aAAc,CACd,cACF,CAEA,wEAEE,4BACF,CACA,kEAEE,SACF',sourcesContent:['<template>\n  <div class="instagram-container">\n    \x3c!-- Header --\x3e\n    <header v-if="currentPage === \'home\'" class="ig-header">\n      <div class="ig-header-left" @click="goHome">\n        <h1 class="ig-logo">Instagram</h1>\n      </div>\n      <div class="ig-header-right">\n        <div class="ig-icon-btn">\n          <svg\n            aria-label="Like"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"\n            ></path>\n          </svg>\n        </div>\n        <div class="ig-icon-btn" @click="currentPage = \'dm_list\'">\n          <svg\n            aria-label="Messenger"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="M12.003 2.001a9.705 9.705 0 1 1-9.705 9.705 9.696 9.696 0 0 1 9.705-9.705Zm0 17.602a7.9 7.9 0 0 0 4.163-1.18l2.647.747a.5.5 0 0 0 .61-.61l-.747-2.647a7.897 7.897 0 1 0-6.673 3.69Z"\n            ></path>\n            <path\n              d="M15.42 8.784a1.237 1.237 0 0 0-1.373-.327l-3.327 1.332-1.727-1.727a1.237 1.237 0 0 0-1.92 1.573l3.22 4.293a1.237 1.237 0 0 0 2.227-.373l.973-3.6 2.333-2.333a.467.467 0 0 0 .147-.327.48.48 0 0 0-.553-.513Z"\n            ></path>\n          </svg>\n        </div>\n      </div>\n    </header>\n\n    \x3c!-- Main Content (Feed) --\x3e\n    <main v-if="currentPage === \'home\'" class="ig-content">\n      \x3c!-- Stories (Horizontal Scroll) --\x3e\n      <div class="ig-stories">\n        <div class="ig-story-item" @click="goToProfile(\'user\')">\n          <div class="ig-story-ring your-story">\n            <div class="ig-story-avatar" :style="{ backgroundImage: `url(\'${sharedState.Instagram.userHead}\')` }"></div>\n            <div class="ig-story-add-icon">\n              <svg\n                aria-label="Plus icon"\n                class="x1lliihq x1n2onr6 x5n08af"\n                fill="currentColor"\n                height="12"\n                role="img"\n                viewBox="0 0 24 24"\n                width="12"\n              >\n                <path\n                  d="M12.001.504a1.5 1.5 0 0 1 1.5 1.5v8.496h8.496a1.5 1.5 0 0 1 0 3h-8.496v8.496a1.5 1.5 0 0 1-3 0v-8.496H2.005a1.5 1.5 0 0 1 0-3h8.496V2.004a1.5 1.5 0 0 1 1.5-1.5Z"\n                ></path>\n              </svg>\n            </div>\n          </div>\n          <span class="ig-story-username">你的快拍</span>\n        </div>\n        \x3c!-- Friends Stories --\x3e\n        <div v-for="user in storyUsers" :key="user.id" class="ig-story-item" @click="goToProfile(user.id)">\n          <div class="ig-story-ring">\n            <div class="ig-story-avatar" :style="{ backgroundImage: `url(${user.head})` }"></div>\n          </div>\n          <span class="ig-story-username">{{ user.name }}</span>\n        </div>\n      </div>\n\n      \x3c!-- Feed Posts --\x3e\n      <div class="ig-feed">\n        <Post\n          v-for="post in sharedState.Instagram.posts"\n          :key="post.id"\n          :post-content="post"\n          @comment="openCommentDialog(post)"\n        />\n\n        \x3c!-- Spacer for bottom nav --\x3e\n        <div style="height: 60px"></div>\n\n        \x3c!-- Empty State --\x3e\n        <div v-if="sharedState.Instagram.posts.length === 0" class="ig-empty-state">\n          <div class="ig-empty-icon">\n            <svg\n              aria-label="Camera"\n              class="x1lliihq x1n2onr6 x5n08af"\n              fill="currentColor"\n              height="60"\n              role="img"\n              viewBox="0 0 24 24"\n              width="60"\n            >\n              <path\n                d="M12 10.751a3.25 3.25 0 1 0 3.25 3.25A3.254 3.254 0 0 0 12 10.751Zm0 8.5a5.25 5.25 0 1 1 5.25-5.25A5.256 5.256 0 0 1 12 19.251Zm8.385-11.236h-2.128a1.57 1.57 0 0 1-1.396-.867L16.2 5.867a3.57 3.57 0 0 0-3.17-1.866h-2.06a3.57 3.57 0 0 0-3.17 1.866l-.66 1.282a1.57 1.57 0 0 1-1.396.867H3.615A2.618 2.618 0 0 0 1 10.634v8.733A2.618 2.618 0 0 0 3.615 22h16.77A2.618 2.618 0 0 0 23 19.367v-8.733a2.618 2.618 0 0 0-2.615-2.617Z"\n              ></path>\n            </svg>\n          </div>\n          <p>暂无帖子</p>\n          <p class="ig-empty-sub">关注朋友或发布你的第一条动态</p>\n        </div>\n      </div>\n    </main>\n\n    <main v-else-if="currentPage === \'explore\'" class="ig-content">\n      <div class="ig-search-bar-container">\n        <div class="ig-search-box">\n          <svg\n            aria-label="Search"\n            class="ig-search-icon"\n            fill="#8e8e8e"\n            height="16"\n            role="img"\n            viewBox="0 0 24 24"\n            width="16"\n          >\n            <path\n              d="M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z"\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></path>\n            <line\n              fill="none"\n              x1="16.511"\n              x2="22"\n              y1="16.511"\n              y2="22"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></line>\n          </svg>\n          <input v-model="searchKeyword" placeholder="搜索..." class="ig-search-input" @keyup.enter="generatePosts" />\n        </div>\n      </div>\n\n      <div class="ig-explore-grid">\n        <div v-if="isGenerating" class="ig-loading-state">\n          <div class="ig-spinner"></div>\n          <p>正在生成内容...</p>\n        </div>\n        <div v-else class="ig-explore-cta" @click="generatePosts">\n          <div class="ig-explore-icon">✨</div>\n          <p>点击生成随机帖子</p>\n          <p class="ig-sub-text">或输入关键词搜索特定内容</p>\n        </div>\n      </div>\n    </main>\n\n    <main v-else-if="currentPage === \'profile\'" class="ig-content">\n      <UserProfile :user-id="currentProfileId" @back="currentPage = \'home\'" @view-post="viewPost" @message="openChat" />\n    </main>\n\n    <main v-else-if="currentPage === \'post_detail\'" class="ig-content">\n      <header class="ig-header" style="justify-content: flex-start; gap: 16px">\n        <div class="ig-icon-btn" @click="currentPage = \'profile\'">\n          <svg\n            aria-label="Back"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="21"\n              x2="3"\n              y1="12"\n              y2="12"\n            ></line>\n            <polyline\n              fill="none"\n              points="9 6 3 12 9 18"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></polyline>\n          </svg>\n        </div>\n        <span style="font-weight: 600; font-size: 16px">帖子</span>\n      </header>\n      <div class="ig-feed">\n        <Post v-if="currentPost" :post-content="currentPost" @comment="openCommentDialog(currentPost)" />\n      </div>\n    </main>\n\n    <main v-else-if="currentPage === \'dm_list\'" class="ig-content" style="height: 100%">\n      <DMList @back="currentPage = \'home\'" @open-chat="openChat" />\n    </main>\n\n    <main v-else-if="currentPage === \'chat_detail\'" class="ig-content" style="height: 100%">\n      <ChatDetail :chat-id="currentChatId" @back="currentPage = \'dm_list\'" />\n    </main>\n\n    \x3c!-- Bottom Navigation --\x3e\n    <nav v-if="[\'home\', \'profile\', \'post_detail\', \'explore\'].includes(currentPage)" class="ig-bottom-nav">\n      <div class="ig-nav-item" :class="{ active: currentPage === \'home\' }" @click="currentPage = \'home\'">\n        <svg\n          aria-label="Home"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n        >\n          <path\n            d="M22 23h-6.001a1 1 0 0 1-1-1v-5.455a2.997 2.997 0 1 0-5.993 0V22a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V11.543a1.002 1.002 0 0 1 .31-.724l10-9.543a1.001 1.001 0 0 1 1.38 0l10 9.543a1.002 1.002 0 0 1 .31.724V22a1 1 0 0 1-1 1Z"\n          ></path>\n        </svg>\n      </div>\n      <div class="ig-nav-item" :class="{ active: currentPage === \'explore\' }" @click="currentPage = \'explore\'">\n        <svg\n          aria-label="Search"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n        >\n          <path\n            d="M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z"\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n          ></path>\n          <line\n            fill="none"\n            x1="16.511"\n            x2="22"\n            y1="16.511"\n            y2="22"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n          ></line>\n        </svg>\n      </div>\n      <div class="ig-nav-item" @click="openPublishDialog">\n        <svg\n          aria-label="New Post"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n        >\n          <path\n            d="M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z"\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n          ></path>\n          <line\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n            x1="6.545"\n            x2="17.455"\n            y1="12.001"\n            y2="12.001"\n          ></line>\n          <line\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n            x1="12.003"\n            x2="12.003"\n            y1="6.545"\n            y2="17.455"\n          ></line>\n        </svg>\n      </div>\n      <div class="ig-nav-item">\n        <svg\n          aria-label="Reels"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n        >\n          <line\n            fill="none"\n            stroke="currentColor"\n            stroke-linejoin="round"\n            stroke-width="2"\n            x1="2.049"\n            x2="21.95"\n            y1="7.002"\n            y2="7.002"\n          ></line>\n          <line\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n            x1="13.504"\n            x2="16.362"\n            y1="2.001"\n            y2="7.002"\n          ></line>\n          <line\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n            x1="7.207"\n            x2="10.002"\n            y1="2.11"\n            y2="7.002"\n          ></line>\n          <path\n            d="M2 12.001v3.449c0 2.849.698 4.006 1.606 4.945.94.908 2.098 1.607 4.946 1.607h6.896c2.848 0 4.006-.699 4.946-1.607.908-.939 1.606-2.096 1.606-4.945V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z"\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n          ></path>\n          <path\n            d="M9.763 17.664a.908.908 0 0 1-.454-.787V11.63a.909.909 0 0 1 1.364-.788l4.545 2.624a.909.909 0 0 1 0 1.575l-4.545 2.624a.91.91 0 0 1-.91 0Z"\n            fill-rule="evenodd"\n          ></path>\n        </svg>\n      </div>\n      <div\n        class="ig-nav-item"\n        :class="{ active: currentPage === \'profile\' && currentProfileId === \'user\' }"\n        @click="goToProfile(\'user\')"\n      >\n        <div class="ig-nav-avatar" :style="{ backgroundImage: `url(\'${sharedState.Instagram.userHead}\')` }"></div>\n      </div>\n    </nav>\n\n    \x3c!-- Publish Dialog (Full Screen) --\x3e\n    <transition name="slide-up">\n      <div v-if="showPublishDialog" class="ig-publish-modal">\n        <div class="ig-publish-content">\n          \x3c!-- Top Bar --\x3e\n          <div class="ig-publish-header">\n            <button class="ig-text-btn cancel" @click="showPublishDialog = false">取消</button>\n            <span class="ig-publish-title">新建帖子</span>\n            <button class="ig-text-btn submit" @click="publishPost">分享</button>\n          </div>\n\n          <div class="ig-publish-body">\n            \x3c!-- Caption Area --\x3e\n            <div class="ig-publish-row">\n              <div\n                class="ig-publish-avatar"\n                :style="{\n                  backgroundImage: `url(${sharedState.Instagram.userHead || \'https://via.placeholder.com/30\'})`,\n                }"\n              ></div>\n              <textarea v-model="newPost.content" placeholder="填写标题..." class="ig-publish-input"></textarea>\n              <div\n                v-if="newPost.images.length > 0"\n                class="ig-thumbnail-preview"\n                :style="{ backgroundImage: `url(${newPost.images[0]})` }"\n              ></div>\n            </div>\n\n            <div class="ig-divider"></div>\n\n            \x3c!-- Image Management --\x3e\n            <div class="ig-section-title">添加照片/视频</div>\n            <div class="ig-image-scroller">\n              <div\n                v-for="(img, index) in newPost.images"\n                :key="index"\n                class="ig-scroller-item"\n                :style="\n                  img.startsWith(\'http\')\n                    ? { backgroundImage: `url(${img})` }\n                    : {\n                        backgroundColor: \'#f0f0f0\',\n                        display: \'flex\',\n                        alignItems: \'center\',\n                        justifyContent: \'center\',\n                        padding: \'5px\',\n                      }\n                "\n              >\n                <span\n                  v-if="!img.startsWith(\'http\')"\n                  style="\n                    font-size: 10px;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                    display: -webkit-box;\n                    -webkit-line-clamp: 3;\n                    -webkit-box-orient: vertical;\n                  "\n                  >{{ img }}</span\n                >\n                <div class="ig-remove-badge" @click="removeImage(index)">×</div>\n              </div>\n              <div class="ig-add-card" @click="addImage">\n                <span class="ig-plus">+</span>\n                <span class="ig-add-text">添加图片</span>\n              </div>\n            </div>\n\n            <div class="ig-divider"></div>\n\n            \x3c!-- Options --\x3e\n            <div class="ig-action-row" @click="showTagModal = true">\n              <span class="ig-action-label">标记用户</span>\n              <div class="ig-action-right">\n                <span v-if="newPost.taggedUsers.length > 0" class="ig-action-value">{{\n                  newPost.taggedUsers.join(\', \')\n                }}</span>\n                <span class="ig-chevron">›</span>\n              </div>\n            </div>\n            <div class="ig-divider"></div>\n            <div class="ig-action-row" @click="addLocation">\n              <span class="ig-action-label">添加地点</span>\n              <div class="ig-action-right">\n                <span v-if="newPost.location" class="ig-action-value">{{ newPost.location }}</span>\n                <span class="ig-chevron">›</span>\n              </div>\n            </div>\n            <div class="ig-divider"></div>\n            <div class="ig-action-row" @click="addMusic">\n              <span class="ig-action-label">添加音乐</span>\n              <div class="ig-action-right">\n                <span v-if="newPost.music" class="ig-action-value">{{ newPost.music }}</span>\n                <span class="ig-chevron">›</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n\n    \x3c!-- Tag Users Modal --\x3e\n    <transition name="slide-up">\n      <div v-if="showTagModal" class="ig-publish-modal" style="z-index: 101">\n        <div class="ig-publish-content">\n          <div class="ig-publish-header">\n            <button class="ig-text-btn cancel" @click="showTagModal = false">完成</button>\n            <span class="ig-publish-title">标记用户</span>\n            <div style="width: 32px"></div>\n          </div>\n          <div class="ig-tag-list">\n            <div v-for="user in storyUsers" :key="user.id" class="ig-tag-item" @click="toggleTag(user.name)">\n              <div class="ig-tag-user-info">\n                <div class="ig-tag-avatar" :style="{ backgroundImage: `url(${user.head})` }"></div>\n                <span class="ig-tag-username">{{ user.name }}</span>\n              </div>\n              <div class="ig-checkbox" :class="{ checked: newPost.taggedUsers.includes(user.name) }">\n                <svg\n                  v-if="newPost.taggedUsers.includes(user.name)"\n                  aria-label="Check"\n                  class="x1lliihq x1n2onr6 x5n08af"\n                  fill="#fff"\n                  height="12"\n                  role="img"\n                  viewBox="0 0 24 24"\n                  width="12"\n                >\n                  <path\n                    d="M21.928 2.378a1.5 1.5 0 0 0-2.268-.088l-10.82 11.968-4.996-4.577a1.5 1.5 0 0 0-2.022 2.207l6.238 5.717a1.5 1.5 0 0 0 2.23-.217l11.727-12.972a1.5 1.5 0 0 0-.089-2.038Z"\n                  ></path>\n                </svg>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n\n    \x3c!-- Comment Input Dialog --\x3e\n    <transition name="fade">\n      <div v-if="showCommentInput" class="ig-comment-overlay">\n        <div class="ig-comment-backdrop" @click="showCommentInput = false"></div>\n        <div class="ig-comment-box">\n          <div class="ig-comment-header-bar">\n            <div class="ig-comment-handle"></div>\n          </div>\n          <div class="ig-comment-title-row">\n            <span>评论</span>\n          </div>\n          <div class="ig-comment-input-area">\n            <div\n              class="ig-comment-my-avatar"\n              :style="{ backgroundImage: `url(${sharedState.Instagram.userHead || \'https://via.placeholder.com/30\'})` }"\n            ></div>\n            <div class="ig-input-wrapper">\n              <input\n                v-model="commentText"\n                class="ig-comment-input"\n                placeholder="添加评论..."\n                autofocus\n                @keyup.enter="sendComment"\n              />\n              <button class="ig-comment-send" :disabled="!commentText.trim()" @click="sendComment">发布</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { result } from \'lodash\';\nimport { computed, ref } from \'vue\';\nimport { getPlatformInfo, sharedState } from \'../shared-state\';\nimport ChatDetail from \'./ChatDetail.vue\';\nimport DMList from \'./DMList.vue\';\nimport Post from \'./Post.vue\';\nimport UserProfile from \'./UserProfile.vue\';\n\nconst currentPage = ref(\'home\');\nconst currentProfileId = ref(\'user\');\nconst currentPost = ref<any>(null);\nconst currentChatId = ref(\'\');\nconst showPublishDialog = ref(false);\nconst showTagModal = ref(false);\nconst showCommentInput = ref(false);\nconst commentText = ref(\'\');\nconst replyingPost = ref<any>(null);\nconst isGenerating = ref(false);\nconst searchKeyword = ref(\'\');\nconst newPost = ref({\n  content: \'\',\n  images: [] as string[],\n  location: \'\',\n  taggedUsers: [] as string[],\n  music: \'\',\n});\n\nconst storyUsers = computed(() => {\n  return Object.entries(sharedState.QQ.chars)\n    .filter(([_, char]) => {\n      const type = char.chartype?.toLowerCase();\n      return type === \'friend\' || type === \'npc\';\n    })\n    .map(([id, char]) => ({\n      id,\n      name: char.instagramName || char.name,\n      head: char.instagramHead || char.head || \'https://via.placeholder.com/60\',\n    }));\n});\n\nfunction goToProfile(id: string) {\n  currentProfileId.value = id;\n  currentPage.value = \'profile\';\n}\n\nfunction viewPost(post: any) {\n  currentPost.value = post;\n  currentPage.value = \'post_detail\';\n}\n\nfunction openChat(id: string) {\n  currentChatId.value = id;\n  currentPage.value = \'chat_detail\';\n}\n\nfunction goHome() {\n  sharedState.phone.activeApp = \'home\';\n}\n\nfunction openPublishDialog() {\n  newPost.value = {\n    content: \'\',\n    images: [],\n    location: \'\',\n    taggedUsers: [],\n    music: \'\',\n  };\n  showPublishDialog.value = true;\n}\n\nfunction addImage() {\n  const url = prompt(\'请输入图片URL或描述:\');\n  if (url) {\n    newPost.value.images.push(url);\n  }\n}\n\nfunction removeImage(index: number) {\n  newPost.value.images.splice(index, 1);\n}\n\nfunction addLocation() {\n  const loc = prompt(\'请输入地点:\');\n  if (loc !== null) newPost.value.location = loc;\n}\n\nfunction addMusic() {\n  const music = prompt(\'请输入音乐名称:\');\n  if (music !== null) newPost.value.music = music;\n}\n\nfunction toggleTag(name: string) {\n  const idx = newPost.value.taggedUsers.indexOf(name);\n  if (idx > -1) {\n    newPost.value.taggedUsers.splice(idx, 1);\n  } else {\n    newPost.value.taggedUsers.push(name);\n  }\n}\n\nfunction openCommentDialog(post: any) {\n  replyingPost.value = post;\n  commentText.value = \'\';\n  showCommentInput.value = true;\n}\n\nfunction sendComment() {\n  if (!commentText.value.trim() || !replyingPost.value) return;\n\n  const content = commentText.value.trim();\n  const postId = replyingPost.value.id || \'unknown\';\n\n  // Determine user ID\n  const userId = sharedState.Instagram.userName || sharedState.ST.userName || \'user\';\n\n  // Construct prompt for Tavern\n  const now = new Date();\n  const month = (now.getMonth() + 1).toString().padStart(2, \'0\');\n  const date = now.getDate().toString().padStart(2, \'0\');\n  const hours = now.getHours().toString().padStart(2, \'0\');\n  const minutes = now.getMinutes().toString().padStart(2, \'0\');\n  const timeStr = `${month}-${date} ${hours}:${minutes}`;\n\n  // Immediate local rendering (optimistic update)\n  if (!replyingPost.value.comments) {\n    replyingPost.value.comments = [];\n  }\n\n  replyingPost.value.comments.push({\n    sender: userId,\n    content: content,\n    time: timeStr,\n    like: \'0\',\n    head: sharedState.Instagram.userHead || sharedState.ST.userHead,\n  });\n\n  // 评论格式: <instagram>帖子ID|评论人|评论内容|时间MM-DD HH:MM|该评论点赞数</instagram>\n  const msgTag = `\n<instagram>${postId}|${userId}|${content}|${timeStr}|0</instagram>`;\n  const message = `\n{{user}}评论了Instagram帖子(ID: ${postId})：${content}${msgTag}`;\n\n  // Insert into Tavern input box\n  const val = $(\'#send_textarea\').val();\n  const old_content = (typeof val === \'string\' ? val : \'\').trim();\n  const new_content = old_content ? old_content + \'\\n\\n\' + message : message;\n\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  toastr.success(\'已生成评论指令，请点击发送\');\n\n  showCommentInput.value = false;\n  commentText.value = \'\';\n}\n\n// Mock post generator\nfunction generatePostId() {\n  return Math.random().toString(36).substring(2, 9);\n}\n\nfunction publishPost() {\n  if (!newPost.value.content.trim() && newPost.value.images.length === 0) {\n    toastr.error(\'请至少填写内容或添加图片\');\n    return;\n  }\n\n  // 构建发给 AI 的 Prompt\n  const id = Math.random().toString(36).substring(2, 9);\n  let message = `{{user}}发布了Instagram帖子，请按照规范格式输出该帖子及评论：\n`;\n  message += `帖子ID: ${id}\n`;\n  if (newPost.value.content)\n    message += `配文：${newPost.value.content}\n`;\n  if (newPost.value.images.length > 0)\n    message += `图片/视频：${JSON.stringify(newPost.value.images)}\n`;\n  if (newPost.value.location)\n    message += `地点：${newPost.value.location}\n`;\n  if (newPost.value.music)\n    message += `音乐：${newPost.value.music}\n`;\n  if (newPost.value.taggedUsers.length > 0)\n    message += `提到：${JSON.stringify(newPost.value.taggedUsers)}\n`;\n\n  message = message.trim();\n\n  // 获取当前输入框的值\n  const val = $(\'#send_textarea\').val();\n  const old_content = (typeof val === \'string\' ? val : \'\').trim();\n  const new_content = old_content ? old_content + \'\\n\\n\' + message : message;\n  // 设置值并触发 input 事件，让 Vue/酒馆 监听到变化\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  // 弹出成功提示\n  toastr.success(\'已生成发布指令，请点击发送\');\n\n  // 重置并关闭\n  newPost.value = {\n    content: \'\',\n    images: [],\n    location: \'\',\n    taggedUsers: [],\n    music: \'\',\n  };\n  showPublishDialog.value = false;\n}\n\nconst generatePosts = async () => {\n  if (isGenerating.value) return;\n  isGenerating.value = true;\n  toastr.info(\'正在探索新内容...\');\n\n  try {\n    const keyword = searchKeyword.value.trim();\n    const prompt = `生成3个Instagram帖子数据。\n    ${keyword ? `主题/关键词：${keyword}` : \'主题随机，可以是生活、旅行、美食等。\'}\n    可以是已知角色(遵循人设)或陌生人发布。\n    格式必须是纯JSON数组，包含:\n    - sender (发布者名字)\n    - head (发布者头像URL，如果是陌生人请随机)\n    - content (帖子文案)\n    - images (图片描述数组)\n    - likes (点赞数，数字)\n    - location (地点，可选)\n    - comments (评论数组，每个评论包含 sender, content, time)\n\n    范例:\n    <InstagramPost>\n    [\n      {\n        "sender": "Alice",\n        "head": "http...",\n        "content": "Beautiful day!",\n        "images": ["http..."],\n        "likes": 120,\n        "location": "Paris",\n        "comments": [{"sender": "Bob", "content": "Nice!", "time": "10:00"}]\n      }\n    ]\n    </InstagramPost>\n    不要Markdown，不要解释，只返回JSON,json包裹在<InstagramPost>标签对中。`;\n\n    const debug = false;\n    let newPosts = [];\n\n    if (!debug) {\n      let result = \'\';\n      try {\n        console.log(\'开始生成数据\');\n        result = await generate({\n          user_input: prompt,\n        });\n      } catch (netErr) {\n        console.warn(\'Network warning:\', netErr);\n      }\n\n      if (!result) {\n        isGenerating.value = false;\n        return;\n      }\n\n      console.log(\'AI Raw Output:\', result);\n\n      result = result.replace(/<think[ing]*?>[\\s\\S]+(<\\/think[ing]*?>)/i, \'\');\n\n      const match = result.match(/<InstagramPost>([\\S\\s]+?)<\\/*InstagramPost>/i);\n      if (!match) return;\n      try {\n        console.log(`取到的结果：\\n${match[1].trim()}`);\n        newPosts = JSON.parse(match[1].trim());\n      } catch {\n        console.error(\'解析json错误!\');\n        console.log(match[1]);\n        return;\n      }\n    } else {\n      newPosts = JSON.parse(`[\n  {\n    "sender": "Sasha_Official",\n    "head": "https://files.catbox.moe/k36v45.jpg",\n    "content": "Tonight is gonna be wild! 🥂✨ 谁在曼城？出来喝酒呀！",\n    "images": ["一张在昏暗酒吧里的自拍，妆容精致，穿着低胸吊带，背景是模糊的舞池灯光"],\n    "likes": 89,\n    "location": "Impossible Manchester",\n    "comments": [{"sender": "Justin_Qiu", "content": "注意安全。", "time": "15m ago"}, {"sender": "Felix_Zhou", "content": "位置发我。", "time": "5m ago"}]\n  },\n  {\n    "sender": "Oliver_Mods",\n    "head": "https://files.catbox.moe/zyywos.jpg",\n    "content": "New toy in the garage. This beauty needs some serious work but she\'s worth it. 🛠️",\n    "images": ["一张拆卸了一半的汽车引擎照片，满是油污的手套放在旁边"],\n    "likes": 42,\n    "location": "The MOTley Crew",\n    "comments": [{"sender": "Hugooooo", "content": "留给我试试？", "time": "1h ago"}]\n  },\n  {\n    "sender": "MCR_Foodie",\n    "head": "https://files.catbox.moe/4ghjod.jpg",\n    "content": "Hidden gem in Northern Quarter! Best ramen in town. 🍜",\n    "images": ["一碗热气腾腾的拉面特写，汤色浓郁，配料丰富"],\n    "likes": 215,\n    "location": "Northern Quarter",\n    "comments": []\n  }\n]`);\n    }\n\n    if (Array.isArray(newPosts) && newPosts.length > 0) {\n      let count = 0;\n      for (const p of newPosts) {\n        // Validation: must have content or images\n        if (!p.content && (!p.images || p.images.length === 0)) continue;\n\n        // 1. Process Sender & Capture Logic\n        const senderName = p.sender || \'Unknown\';\n        let senderHead = p.head;\n        let matchedCharId = null;\n\n        // Try to match with existing characters (Fuzzy Search)\n        // We use the generated "sender" (which might be an ID like \'Luke_Lin07\') to find a character\n        // If found, we update that character\'s Instagram ID to this new handle\n\n        // Iterate all chars to find a match\n        const allChars = sharedState.QQ.chars;\n        let bestMatchKey = \'\';\n\n        // Simple heuristic: Does the generated handle contain the character\'s name?\n        // or Does the character\'s name match the handle?\n        for (const [key, char] of Object.entries(allChars)) {\n          const cName = (char.name || \'\').toLowerCase();\n          const cHandle = (senderName || \'\').toLowerCase();\n\n          // Check if handle contains name (e.g. Luke_Lin07 contains Luke)\n          if (cName && cHandle.includes(cName)) {\n            bestMatchKey = key;\n            break;\n          }\n          // Check if name contains handle (unlikely but possible)\n          if (cName && cName.includes(cHandle)) {\n            bestMatchKey = key;\n            break;\n          }\n        }\n\n        if (bestMatchKey) {\n          // Found a matching character!\n          const char = allChars[bestMatchKey];\n          matchedCharId = bestMatchKey;\n\n          // Capture: Update character\'s Instagram info if not set or if we want to update it\n          // We\'ll update if it\'s currently empty, or we can choose to overwrite.\n          // Let\'s overwrite/set it to "capture" this new ID.\n          if (senderName !== char.instagramName) {\n            console.log(`Capturing Instagram ID for ${char.name}: ${senderName}`);\n            char.instagramName = senderName; // Set the display name/handle\n            char.instagramId = senderName; // Use handle as ID\n\n            // If the generated post has a head, maybe update it?\n            // Usually we prefer the local head unless it\'s missing.\n            if (!char.instagramHead && senderHead && !senderHead.includes(\'randomuser\')) {\n              char.instagramHead = senderHead;\n            }\n          }\n\n          // Use the character\'s official head if available, otherwise fallback to generated\n          senderHead = char.instagramHead || char.head || senderHead;\n\n          // Persist the character update\n          sharedState.QQ.saveChars();\n        }\n\n        // 2. Process Images -> normalize to imgs for Post component\n        let images = p.images || [];\n        if (typeof images === \'string\') images = [images];\n        if (!Array.isArray(images)) images = [];\n\n        type Slide = { type: \'image\'; url: string } | { type: \'text\'; content: string };\n        type ImageInput = string | { type?: string; url?: string; content?: string };\n\n        const urlRegex = /^https?:\\/\\/.+\\.(jpg|jpeg|png|gif|webp)(\\?.*)?$/i;\n        const toSlide = (img: ImageInput): Slide => {\n          // Already structured\n          if (img && typeof img === \'object\') {\n            if (img.type === \'text\') return { type: \'text\', content: img.content || \'\' };\n            if (img.type === \'image\') return { type: \'image\', url: img.url || img.content || \'\' };\n            if (img.url) return { type: \'image\', url: img.url };\n            if (img.content)\n              return urlRegex.test(img.content)\n                ? { type: \'image\', url: img.content }\n                : { type: \'text\', content: img.content };\n          }\n          // String fallback\n          const str = typeof img === \'string\' ? img : \'\';\n          return urlRegex.test(str) ? { type: \'image\', url: str } : { type: \'text\', content: str };\n        };\n\n        const imgs = images\n          .map(toSlide)\n          .filter((s: Slide) => (s.type === \'image\' ? Boolean(s.url) : Boolean(s.content)));\n\n        if (imgs.length === 0) {\n          if (p.content) {\n            imgs.push({ type: \'text\', content: p.content });\n          } else {\n            imgs.push({\n              type: \'image\',\n              url: sharedState.RedNote?.getRandomHead() || \'https://via.placeholder.com/400\',\n            });\n          }\n        }\n\n        // 3. Create Post Object\n        const post = {\n          id: Math.random().toString(36).substring(2),\n          sender: senderName, // Use the generated handle (which is now linked if matched)\n          head: senderHead || \'https://via.placeholder.com/40\',\n          content: p.content || \'\',\n          imgs: imgs, // Post.vue reads imgs\n          images: images, // Keep raw for backward compatibility\n          location: p.location || \'\',\n          likes: p.likes || Math.floor(Math.random() * 500),\n          liked: false,\n          saved: false,\n          time: new Date().toLocaleDateString(),\n          comments: (p.comments || []).map((c: any) => ({\n            sender: c.sender || \'User\',\n            content: c.content || \'\',\n            time: c.time || \'刚刚\',\n            like: 0,\n            head: getPlatformInfo(c.sender, \'Instagram\').head, // Resolve head for commenters too\n          })),\n        };\n        console.log(`开始添加到帖子列表:\\n${JSON.stringify(post)}`);\n        sharedState.Instagram.addPost(post);\n        count++;\n      }\n\n      console.log(`帖子总列表:\\n${JSON.stringify(sharedState.Instagram.posts)}`);\n      await sharedState.Instagram.saveSettings(); // Ensure we await the save\n      toastr.success(`已捕获 ${count} 条动态`);\n      currentPage.value = \'home\';\n      searchKeyword.value = \'\';\n    } else {\n      console.warn(\'No valid posts parsed from:\', result);\n      toastr.warning(\'未能识别有效内容，请重试\');\n    }\n  } catch (err) {\n    console.error(\'Generate Error:\', err);\n    toastr.error(\'生成失败\');\n  } finally {\n    isGenerating.value = false;\n  }\n};\n<\/script>\n\n<style scoped>\n.instagram-container {\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  color: #262626;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n  overflow: hidden;\n  box-sizing: border-box;\n  padding-top: 35px;\n}\n\n/* Search/Explore */\n.ig-search-bar-container {\n  padding: 8px 16px;\n  background-color: #fff;\n}\n.ig-search-box {\n  background-color: #efefef;\n  border-radius: 8px;\n  padding: 8px 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.ig-search-input {\n  border: none;\n  background: none;\n  flex: 1;\n  font-size: 16px;\n  outline: none;\n}\n.ig-explore-grid {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px 20px;\n  text-align: center;\n}\n.ig-explore-cta {\n  cursor: pointer;\n  padding: 20px;\n  border: 1px dashed #dbdbdb;\n  border-radius: 12px;\n  width: 100%;\n  box-sizing: border-box;\n}\n.ig-explore-cta:active {\n  background-color: #fafafa;\n}\n.ig-explore-icon {\n  font-size: 40px;\n  margin-bottom: 10px;\n}\n.ig-sub-text {\n  color: #8e8e8e;\n  font-size: 13px;\n  margin-top: 4px;\n}\n.ig-loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #8e8e8e;\n}\n.ig-spinner {\n  width: 30px;\n  height: 30px;\n  border: 3px solid #dbdbdb;\n  border-top-color: #8e8e8e;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 10px;\n}\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Header */\n.ig-header {\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  border-bottom: 1px solid #dbdbdb;\n  background-color: #fff;\n  z-index: 10;\n}\n\n.ig-logo {\n  font-family: \'Instagram Sans\', cursive;\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0;\n  letter-spacing: -1px;\n}\n\n.ig-header-left {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.ig-header-right {\n  display: flex;\n  gap: 20px;\n}\n\n.ig-icon-btn {\n  cursor: pointer;\n}\n\n/* Content */\n.ig-content {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-width: none;\n}\n.ig-content::-webkit-scrollbar {\n  display: none;\n}\n\n/* Stories */\n.ig-stories {\n  display: flex;\n  gap: 14px;\n  padding: 14px 0 14px 16px;\n  border-bottom: 1px solid #efefef;\n  overflow-x: auto;\n  scrollbar-width: none;\n}\n.ig-stories::-webkit-scrollbar {\n  display: none;\n}\n\n.ig-story-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  cursor: pointer;\n}\n\n.ig-story-ring {\n  width: 66px;\n  height: 66px;\n  border-radius: 50%;\n  padding: 2px;\n  background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.ig-story-ring.your-story {\n  background: none;\n  position: relative;\n}\n\n.ig-story-avatar {\n  width: 58px;\n  height: 58px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 2px solid #fff;\n}\n\n.ig-story-add-icon {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: #0095f6;\n  color: white;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid #fff;\n}\n\n.ig-story-username {\n  font-size: 11px;\n  color: #262626;\n  max-width: 64px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* Feed */\n.ig-feed {\n  padding-bottom: 50px;\n}\n\n/* Empty State */\n.ig-empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n  color: #8e8e8e;\n}\n\n.ig-empty-icon {\n  margin-bottom: 16px;\n  color: #262626;\n}\n\n.ig-empty-state p {\n  margin: 4px 0;\n  font-weight: 600;\n  font-size: 20px;\n  color: #262626;\n}\n\n.ig-empty-state .ig-empty-sub {\n  font-weight: 400;\n  font-size: 14px;\n  color: #8e8e8e;\n}\n\n/* Bottom Nav */\n.ig-bottom-nav {\n  height: 48px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-top: 1px solid #dbdbdb;\n  background-color: #fff;\n  z-index: 10;\n}\n\n.ig-nav-item {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.ig-nav-avatar {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid #dbdbdb;\n}\n\n/* Publish Modal */\n.ig-publish-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  padding-top: 35px;\n}\n\n.ig-publish-content {\n  background-color: #fff;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.ig-publish-header {\n  height: 44px;\n  border-bottom: 1px solid #dbdbdb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  background-color: #fff;\n}\n\n.ig-text-btn {\n  background: none;\n  border: none;\n  font-size: 16px;\n  cursor: pointer;\n  padding: 0;\n}\n\n.ig-text-btn.cancel {\n  color: #262626;\n}\n\n.ig-text-btn.submit {\n  color: #0095f6;\n  font-weight: 600;\n}\n\n.ig-publish-title {\n  font-weight: 600;\n  font-size: 16px;\n}\n\n.ig-publish-body {\n  flex: 1;\n  overflow-y: auto;\n}\n\n.ig-publish-row {\n  display: flex;\n  padding: 16px;\n  gap: 12px;\n}\n\n.ig-publish-avatar {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n}\n\n.ig-publish-input {\n  flex: 1;\n  border: none;\n  resize: none;\n  font-family: inherit;\n  font-size: 15px;\n  outline: none;\n  min-height: 60px;\n  margin-top: 4px;\n}\n\n.ig-thumbnail-preview {\n  width: 48px;\n  height: 48px;\n  background-size: cover;\n  background-position: center;\n  border-radius: 2px;\n}\n\n.ig-section-title {\n  padding: 12px 16px;\n  font-weight: 600;\n  font-size: 15px;\n  color: #262626;\n}\n\n.ig-image-scroller {\n  display: flex;\n  gap: 10px;\n  overflow-x: auto;\n  padding: 0 16px 16px 16px;\n  scrollbar-width: none;\n}\n.ig-image-scroller::-webkit-scrollbar {\n  display: none;\n}\n\n.ig-scroller-item {\n  width: 100px;\n  height: 100px;\n  border-radius: 4px;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n  position: relative;\n  border: 1px solid #efefef;\n}\n\n.ig-remove-badge {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.ig-add-card {\n  width: 100px;\n  height: 100px;\n  border-radius: 4px;\n  border: 1px dashed #dbdbdb;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  cursor: pointer;\n  color: #8e8e8e;\n}\n\n.ig-plus {\n  font-size: 24px;\n  font-weight: 300;\n}\n.ig-add-text {\n  font-size: 12px;\n  margin-top: 4px;\n}\n\n.ig-divider {\n  height: 1px;\n  background-color: #efefef;\n}\n\n.ig-action-row {\n  padding: 14px 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 16px;\n  color: #262626;\n  cursor: pointer;\n}\n\n.ig-action-label {\n  flex: 1;\n}\n\n.ig-action-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.ig-action-value {\n  color: #0095f6;\n  max-width: 150px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 15px;\n}\n\n.ig-chevron {\n  color: #8e8e8e;\n  font-size: 20px;\n}\n\n.ig-tag-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0 16px;\n}\n.ig-tag-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 0;\n  cursor: pointer;\n}\n.ig-tag-user-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.ig-tag-avatar {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid #dbdbdb;\n}\n.ig-tag-username {\n  font-size: 14px;\n  font-weight: 600;\n  color: #262626;\n}\n.ig-checkbox {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: 1px solid #dbdbdb;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.ig-checkbox.checked {\n  background-color: #0095f6;\n  border-color: #0095f6;\n}\n\n/* Animations */\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: transform 0.3s ease;\n}\n\n.slide-up-enter-from,\n.slide-up-leave-to {\n  transform: translateY(100%);\n}\n\n/* Comment Overlay */\n.ig-comment-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 200;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n\n.ig-comment-backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.ig-comment-box {\n  background-color: #fff;\n  z-index: 201;\n  border-top-left-radius: 12px;\n  border-top-right-radius: 12px;\n  padding-bottom: 20px;\n  width: 100%;\n  max-height: 80%;\n  display: flex;\n  flex-direction: column;\n}\n\n.ig-comment-header-bar {\n  display: flex;\n  justify-content: center;\n  padding: 10px 0;\n}\n\n.ig-comment-handle {\n  width: 40px;\n  height: 4px;\n  background-color: #dbdbdb;\n  border-radius: 2px;\n}\n\n.ig-comment-title-row {\n  text-align: center;\n  font-weight: 600;\n  font-size: 16px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #efefef;\n}\n\n.ig-comment-input-area {\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.ig-comment-my-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid #efefef;\n  flex-shrink: 0;\n}\n\n.ig-input-wrapper {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  border: 1px solid #dbdbdb;\n  border-radius: 22px;\n  padding: 0 12px;\n  height: 44px;\n}\n\n.ig-comment-input {\n  flex: 1;\n  border: none;\n  outline: none;\n  font-size: 14px;\n  padding: 8px 0;\n}\n\n.ig-comment-send {\n  background: none;\n  border: none;\n  color: #0095f6;\n  font-weight: 600;\n  font-size: 14px;\n  cursor: pointer;\n  padding-left: 8px;\n}\n.ig-comment-send:disabled {\n  color: #b2dffc;\n  cursor: default;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n'],sourceRoot:''}]);const s=r},4895:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.instagram-bubble-container[data-v-1593665e]{display:flex;align-items:flex-end;gap:8px;width:100%;margin-bottom:8px;padding:0 10px;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif}.my-message[data-v-1593665e]{flex-direction:row;justify-content:flex-end}.chat-avatar[data-v-1593665e]{width:28px;height:28px;border-radius:50%;background-size:cover;background-position:center;flex-shrink:0;border:1px solid rgba(0,0,0,0.1)}.message-content[data-v-1593665e]{max-width:70%;display:flex;flex-direction:column}.my-message .message-content[data-v-1593665e]{align-items:flex-end}.bubble[data-v-1593665e]{padding:10px 14px;border-radius:22px;font-size:15px;line-height:1.4;word-break:break-all;position:relative}.text-bubble[data-v-1593665e]{background-color:#efefef;color:#000;border-bottom-left-radius:4px}.my-message .text-bubble[data-v-1593665e]{background-color:#3797f0;color:#fff;border-radius:22px;border-bottom-right-radius:4px;border-bottom-left-radius:22px}.img-bubble[data-v-1593665e]{padding:0;background-color:transparent}.img-wrapper[data-v-1593665e]{border-radius:12px;overflow:hidden;max-width:100%;border:1px solid rgba(0,0,0,0.1)}.img-bubble img[data-v-1593665e],.emoji-bubble img[data-v-1593665e]{max-width:100%;display:block}.additional-text[data-v-1593665e]{margin-top:5px;color:#000;background-color:#efefef;padding:5px 10px;border-radius:8px}.my-message .additional-text[data-v-1593665e]{background-color:#3797f0;color:#fff}.emoji-bubble[data-v-1593665e]{padding:0;background-color:transparent;max-width:150px}.voice-bubble[data-v-1593665e]{background-color:#efefef;color:#000;display:flex;flex-direction:column;align-items:flex-start;gap:5px;min-width:80px;cursor:pointer;border-bottom-left-radius:4px}.my-message .voice-bubble[data-v-1593665e]{background-color:#3797f0;color:#fff;border-bottom-right-radius:4px;border-bottom-left-radius:22px}.voice-text[data-v-1593665e]{margin-top:5px;font-size:13px;padding-top:5px;border-top:1px solid rgba(0,0,0,0.1);width:100%}.my-message .voice-text[data-v-1593665e]{border-top:1px solid rgba(255,255,255,0.2)}.instagram-music[data-v-1593665e]{max-width:250px;background-color:#efefef;border-radius:12px;padding:10px;color:#000}.my-message .instagram-music[data-v-1593665e]{background-color:#3797f0;color:#fff}.system-msg[data-v-1593665e]{width:100%;text-align:center;font-size:12px;color:#999;margin:5px 0}\n','',{version:3,sources:['webpack://./src/柏柏同层/Instagram/bubble/bubble.vue'],names:[],mappings:'AAyIA,6CACE,YAAa,CACb,oBAAqB,CACrB,OAAQ,CACR,UAAW,CACX,iBAAkB,CAClB,cAAe,CACf,qBAAsB,CACtB,yFACF,CAEA,6BACE,kBAAmB,CACnB,wBACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aAAc,CACd,gCACF,CAEA,kCACE,aAAc,CACd,YAAa,CACb,qBACF,CAEA,8CACE,oBACF,CAEA,yBACE,iBAAkB,CAClB,kBAAmB,CACnB,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,iBACF,CAEA,8BACE,wBAAyB,CACzB,UAAW,CACX,6BACF,CAEA,0CACE,wBAAyB,CACzB,UAAW,CACX,kBAAmB,CACnB,8BAA+B,CAC/B,8BACF,CAEA,6BACE,SAAU,CACV,4BACF,CAEA,8BACE,kBAAmB,CACnB,eAAgB,CAChB,cAAe,CACf,gCACF,CAEA,oEAEE,cAAe,CACf,aACF,CAEA,kCACE,cAAe,CACf,UAAW,CACX,wBAAyB,CACzB,gBAAiB,CACjB,iBACF,CACA,8CACE,wBAAyB,CACzB,UACF,CAEA,+BACE,SAAU,CACV,4BAA6B,CAC7B,eACF,CAEA,+BACE,wBAAyB,CACzB,UAAW,CACX,YAAa,CACb,qBAAsB,CACtB,sBAAuB,CACvB,OAAQ,CACR,cAAe,CACf,cAAe,CACf,6BACF,CACA,2CACE,wBAAyB,CACzB,UAAW,CACX,8BAA+B,CAC/B,8BACF,CAEA,6BACE,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,oCAAwC,CACxC,UACF,CACA,yCACE,0CACF,CAEA,kCACE,eAAgB,CAChB,wBAAyB,CACzB,kBAAmB,CACnB,YAAa,CACb,UACF,CACA,8CACE,wBAAyB,CACzB,UACF,CAEA,6BACE,UAAW,CACX,iBAAkB,CAClB,cAAe,CACf,UAAW,CACX,YACF',sourcesContent:['<template>\n  <div class="instagram-bubble-container" :class="{ \'my-message\': isUser }">\n    \x3c!-- 对方头像 --\x3e\n    <div v-if="!isUser" class="chat-avatar" :style="`background-image: url(\'${headUrl}\')`"></div>\n\n    \x3c!-- 消息内容 --\x3e\n    <div class="message-content">\n      \x3c!-- 文本消息 --\x3e\n      <div v-if="props.bubble.msgtype == \'text\'" class="bubble text-bubble">\n        {{ props.bubble.content }}\n      </div>\n      \x3c!-- 图片消息 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'img\'" class="bubble img-bubble">\n        <div v-if="isUrl(props.bubble.content)" class="img-wrapper">\n          <img :src="props.bubble.content" @error="handleImgError" />\n        </div>\n        <div v-else class="bubble text-bubble fake-img-bubble">\n          <div style="text-align: center; color: #aaa; font-size: 13px; margin-bottom: 5px">[图片]</div>\n          <div v-html="warpHandle(props.bubble.content)"></div>\n        </div>\n        <div v-if="props.bubble.additionalText" class="additional-text">{{ props.bubble.additionalText }}</div>\n      </div>\n      \x3c!-- 表情包 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'emoji\'" class="bubble emoji-bubble">\n        <div class="img-wrapper">\n          <img :src="props.bubble.emoji" @error="handleImgError" />\n        </div>\n      </div>\n      \x3c!-- 语音消息 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'voice\'" class="bubble voice-bubble" @click="toggleVoiceText">\n        <div style="display: flex; align-items: center; gap: 10px; width: 100%">\n          <span v-if="!isUser" class="voice-icon">\n            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">\n              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z" />\n            </svg>\n          </span>\n          <span class="voice-duration">{{ props.bubble.voicetime || 2 }}"</span>\n          <span v-if="isUser" class="voice-icon">\n            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">\n              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z" />\n            </svg>\n          </span>\n        </div>\n        <div v-if="voiceTextVisible" class="voice-text">{{ props.bubble.content }}</div>\n      </div>\n      \x3c!-- music类型 --\x3e\n      <music\n        v-else-if="props.bubble.msgtype == \'music\'"\n        :class="`instagram-music`"\n        :song="props.bubble.song"\n        :singer="props.bubble.singer"\n      ></music>\n      \x3c!-- system类型 --\x3e\n      <div v-else-if="props.bubble.msgtype == \'system\'" class="system-msg">\n        {{ props.bubble?.content }}\n      </div>\n      \x3c!-- 其他类型 --\x3e\n      <div v-else class="bubble text-bubble">\n        {{ props.bubble.content }}\n      </div>\n    </div>\n\n    \x3c!-- 我方头像 --\x3e\n    <div v-if="isUser" class="chat-avatar" :style="`background-image: url(\'${headUrl}\')`"></div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, defineProps, ref } from \'vue\';\nimport music from \'../../QQ/bubble/music.vue\';\nimport { addQQNpc, sharedState } from \'../../shared-state\';\n\nconst props = defineProps({\n  bubble: {\n    type: Object,\n  },\n  senderinfo: {\n    type: Object,\n  },\n});\n\nconst isUser = computed(() => {\n  return props.bubble.sender === \'user\';\n});\n\nconst headUrl = computed(() => {\n  const name = props.bubble.sender;\n\n  if (isUser.value) {\n    return sharedState.Instagram.userHead || sharedState.ST.userHead;\n  }\n\n  // 优先使用传入的 senderinfo 中的 Instagram 头像\n  if (props.senderinfo?.instagramHead) {\n    return props.senderinfo.instagramHead;\n  }\n\n  // 其次尝试从全局 chars 中查找\n  if (sharedState.QQ.chars[name]?.instagramHead) {\n    return sharedState.QQ.chars[name].instagramHead;\n  }\n\n  // 降级到 QQ 头像\n  if (props.senderinfo?.head) {\n    return props.senderinfo.head;\n  }\n  if (sharedState.QQ.chars[name]?.head) {\n    return sharedState.QQ.chars[name].head;\n  }\n\n  return \'\';\n});\n\nif (!isUser.value && props.bubble.sender && !(props.bubble.sender in sharedState.QQ.chars)) {\n  addQQNpc(props.bubble.sender);\n}\n\nconst handleImgError = e => {\n  e.target.style.display = \'none\';\n};\n\nconst voiceTextVisible = ref(false);\nconst toggleVoiceText = () => {\n  voiceTextVisible.value = !voiceTextVisible.value;\n};\n\nfunction warpHandle(content) {\n  if (!content) return \'\';\n  return content.replace(/\\n/g, \'<br>\');\n}\n\nfunction isUrl(content) {\n  return /^http/.test(content);\n}\n<\/script>\n\n<style scoped>\n.instagram-bubble-container {\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n  width: 100%;\n  margin-bottom: 8px;\n  padding: 0 10px;\n  box-sizing: border-box;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n}\n\n.my-message {\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n.chat-avatar {\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.message-content {\n  max-width: 70%;\n  display: flex;\n  flex-direction: column;\n}\n\n.my-message .message-content {\n  align-items: flex-end;\n}\n\n.bubble {\n  padding: 10px 14px;\n  border-radius: 22px;\n  font-size: 15px;\n  line-height: 1.4;\n  word-break: break-all;\n  position: relative;\n}\n\n.text-bubble {\n  background-color: #efefef;\n  color: #000;\n  border-bottom-left-radius: 4px;\n}\n\n.my-message .text-bubble {\n  background-color: #3797f0; /* Instagram Blue */\n  color: #fff;\n  border-radius: 22px;\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 22px;\n}\n\n.img-bubble {\n  padding: 0;\n  background-color: transparent;\n}\n\n.img-wrapper {\n  border-radius: 12px;\n  overflow: hidden;\n  max-width: 100%;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.img-bubble img,\n.emoji-bubble img {\n  max-width: 100%;\n  display: block;\n}\n\n.additional-text {\n  margin-top: 5px;\n  color: #000;\n  background-color: #efefef;\n  padding: 5px 10px;\n  border-radius: 8px;\n}\n.my-message .additional-text {\n  background-color: #3797f0;\n  color: #fff;\n}\n\n.emoji-bubble {\n  padding: 0;\n  background-color: transparent;\n  max-width: 150px;\n}\n\n.voice-bubble {\n  background-color: #efefef;\n  color: #000;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 5px;\n  min-width: 80px;\n  cursor: pointer;\n  border-bottom-left-radius: 4px;\n}\n.my-message .voice-bubble {\n  background-color: #3797f0;\n  color: #fff;\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 22px;\n}\n\n.voice-text {\n  margin-top: 5px;\n  font-size: 13px;\n  padding-top: 5px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  width: 100%;\n}\n.my-message .voice-text {\n  border-top: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.instagram-music {\n  max-width: 250px;\n  background-color: #efefef;\n  border-radius: 12px;\n  padding: 10px;\n  color: #000;\n}\n.my-message .instagram-music {\n  background-color: #3797f0;\n  color: #fff;\n}\n\n.system-msg {\n  width: 100%;\n  text-align: center;\n  font-size: 12px;\n  color: #999;\n  margin: 5px 0;\n}\n</style>\n'],sourceRoot:''}]);const s=r},4948:(e,n,t)=>{var a=t(6439);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('05325629',a,!1,{ssrId:!0})},5001:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.ig-dm-list[data-v-189511ab]{width:100%;height:100%;background-color:#ffffff;display:flex;flex-direction:column;color:#262626;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}.ig-header[data-v-189511ab]{height:44px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;border-bottom:1px solid #dbdbdb;background-color:#fff;z-index:10}.ig-header-left[data-v-189511ab],.ig-header-right[data-v-189511ab]{cursor:pointer;min-width:32px}.ig-header-center[data-v-189511ab]{display:flex;align-items:center;gap:4px;font-weight:600;font-size:16px;cursor:pointer}.ig-dm-list-content[data-v-189511ab]{flex:1;display:flex;flex-direction:column;overflow:hidden}.ig-dm-search[data-v-189511ab]{padding:12px 16px}.ig-search-box[data-v-189511ab]{background-color:#efefef;border-radius:8px;height:36px;display:flex;align-items:center;padding:0 12px;gap:8px;color:#8e8e8e;font-size:14px}.ig-dm-scroll[data-v-189511ab]{flex:1;overflow-y:auto;padding-top:8px}.ig-dm-section-title[data-v-189511ab]{padding:0 16px 12px 16px;font-weight:600;font-size:16px;color:#262626}.ig-dm-item[data-v-189511ab]{display:flex;align-items:center;padding:8px 16px;cursor:pointer}.ig-dm-item[data-v-189511ab]:active{background-color:#f5f5f5}.ig-dm-avatar[data-v-189511ab]{width:56px;height:56px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #efefef;margin-right:12px}.ig-dm-info[data-v-189511ab]{flex:1;overflow:hidden}.ig-dm-name[data-v-189511ab]{font-size:14px;color:#262626;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ig-dm-preview[data-v-189511ab]{display:flex;align-items:center;font-size:13px;color:#8e8e8e}.ig-dm-msg[data-v-189511ab]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:180px}.ig-dm-msg.unread[data-v-189511ab]{color:#262626;font-weight:600}.ig-dm-time[data-v-189511ab]{white-space:nowrap;margin-left:4px}.ig-dm-unread-dot[data-v-189511ab]{width:8px;height:8px;background-color:#0095f6;border-radius:50%;margin-left:8px}\n','',{version:3,sources:['webpack://./src/柏柏同层/Instagram/DMList.vue'],names:[],mappings:'AA4GA,6BACE,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,YAAa,CACb,qBAAsB,CACtB,aAAc,CACd,yFACF,CAEA,4BACE,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cAAe,CACf,+BAAgC,CAChC,qBAAsB,CACtB,UACF,CAEA,mEACI,cAAe,CACf,cACJ,CAEA,mCACI,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,cAAe,CACf,cACJ,CAEA,qCACI,MAAO,CACP,YAAa,CACb,qBAAsB,CACtB,eACJ,CAEA,+BACI,iBACJ,CAEA,gCACI,wBAAyB,CACzB,iBAAkB,CAClB,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,cAAe,CACf,OAAQ,CACR,aAAc,CACd,cACJ,CAEA,+BACI,MAAO,CACP,eAAgB,CAChB,eACJ,CAEA,sCACI,wBAAyB,CACzB,eAAgB,CAChB,cAAe,CACf,aACJ,CAEA,6BACI,YAAa,CACb,kBAAmB,CACnB,gBAAiB,CACjB,cACJ,CAEA,oCACI,wBACJ,CAEA,+BACI,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBAAyB,CACzB,iBACJ,CAEA,6BACI,MAAO,CACP,eACJ,CAEA,6BACI,cAAe,CACf,aAAc,CACd,iBAAkB,CAClB,kBAAmB,CACnB,eAAgB,CAChB,sBACJ,CAEA,gCACI,YAAa,CACb,kBAAmB,CACnB,cAAe,CACf,aACJ,CAEA,4BACI,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,eACJ,CAEA,mCACI,aAAc,CACd,eACJ,CAEA,6BACI,kBAAmB,CACnB,eACJ,CAEA,mCACI,SAAU,CACV,UAAW,CACX,wBAAyB,CACzB,iBAAkB,CAClB,eACJ',sourcesContent:['<template>\n  <div class="ig-dm-list">\n    \x3c!-- Header --\x3e\n    <header class="ig-header">\n      <div class="ig-header-left" @click="$emit(\'back\')">\n        <svg aria-label="Back" class="x1lliihq x1n2onr6 x5n08af" fill="currentColor" height="24" role="img" viewBox="0 0 24 24" width="24"><line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="21" x2="3" y1="12" y2="12"></line><polyline fill="none" points="9 6 3 12 9 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polyline></svg>\n      </div>\n      <div class="ig-header-center">\n        <span class="ig-username">{{ sharedState.Instagram.userName || sharedState.ST.userName }}</span>\n        <svg aria-label="Down Chevron" class="x1lliihq x1n2onr6 x5n08af" fill="currentColor" height="12" role="img" viewBox="0 0 24 24" width="12"><path d="M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z" transform="rotate(180 12 12)"></path></svg>\n      </div>\n      <div class="ig-header-right">\n        <svg aria-label="New Message" class="x1lliihq x1n2onr6 x5n08af" fill="currentColor" height="24" role="img" viewBox="0 0 24 24" width="24"><path d="M12.209 10.556a.925.925 0 0 0-.254-.158l-1.922-.76a.917.917 0 0 0-.67.001l-1.933.76a.92.92 0 0 0-.253.158L2.553 15.18a.5.5 0 0 0 .694.72l4.625-4.467 1.932-.76a.92.92 0 0 1 .669 0l1.922.76 4.625 4.467a.5.5 0 0 0 .694-.72l-4.625-4.467v-.158Zm9.238-8.498a1.503 1.503 0 0 0-1.428-.023l-18 7.228a1.502 1.502 0 0 0-.67 2.458l5.592 5.592.002.002 1.924 6.643a1.503 1.503 0 0 0 2.508.76l3.37-3.238 2.822 2.725a1.5 1.5 0 0 0 2.404-.847l2.972-19.476a1.503 1.503 0 0 0-1.5-1.826ZM17.95 20.218l-3.18-3.072a.5.5 0 0 0-.348-.144h-.002a.5.5 0 0 0-.346.142L9.2 21.85l-1.572-5.429 11.758-11.33-1.436 15.127Z"></path></svg>\n      </div>\n    </header>\n\n    <div class="ig-dm-list-content">\n      <div class="ig-dm-search">\n        <div class="ig-search-box">\n             <svg aria-label="Search" class="x1lliihq x1n2onr6 x5n08af" fill="#8e8e8e" height="16" role="img" viewBox="0 0 24 24" width="16"><path d="M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><line fill="none" x1="16.511" x2="22" y1="16.511" y2="22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></line></svg>\n             <span>搜索</span>\n        </div>\n      </div>\n\n      <div class="ig-dm-scroll">\n        <div class="ig-dm-section-title">消息</div>\n        <div v-for="chat in dmList" :key="chat.id" class="ig-dm-item" @click="$emit(\'open-chat\', chat.id)">\n            <div class="ig-dm-avatar" :style="{ backgroundImage: `url(${getAvatar(chat.id)})` }"></div>\n            <div class="ig-dm-info">\n                <div class="ig-dm-name">{{ getName(chat.id) }}</div>\n                <div class="ig-dm-preview">\n                    <span class="ig-dm-msg" :class="{ \'unread\': chat.unread > 0 }">{{ chat.lastMsg || \'Sent a message\' }}</span>\n                    <span class="ig-dm-time" v-if="chat.time">· {{ formatTime(chat.time) }}</span>\n                </div>\n            </div>\n            <div v-if="chat.unread" class="ig-dm-unread-dot"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed } from \'vue\';\nimport { sharedState, getPlatformInfo } from \'../shared-state\';\n\ndefineEmits([\'back\', \'open-chat\']);\n\nconst dmList = computed(() => {\n  const list = [];\n  const historyIds = new Set(Object.keys(sharedState.Instagram.chathistory));\n\n  // 1. Existing history\n  for (const id of historyIds) {\n    const char = sharedState.QQ.chars[id];\n    if (char && char.chartype?.toLowerCase() === \'group\') continue;\n\n    list.push({\n      id,\n      ...sharedState.Instagram.chathistory[id],\n    });\n  }\n\n  // 2. QQ Friends (if not in history)\n  // Maps QQ friends to Instagram DMs\n  for (const [id, char] of Object.entries(sharedState.QQ.chars)) {\n    // Filter out system or special types if needed.\n    // Assuming \'friend\', \'npc\', and \'Group\' are valid targets.\n    if (char.chartype === \'system\') continue;\n    if (char.chartype?.toLowerCase() === \'group\') continue;\n    if (historyIds.has(id)) continue;\n\n    list.push({\n      id,\n      unread: 0,\n      lastMsg: \'点击发消息\',\n      time: \'\',\n    });\n  }\n\n  return list;\n});\n\nfunction getAvatar(id: string) {\n    if (id === \'user\') {\n        return sharedState.Instagram.userHead || sharedState.ST.userHead;\n    }\n    const info = getPlatformInfo(id, \'Instagram\');\n    return info.head || \'https://via.placeholder.com/56\';\n}\n\nfunction getName(id: string) {\n    if (id === \'user\') {\n        return sharedState.Instagram.userName || sharedState.ST.userName;\n    }\n    const info = getPlatformInfo(id, \'Instagram\');\n    return info.name || id;\n}\n\nfunction formatTime(time: string) {\n    if (!time) return \'\';\n    // 如果是 HH:MM 格式，直接返回\n    if (time.includes(\':\')) return time;\n    return time;\n}\n<\/script>\n\n<style scoped>\n.ig-dm-list {\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  color: #262626;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\n}\n\n.ig-header {\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  border-bottom: 1px solid #dbdbdb;\n  background-color: #fff;\n  z-index: 10;\n}\n\n.ig-header-left, .ig-header-right {\n    cursor: pointer;\n    min-width: 32px;\n}\n\n.ig-header-center {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-weight: 600;\n    font-size: 16px;\n    cursor: pointer;\n}\n\n.ig-dm-list-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n}\n\n.ig-dm-search {\n    padding: 12px 16px;\n}\n\n.ig-search-box {\n    background-color: #efefef;\n    border-radius: 8px;\n    height: 36px;\n    display: flex;\n    align-items: center;\n    padding: 0 12px;\n    gap: 8px;\n    color: #8e8e8e;\n    font-size: 14px;\n}\n\n.ig-dm-scroll {\n    flex: 1;\n    overflow-y: auto;\n    padding-top: 8px;\n}\n\n.ig-dm-section-title {\n    padding: 0 16px 12px 16px;\n    font-weight: 600;\n    font-size: 16px;\n    color: #262626;\n}\n\n.ig-dm-item {\n    display: flex;\n    align-items: center;\n    padding: 8px 16px;\n    cursor: pointer;\n}\n\n.ig-dm-item:active {\n    background-color: #f5f5f5;\n}\n\n.ig-dm-avatar {\n    width: 56px;\n    height: 56px;\n    border-radius: 50%;\n    background-size: cover;\n    background-position: center;\n    border: 1px solid #efefef;\n    margin-right: 12px;\n}\n\n.ig-dm-info {\n    flex: 1;\n    overflow: hidden;\n}\n\n.ig-dm-name {\n    font-size: 14px;\n    color: #262626;\n    margin-bottom: 2px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.ig-dm-preview {\n    display: flex;\n    align-items: center;\n    font-size: 13px;\n    color: #8e8e8e;\n}\n\n.ig-dm-msg {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 180px;\n}\n\n.ig-dm-msg.unread {\n    color: #262626;\n    font-weight: 600;\n}\n\n.ig-dm-time {\n    white-space: nowrap;\n    margin-left: 4px;\n}\n\n.ig-dm-unread-dot {\n    width: 8px;\n    height: 8px;\n    background-color: #0095f6;\n    border-radius: 50%;\n    margin-left: 8px;\n}\n</style>\n'],sourceRoot:''}]);const s=r},5303:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.ig-comment-card[data-v-0b415a01]{background-color:#ffffff;border-radius:8px;padding:12px 16px;width:100%;max-width:320px;margin-top:5px;box-shadow:0 1px 4px rgba(0,0,0,0.1);cursor:pointer;color:#262626;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif;border:1px solid #dbdbdb}.comment-top[data-v-0b415a01]{display:flex;align-items:center;margin-bottom:8px}.ig-circle-avatar[data-v-0b415a01]{width:32px;height:32px;min-width:32px;min-height:32px;border-radius:50% !important;background-size:cover;background-position:center;margin-right:10px;background-color:#efefef;flex-shrink:0;border:1px solid #dbdbdb}.info[data-v-0b415a01]{flex:1;overflow:hidden}.name[data-v-0b415a01]{font-weight:600;font-size:13px;color:#262626;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left}.meta[data-v-0b415a01]{font-size:11px;color:#8e8e8e;text-align:left}.comment-content[data-v-0b415a01]{font-size:14px;line-height:1.4;color:#262626;margin-bottom:10px;word-break:break-all;text-align:left}.reply-to[data-v-0b415a01]{color:#0095f6;margin-right:4px}.comment-bottom[data-v-0b415a01]{display:flex;justify-content:space-between;align-items:center;background-color:#fafafa;padding:6px;border-radius:4px;border:1px solid #efefef}.post-preview[data-v-0b415a01]{display:flex;align-items:center;gap:8px;flex:1;overflow:hidden}.post-cover[data-v-0b415a01]{width:24px;height:24px;border-radius:2px;background-size:cover;background-position:center;flex-shrink:0}.post-text[data-v-0b415a01]{font-size:12px;color:#8e8e8e;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.likes[data-v-0b415a01]{font-size:12px;color:#8e8e8e;display:flex;align-items:center;gap:3px;margin-left:8px}\n','',{version:3,sources:['webpack://./src/柏柏同层/Instagram/Comment.vue'],names:[],mappings:'AA8EA,kCACE,wBAAyB,CACzB,iBAAkB,CAClB,iBAAkB,CAClB,UAAW,CACX,eAAgB,CAChB,cAAe,CACf,oCAAwC,CACxC,cAAe,CACf,aAAc,CACd,cAAe,CACf,yFAAgG,CAChG,wBACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,iBACF,CAEA,mCACE,UAAW,CACX,WAAY,CACZ,cAAe,CACf,eAAgB,CAChB,4BAA6B,CAC7B,qBAAsB,CACtB,0BAA2B,CAC3B,iBAAkB,CAClB,wBAAyB,CACzB,aAAc,CACd,wBACF,CAEA,uBACE,MAAO,CACP,eACF,CAEA,uBACE,eAAgB,CAChB,cAAe,CACf,aAAc,CACd,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,eACF,CAEA,uBACE,cAAe,CACf,aAAc,CACd,eACF,CAEA,kCACE,cAAe,CACf,eAAgB,CAChB,aAAc,CACd,kBAAmB,CACnB,oBAAqB,CACrB,eACF,CAEA,2BACE,aAAc,CACd,gBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,wBAAyB,CACzB,WAAY,CACZ,iBAAkB,CAClB,wBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,MAAO,CACP,eACF,CAEA,6BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aACF,CAEA,4BACE,cAAe,CACf,aAAc,CACd,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,wBACE,cAAe,CACf,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eACF',sourcesContent:['<template>\n  <div class="ig-comment-card" @click="emit(\'click\')">\n    <div class="comment-top">\n      <div class="ig-circle-avatar" :style="avatarStyle"></div>\n      <div class="info">\n        <div class="name">{{ commentUser.name }}</div>\n        <div class="meta">{{ props.commentData.time }} · 评论了帖子</div>\n      </div>\n    </div>\n    <div class="comment-content">\n      <span v-if="props.commentData.replyTo" class="reply-to">回复 @{{ props.commentData.replyTo }}: </span>\n      <span v-html="formattedContent"></span>\n    </div>\n    <div class="comment-bottom">\n      <div v-if="props.post" class="post-preview">\n        <div class="post-cover" :style="postCoverStyle"></div>\n        <div class="post-text">{{ postPreviewText }}</div>\n      </div>\n      <div v-if="props.commentData.like && props.commentData.like !== \'0\'" class="likes">\n        <svg\n          aria-label="Like"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="#8e8e8e"\n          height="12"\n          role="img"\n          viewBox="0 0 24 24"\n          width="12"\n        >\n          <path\n            d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"\n          ></path>\n        </svg>\n        {{ props.commentData.like }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed } from \'vue\';\nimport { getPlatformInfo } from \'../shared-state\';\n\nconst props = defineProps([\'commentData\', \'post\']);\nconst emit = defineEmits([\'click\']);\n\nconst commentUser = computed(() => {\n  return getPlatformInfo(props.commentData.sender, \'Instagram\');\n});\n\nconst formattedContent = computed(() => {\n  let text = props.commentData.content || \'\';\n  if (!text) return \'\';\n  text = text.replace(/\\n/g, \'<br>\');\n  text = text.replace(/\\[(img|vedio|bqb)/g, `<br>[$1`);\n  return text;\n});\n\nconst postCoverStyle = computed(() => {\n  if (props.post?.imgs && props.post.imgs.length > 0) {\n    const firstImg = props.post.imgs[0];\n    if (firstImg.type === \'image\') {\n      return `background-image: url(\'${firstImg.url}\')`;\n    }\n  }\n  return \'background-color: #efefef\';\n});\n\nconst postPreviewText = computed(() => {\n  return props.post?.content || \'帖子\';\n});\n\nconst avatarStyle = computed(() => {\n  const url = props.commentData.head || commentUser.value.head || \'https://via.placeholder.com/32\';\n  return `background-image: url(\'${url}\')`;\n});\n<\/script>\n\n<style scoped>\n.ig-comment-card {\n  background-color: #ffffff;\n  border-radius: 8px;\n  padding: 12px 16px;\n  width: 100%;\n  max-width: 320px;\n  margin-top: 5px;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n  color: #262626;\n  font-size: 14px;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n  border: 1px solid #dbdbdb;\n}\n\n.comment-top {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.ig-circle-avatar {\n  width: 32px;\n  height: 32px;\n  min-width: 32px;\n  min-height: 32px;\n  border-radius: 50% !important;\n  background-size: cover;\n  background-position: center;\n  margin-right: 10px;\n  background-color: #efefef;\n  flex-shrink: 0;\n  border: 1px solid #dbdbdb;\n}\n\n.info {\n  flex: 1;\n  overflow: hidden;\n}\n\n.name {\n  font-weight: 600;\n  font-size: 13px;\n  color: #262626;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: left;\n}\n\n.meta {\n  font-size: 11px;\n  color: #8e8e8e;\n  text-align: left;\n}\n\n.comment-content {\n  font-size: 14px;\n  line-height: 1.4;\n  color: #262626;\n  margin-bottom: 10px;\n  word-break: break-all;\n  text-align: left;\n}\n\n.reply-to {\n  color: #0095f6;\n  margin-right: 4px;\n}\n\n.comment-bottom {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #fafafa;\n  padding: 6px;\n  border-radius: 4px;\n  border: 1px solid #efefef;\n}\n\n.post-preview {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex: 1;\n  overflow: hidden;\n}\n\n.post-cover {\n  width: 24px;\n  height: 24px;\n  border-radius: 2px;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n}\n\n.post-text {\n  font-size: 12px;\n  color: #8e8e8e;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.likes {\n  font-size: 12px;\n  color: #8e8e8e;\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  margin-left: 8px;\n}\n</style>\n'],sourceRoot:''}]);const s=r},5378:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t='',a=void 0!==n[5];return n[4]&&(t+='@supports ('.concat(n[4],') {')),n[2]&&(t+='@media '.concat(n[2],' {')),a&&(t+='@layer'.concat(n[5].length>0?' '.concat(n[5]):'',' {')),t+=e(n),a&&(t+='}'),n[2]&&(t+='}'),n[4]&&(t+='}'),t}).join('')},n.i=function(e,t,a,i,o){'string'==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);a&&r[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]='@layer'.concat(d[5].length>0?' '.concat(d[5]):'',' {').concat(d[1],'}')),d[5]=o),t&&(d[2]?(d[1]='@media '.concat(d[2],' {').concat(d[1],'}'),d[2]=t):d[2]=t),i&&(d[4]?(d[1]='@supports ('.concat(d[4],') {').concat(d[1],'}'),d[4]=i):d[4]=''.concat(i)),n.push(d))}},n}},5705:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.douyin-comment-card[data-v-b43020c6]{background-color:#252632;border-radius:12px;padding:12px 16px;width:100%;max-width:320px;margin-top:5px;box-shadow:0 4px 12px rgba(0,0,0,0.3);cursor:pointer;color:#fff;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif;border:1px solid rgba(255,255,255,0.05)}.comment-top[data-v-b43020c6]{display:flex;align-items:center;margin-bottom:8px}.douyin-circle-avatar[data-v-b43020c6]{width:32px;height:32px;min-width:32px;min-height:32px;border-radius:50% !important;background-size:cover;background-position:center;margin-right:10px;background-color:#333;flex-shrink:0;aspect-ratio:1/1;display:block;border:1px solid rgba(255,255,255,0.1)}.info[data-v-b43020c6]{flex:1;overflow:hidden}.name[data-v-b43020c6]{font-weight:600;font-size:13px;color:#ccc;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left}.meta[data-v-b43020c6]{font-size:11px;color:#666;text-align:left}.comment-content[data-v-b43020c6]{font-size:14px;line-height:1.4;color:#eee;margin-bottom:10px;word-break:break-all;text-align:left}.reply-to[data-v-b43020c6]{color:#999;margin-right:4px}.comment-bottom[data-v-b43020c6]{display:flex;justify-content:space-between;align-items:center;background-color:rgba(255,255,255,0.05);padding:6px;border-radius:4px}.video-preview[data-v-b43020c6]{display:flex;align-items:center;gap:6px;flex:1;overflow:hidden}.video-cover[data-v-b43020c6]{width:20px;height:20px;border-radius:2px;background-size:cover;background-position:center;flex-shrink:0}.video-title[data-v-b43020c6]{font-size:12px;color:#999;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.likes[data-v-b43020c6]{font-size:12px;color:#666;display:flex;align-items:center;gap:3px;margin-left:8px}\n','',{version:3,sources:['webpack://./src/柏柏同层/Douyin/comment.vue'],names:[],mappings:'AA2DA,sCACE,wBAAyB,CACzB,kBAAmB,CACnB,iBAAkB,CAClB,UAAW,CACX,eAAgB,CAChB,cAAe,CACf,qCAAyC,CACzC,cAAe,CACf,UAAW,CACX,cAAe,CACf,yFAAgG,CAChG,uCACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,iBACF,CAEA,uCACE,UAAW,CACX,WAAY,CACZ,cAAe,CACf,eAAgB,CAChB,4BAA6B,CAC7B,qBAAsB,CACtB,0BAA2B,CAC3B,iBAAkB,CAClB,qBAAsB,CACtB,aAAc,CACd,gBAAmB,CACnB,aAAc,CACd,sCACF,CAEA,uBACE,MAAO,CACP,eACF,CAEA,uBACE,eAAgB,CAChB,cAAe,CACf,UAAW,CACX,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,eACF,CAEA,uBACE,cAAe,CACf,UAAW,CACX,eACF,CAEA,kCACE,cAAe,CACf,eAAgB,CAChB,UAAW,CACX,kBAAmB,CACnB,oBAAqB,CACrB,eACF,CAEA,2BACE,UAAW,CACX,gBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,uCAA2C,CAC3C,WAAY,CACZ,iBACF,CAEA,gCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,MAAO,CACP,eACF,CAEA,8BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,aACF,CAEA,8BACE,cAAe,CACf,UAAW,CACX,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,wBACE,cAAe,CACf,UAAW,CACX,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eACF',sourcesContent:['<template>\n  <div class="douyin-comment-card" @click="emit(\'click\')">\n    <div class="comment-top">\n      <div class="douyin-circle-avatar" :style="avatarStyle"></div>\n      <div class="info">\n        <div class="name">{{ props.commentData.sender }}</div>\n        <div class="meta">{{ props.commentData.time }} · 评论了作品</div>\n      </div>\n    </div>\n    <div class="comment-content">\n      <span v-if="props.commentData.replyTo" class="reply-to">回复 @{{ props.commentData.replyTo }}: </span>\n      <span v-html="formattedContent"></span>\n    </div>\n    <div class="comment-bottom">\n      <div v-if="props.video" class="video-preview">\n        <div class="video-cover" :style="videoCoverStyle"></div>\n        <div class="video-title">{{ props.video.title || \'无标题\' }}</div>\n      </div>\n      <div v-if="props.commentData.like && props.commentData.like !== \'0\'" class="likes">\n        <svg viewBox="0 0 1024 1024" width="12" height="12" fill="#999">\n          <path\n            d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"\n          />\n        </svg>\n        {{ props.commentData.like }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed } from \'vue\';\n\nconst props = defineProps([\'commentData\', \'video\']);\nconst emit = defineEmits([\'click\']);\n\nconst formattedContent = computed(() => {\n  let text = props.commentData.content || \'\';\n  if (!text) return \'\';\n  text = text.replace(/\\n/g, \'<br>\');\n  text = text.replace(/\\n/g, \'<br>\');\n  text = text.replace(/\\[(img|vedio|bqb)/g, `<br>[$1`);\n  return text;\n});\n\nconst videoCoverStyle = computed(() => {\n  if (props.video?.video) {\n    return `background-image: url(\'${props.video.video}\')`;\n  }\n  return \'background-color: #333\';\n});\n\nconst avatarStyle = computed(() => {\n  const url = props.commentData.head || \'https://sharkpan.xyz/f/rOpu6/9277120A65282CFEAB9E191B34474729_0.gif\'; // Default momo avatar\n  return `background-image: url(\'${url}\')`;\n});\n<\/script>\n\n<style scoped>\n.douyin-comment-card {\n  background-color: #252632;\n  border-radius: 12px;\n  padding: 12px 16px;\n  width: 100%;\n  max-width: 320px;\n  margin-top: 5px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  cursor: pointer;\n  color: #fff;\n  font-size: 14px;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.comment-top {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.douyin-circle-avatar {\n  width: 32px;\n  height: 32px;\n  min-width: 32px;\n  min-height: 32px;\n  border-radius: 50% !important;\n  background-size: cover;\n  background-position: center;\n  margin-right: 10px;\n  background-color: #333;\n  flex-shrink: 0;\n  aspect-ratio: 1 / 1;\n  display: block;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.info {\n  flex: 1;\n  overflow: hidden;\n}\n\n.name {\n  font-weight: 600;\n  font-size: 13px;\n  color: #ccc;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: left;\n}\n\n.meta {\n  font-size: 11px;\n  color: #666;\n  text-align: left;\n}\n\n.comment-content {\n  font-size: 14px;\n  line-height: 1.4;\n  color: #eee;\n  margin-bottom: 10px;\n  word-break: break-all;\n  text-align: left;\n}\n\n.reply-to {\n  color: #999;\n  margin-right: 4px;\n}\n\n.comment-bottom {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.05);\n  padding: 6px;\n  border-radius: 4px;\n}\n\n.video-preview {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex: 1;\n  overflow: hidden;\n}\n\n.video-cover {\n  width: 20px;\n  height: 20px;\n  border-radius: 2px;\n  background-size: cover;\n  background-position: center;\n  flex-shrink: 0;\n}\n\n.video-title {\n  font-size: 12px;\n  color: #999;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.likes {\n  font-size: 12px;\n  color: #666;\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  margin-left: 8px;\n}\n</style>\n'],sourceRoot:''}]);const s=r},5741:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.ig-carousel-container[data-v-9067e0d6]{position:relative;width:100%}.ig-carousel-container.with-dots[data-v-9067e0d6]{padding-bottom:24px}.ig-carousel[data-v-9067e0d6]{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;scrollbar-width:none;cursor:grab}.ig-carousel[data-v-9067e0d6]:active{cursor:grabbing}.ig-carousel[data-v-9067e0d6]::-webkit-scrollbar{display:none}.ig-slide[data-v-9067e0d6]{min-width:100%;scroll-snap-align:start;position:relative}.ig-image-counter[data-v-9067e0d6]{position:absolute;top:12px;right:12px;background-color:rgba(38,38,38,0.8);color:#f5f5f5;padding:6px 10px;border-radius:14px;font-size:12px;font-weight:400;pointer-events:none;z-index:10}.ig-slide-dots[data-v-9067e0d6]{position:absolute;bottom:0;left:0;right:0;height:24px;display:flex;justify-content:center;align-items:center;gap:4px}.ig-dot[data-v-9067e0d6]{width:6px;height:6px;border-radius:50%;background-color:#dbdbdb;transition:background-color 0.2s}.ig-dot.active[data-v-9067e0d6]{background-color:#0095f6}.ig-slide-description-overlay[data-v-9067e0d6]{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,0.6);color:white;padding:12px;font-size:14px;text-align:center;line-height:1.4;max-height:40%;overflow-y:auto;backdrop-filter:blur(2px)}.ig-post[data-v-9067e0d6]{padding-bottom:24px;border-bottom:1px solid #efefef}.ig-post.inside[data-v-9067e0d6]{border:1px solid #efefef;border-radius:8px;background-color:#fff;margin:8px 0;width:320px;max-width:100%;overflow:hidden}.ig-post-header[data-v-9067e0d6]{height:60px;display:flex;align-items:center;justify-content:space-between;padding:0 12px}.ig-post-header-left[data-v-9067e0d6]{display:flex;align-items:center;gap:10px}.ig-post-avatar[data-v-9067e0d6]{width:32px;height:32px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #efefef}.ig-post-user-info[data-v-9067e0d6]{display:flex;flex-direction:column}.ig-post-username[data-v-9067e0d6]{font-weight:600;font-size:14px;color:#262626;line-height:1.2}.ig-post-meta[data-v-9067e0d6]{display:flex;align-items:center;flex-wrap:wrap;line-height:1.2}.ig-post-location[data-v-9067e0d6]{font-size:11px;color:#262626}.ig-post-music[data-v-9067e0d6]{font-size:11px;color:#262626;display:flex;align-items:center}.ig-post-more[data-v-9067e0d6]{cursor:pointer}.ig-post-image[data-v-9067e0d6]{width:100%}.ig-image-container[data-v-9067e0d6]{width:100%;padding-bottom:100%;background-size:cover;background-position:center;background-color:#efefef;position:relative}.ig-tagged-indicator[data-v-9067e0d6]{position:absolute;bottom:10px;left:10px;background-color:rgba(0,0,0,0.6);width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.ig-text-post-bg[data-v-9067e0d6]{width:100%;min-height:300px;background:linear-gradient(135deg,#833ab4,#fd1d1d,#fcb045);display:flex;align-items:center;justify-content:center;padding:40px;box-sizing:border-box}.ig-text-post-bg p[data-v-9067e0d6]{color:white;font-size:24px;font-weight:600;text-align:center;margin:0;line-height:1.4}.ig-post-actions[data-v-9067e0d6]{display:flex;justify-content:space-between;align-items:center;padding:12px 12px 0 12px}.ig-post-actions-left[data-v-9067e0d6]{display:flex;gap:16px}.ig-action-btn[data-v-9067e0d6]{cursor:pointer;transition:transform 0.1s}.ig-action-btn[data-v-9067e0d6]:active{transform:scale(0.9)}.ig-post-likes[data-v-9067e0d6]{padding:8px 12px;font-weight:600;font-size:14px;color:#262626}.ig-post-caption[data-v-9067e0d6]{padding:0 12px;font-size:14px;line-height:1.4;margin-bottom:6px}.ig-post-username-caption[data-v-9067e0d6]{font-weight:600;margin-right:6px;color:#262626}.ig-post-comments[data-v-9067e0d6]{padding:0 12px}.ig-view-comments[data-v-9067e0d6]{color:#8e8e8e;font-size:14px;margin-bottom:6px;cursor:pointer}.ig-comment-row[data-v-9067e0d6]{font-size:14px;margin-bottom:4px}.ig-comment-user[data-v-9067e0d6]{font-weight:600;margin-right:6px}.ig-post-time[data-v-9067e0d6]{padding:4px 12px;font-size:10px;color:#8e8e8e;text-transform:uppercase;margin-bottom:8px}\n','',{version:3,sources:['webpack://./src/柏柏同层/Instagram/Post.vue'],names:[],mappings:'AAuaA,wCACE,iBAAkB,CAClB,UACF,CAEA,kDACE,mBACF,CAEA,8BACE,YAAa,CACb,eAAgB,CAChB,4BAA6B,CAC7B,sBAAuB,CACvB,gCAAiC,CACjC,oBAAqB,CACrB,WACF,CACA,qCACE,eACF,CAEA,iDACE,YACF,CAEA,2BACE,cAAe,CACf,uBAAwB,CACxB,iBACF,CAEA,mCACE,iBAAkB,CAClB,QAAS,CACT,UAAW,CACX,mCAAuC,CACvC,aAAc,CACd,gBAAiB,CACjB,kBAAmB,CACnB,cAAe,CACf,eAAgB,CAChB,mBAAoB,CACpB,UACF,CAEA,gCACE,iBAAkB,CAClB,QAAS,CACT,MAAO,CACP,OAAQ,CACR,WAAY,CACZ,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,OACF,CAEA,yBACE,SAAU,CACV,UAAW,CACX,iBAAkB,CAClB,wBAAyB,CACzB,gCACF,CAEA,gCACE,wBACF,CAEA,+CACE,iBAAkB,CAClB,QAAS,CACT,MAAO,CACP,OAAQ,CACR,0BAA8B,CAC9B,WAAY,CACZ,YAAa,CACb,cAAe,CACf,iBAAkB,CAClB,eAAgB,CAChB,cAAe,CACf,eAAgB,CAChB,yBACF,CAEA,0BACE,mBAAoB,CACpB,+BACF,CAEA,iCACE,wBAAyB,CACzB,iBAAkB,CAClB,qBAAsB,CACtB,YAAa,CACb,WAAY,CACZ,cAAe,CACf,eACF,CAEA,iCACE,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cACF,CAEA,sCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBACF,CAEA,oCACE,YAAa,CACb,qBACF,CAEA,mCACE,eAAgB,CAChB,cAAe,CACf,aAAc,CACd,eACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,cAAe,CACf,eACF,CAEA,mCACE,cAAe,CACf,aACF,CAEA,gCACE,cAAe,CACf,aAAc,CACd,YAAa,CACb,kBACF,CAEA,+BACE,cACF,CAEA,gCACE,UACF,CAEA,qCACE,UAAW,CACX,mBAAoB,CACpB,qBAAsB,CACtB,0BAA2B,CAC3B,wBAAyB,CACzB,iBACF,CAEA,sCACE,iBAAkB,CAClB,WAAY,CACZ,SAAU,CACV,gCAAoC,CACpC,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,kCACE,UAAW,CACX,gBAAiB,CACjB,0DAA8D,CAC9D,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,YAAa,CACb,qBACF,CAEA,oCACE,WAAY,CACZ,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,QAAS,CACT,eACF,CAEA,kCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,wBACF,CAEA,uCACE,YAAa,CACb,QACF,CAEA,gCACE,cAAe,CACf,yBACF,CACA,uCACE,oBACF,CAEA,gCACE,gBAAiB,CACjB,eAAgB,CAChB,cAAe,CACf,aACF,CAEA,kCACE,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,iBACF,CAEA,2CACE,eAAgB,CAChB,gBAAiB,CACjB,aACF,CAEA,mCACE,cACF,CAEA,mCACE,aAAc,CACd,cAAe,CACf,iBAAkB,CAClB,cACF,CAEA,iCACE,cAAe,CACf,iBACF,CAEA,kCACE,eAAgB,CAChB,gBACF,CAEA,+BACE,gBAAiB,CACjB,cAAe,CACf,aAAc,CACd,wBAAyB,CACzB,iBACF',sourcesContent:['<template>\n  <div class="ig-post" :class="{ inside: isInside }">\n    \x3c!-- Header --\x3e\n    <div class="ig-post-header">\n      <div class="ig-post-header-left">\n        <div class="ig-post-avatar" :style="{ backgroundImage: `url(${getAvatar()})` }"></div>\n        <div class="ig-post-user-info">\n          <span class="ig-post-username">{{ postContent.sender || \'Unknown\' }}</span>\n          <div class="ig-post-meta">\n            <span class="ig-post-location" v-if="postContent.location">{{ postContent.location }}</span>\n            <span class="ig-post-music" v-if="postContent.music">\n              <span v-if="postContent.location"> • </span>\n              <svg\n                aria-label="Music"\n                class="x1lliihq x1n2onr6 x5n08af"\n                fill="currentColor"\n                height="10"\n                role="img"\n                viewBox="0 0 24 24"\n                width="10"\n                style="margin-right: 2px; vertical-align: middle"\n              >\n                <path\n                  d="M9 18a3 3 0 1 1 3-3 3 3 0 0 1-3 3Zm0-4a1 1 0 1 0 1 1 1 1 0 0 0-1-1Zm8 2a3 3 0 1 1 3-3 3 3 0 0 1-3 3Zm0-4a1 1 0 1 0 1 1 1 1 0 0 0-1-1Zm3-5h-9a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1Z"\n                ></path>\n              </svg>\n              {{ postContent.music }}\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class="ig-post-more">\n        <svg\n          aria-label="More"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n        >\n          <circle cx="12" cy="12" r="1.5"></circle>\n          <circle cx="6" cy="12" r="1.5"></circle>\n          <circle cx="18" cy="12" r="1.5"></circle>\n        </svg>\n      </div>\n    </div>\n\n    \x3c!-- Image/Carousel --\x3e\n    <div class="ig-post-image">\n      <div class="ig-carousel-container" :class="{ \'with-dots\': hasMultipleSlides }">\n        \x3c!-- Image Counter --\x3e\n        <div v-if="hasMultipleSlides" class="ig-image-counter">\n          {{ activeIndex + 1 }}/{{ slides.length }}\n        </div>\n        <div\n          class="ig-carousel"\n          ref="carouselRef"\n          @scroll="onScroll"\n          @mousedown="onMouseDown"\n          @mousemove="onMouseMove"\n          @mouseup="onMouseUp"\n          @mouseleave="onMouseLeave"\n        >\n          <div v-for="(slide, index) in slides" :key="index" class="ig-slide">\n            \x3c!-- Image Slide --\x3e\n            <div\n              v-if="slide.type === \'image\'"\n              class="ig-image-container"\n              :style="{ backgroundImage: `url(${slide.url})` }"\n            >\n              \x3c!-- Tagged Users Overlay (Only on first slide if applicable, or logic to be improved) --\x3e\n              <div\n                v-if="index === 0 && postContent.taggedUsers && postContent.taggedUsers.length > 0"\n                class="ig-tagged-indicator"\n              >\n                <svg\n                  aria-label="Tags"\n                  class="x1lliihq x1n2onr6 x5n08af"\n                  fill="#ffffff"\n                  height="12"\n                  role="img"\n                  viewBox="0 0 24 24"\n                  width="12"\n                >\n                  <path\n                    d="M21.334 23H2.666a1 1 0 0 1-1-1v-1.354a6.279 6.279 0 0 1 6.272-6.272h8.124a6.279 6.279 0 0 1 6.271 6.271V22a1 1 0 0 1-1 1ZM12 13.269a6 6 0 1 1 6-6 6.007 6.007 0 0 1-6 6Z"\n                  ></path>\n                </svg>\n              </div>\n              \x3c!-- Description Overlay --\x3e\n              <div v-if="slide.description" class="ig-slide-description-overlay">\n                {{ slide.description }}\n              </div>\n            </div>\n            \x3c!-- Text Slide --\x3e\n            <div v-else class="ig-text-post-bg">\n              <p>{{ slide.content }}</p>\n            </div>\n          </div>\n        </div>\n        \x3c!-- Dots Indicator --\x3e\n        <div v-if="hasMultipleSlides" class="ig-slide-dots">\n          <div\n            v-for="(_, index) in slides"\n            :key="index"\n            class="ig-dot"\n            :class="{ active: index === activeIndex }"\n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Actions --\x3e\n    <div class="ig-post-actions">\n      <div class="ig-post-actions-left">\n        <div class="ig-action-btn" @click="toggleLike">\n          <svg\n            v-if="postContent.liked"\n            aria-label="Unlike"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="#ed4956"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="m17.5 4.75a7.49 7.49 0 0 0-5.25 2.22 7.48 7.48 0 0 0-5.25-2.22A7.73 7.73 0 0 0 2 12.5c0 7.22 9 10.72 10 10.72s10-3.5 10-10.72a7.74 7.74 0 0 0-5-7.75Z"\n            ></path>\n          </svg>\n          <svg\n            v-else\n            aria-label="Like"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"\n            ></path>\n          </svg>\n        </div>\n        <div class="ig-action-btn" @click="emit(\'comment\')">\n          <svg\n            aria-label="Comment"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z"\n              fill="none"\n              stroke="currentColor"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></path>\n          </svg>\n        </div>\n        <div class="ig-action-btn">\n          <svg\n            aria-label="Share"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <line\n              fill="none"\n              stroke="currentColor"\n              stroke-linejoin="round"\n              stroke-width="2"\n              x1="22"\n              x2="9.218"\n              y1="3"\n              y2="10.083"\n            ></line>\n            <polygon\n              fill="none"\n              points="11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334"\n              stroke="currentColor"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></polygon>\n          </svg>\n        </div>\n      </div>\n      <div class="ig-post-actions-right">\n        <div class="ig-action-btn" @click="toggleSave">\n          <svg\n            v-if="postContent.saved"\n            aria-label="Remove"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="M20 22a.999.999 0 0 1-.685-.273L12 14.815l-7.315 6.912A1 1 0 0 1 3 21V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1Z"\n            ></path>\n          </svg>\n          <svg\n            v-else\n            aria-label="Save"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <polygon\n              fill="none"\n              points="20 21 12 13.44 4 21 4 3 20 3 20 21"\n              stroke="currentColor"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              stroke-width="2"\n            ></polygon>\n          </svg>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Likes --\x3e\n    <div class="ig-post-likes">\n      <span>{{ postContent.likes || 0 }} 次赞</span>\n    </div>\n\n    \x3c!-- Caption --\x3e\n    <div class="ig-post-caption" v-if="getCaption(postContent.content)">\n      <span class="ig-post-username-caption">{{ postContent.sender }}</span>\n      <span class="ig-caption-text">{{ getCaption(postContent.content) }}</span>\n    </div>\n\n    \x3c!-- Comments --\x3e\n    <div class="ig-post-comments">\n      <div v-if="postContent.comments && postContent.comments.length > 0" class="ig-view-comments">\n        查看全部 {{ postContent.comments.length }} 条评论\n      </div>\n      <div class="ig-comment-row" v-for="(comment, index) in (postContent.comments || []).slice(0, 2)" :key="index">\n        <div class="ig-comment-row-content">\n          <div class="ig-comment-avatar" v-if="comment.head" :style="{ backgroundImage: `url(${comment.head})` }"></div>\n          <span class="ig-comment-user">{{ comment.sender }}</span>\n          <span class="ig-comment-text">{{ comment.content }}</span>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Time --\x3e\n    <div class="ig-post-time">\n      {{ postContent.time || \'刚刚\' }}\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { getPlatformInfo } from \'../shared-state\';\nimport { computed, ref } from \'vue\';\n\nconst props = defineProps<{\n  postContent: any;\n  isInside?: boolean;\n}>();\n\nconst emit = defineEmits([\'comment\']);\n\nconst carouselRef = ref<HTMLElement | null>(null);\nconst activeIndex = ref(0);\nconst isDragging = ref(false);\nconst startX = ref(0);\nconst scrollLeftStart = ref(0);\n\nconst slides = computed(() => {\n  const rawImgs = props.postContent.imgs || [];\n  const result: Array<{type: \'image\' | \'text\', url?: string, content?: string, description?: string}> = [];\n\n  // Helper to check if string is URL\n  // 注意 https?: 后面的 \\/\\/\nconst isUrl = (str: string) => /^https?:\\/\\/.+\\.(jpg|jpeg|png|gif|webp)(\\?.*)?$/i.test(str) || /\\[img-(.+?)\\]/.test(str);\n  const getUrl = (str: string) => {\n      const match = str.match(/\\[img-(.+?)\\]/);\n      if (match) return match[1];\n      return str;\n  }\n\n  if (rawImgs.length > 0) {\n      rawImgs.forEach((item: any) => {\n          if (item.type === \'image\') {\n              result.push({ type: \'image\', url: item.url || item.content, description: \'\' });\n          } else if (item.type === \'text\') {\n              // Check if text is actually a URL\n              if (isUrl(item.content)) {\n                   result.push({ type: \'image\', url: getUrl(item.content), description: \'\' });\n              } else {\n                  // It is text. Check if previous was image to attach as description\n                  const last = result[result.length - 1];\nif (last && last.type === \'image\') {\n    last.description = (last.description ? last.description + \'\\n\' : \'\') + item.content;\n}\nelse {\n                      result.push({ type: \'text\', content: item.content });\n                  }\n              }\n          }\n      });\n  } else {\n      // Fallback to content parsing if no imgs array\n      const content = props.postContent.content || \'\';\n      const url = extractImage(content);\n      if (url) {\n          const caption = getCaption(content);\n          result.push({ type: \'image\', url: url, description: caption });\n      } else {\n          result.push({ type: \'text\', content: content });\n      }\n  }\n  return result;\n});\n\nconst hasMultipleSlides = computed(() => slides.value.length > 1);\n\nfunction onScroll() {\n  if (!carouselRef.value) return;\n  const width = carouselRef.value.offsetWidth;\n  const scrollLeft = carouselRef.value.scrollLeft;\n  activeIndex.value = Math.round(scrollLeft / width);\n}\n\n// Mouse dragging logic for PC\nfunction onMouseDown(e: MouseEvent) {\n  if (!carouselRef.value) return;\n  isDragging.value = true;\n  startX.value = e.pageX - carouselRef.value.offsetLeft;\n  scrollLeftStart.value = carouselRef.value.scrollLeft;\n  carouselRef.value.style.cursor = \'grabbing\';\n  carouselRef.value.style.scrollSnapType = \'none\'; // Disable snap while dragging\n}\n\nfunction onMouseMove(e: MouseEvent) {\n  if (!isDragging.value || !carouselRef.value) return;\n  e.preventDefault();\n  const x = e.pageX - carouselRef.value.offsetLeft;\n  const walk = (x - startX.value) * 1.5; // Scroll-fast multiplier\n  carouselRef.value.scrollLeft = scrollLeftStart.value - walk;\n}\n\nfunction onMouseUp() {\n  if (!isDragging.value || !carouselRef.value) return;\n  isDragging.value = false;\n  carouselRef.value.style.cursor = \'grab\';\n  carouselRef.value.style.scrollSnapType = \'x mandatory\'; // Re-enable snap\n\n  // Snap to nearest slide manually on mouse up\n  const width = carouselRef.value.offsetWidth;\n  const scrollLeft = carouselRef.value.scrollLeft;\n  const newIndex = Math.round(scrollLeft / width);\n  carouselRef.value.scrollTo({\n    left: newIndex * width,\n    behavior: \'smooth\'\n  });\n}\n\nfunction onMouseLeave() {\n  if (isDragging.value) {\n    onMouseUp();\n  }\n}\n\nfunction getAvatar() {\n  if (props.postContent.head) return props.postContent.head;\n  const info = getPlatformInfo(props.postContent.sender, \'Instagram\');\n  return info.head;\n}\n\nfunction getCommentUser(sender: string) {\n  return getPlatformInfo(sender, \'Instagram\');\n}\n\nfunction extractImage(content: string) {\n  const imgTagMatch = content.match(/\\[img-(.+?)\\]/);\n  if (imgTagMatch) return imgTagMatch[1];\n  // 在两个 / 前面都加上反斜杠 \\\nconst urlRegex = /^https?:\\/\\/.+\\.(jpg|jpeg|png|gif|webp)$/i;\n  if (content.match(urlRegex)) {\n      return content;\n  }\n  return null;\n}\n\nfunction getCaption(content: string) {\n    return content.replace(/\\[img-(.+?)\\]/g, \'\').trim();\n}\n\nfunction toggleLike() {\n  /* eslint-disable vue/no-mutating-props */\n  if (!props.postContent.liked) {\n    props.postContent.liked = true;\n    props.postContent.likes = (parseInt(props.postContent.likes || 0) + 1).toString();\n  } else {\n    props.postContent.liked = false;\n    props.postContent.likes = (parseInt(props.postContent.likes || 0) - 1).toString();\n  }\n}\n\nfunction toggleSave() {\n  props.postContent.saved = !props.postContent.saved;\n  /* eslint-enable vue/no-mutating-props */\n}\n<\/script>\n\n<style scoped>\n/* Carousel Styles */\n.ig-carousel-container {\n  position: relative;\n  width: 100%;\n}\n\n.ig-carousel-container.with-dots {\n  padding-bottom: 24px;\n}\n\n.ig-carousel {\n  display: flex;\n  overflow-x: auto;\n  scroll-snap-type: x mandatory;\n  scroll-behavior: smooth;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none; /* Firefox */\n  cursor: grab; /* PC pointer */\n}\n.ig-carousel:active {\n  cursor: grabbing;\n}\n\n.ig-carousel::-webkit-scrollbar {\n  display: none; /* Chrome/Safari */\n}\n\n.ig-slide {\n  min-width: 100%;\n  scroll-snap-align: start;\n  position: relative;\n}\n\n.ig-image-counter {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  background-color: rgba(38, 38, 38, 0.8);\n  color: #f5f5f5;\n  padding: 6px 10px;\n  border-radius: 14px;\n  font-size: 12px;\n  font-weight: 400;\n  pointer-events: none;\n  z-index: 10;\n}\n\n.ig-slide-dots {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 4px;\n}\n\n.ig-dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background-color: #dbdbdb;\n  transition: background-color 0.2s;\n}\n\n.ig-dot.active {\n  background-color: #0095f6;\n}\n\n.ig-slide-description-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n  color: white;\n  padding: 12px;\n  font-size: 14px;\n  text-align: center;\n  line-height: 1.4;\n  max-height: 40%;\n  overflow-y: auto;\n  backdrop-filter: blur(2px);\n}\n\n.ig-post {\n  padding-bottom: 24px; /* Added space for dots */\n  border-bottom: 1px solid #efefef;\n}\n\n.ig-post.inside {\n  border: 1px solid #efefef;\n  border-radius: 8px;\n  background-color: #fff;\n  margin: 8px 0;\n  width: 320px; /* Constrain width for inside posts */\n  max-width: 100%;\n  overflow: hidden;\n}\n\n.ig-post-header {\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 12px;\n}\n\n.ig-post-header-left {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.ig-post-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid #efefef;\n}\n\n.ig-post-user-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.ig-post-username {\n  font-weight: 600;\n  font-size: 14px;\n  color: #262626;\n  line-height: 1.2;\n}\n\n.ig-post-meta {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  line-height: 1.2;\n}\n\n.ig-post-location {\n  font-size: 11px;\n  color: #262626;\n}\n\n.ig-post-music {\n  font-size: 11px;\n  color: #262626;\n  display: flex;\n  align-items: center;\n}\n\n.ig-post-more {\n  cursor: pointer;\n}\n\n.ig-post-image {\n  width: 100%;\n}\n\n.ig-image-container {\n  width: 100%;\n  padding-bottom: 100%; /* 1:1 Aspect Ratio */\n  background-size: cover;\n  background-position: center;\n  background-color: #efefef;\n  position: relative;\n}\n\n.ig-tagged-indicator {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n  background-color: rgba(0, 0, 0, 0.6);\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.ig-text-post-bg {\n  width: 100%;\n  min-height: 300px;\n  background: linear-gradient(135deg, #833ab4, #fd1d1d, #fcb045);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  box-sizing: border-box;\n}\n\n.ig-text-post-bg p {\n  color: white;\n  font-size: 24px;\n  font-weight: 600;\n  text-align: center;\n  margin: 0;\n  line-height: 1.4;\n}\n\n.ig-post-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 12px 0 12px;\n}\n\n.ig-post-actions-left {\n  display: flex;\n  gap: 16px;\n}\n\n.ig-action-btn {\n  cursor: pointer;\n  transition: transform 0.1s;\n}\n.ig-action-btn:active {\n  transform: scale(0.9);\n}\n\n.ig-post-likes {\n  padding: 8px 12px;\n  font-weight: 600;\n  font-size: 14px;\n  color: #262626;\n}\n\n.ig-post-caption {\n  padding: 0 12px;\n  font-size: 14px;\n  line-height: 1.4;\n  margin-bottom: 6px;\n}\n\n.ig-post-username-caption {\n  font-weight: 600;\n  margin-right: 6px;\n  color: #262626;\n}\n\n.ig-post-comments {\n  padding: 0 12px;\n}\n\n.ig-view-comments {\n  color: #8e8e8e;\n  font-size: 14px;\n  margin-bottom: 6px;\n  cursor: pointer;\n}\n\n.ig-comment-row {\n  font-size: 14px;\n  margin-bottom: 4px;\n}\n\n.ig-comment-user {\n  font-weight: 600;\n  margin-right: 6px;\n}\n\n.ig-post-time {\n  padding: 4px 12px;\n  font-size: 10px;\n  color: #8e8e8e;\n  text-transform: uppercase;\n  margin-bottom: 8px;\n}\n</style>\n'],sourceRoot:''}]);const s=r},6106:e=>{e.exports=function(e){var n=document.createElement('style');return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},6270:e=>{var n=[];function t(e){for(var t=-1,a=0;a<n.length;a++)if(n[a].identifier===e){t=a;break}return t}function a(e,a){for(var o={},r=[],s=0;s<e.length;s++){var l=e[s],c=a.base?l[0]+a.base:l[0],d=o[c]||0,p=''.concat(c,' ').concat(d);o[c]=d+1;var m=t(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)n[m].references++,n[m].updater(u);else{var A=i(u,a);a.byIndex=s,n.splice(s,0,{identifier:p,updater:A,references:1})}r.push(p)}return r}function i(e,n){var t=n.domAPI(n);t.update(e);return function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var o=a(e=e||[],i=i||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var s=t(o[r]);n[s].references--}for(var l=a(e,i),c=0;c<o.length;c++){var d=t(o[c]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}o=l}}},6424:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.ig-chat-detail[data-v-7eef9c62]{width:100%;height:100%;background-color:#ffffff;display:flex;flex-direction:column;color:#262626;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif}.ig-header[data-v-7eef9c62]{height:44px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;border-bottom:1px solid #dbdbdb;background-color:#fff;z-index:10}.ig-header-left[data-v-7eef9c62],.ig-header-right[data-v-7eef9c62]{cursor:pointer;min-width:32px;display:flex;align-items:center}.ig-header-center-chat[data-v-7eef9c62]{display:flex;align-items:center;gap:12px;cursor:pointer}.ig-chat-avatar-header[data-v-7eef9c62]{width:24px;height:24px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #efefef}.ig-chat-name-header[data-v-7eef9c62]{display:flex;flex-direction:column}.ig-username-header[data-v-7eef9c62]{font-weight:600;font-size:16px;color:#262626}.ig-status-header[data-v-7eef9c62]{font-size:12px;color:#8e8e8e}.ig-chat-messages[data-v-7eef9c62]{flex:1;overflow-y:auto;padding:20px 16px;display:flex;flex-direction:column;gap:8px}.ig-message-row[data-v-7eef9c62]{display:flex;align-items:flex-end;gap:8px;max-width:70%}.ig-message-row.mine[data-v-7eef9c62]{align-self:flex-end;flex-direction:row-reverse}.ig-message-avatar[data-v-7eef9c62]{width:28px;height:28px;border-radius:50%;background-size:cover;background-position:center;border:1px solid #efefef;flex-shrink:0;margin-bottom:2px}.ig-message-bubble[data-v-7eef9c62]{padding:12px 16px;border-radius:22px;background-color:#efefef;color:#262626;font-size:15px;line-height:1.4;word-wrap:break-word}.ig-message-bubble.mine[data-v-7eef9c62]{background-color:#3797f0;color:#ffffff}.ig-message-img img[data-v-7eef9c62]{max-width:200px;border-radius:12px}.ig-emoji-large[data-v-7eef9c62]{width:120px;height:120px;object-fit:contain}.ig-chat-input-area[data-v-7eef9c62]{padding:12px 16px;background-color:#fff;border-top:1px solid #dbdbdb}.ig-input-bar[data-v-7eef9c62]{display:flex;align-items:center;background-color:#efefef;border-radius:22px;min-height:44px;padding:0 4px 0 12px}.ig-input-wrapper[data-v-7eef9c62]{display:contents}.ig-chat-input[data-v-7eef9c62]{flex:1;background:none;border:none;outline:none;font-size:15px;padding:0 8px}.ig-actions[data-v-7eef9c62]{display:flex;gap:8px;padding-right:8px;color:#262626}.ig-action-btn[data-v-7eef9c62]{cursor:pointer;color:#262626;display:flex;align-items:center;padding:4px}.ig-send-btn[data-v-7eef9c62]{background:none;border:none;color:#0095f6;font-weight:600;font-size:15px;cursor:pointer;padding:0 12px}.ig-fake-img[data-v-7eef9c62]{display:flex;flex-direction:column;align-items:center;gap:5px;padding:10px;background:#f0f0f0;border-radius:12px;min-width:100px}.ig-fake-icon[data-v-7eef9c62]{color:#8e8e8e}.ig-message-voice[data-v-7eef9c62]{cursor:pointer;min-width:80px}.ig-voice-content[data-v-7eef9c62]{display:flex;align-items:center;gap:8px}.ig-voice-text-display[data-v-7eef9c62]{font-size:14px;color:inherit;opacity:0.9}.ig-voice-control[data-v-7eef9c62]{display:flex;align-items:center}.ig-voice-wave[data-v-7eef9c62]{display:flex;gap:2px;align-items:center;height:16px}.bar[data-v-7eef9c62]{width:2px;background-color:currentColor;height:100%;animation:wave-7eef9c62 1s infinite}.bar[data-v-7eef9c62]:nth-child(2){height:60%;animation-delay:0.1s}.bar[data-v-7eef9c62]:nth-child(3){height:80%;animation-delay:0.2s}.bar[data-v-7eef9c62]:nth-child(4){height:50%;animation-delay:0.3s}@keyframes wave-7eef9c62{0%,100%{transform:scaleY(1)}50%{transform:scaleY(0.6)}}.ig-voice-time[data-v-7eef9c62]{font-size:12px;margin-left:4px}.img-bubble[data-v-7eef9c62],.voice-bubble[data-v-7eef9c62]{padding:8px 12px}.ig-drawer[data-v-7eef9c62]{overflow:hidden;max-height:0;transition:max-height 0.3s ease;background-color:#fff}.ig-drawer.open[data-v-7eef9c62]{max-height:250px;margin-top:12px;border-top:1px solid #efefef}.ig-emoji-panel[data-v-7eef9c62]{height:240px;overflow-y:auto;padding:10px;display:grid;grid-template-columns:repeat(8,1fr);gap:8px}.ig-emoji-item[data-v-7eef9c62]{width:100%;height:auto;cursor:pointer}.ig-plus-panel[data-v-7eef9c62]{height:240px;padding:20px;display:flex;gap:24px}.ig-plus-item[data-v-7eef9c62]{display:flex;flex-direction:column;align-items:center;gap:8px;cursor:pointer}.ig-plus-icon[data-v-7eef9c62]{width:60px;height:60px;border-radius:12px;background-color:#f7f7f7;display:flex;align-items:center;justify-content:center;color:#262626}.ig-special-input-panel[data-v-7eef9c62]{height:240px;padding:16px;display:flex;flex-direction:column;gap:12px}.ig-special-header[data-v-7eef9c62]{display:flex;justify-content:space-between;font-weight:600;margin-bottom:8px}.ig-back-btn[data-v-7eef9c62]{color:#0095f6;cursor:pointer;font-weight:normal}.ig-special-input[data-v-7eef9c62]{width:100%;padding:12px;border:1px solid #dbdbdb;border-radius:8px;outline:none;font-size:14px}.ig-special-confirm[data-v-7eef9c62]{background-color:#0095f6;color:white;border:none;border-radius:8px;padding:10px;font-weight:600;cursor:pointer;margin-top:auto}\n','',{version:3,sources:['webpack://./src/柏柏同层/Instagram/ChatDetail.vue'],names:[],mappings:'AAkhBA,iCACE,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,YAAa,CACb,qBAAsB,CACtB,aAAc,CACd,yFACF,CAEA,4BACE,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,cAAe,CACf,+BAAgC,CAChC,qBAAsB,CACtB,UACF,CAEA,mEAEE,cAAe,CACf,cAAe,CACf,YAAa,CACb,kBACF,CAEA,wCACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,cACF,CAEA,wCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBACF,CAEA,sCACE,YAAa,CACb,qBACF,CAEA,qCACE,eAAgB,CAChB,cAAe,CACf,aACF,CAEA,mCACE,cAAe,CACf,aACF,CAEA,mCACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,iCACE,YAAa,CACb,oBAAqB,CACrB,OAAQ,CACR,aACF,CAEA,sCACE,mBAAoB,CACpB,0BACF,CAEA,oCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,wBAAyB,CACzB,aAAc,CACd,iBACF,CAEA,oCACE,iBAAkB,CAClB,kBAAmB,CACnB,wBAAyB,CACzB,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,oBACF,CAEA,yCACE,wBAAyB,CACzB,aACF,CAEA,qCACE,eAAgB,CAChB,kBACF,CACA,iCACE,WAAY,CACZ,YAAa,CACb,kBACF,CAEA,qCACE,iBAAkB,CAClB,qBAAsB,CACtB,4BACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,wBAAyB,CACzB,kBAAmB,CACnB,eAAgB,CAChB,oBACF,CAEA,mCACE,gBACF,CAEA,gCACE,MAAO,CACP,eAAgB,CAChB,WAAY,CACZ,YAAa,CACb,cAAe,CACf,aACF,CAEA,6BACE,YAAa,CACb,OAAQ,CACR,iBAAkB,CAClB,aACF,CAEA,gCACE,cAAe,CACf,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,WACF,CAEA,8BACE,eAAgB,CAChB,WAAY,CACZ,aAAc,CACd,eAAgB,CAChB,cAAe,CACf,cAAe,CACf,cACF,CAGA,8BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,OAAQ,CACR,YAAa,CACb,kBAAmB,CACnB,kBAAmB,CACnB,eACF,CAEA,+BACE,aACF,CAEA,mCACE,cAAe,CACf,cACF,CAEA,mCACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,wCACE,cAAe,CACf,aAAc,CACd,WACF,CAEA,mCACE,YAAa,CACb,kBACF,CAEA,gCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,WACF,CAEA,sBACE,SAAU,CACV,6BAA8B,CAC9B,WAAY,CACZ,mCACF,CAEA,mCACE,UAAW,CACX,oBACF,CACA,mCACE,UAAW,CACX,oBACF,CACA,mCACE,UAAW,CACX,oBACF,CAEA,yBACE,QAEE,mBACF,CACA,IACE,qBACF,CACF,CAEA,gCACE,cAAe,CACf,eACF,CAEA,4DAEE,gBACF,CAGA,4BACE,eAAgB,CAChB,YAAa,CACb,+BAAgC,CAChC,qBACF,CAEA,iCACE,gBAAiB,CACjB,eAAgB,CAChB,4BACF,CAEA,iCACE,YAAa,CACb,eAAgB,CAChB,YAAa,CACb,YAAa,CACb,mCAAqC,CACrC,OACF,CAEA,gCACE,UAAW,CACX,WAAY,CACZ,cACF,CAEA,gCACE,YAAa,CACb,YAAa,CACb,YAAa,CACb,QACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,OAAQ,CACR,cACF,CAEA,+BACE,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,wBAAyB,CACzB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,aACF,CAEA,yCACE,YAAa,CACb,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,oCACE,YAAa,CACb,6BAA8B,CAC9B,eAAgB,CAChB,iBACF,CAEA,8BACE,aAAc,CACd,cAAe,CACf,kBACF,CAEA,mCACE,UAAW,CACX,YAAa,CACb,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,cACF,CAEA,qCACE,wBAAyB,CACzB,WAAY,CACZ,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,eAAgB,CAChB,cAAe,CACf,eACF',sourcesContent:['<template>\n  <div class="ig-chat-detail">\n    \x3c!-- Header --\x3e\n    <header class="ig-header">\n      <div class="ig-header-left" @click="$emit(\'back\')">\n        <svg\n          aria-label="Back"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n        >\n          <line\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n            x1="21"\n            x2="3"\n            y1="12"\n            y2="12"\n          ></line>\n          <polyline\n            fill="none"\n            points="9 6 3 12 9 18"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n          ></polyline>\n        </svg>\n      </div>\n      <div class="ig-header-center-chat">\n        <div class="ig-chat-avatar-header" :style="{ backgroundImage: `url(${getAvatar(chatId)})` }"></div>\n        <div class="ig-chat-name-header">\n          <span class="ig-username-header">{{ getName(chatId) }}</span>\n          <span class="ig-status-header">Active now</span>\n        </div>\n      </div>\n      <div class="ig-header-right">\n        <svg\n          aria-label="Audio Call"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n        >\n          <path\n            d="M18.237 18.283a5.5 5.5 0 0 1-5.546.223 17.587 17.587 0 0 1-6.75-6.75 5.5 5.5 0 0 1 .222-5.546l1.222-1.921a2.227 2.227 0 0 1 3.51-.302l1.328 1.328a2.227 2.227 0 0 1 .15 2.858l-.66 1.049a.667.667 0 0 0 .193.855l3.203 2.136a.668.668 0 0 0 .855-.192l1.049-.66a2.228 2.228 0 0 1 2.859.15l1.327 1.327a2.227 2.227 0 0 1-.3 3.51l-1.923 1.222Z"\n            fill="none"\n            stroke="currentColor"\n            stroke-linejoin="round"\n            stroke-width="2"\n          ></path>\n        </svg>\n        <svg\n          aria-label="Video Call"\n          class="x1lliihq x1n2onr6 x5n08af"\n          fill="currentColor"\n          height="24"\n          role="img"\n          viewBox="0 0 24 24"\n          width="24"\n          style="margin-left: 20px"\n        >\n          <path\n            d="M23 7.828a.999.999 0 0 0-1.161-.908l-3.385.677A2.997 2.997 0 0 0 16 5H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h11a3 3 0 0 0 2.454-2.597l3.385.677A.999.999 0 0 0 23 16.172V7.828Z"\n            fill="none"\n            stroke="currentColor"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n          ></path>\n        </svg>\n      </div>\n    </header>\n\n    <div ref="messagesContainer" class="ig-chat-messages">\n      <div\n        v-for="(msg, index) in messages"\n        :key="index"\n        class="ig-message-row"\n        :class="{ mine: msg.sender === \'user\' }"\n      >\n        <div\n          v-if="msg.sender !== \'user\'"\n          class="ig-message-avatar"\n          :style="{ backgroundImage: `url(${getAvatar(chatId)})` }"\n        ></div>\n        <div\n          v-if="msg.sender === \'user\'"\n          class="ig-message-avatar"\n          :style="{ backgroundImage: `url(${getAvatar(\'user\')})` }"\n        ></div>\n\n        \x3c!-- Emoji Message (No Bubble) --\x3e\n        <div v-if="msg.msgtype === \'emoji\'" class="ig-message-emoji-container" :class="{ mine: msg.sender === \'user\' }">\n          <img :src="msg.emoji" class="ig-emoji-large" />\n        </div>\n\n        \x3c!-- Normal Message Bubble --\x3e\n        <div\n          v-else\n          class="ig-message-bubble"\n          :class="{\n            mine: msg.sender === \'user\',\n            \'img-bubble\': msg.msgtype === \'img\',\n            \'voice-bubble\': msg.msgtype === \'voice\',\n          }"\n        >\n          <div v-if="msg.msgtype === \'img\'" class="ig-message-img">\n            <img v-if="isUrl(msg.content)" :src="msg.content" @error="handleImgError" />\n            <div v-else class="ig-fake-img">\n              <div class="ig-fake-icon">\n                <svg aria-label="Image" fill="currentColor" height="24" role="img" viewBox="0 0 24 24" width="24">\n                  <rect\n                    fill="none"\n                    height="18"\n                    rx="3"\n                    ry="3"\n                    stroke="currentColor"\n                    stroke-linecap="round"\n                    stroke-linejoin="round"\n                    stroke-width="2"\n                    width="18"\n                    x="3"\n                    y="3"\n                  ></rect>\n                  <path\n                    d="m8.5 14.5 2.5 2.5 5-5 4.5 4.5"\n                    fill="none"\n                    stroke="currentColor"\n                    stroke-linecap="round"\n                    stroke-linejoin="round"\n                    stroke-width="2"\n                  ></path>\n                  <path d="M8.5 10a1.5 1.5 0 1 1-1.5-1.5 1.5 1.5 0 0 1 1.5 1.5Z" fill="currentColor"></path>\n                </svg>\n              </div>\n              <span>{{ msg.content }}</span>\n            </div>\n          </div>\n\n          <div v-else-if="msg.msgtype === \'voice\'" class="ig-message-voice" @click="toggleVoiceText(msg)">\n            <div v-if="!msg.showText" class="ig-voice-content">\n              <div class="ig-voice-control">\n                <svg fill="currentColor" height="20" role="img" viewBox="0 0 24 24" width="20">\n                  <path d="M8 5v14l11-7z" />\n                </svg>\n              </div>\n              <div class="ig-voice-wave">\n                <div class="bar"></div>\n                <div class="bar"></div>\n                <div class="bar"></div>\n                <div class="bar"></div>\n              </div>\n              <span class="ig-voice-time">{{ msg.voicetime || \'2"\' }}</span>\n            </div>\n            <div v-else class="ig-voice-text-display">\n              <span>[语音] {{ msg.content }}</span>\n            </div>\n          </div>\n\n          <div v-else class="ig-message-text">{{ msg.content }}</div>\n        </div>\n      </div>\n    </div>\n\n    <div class="ig-chat-input-area">\n      <div class="ig-input-bar">\n        <div class="ig-cam-btn">\n          <svg\n            aria-label="Camera"\n            class="x1lliihq x1n2onr6 x5n08af"\n            fill="currentColor"\n            height="24"\n            role="img"\n            viewBox="0 0 24 24"\n            width="24"\n          >\n            <path\n              d="M12 10.751a3.25 3.25 0 1 0 3.25 3.25A3.254 3.254 0 0 0 12 10.751Zm0 8.5a5.25 5.25 0 1 1 5.25-5.25A5.256 5.256 0 0 1 12 19.251Zm8.385-11.236h-2.128a1.57 1.57 0 0 1-1.396-.867L16.2 5.867a3.57 3.57 0 0 0-3.17-1.866h-2.06a3.57 3.57 0 0 0-3.17 1.866l-.66 1.282a1.57 1.57 0 0 1-1.396.867H3.615A2.618 2.618 0 0 0 1 10.634v8.733A2.618 2.618 0 0 0 3.615 22h16.77A2.618 2.618 0 0 0 23 19.367v-8.733a2.618 2.618 0 0 0-2.615-2.617Z"\n              fill="currentColor"\n            ></path>\n          </svg>\n        </div>\n        <input v-model="inputContent" class="ig-chat-input" placeholder="发消息..." @keyup.enter="sendMessage" />\n        <button v-if="inputContent.trim()" class="ig-send-btn" @click="sendMessage">发送</button>\n        <div v-else class="ig-actions">\n          <div class="ig-action-btn" @click="toggleFunction(\'voice\')">\n            <svg\n              aria-label="Voice Clip"\n              class="x1lliihq x1n2onr6 x5n08af"\n              fill="currentColor"\n              height="24"\n              role="img"\n              viewBox="0 0 24 24"\n              width="24"\n            >\n              <path\n                d="M19.5 10.5a7.5 7.5 0 0 1-15 0v-5a7.5 7.5 0 0 1 15 0v5Z"\n                fill="none"\n                stroke="currentColor"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                stroke-width="2"\n              ></path>\n              <line\n                fill="none"\n                stroke="currentColor"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                stroke-width="2"\n                x1="12"\n                x2="12"\n                y1="19"\n                y2="22"\n              ></line>\n              <line\n                fill="none"\n                stroke="currentColor"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                stroke-width="2"\n                x1="8.7"\n                x2="15.3"\n                y1="22"\n                y2="22"\n              ></line>\n            </svg>\n          </div>\n          <div class="ig-action-btn" @click="toggleFunction(\'image\')">\n            <svg\n              aria-label="Image"\n              class="x1lliihq x1n2onr6 x5n08af"\n              fill="currentColor"\n              height="24"\n              role="img"\n              viewBox="0 0 24 24"\n              width="24"\n            >\n              <rect\n                fill="none"\n                height="18"\n                rx="3"\n                ry="3"\n                stroke="currentColor"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                stroke-width="2"\n                width="18"\n                x="3"\n                y="3"\n              ></rect>\n              <path\n                d="m8.5 14.5 2.5 2.5 5-5 4.5 4.5"\n                fill="none"\n                stroke="currentColor"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                stroke-width="2"\n              ></path>\n              <path d="M8.5 10a1.5 1.5 0 1 1-1.5-1.5 1.5 1.5 0 0 1 1.5 1.5Z" fill="currentColor"></path>\n            </svg>\n          </div>\n          <div class="ig-action-btn" @click="toggleFunction(\'emoji\')">\n            <svg\n              aria-label="Sticker"\n              class="x1lliihq x1n2onr6 x5n08af"\n              fill="currentColor"\n              height="24"\n              role="img"\n              viewBox="0 0 24 24"\n              width="24"\n            >\n              <path\n                d="M21.5 12a9.5 9.5 0 1 1-9.5-9.5 9.51 9.51 0 0 1 9.5 9.5Z"\n                fill="none"\n                stroke="currentColor"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                stroke-width="2"\n              ></path>\n              <path\n                d="M15.518 7.027a1.455 1.455 0 1 0 0 2.91 1.455 1.455 0 0 0 0-2.91Zm-7.036 0a1.455 1.455 0 1 0 0 2.91 1.455 1.455 0 0 0 0-2.91Zm-1.896 9.53a5.504 5.504 0 0 0 10.828 0"\n                fill="none"\n                stroke="currentColor"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n                stroke-width="2"\n              ></path>\n            </svg>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Drawer --\x3e\n      <div class="ig-drawer" :class="{ open: containerShow.show }">\n        \x3c!-- Emoji Panel --\x3e\n        <div v-if="containerShow.type === \'emoji\'" class="ig-emoji-panel">\n          <img\n            v-for="(value, key) in sharedState.emoji"\n            :key="key"\n            :src="value"\n            class="ig-emoji-item"\n            @click="sendEmoji(value, key)"\n          />\n        </div>\n        \x3c!-- Input for Special (Voice/Image description) --\x3e\n        <div v-if="[\'image\', \'voice\'].includes(containerShow.type)" class="ig-special-input-panel">\n          <div class="ig-special-header">\n            <span v-if="containerShow.type === \'image\'">图片描述</span>\n            <span v-else>语音内容</span>\n            <span class="ig-back-btn" @click="containerShow.show = false">收起</span>\n          </div>\n          <input\n            v-model="specialText"\n            class="ig-special-input"\n            :placeholder="containerShow.type === \'image\' ? \'描述图片内容...\' : \'输入语音内容...\'"\n          />\n          <button class="ig-special-confirm" @click="sendSpecial">发送</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { computed, nextTick, onMounted, ref, watch } from \'vue\';\nimport { getPlatformInfo, sharedState } from \'../shared-state\';\n\nconst props = defineProps({\n  chatId: {\n    type: String,\n    required: true,\n  },\n});\n\nconst emit = defineEmits([\'back\']);\nconst inputContent = ref(\'\');\nconst messagesContainer = ref<HTMLElement | null>(null);\nconst containerShow = ref({ show: false, type: \'\' });\nconst specialText = ref(\'\');\n\nconst messages = computed(() => {\n  return sharedState.Instagram.chathistory[props.chatId]?.msgs || [];\n});\n\nfunction getAvatar(id: string) {\n  if (id === \'user\') {\n    return sharedState.Instagram.userHead || sharedState.ST.userHead;\n  }\n  const info = getPlatformInfo(id, \'Instagram\');\n  return info.head || \'https://via.placeholder.com/56\';\n}\n\nfunction getName(id: string) {\n  if (id === \'user\') {\n    return sharedState.Instagram.userName || sharedState.ST.userName;\n  }\n  const info = getPlatformInfo(id, \'Instagram\');\n  return info.name || id;\n}\n\nfunction handleImgError(e: Event) {\n  // If it fails to load, we might want to show text, but for now just hide\n  // (e.target as HTMLImageElement).style.display = \'none\';\n  // Better: replace with placeholder or hide\n  const target = e.target as HTMLImageElement;\n  target.style.display = \'none\';\n  // Optional: show a text fallback if needed\n}\n\nfunction isUrl(str: string) {\n  return str && (str.startsWith(\'http\') || str.startsWith(\'data:\'));\n}\n\nfunction scrollToBottom() {\n  nextTick(() => {\n    if (messagesContainer.value) {\n      messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight;\n    }\n  });\n}\n\nfunction toggleVoiceText(msg: any) {\n  // Toggle a local property to show/hide text\n  // Vue 3 reactivity might require using a reactive map or ensuring the property exists\n  // Since \'msg\' is from sharedState which is reactive, we can try modifying it directly if allowed\n  // or use a local map. Let\'s try direct modification for simplicity in this context.\n  if (msg.showText === undefined) {\n    msg.showText = true;\n  } else {\n    msg.showText = !msg.showText;\n  }\n}\n\n// Auto scroll on new messages\nwatch(() => messages.value.length, scrollToBottom);\nonMounted(scrollToBottom);\n\nfunction toggleFunction(type: string) {\n  if (containerShow.value.show && containerShow.value.type === type) {\n    containerShow.value.show = false;\n    containerShow.value.type = \'\';\n  } else {\n    containerShow.value.show = true;\n    containerShow.value.type = type;\n    specialText.value = \'\';\n  }\n  // Scroll to bottom when drawer opens/closes\n  setTimeout(scrollToBottom, 300);\n}\n\nfunction sendSpecial() {\n  if (!specialText.value.trim()) return;\n\n  const content = specialText.value.trim();\n  const type = containerShow.value.type; // \'image\' or \'voice\'\n  const now = new Date();\n  const timeStr = now.toLocaleTimeString([], { hour: \'2-digit\', minute: \'2-digit\', hour12: false });\n\n  const msgContent = content;\n  // For local display simulation\n  let msgType = type === \'image\' ? \'img\' : \'voice\';\n  if (type === \'image\') msgType = \'img\'; // Assuming sharedState handles \'img\'\n\n  const msgObj: any = {\n    sender: \'user\',\n    msgtype: msgType,\n    content: content,\n    time: timeStr,\n  };\n  if (msgType === \'voice\') {\n    msgObj.voicetime = Math.floor(Math.random() * 10) + 2 + \'"\';\n  }\n\n  sharedState.Instagram.addMsg(props.chatId, msgObj);\n\n  // Tavern message construction\n  // For special types, we wrap them in []\n  const displayContent = `[${type === \'voice\' ? \'yy\' : \'img\'}-${content}]`;\n  const receiverId = props.chatId;\n  const senderId = \'user\';\n\n  const msgTag = `\n<instagram_msg>${senderId}|${receiverId}|${displayContent}|${timeStr}</instagram_msg>`;\n  const message = `\n{{user}}发送了Instagram私信给${getName(props.chatId)}：${displayContent}${msgTag}`;\n\n  insertToTavern(message);\n\n  containerShow.value.show = false;\n  specialText.value = \'\';\n}\n\nfunction sendEmoji(url: string, name: string) {\n  const now = new Date();\n  const timeStr = now.toLocaleTimeString([], { hour: \'2-digit\', minute: \'2-digit\', hour12: false });\n\n  sharedState.Instagram.addMsg(props.chatId, {\n    sender: \'user\',\n    msgtype: \'emoji\',\n    emoji: url,\n    content: name,\n    time: timeStr,\n  });\n\n  const displayContent = `[bqb-${name}]`;\n  const receiverId = props.chatId;\n  const senderId = \'user\';\n\n  const msgTag = `\n<instagram_msg>${senderId}|${receiverId}|${displayContent}|${timeStr}</instagram_msg>`;\n  const message = `\n{{user}}发送了Instagram私信给${getName(props.chatId)}：${displayContent}${msgTag}`;\n\n  insertToTavern(message);\n  containerShow.value.show = false;\n}\n\nfunction sendMessage() {\n  if (!inputContent.value.trim()) return;\n\n  const content = inputContent.value.trim();\n  const now = new Date();\n  const timeStr = now.toLocaleTimeString([], { hour: \'2-digit\', minute: \'2-digit\', hour12: false });\n\n  // Optimistic update\n  sharedState.Instagram.addMsg(props.chatId, {\n    sender: \'user\',\n    msgtype: \'text\',\n    content: content,\n    time: timeStr,\n  });\n\n  // Construct message for Tavern\n  // 格式: <instagram_msg>发送者ID|接收者ID|内容|时间</instagram_msg>\n  const receiverId = props.chatId;\n  const senderId = \'user\'; // Or actual user ID\n\n  const msgTag = `\n<instagram_msg>${senderId}|${receiverId}|${content}|${timeStr}</instagram_msg>`;\n  const message = `\n{{user}}发送了Instagram私信给${getName(props.chatId)}：${content}${msgTag}`;\n\n  insertToTavern(message);\n  inputContent.value = \'\';\n}\n\nfunction insertToTavern(message: string) {\n  // Insert into Tavern input box\n  const val = $(\'#send_textarea\').val();\n  const old_content = (typeof val === \'string\' ? val : \'\').trim();\n  const new_content = old_content + message;\n\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  toastr.success(\'已生成私信指令，请点击发送\');\n}\n<\/script>\n\n<style scoped>\n.ig-chat-detail {\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  color: #262626;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n}\n\n.ig-header {\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  border-bottom: 1px solid #dbdbdb;\n  background-color: #fff;\n  z-index: 10;\n}\n\n.ig-header-left,\n.ig-header-right {\n  cursor: pointer;\n  min-width: 32px;\n  display: flex;\n  align-items: center;\n}\n\n.ig-header-center-chat {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  cursor: pointer;\n}\n\n.ig-chat-avatar-header {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid #efefef;\n}\n\n.ig-chat-name-header {\n  display: flex;\n  flex-direction: column;\n}\n\n.ig-username-header {\n  font-weight: 600;\n  font-size: 16px;\n  color: #262626;\n}\n\n.ig-status-header {\n  font-size: 12px;\n  color: #8e8e8e;\n}\n\n.ig-chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.ig-message-row {\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n  max-width: 70%;\n}\n\n.ig-message-row.mine {\n  align-self: flex-end;\n  flex-direction: row-reverse;\n}\n\n.ig-message-avatar {\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid #efefef;\n  flex-shrink: 0;\n  margin-bottom: 2px;\n}\n\n.ig-message-bubble {\n  padding: 12px 16px;\n  border-radius: 22px;\n  background-color: #efefef;\n  color: #262626;\n  font-size: 15px;\n  line-height: 1.4;\n  word-wrap: break-word;\n}\n\n.ig-message-bubble.mine {\n  background-color: #3797f0;\n  color: #ffffff;\n}\n\n.ig-message-img img {\n  max-width: 200px;\n  border-radius: 12px;\n}\n.ig-emoji-large {\n  width: 120px;\n  height: 120px;\n  object-fit: contain;\n}\n\n.ig-chat-input-area {\n  padding: 12px 16px;\n  background-color: #fff;\n  border-top: 1px solid #dbdbdb;\n}\n\n.ig-input-bar {\n  display: flex;\n  align-items: center;\n  background-color: #efefef;\n  border-radius: 22px;\n  min-height: 44px;\n  padding: 0 4px 0 12px;\n}\n\n.ig-input-wrapper {\n  display: contents; /* Remove wrapper visual, use parent flex */\n}\n\n.ig-chat-input {\n  flex: 1;\n  background: none;\n  border: none;\n  outline: none;\n  font-size: 15px;\n  padding: 0 8px;\n}\n\n.ig-actions {\n  display: flex;\n  gap: 8px; /* Tighter spacing */\n  padding-right: 8px;\n  color: #262626;\n}\n\n.ig-action-btn {\n  cursor: pointer;\n  color: #262626;\n  display: flex;\n  align-items: center;\n  padding: 4px;\n}\n\n.ig-send-btn {\n  background: none;\n  border: none;\n  color: #0095f6;\n  font-weight: 600;\n  font-size: 15px;\n  cursor: pointer;\n  padding: 0 12px;\n}\n\n/* Voice & Fake Image Styles */\n.ig-fake-img {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 5px;\n  padding: 10px;\n  background: #f0f0f0;\n  border-radius: 12px;\n  min-width: 100px;\n}\n\n.ig-fake-icon {\n  color: #8e8e8e;\n}\n\n.ig-message-voice {\n  cursor: pointer;\n  min-width: 80px;\n}\n\n.ig-voice-content {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.ig-voice-text-display {\n  font-size: 14px;\n  color: inherit;\n  opacity: 0.9;\n}\n\n.ig-voice-control {\n  display: flex;\n  align-items: center;\n}\n\n.ig-voice-wave {\n  display: flex;\n  gap: 2px;\n  align-items: center;\n  height: 16px;\n}\n\n.bar {\n  width: 2px;\n  background-color: currentColor;\n  height: 100%;\n  animation: wave 1s infinite;\n}\n\n.bar:nth-child(2) {\n  height: 60%;\n  animation-delay: 0.1s;\n}\n.bar:nth-child(3) {\n  height: 80%;\n  animation-delay: 0.2s;\n}\n.bar:nth-child(4) {\n  height: 50%;\n  animation-delay: 0.3s;\n}\n\n@keyframes wave {\n  0%,\n  100% {\n    transform: scaleY(1);\n  }\n  50% {\n    transform: scaleY(0.6);\n  }\n}\n\n.ig-voice-time {\n  font-size: 12px;\n  margin-left: 4px;\n}\n\n.img-bubble,\n.voice-bubble {\n  padding: 8px 12px;\n}\n\n/* Drawer Styles */\n.ig-drawer {\n  overflow: hidden;\n  max-height: 0;\n  transition: max-height 0.3s ease;\n  background-color: #fff;\n}\n\n.ig-drawer.open {\n  max-height: 250px;\n  margin-top: 12px;\n  border-top: 1px solid #efefef;\n}\n\n.ig-emoji-panel {\n  height: 240px;\n  overflow-y: auto;\n  padding: 10px;\n  display: grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 8px;\n}\n\n.ig-emoji-item {\n  width: 100%;\n  height: auto;\n  cursor: pointer;\n}\n\n.ig-plus-panel {\n  height: 240px;\n  padding: 20px;\n  display: flex;\n  gap: 24px;\n}\n\n.ig-plus-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n}\n\n.ig-plus-icon {\n  width: 60px;\n  height: 60px;\n  border-radius: 12px;\n  background-color: #f7f7f7;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #262626;\n}\n\n.ig-special-input-panel {\n  height: 240px;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.ig-special-header {\n  display: flex;\n  justify-content: space-between;\n  font-weight: 600;\n  margin-bottom: 8px;\n}\n\n.ig-back-btn {\n  color: #0095f6;\n  cursor: pointer;\n  font-weight: normal;\n}\n\n.ig-special-input {\n  width: 100%;\n  padding: 12px;\n  border: 1px solid #dbdbdb;\n  border-radius: 8px;\n  outline: none;\n  font-size: 14px;\n}\n\n.ig-special-confirm {\n  background-color: #0095f6;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  margin-top: auto;\n}\n</style>\n'],sourceRoot:''}]);const s=r},6439:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'@import url(https://static.zeoseven.com/zsft/59/main/result.css);']),r.push([e.id,'/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */.head{width:40px;height:40px;border-radius:50%;min-width:40px}.card::-webkit-scrollbar{display:none !important}.card{-ms-overflow-style:none !important;scrollbar-width:none !important;letter-spacing:0.7px;font-family:\'JiangChengYuanTi\';font-weight:normal;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:20px;box-shadow:0 4px 16px rgba(0,0,0,0.12);margin-left:5px;box-sizing:border-box;z-index:99;border:4px solid #dcdcdc;overflow:hidden}.card-int{background-size:200% 200%;background-position:0% 0%;height:100%;transition:all 0.6s ease-out;overflow:hidden;box-sizing:border-box;position:relative;display:flex;flex-direction:column}.card:hover .card-int{background-position:100% 100%}#App_Page{background-size:200% 200%;background-position:0% 0%;height:100%;transition:all 0.6s ease-out;overflow:hidden;box-sizing:border-box;position:relative;flex:1}.top{position:absolute;top:0px;right:50%;transform:translate(50%,0%);width:80px;height:10px;border-bottom-left-radius:16px;border-bottom-right-radius:16px;z-index:9999999;background-color:black}.speaker{position:absolute;top:2px;right:50%;transform:translate(50%,0%);width:40%;height:2px;border-radius:2px;background-color:rgb(20,20,20)}.camera{position:absolute;top:6px;right:84%;transform:translate(50%,0%);width:6px;height:6px;border-radius:50%;background-color:rgba(255,255,255,0.048)}.int{position:absolute;width:3px;height:3px;border-radius:50%;top:50%;right:50%;transform:translate(50%,-50%);background-color:rgba(0,0,255,0.212)}.btn1,.btn2,.btn3,.btn4{position:absolute;width:2px}.btn1,.btn2,.btn3{height:45px;top:30%;right:-4px}.btn2,.btn3{transform:scale(-1);left:-4px}.btn2,.btn3{transform:scale(-1);height:30px}.btn2{top:26%}.btn3{top:36%}.hidden{display:block;opacity:0;transition:all 0.3s ease-in}.card:hover .hidden{opacity:1}.card:hover .hello{transform:translateY(-20px)}.btn{position:absolute;width:2px}.backdiv{background-color:white;height:100%;width:100%;position:relative;background-size:cover;background-position:top center;background-repeat:no-repeat;background-image:url(\'http://sharkpan.xyz/f/6osR/00005-660646865.png\');box-sizing:border-box}.dibu{position:absolute;bottom:40px;left:3%;right:3%;background-color:black;height:auto;display:flex;align-items:center;justify-content:space-around;padding:0 5px 0 5px;border-radius:30px;--a:10px;background-color:rgba(255,255,255,0.2);backdrop-filter:blur(var(--a));-webkit-backdrop-filter:blur(var(--a))}.dibu svg{transform:scale(0.85);transform-origin:center}.dinbu{position:absolute;top:6px;left:10px;right:10px;color:#626367;display:flex;align-items:center;justify-content:space-between;z-index:9999999}.zhong{position:absolute;border-radius:20px;--a:3px;background-color:rgba(255,255,255,0.2);backdrop-filter:blur(var(--a));-webkit-backdrop-filter:blur(var(--a));top:30%;left:4%;right:4%;color:black;padding:10px 15px 10px 10px;font-size:32px;display:flex;align-items:center;justify-content:space-between;letter-spacing:2px}.app{position:absolute;bottom:120px;left:4%;right:4%;display:flex;align-items:center;justify-content:space-evenly;color:black;box-sizing:border-box;max-width:92%;flex-wrap:wrap}.app-svg-div{max-width:20%;transform:scale(0.8);transform-origin:center}.QQ_home_head{border-radius:50%;margin-right:10px;width:40px;height:40px;font-size:0;min-width:40px;background-size:cover}.QQ_home_usermsg{--head_size:40px;width:100%;display:flex;font-size:14px;height:60px;align-items:center;position:relative}.QQ_home_usermsg>*{position:relative;z-index:1}.QQ_home_usermsg:active::before{content:\'\';position:absolute;top:0;left:-10px;right:-10px;height:100%;background-color:#d5d5d5}.QQ_home_usermsg_new{background-color:red;border-radius:50%;width:17px;height:17px;color:white;display:flex;align-items:center;justify-content:center;font-size:13px;justify-self:end;padding:2px}.QQ_home_usermsg_new_hidden{background-color:#dbdbdb;border-radius:10px;width:2rem;height:17px;color:white;display:flex;align-items:center;justify-content:center;font-size:13px;justify-self:end;padding:2px}.QQ_bottom_nav{position:absolute;bottom:0px;width:100%;height:40px;display:flex;align-items:center;justify-content:space-evenly;font-size:10px;background-color:white}body div{box-sizing:border-box !important}.page_button{display:flex;align-items:center;justify-content:space-evenly;width:100%;z-index:99;bottom:0px;left:0;height:22px;box-sizing:border-box;padding-bottom:4px}@media (max-width:768px){.zhong{font-size:20px}.card{aspect-ratio:1/1.5}}#space_page{width:100%;height:820px;background-color:#ffffff;display:none}.user_moment_title{--head_size:40px;width:100%;display:flex;font-size:14px;align-items:start;margin-bottom:5px}.user_moment{padding-left:7px;padding-right:7px;position:relative}.moment_button{display:flex;align-items:center;gap:5px;margin-left:auto;transform:scale(0.9);transform-origin:center}.moment_msg{background-color:#ffffff;margin-top:5px;max-width:60%;border-radius:7px;font-size:15px;padding:6px;width:-moz-fit-content;width:fit-content;white-space:normal;letter-spacing:1px;line-height:1.4;margin-bottom:10px;box-shadow:1px 1px 2px rgba(32,32,32,0.2)}#Home_page{width:100%;height:100%;background-size:cover;background-position:top center;background-repeat:no-repeat}.user_avatar{width:40px;height:40px;border-radius:50%;background-size:cover}.QQ_chat_msg{font-size:14px;margin-right:5px;margin-left:5px}.QQ_chat_mymsg{max-width:70%;margin-left:auto;display:grid;grid-template-columns:1fr auto;gap:10px;grid-template-rows:auto auto;justify-items:end;text-align:right;align-items:start;margin-right:11px}.QQ_chat_charmsg{max-width:70%;display:grid;grid-template-columns:auto 1fr;gap:10px;grid-template-rows:auto auto;align-items:start;margin-left:10px}.QQ_chat_msgdiv{box-shadow:0 1px 3px rgba(0,0,0,0.06);line-height:1.4;width:-moz-fit-content;width:fit-content;color:black;border-radius:8px;padding:7px;text-align:left;box-sizing:border-box;margin-left:-2px}.QQ_chat_name{font-size:13px;color:black}.QQ_chat_msgimg{width:100%;background-color:white;min-width:100%}.msgimg{max-width:100%;height:auto;display:block;width:100%;min-width:100%}.QQ_chat_time{display:flex;align-items:center;justify-content:center;width:100%;height:10px;margin-bottom:10px;color:#a1a1a1}.mimictwitter hr{background-color:rgb(240,244,245);border:none;height:1px}.twitterhead{width:45px;height:45px;border-radius:50%;margin-left:4px;min-width:45px}.interactsvg{width:15.5px;height:15.5px}.twitter-content{flex:1;overflow-y:auto;box-sizing:border-box;padding-top:10px;padding-right:3px}.mimictwitter{background-color:white;width:100%;max-width:100%;border-radius:10px;height:100%;box-sizing:border-box;padding-top:10px;display:flex;flex-direction:column;position:relative;overflow-x:hidden}.twitter{overflow-x:hidden;font-size:16px;height:100%}.twitter_moment{display:grid;grid-template-columns:50px 1fr 0px;grid-template-rows:auto auto}img{box-sizing:border-box !important}*{box-sizing:border-box}.user_leave_message{font-size:13px;margin-top:7px;display:flex;flex-direction:column;span{line-height:1.5}}.space_contents{scrollbar-width:none;-ms-overflow-style:none}.give_money{border-radius:8px;overflow:hidden;width:min(220px,100%)}#QQ_home_chars{background-color:#fefefe;width:100%;flex:1;border-radius:20px 20px 0 0;padding:5px 10px 20px 10px;box-sizing:border-box;overflow:auto !important;-ms-overflow-style:none !important;scrollbar-width:none !important;margin-bottom:40px}#QQ_home_chars::-webkit-scrollbar{display:none !important}#QQ_home_page{display:flex;flex-direction:column;height:100%}span{word-break:break-word}.QQ_chat_music{background-color:#fefefe;border-radius:10px;padding-top:10px;padding-right:10px;padding-left:10px;padding-bottom:5px;width:100%}.hide-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.music-play-button{position:absolute;border-radius:50%;background-color:#ffffff49;height:32px;width:32px;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;border:2px solid white;display:flex;justify-content:center;align-items:center}.space_fakeimg{margin-top:5px;font-size:1.2rem;background-color:rgb(239 237 238);padding:30px 10px;width:100%;border:1px solid black;border-radius:5px;text-align:center}.QQ_home_lasttime{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:4rem}.emoji_container{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;padding:10px 10px;width:100%;height:100%;overflow-y:auto}.emoji_container::-webkit-scrollbar{display:none !important}.emoji_container_img{width:100%;aspect-ratio:1/1;object-fit:cover;border:1px dashed rgb(215,213,213)}.input_container{display:flex;flex-direction:column;gap:25px;width:100%;height:100%;padding:20px;background-color:#f9f9f9;justify-content:center}.input_container span{color:#333;font-weight:600;font-size:1.1em}.input_container input[type=\'text\']{width:100%;box-sizing:border-box;background-color:#ffffff;border:1px solid #dcdcdc;border-radius:6px;padding:10px 12px;color:#333;outline:none;font-size:1em;transition:border-color 0.3s ease,box-shadow 0.3s ease}.input_container input[type=\'text\']:focus{border-color:#8cb4ff;box-shadow:0 0 8px rgba(140,180,255,0.4)}.input_container button{width:100%;padding:12px 18px;border:none;border-radius:6px;color:white;font-weight:bold;cursor:pointer;background:linear-gradient(135deg,#89f7fe,#66a6ff);transition:all 0.3s ease;box-shadow:0 2px 5px rgba(0,0,0,0.1);font-size:1em}.input_container button:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(102,166,255,0.5)}.input_container button:active{transform:translateY(0);box-shadow:0 1px 3px rgba(0,0,0,0.1)}.baibai_regexBubble{padding:20px 0px 10px;.QQ_chat_music{max-width:min(300px,100%)}}.baibai_regexRedNote{max-width:min(200px,100%)}.card{border:var(--v57dc8ddc);height:var(--v7f4e989e);width:var(--e9aadc08);min-width:var(--e9aadc08);min-height:var(--v7f4e989e);letter-spacing:1px;line-height:1.4}.top{touch-action:none}.btn1,.btn2,.btn3{background-color:var(--v3e90f9cc)}.user_avatar{background-image:var(--fd2f8a70)}\n','',{version:3,sources:['<no source>','webpack://./src/柏柏同层/index.css','webpack://./src/柏柏同层/index.vue'],names:[],mappings:'AAAA,iEAAA,CCCA,MACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,cAJI,CAMN,yBACE,uBADuB,CAGzB,MACE,kCAAmC,CACnC,+BAAgC,CAChC,oBAAqB,CACrB,8BAA+B,CAC/B,kBAAmB,CACnB,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,8BAAgC,CAChC,kBAAmB,CACnB,sCAA0C,CAC1C,eAAgB,CAChB,qBAAsB,CACtB,UAAW,CACX,wBAAyB,CACzB,eAhBI,CAkBN,UACE,yBAA0B,CAC1B,yBAA0B,CAC1B,WAAY,CACZ,4BAA6B,CAC7B,eAAgB,CAChB,qBAAsB,CACtB,iBAAkB,CAClB,YAAa,CACb,qBATQ,CAWV,sBACE,6BADoB,CAGtB,UACE,yBAA0B,CAC1B,yBAA0B,CAC1B,WAAY,CACZ,4BAA6B,CAC7B,eAAgB,CAChB,qBAAsB,CACtB,iBAAkB,CAClB,MARQ,CAUV,KACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,2BAA6B,CAC7B,UAAW,CACX,WAAY,CACZ,8BAA+B,CAC/B,+BAAgC,CAChC,eAAgB,CAChB,sBAVG,CAYL,SACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,2BAA6B,CAC7B,SAAU,CACV,UAAW,CACX,iBAAkB,CAClB,8BARO,CAUT,QACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,2BAA6B,CAC7B,SAAU,CACV,UAAW,CACX,iBAAkB,CAClB,wCARM,CAUR,KACE,iBAAkB,CAClB,SAAU,CACV,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,6BAA+B,CAC/B,oCARG,CAUL,wBACE,iBAAkB,CAClB,SAFyB,CAI3B,kBACE,WAAY,CACZ,OAAQ,CACR,UAHkB,CAKpB,YACE,mBAAoB,CACpB,SAFW,CAIb,YACE,mBAAoB,CACpB,WAFW,CAIb,MACE,OADI,CAGN,MACE,OADI,CAGN,QACE,aAAc,CACd,SAAU,CACV,2BAHM,CAKR,oBACE,SADkB,CAGpB,mBACE,2BADiB,CAGnB,KACE,iBAAkB,CAClB,SAFG,CAIL,SACE,sBAAuB,CACvB,WAAY,CACZ,UAAW,CACX,iBAAkB,CAClB,qBAAsB,CACtB,8BAA+B,CAC/B,2BAA4B,CAC5B,sEAAuE,CACvE,qBATO,CAWT,MACE,iBAAkB,CAClB,WAAY,CACZ,OAAQ,CACR,QAAS,CACT,sBAAuB,CACvB,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,4BAA6B,CAC7B,mBAAoB,CACpB,kBAAmB,CACnB,QAAS,CACT,sCAA0C,CAC1C,8BAA+B,CAC/B,sCAfI,CAiBN,UACE,qBAAsB,CACtB,uBAFQ,CAIV,OACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,UAAW,CACX,aAAc,CACd,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,eATK,CAWP,OACE,iBAAkB,CAClB,kBAAmB,CACnB,OAAQ,CACR,sCAA0C,CAC1C,8BAA+B,CAC/B,sCAAuC,CACvC,OAAQ,CACR,OAAQ,CACR,QAAS,CACT,WAAY,CACZ,2BAA4B,CAC5B,cAAe,CACf,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,kBAhBK,CAkBP,KACE,iBAAkB,CAClB,YAAa,CACb,OAAQ,CACR,QAAS,CACT,YAAa,CACb,kBAAmB,CACnB,4BAA6B,CAC7B,WAAY,CACZ,qBAAsB,CACtB,aAAc,CACd,cAXG,CAaL,aACE,aAAc,CACd,oBAAqB,CACrB,uBAHW,CAKb,cACE,iBAAkB,CAClB,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,WAAY,CACZ,cAAe,CACf,qBAPY,CASd,iBACE,gBAAiB,CACjB,UAAW,CACX,YAAa,CACb,cAAe,CAEf,WAAY,CACZ,kBAAmB,CACnB,iBARe,CAUjB,mBACE,iBAAkB,CAClB,SAFmB,CAIrB,gCACE,UAAW,CACX,iBAAkB,CAClB,KAAM,CACN,UAAW,CACX,WAAY,CACZ,WAAY,CACZ,wBAP8B,CAShC,qBACE,oBAAqB,CACrB,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,gBAAiB,CACjB,WAXmB,CAarB,4BACE,wBAAyB,CACzB,kBAAmB,CACnB,UAAW,CACX,WAAY,CACZ,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,gBAAiB,CACjB,WAX0B,CAa5B,eACE,iBAAkB,CAClB,UAAW,CACX,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,4BAA6B,CAC7B,cAAe,CACf,sBATa,CAWf,SACE,gCADO,CAGT,aACE,YAAa,CACb,kBAAmB,CACnB,4BAA6B,CAC7B,UAAW,CACX,UAAW,CACX,UAAW,CACX,MAAO,CACP,WAAY,CACZ,qBAAsB,CACtB,kBAVW,CAYb,yBAGE,OACE,cADK,CAGP,MACE,kBADI,CANkB,CAU1B,YACE,UAAW,CACX,YAAa,CACb,wBAAyB,CACzB,YAJU,CAMZ,mBACE,gBAAiB,CACjB,UAAW,CACX,YAAa,CACb,cAAe,CACf,iBAAkB,CAClB,iBANiB,CAQnB,aACE,gBAAiB,CACjB,iBAAkB,CAClB,iBAHW,CAKb,eACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,gBAAiB,CACjB,oBAAqB,CACrB,uBANa,CAQf,YACE,wBAAyB,CACzB,cAAe,CACf,aAAc,CACd,iBAAkB,CAClB,cAAe,CACf,WAAY,CACZ,sBAAkB,CAAlB,iBAAkB,CAClB,kBAAmB,CACnB,kBAAmB,CACnB,eAAgB,CAChB,kBAAmB,CACnB,yCAZU,CAcZ,WACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,8BAA+B,CAC/B,2BALS,CAOX,aACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAJW,CAMb,aACE,cAAe,CACf,gBAAiB,CACjB,eAHW,CAKb,eACE,aAAc,CACd,gBAAiB,CACjB,YAAa,CACb,8BAA+B,CAC/B,QAAS,CACT,4BAA6B,CAC7B,iBAAkB,CAClB,gBAAiB,CACjB,iBAAkB,CAClB,iBAVa,CAYf,iBACE,aAAc,CACd,YAAa,CACb,8BAA+B,CAC/B,QAAS,CACT,4BAA6B,CAC7B,iBAAkB,CAClB,gBAPe,CASjB,gBACE,qCAAyC,CACzC,eAAgB,CAChB,sBAAkB,CAAlB,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,WAAY,CACZ,eAAgB,CAChB,qBAAsB,CACtB,gBATc,CAWhB,cACE,cAAe,CACf,WAFY,CAId,gBACE,UAAW,CACX,sBAAuB,CACvB,cAHc,CAKhB,QACE,cAAe,CACf,WAAY,CACZ,aAAc,CACd,UAAW,CACX,cALM,CAOR,cACE,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,UAAW,CACX,WAAY,CACZ,kBAAmB,CACnB,aAPY,CASd,iBACE,iCAAoC,CACpC,WAAY,CACZ,UAHe,CAKjB,aACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,eAAgB,CAChB,cALW,CAOb,aACE,YAAa,CACb,aAFW,CAIb,iBACE,MAAO,CACP,eAAgB,CAChB,qBAAsB,CACtB,gBAAiB,CACjB,iBALe,CAOjB,cACE,sBAAuB,CACvB,UAAW,CACX,cAAe,CACf,kBAAmB,CACnB,WAAY,CACZ,qBAAsB,CACtB,gBAAiB,CACjB,YAAa,CACb,qBAAsB,CACtB,iBAAkB,CAClB,iBAXY,CAad,SACE,iBAAkB,CAClB,cAAe,CACf,WAHO,CAKT,gBACE,YAAa,CACb,kCAAmC,CACnC,4BAHc,CAKhB,IACE,gCADE,CAGJ,EACE,qBADA,CAGF,oBACE,cAAe,CACf,cAAe,CACf,YAAa,CACb,qBAAsB,CACtB,KACE,eADG,CALa,CASpB,gBACE,oBAAqB,CACrB,uBAFc,CAIhB,YACE,iBAAkB,CAClB,eAAgB,CAChB,qBAHU,CAKZ,eACE,wBAAyB,CACzB,UAAW,CACX,MAAO,CACP,2BAA4B,CAC5B,0BAA2B,CAC3B,qBAAsB,CACtB,wBAAyB,CACzB,kCAAmC,CACnC,+BAAgC,CAChC,kBAVa,CAYf,kCACE,uBADgC,CAGlC,cACE,YAAa,CACb,qBAAsB,CACtB,WAHY,CAKd,KACE,qBADG,CAGL,eACE,wBAAyB,CACzB,kBAAmB,CACnB,gBAAiB,CACjB,kBAAmB,CACnB,iBAAkB,CAClB,kBAAmB,CACnB,UAPa,CASf,YACE,kBAAmB,CACnB,eAAgB,CAChB,sBAHU,CAKZ,mBACE,iBAAkB,CAClB,iBAAkB,CAClB,0BAA2B,CAC3B,WAAY,CACZ,UAAW,CACX,OAAQ,CACR,QAAS,CACT,8BAAgC,CAChC,SAAU,CACV,sBAAuB,CACvB,YAAa,CACb,sBAAuB,CACvB,kBAbiB,CAenB,eAEE,cAAe,CACf,gBAAiB,CACjB,iCAAkC,CAClC,iBAAkB,CAClB,UAAW,CACX,sBAAuB,CACvB,iBAAkB,CAClB,iBATa,CAWf,kBACE,eAAgB,CAChB,kBAAmB,CACnB,sBAAuB,CACvB,cAJgB,CAMlB,iBACE,YAAa,CACb,mCAAqC,CACrC,QAAS,CACT,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,eAPe,CASjB,oCACE,uBADkC,CAGpC,qBACE,UAAW,CACX,gBAAmB,CACnB,gBAAiB,CACjB,kCAJmB,CAMrB,iBACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,UAAW,CACX,WAAY,CACZ,YAAa,CACb,wBAAyB,CACzB,sBARe,CAUjB,sBACE,UAAW,CACX,eAAgB,CAChB,eAHoB,CAKtB,oCACE,UAAW,CACX,qBAAsB,CACtB,wBAAyB,CACzB,wBAAyB,CACzB,iBAAkB,CAClB,iBAAkB,CAClB,UAAW,CACX,YAAa,CACb,aAAc,CACd,sDAVkC,CAYpC,0CACE,oBAAqB,CACrB,wCAFwC,CAI1C,wBACE,UAAW,CACX,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,WAAY,CACZ,gBAAiB,CACjB,cAAe,CACf,kDAAqD,CACrD,wBAAyB,CACzB,oCAAwC,CACxC,aAXsB,CAaxB,8BACE,0BAA2B,CAC3B,2CAF4B,CAI9B,+BACE,uBAAwB,CACxB,oCAF6B,CAI/B,oBACE,qBAAsB,CACtB,eACE,yBADa,CAFG,CAMpB,qBACE,yBADmB,CC1nBrB,MAEE,uBAA4B,CAC5B,uBAA4B,CAC5B,qBAA0B,CAC1B,yBAA8B,CAC9B,2BAAgC,CAChC,kBAAoB,CACpB,eACD,CACD,KAEE,iBACD,CACD,kBAGE,iCACD,CAED,aACE,gCACD',sourcesContent:[null,'@import url(\'https://static.zeoseven.com/zsft/59/main/result.css\');\n.head {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  min-width: 40px;\n}\n.card::-webkit-scrollbar {\n  display: none !important;\n}\n.card {\n  -ms-overflow-style: none !important;\n  scrollbar-width: none !important;\n  letter-spacing: 0.7px;\n  font-family: \'JiangChengYuanTi\';\n  font-weight: normal;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 20px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\n  margin-left: 5px;\n  box-sizing: border-box;\n  z-index: 99;\n  border: 4px solid #dcdcdc;\n  overflow: hidden;\n}\n.card-int {\n  background-size: 200% 200%;\n  background-position: 0% 0%;\n  height: 100%;\n  transition: all 0.6s ease-out;\n  overflow: hidden;\n  box-sizing: border-box;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n.card:hover .card-int {\n  background-position: 100% 100%;\n}\n#App_Page {\n  background-size: 200% 200%;\n  background-position: 0% 0%;\n  height: 100%;\n  transition: all 0.6s ease-out;\n  overflow: hidden;\n  box-sizing: border-box;\n  position: relative;\n  flex: 1;\n}\n.top {\n  position: absolute;\n  top: 0px;\n  right: 50%;\n  transform: translate(50%, 0%);\n  width: 80px;\n  height: 10px;\n  border-bottom-left-radius: 16px;\n  border-bottom-right-radius: 16px;\n  z-index: 9999999;\n  background-color: black;\n}\n.speaker {\n  position: absolute;\n  top: 2px;\n  right: 50%;\n  transform: translate(50%, 0%);\n  width: 40%;\n  height: 2px;\n  border-radius: 2px;\n  background-color: rgb(20, 20, 20);\n}\n.camera {\n  position: absolute;\n  top: 6px;\n  right: 84%;\n  transform: translate(50%, 0%);\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.048);\n}\n.int {\n  position: absolute;\n  width: 3px;\n  height: 3px;\n  border-radius: 50%;\n  top: 50%;\n  right: 50%;\n  transform: translate(50%, -50%);\n  background-color: rgba(0, 0, 255, 0.212);\n}\n.btn1, .btn2, .btn3, .btn4 {\n  position: absolute;\n  width: 2px;\n}\n.btn1, .btn2, .btn3 {\n  height: 45px;\n  top: 30%;\n  right: -4px;\n}\n.btn2, .btn3 {\n  transform: scale(-1);\n  left: -4px;\n}\n.btn2, .btn3 {\n  transform: scale(-1);\n  height: 30px;\n}\n.btn2 {\n  top: 26%;\n}\n.btn3 {\n  top: 36%;\n}\n.hidden {\n  display: block;\n  opacity: 0;\n  transition: all 0.3s ease-in;\n}\n.card:hover .hidden {\n  opacity: 1;\n}\n.card:hover .hello {\n  transform: translateY(-20px);\n}\n.btn {\n  position: absolute;\n  width: 2px;\n}\n.backdiv {\n  background-color: white;\n  height: 100%;\n  width: 100%;\n  position: relative;\n  background-size: cover;\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-image: url(\'http://sharkpan.xyz/f/6osR/00005-660646865.png\');\n  box-sizing: border-box;\n}\n.dibu {\n  position: absolute;\n  bottom: 40px;\n  left: 3%;\n  right: 3%;\n  background-color: black;\n  height: auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  padding: 0 5px 0 5px;\n  border-radius: 30px;\n  --a: 10px;\n  background-color: rgba(255, 255, 255, 0.2);\n  backdrop-filter: blur(var(--a));\n  -webkit-backdrop-filter: blur(var(--a));\n}\n.dibu svg {\n  transform: scale(0.85);\n  transform-origin: center;\n}\n.dinbu {\n  position: absolute;\n  top: 6px;\n  left: 10px;\n  right: 10px;\n  color: #626367;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  z-index: 9999999;\n}\n.zhong {\n  position: absolute;\n  border-radius: 20px;\n  --a: 3px;\n  background-color: rgba(255, 255, 255, 0.2);\n  backdrop-filter: blur(var(--a));\n  -webkit-backdrop-filter: blur(var(--a));\n  top: 30%;\n  left: 4%;\n  right: 4%;\n  color: black;\n  padding: 10px 15px 10px 10px;\n  font-size: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  letter-spacing: 2px;\n}\n.app {\n  position: absolute;\n  bottom: 120px;\n  left: 4%;\n  right: 4%;\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  color: black;\n  box-sizing: border-box;\n  max-width: 92%;\n  flex-wrap: wrap;\n}\n.app-svg-div {\n  max-width: 20%;\n  transform: scale(0.8);\n  transform-origin: center;\n}\n.QQ_home_head {\n  border-radius: 50%;\n  margin-right: 10px;\n  width: 40px;\n  height: 40px;\n  font-size: 0;\n  min-width: 40px;\n  background-size: cover;\n}\n.QQ_home_usermsg {\n  --head_size: 40px;\n  width: 100%;\n  display: flex;\n  font-size: 14px;\n  align-items: center;\n  height: 60px;\n  align-items: center;\n  position: relative;\n}\n.QQ_home_usermsg > * {\n  position: relative;\n  z-index: 1;\n}\n.QQ_home_usermsg:active::before {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  left: -10px;\n  right: -10px;\n  height: 100%;\n  background-color: #d5d5d5;\n}\n.QQ_home_usermsg_new {\n  background-color: red;\n  border-radius: 50%;\n  width: 17px;\n  height: 17px;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 13px;\n  justify-self: end;\n  padding: 2px;\n}\n.QQ_home_usermsg_new_hidden {\n  background-color: #dbdbdb;\n  border-radius: 10px;\n  width: 2rem;\n  height: 17px;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 13px;\n  justify-self: end;\n  padding: 2px;\n}\n.QQ_bottom_nav {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  font-size: 10px;\n  background-color: white;\n}\nbody div {\n  box-sizing: border-box !important;\n}\n.page_button {\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n  width: 100%;\n  z-index: 99;\n  bottom: 0px;\n  left: 0;\n  height: 22px;\n  box-sizing: border-box;\n  padding-bottom: 4px;\n}\n@media (max-width: 768px) {\n  body {\n  }\n  .zhong {\n    font-size: 20px;\n  }\n  .card {\n    aspect-ratio: 1 / 1.5;\n  }\n}\n#space_page {\n  width: 100%;\n  height: 820px;\n  background-color: #ffffff;\n  display: none;\n}\n.user_moment_title {\n  --head_size: 40px;\n  width: 100%;\n  display: flex;\n  font-size: 14px;\n  align-items: start;\n  margin-bottom: 5px;\n}\n.user_moment {\n  padding-left: 7px;\n  padding-right: 7px;\n  position: relative;\n}\n.moment_button {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  margin-left: auto;\n  transform: scale(0.9);\n  transform-origin: center;\n}\n.moment_msg {\n  background-color: #ffffff;\n  margin-top: 5px;\n  max-width: 60%;\n  border-radius: 7px;\n  font-size: 15px;\n  padding: 6px;\n  width: fit-content;\n  white-space: normal;\n  letter-spacing: 1px;\n  line-height: 1.4;\n  margin-bottom: 10px;\n  box-shadow: 1px 1px 2px rgba(32, 32, 32, 0.2);\n}\n#Home_page {\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-position: top center;\n  background-repeat: no-repeat;\n}\n.user_avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background-size: cover;\n}\n.QQ_chat_msg {\n  font-size: 14px;\n  margin-right: 5px;\n  margin-left: 5px;\n}\n.QQ_chat_mymsg {\n  max-width: 70%;\n  margin-left: auto;\n  display: grid;\n  grid-template-columns: 1fr auto;\n  gap: 10px;\n  grid-template-rows: auto auto;\n  justify-items: end;\n  text-align: right;\n  align-items: start;\n  margin-right: 11px;\n}\n.QQ_chat_charmsg {\n  max-width: 70%;\n  display: grid;\n  grid-template-columns: auto 1fr;\n  gap: 10px;\n  grid-template-rows: auto auto;\n  align-items: start;\n  margin-left: 10px;\n}\n.QQ_chat_msgdiv {\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);\n  line-height: 1.4;\n  width: fit-content;\n  color: black;\n  border-radius: 8px;\n  padding: 7px;\n  text-align: left;\n  box-sizing: border-box;\n  margin-left: -2px;\n}\n.QQ_chat_name {\n  font-size: 13px;\n  color: black;\n}\n.QQ_chat_msgimg {\n  width: 100%;\n  background-color: white;\n  min-width: 100%;\n}\n.msgimg {\n  max-width: 100%;\n  height: auto;\n  display: block;\n  width: 100%;\n  min-width: 100%;\n}\n.QQ_chat_time {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 10px;\n  margin-bottom: 10px;\n  color: #a1a1a1;\n}\n.mimictwitter hr {\n  background-color: rgb(240, 244, 245);\n  border: none;\n  height: 1px;\n}\n.twitterhead {\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n  margin-left: 4px;\n  min-width: 45px;\n}\n.interactsvg {\n  width: 15.5px;\n  height: 15.5px;\n}\n.twitter-content {\n  flex: 1;\n  overflow-y: auto;\n  box-sizing: border-box;\n  padding-top: 10px;\n  padding-right: 3px;\n}\n.mimictwitter {\n  background-color: white;\n  width: 100%;\n  max-width: 100%;\n  border-radius: 10px;\n  height: 100%;\n  box-sizing: border-box;\n  padding-top: 10px;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow-x: hidden;\n}\n.twitter {\n  overflow-x: hidden;\n  font-size: 16px;\n  height: 100%;\n}\n.twitter_moment {\n  display: grid;\n  grid-template-columns: 50px 1fr 0px;\n  grid-template-rows: auto auto;\n}\nimg {\n  box-sizing: border-box !important;\n}\n* {\n  box-sizing: border-box;\n}\n.user_leave_message {\n  font-size: 13px;\n  margin-top: 7px;\n  display: flex;\n  flex-direction: column;\n  span {\n    line-height: 1.5;\n  }\n}\n.space_contents {\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n.give_money {\n  border-radius: 8px;\n  overflow: hidden;\n  width: min(220px, 100%);\n}\n#QQ_home_chars {\n  background-color: #fefefe;\n  width: 100%;\n  flex: 1;\n  border-radius: 20px 20px 0 0;\n  padding: 5px 10px 20px 10px;\n  box-sizing: border-box;\n  overflow: auto !important;\n  -ms-overflow-style: none !important;\n  scrollbar-width: none !important;\n  margin-bottom: 40px;\n}\n#QQ_home_chars::-webkit-scrollbar {\n  display: none !important;\n}\n#QQ_home_page {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\nspan {\n  word-break: break-word;\n}\n.QQ_chat_music {\n  background-color: #fefefe;\n  border-radius: 10px;\n  padding-top: 10px;\n  padding-right: 10px;\n  padding-left: 10px;\n  padding-bottom: 5px;\n  width: 100%;\n}\n.hide-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.music-play-button {\n  position: absolute;\n  border-radius: 50%;\n  background-color: #ffffff49;\n  height: 32px;\n  width: 32px;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 2;\n  border: 2px solid white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.space_fakeimg {\n  text-align: center;\n  margin-top: 5px;\n  font-size: 1.2rem;\n  background-color: rgb(239 237 238);\n  padding: 30px 10px;\n  width: 100%;\n  border: 1px solid black;\n  border-radius: 5px;\n  text-align: center;\n}\n.QQ_home_lasttime {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 4rem;\n}\n.emoji_container {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 20px;\n  padding: 10px 10px;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n}\n.emoji_container::-webkit-scrollbar {\n  display: none !important;\n}\n.emoji_container_img {\n  width: 100%;\n  aspect-ratio: 1 / 1;\n  object-fit: cover;\n  border: 1px dashed rgb(215, 213, 213);\n}\n.input_container {\n  display: flex;\n  flex-direction: column;\n  gap: 25px;\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  background-color: #f9f9f9;\n  justify-content: center;\n}\n.input_container span {\n  color: #333;\n  font-weight: 600;\n  font-size: 1.1em;\n}\n.input_container input[type=\'text\'] {\n  width: 100%;\n  box-sizing: border-box;\n  background-color: #ffffff;\n  border: 1px solid #dcdcdc;\n  border-radius: 6px;\n  padding: 10px 12px;\n  color: #333;\n  outline: none;\n  font-size: 1em;\n  transition: border-color 0.3s ease, box-shadow 0.3s ease;\n}\n.input_container input[type=\'text\']:focus {\n  border-color: #8cb4ff;\n  box-shadow: 0 0 8px rgba(140, 180, 255, 0.4);\n}\n.input_container button {\n  width: 100%;\n  padding: 12px 18px;\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-weight: bold;\n  cursor: pointer;\n  background: linear-gradient(135deg, #89f7fe, #66a6ff);\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  font-size: 1em;\n}\n.input_container button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(102, 166, 255, 0.5);\n}\n.input_container button:active {\n  transform: translateY(0);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n.baibai_regexBubble {\n  padding: 20px 0px 10px;\n  .QQ_chat_music {\n    max-width: min(300px, 100%);\n  }\n}\n.baibai_regexRedNote {\n  max-width: min(200px, 100%);\n}\n','\n@import \'./index.css\';\n.card {\n  /* background-color: v-bind(bgColor); */\n  border: v-bind(borderColor);\n  height: v-bind(card_height);\n  width: v-bind(card_width);\n  min-width: v-bind(card_width);\n  min-height: v-bind(card_height);\n  letter-spacing: 1px;\n  line-height: 1.4;\n}\n.top {\n  /* background-color: v-bind(bgColor); */\n  touch-action: none;\n}\n.btn1,\n.btn2,\n.btn3 {\n  background-color: v-bind(buttonColor);\n}\n\n.user_avatar {\n  background-image: v-bind(user_avatar);\n}\n/* .card-pc {\n  width: min(350px, 95vw, calc(70vh / 2));\n  height: auto;\n  aspect-ratio: 1 / 2;\n  max-height: 70vh;\n  max-width: min(350px, 95%);\n} */\n'],sourceRoot:''}]);const s=r},6566:(e,n,t)=>{var a=t(1939);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('f4870a5a',a,!1,{ssrId:!0})},6679:(e,n,t)=>{var a=t(3842);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('1c931b80',a,!1,{ssrId:!0})},6688:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.fade-enter-active[data-v-6dc786c1],.fade-leave-active[data-v-6dc786c1]{transition:opacity 0.2s ease}.fade-enter-from[data-v-6dc786c1],.fade-leave-to[data-v-6dc786c1]{opacity:0}.popup-enter-active[data-v-6dc786c1],.popup-leave-active[data-v-6dc786c1]{transition:opacity 0.2s ease,transform 0.2s ease}.popup-enter-from[data-v-6dc786c1],.popup-leave-to[data-v-6dc786c1]{opacity:0;transform:translate(-50%,-46%) scale(0.96)}.popup-enter-to[data-v-6dc786c1],.popup-leave-from[data-v-6dc786c1]{opacity:1;transform:translate(-50%,-50%) scale(1)}\n','',{version:3,sources:['webpack://./src/柏柏同层/QQ/QQ.vue'],names:[],mappings:'AAqyBA,wEAEE,4BACF,CACA,kEAEE,SACF,CACA,0EAEE,gDAGF,CACA,oEAEE,SAAU,CACV,0CACF,CACA,oEAEE,SAAU,CACV,uCACF',sourcesContent:['<template>\r\n  <div\r\n    v-show="sharedState.phone.activeApp == \'QQ\'"\r\n    id="App_QQ"\r\n    class="QQ"\r\n    style="width: 100%; height: 100%; box-sizing: border-box; position: relative"\r\n    :style="{\r\n      \'background-color\': sharedState.QQ.activePage == 1 ? \'#eff3ff\' : \'#FFFFFF\',\r\n    }"\r\n  >\r\n    <div v-show="!sharedState.QQ.activeChatId && sharedState.QQ.activePage == 1" id="QQ_home_page">\r\n      <div style="width: 100%; height: 30px"></div>\r\n      <div style="display: flex; align-items: center; gap: 5px; width: 100%; box-sizing: border-box">\r\n        <div\r\n          class="user_avatar"\r\n          style="width: 35px; height: 35px; border-radius: 50%; margin-left: 10px; cursor: pointer"\r\n          @click="sharedState.phone.activeApp = \'home\'"\r\n        ></div>\r\n        <div\r\n          style="\r\n            display: flex;\r\n            align-items: start;\r\n            justify-content: center;\r\n            flex-direction: column;\r\n            margin-left: 3px;\r\n            gap: 3px;\r\n          "\r\n        >\r\n          <span id="QQ_home_UserName" style="font-size: 14px; color: black !important"\r\n            ><strong>{{ sharedState.ST.userName }}</strong></span\r\n          >\r\n          <div\r\n            style="display: flex; align-items: center; height: 10px; cursor: pointer"\r\n            @click="sharedState.phone.panel = true"\r\n          >\r\n            <svg viewBox="0 0 1024 1024" width="13" height="13" style="margin-right: 2px">\r\n              <path\r\n                d="M957.539 464.339c-26.14-245.993-246.771-424.08-492.787-397.772C218.735 92.873 40.474 313.62 66.635 559.634 92.774 805.631 313.406 983.717 559.443 957.41c245.997-26.306 424.258-247.075 398.096-493.071z m-298.25-135.757c39.341 0 71.233 31.921 71.233 71.301 0 39.379-31.891 71.3-71.233 71.3-39.338 0-71.229-31.921-71.229-71.3 0-39.38 31.892-71.301 71.229-71.301z m-294.447 0c39.34 0 71.23 31.921 71.23 71.301 0 39.379-31.89 71.3-71.23 71.3s-71.228-31.921-71.228-71.3c0-39.38 31.887-71.301 71.228-71.301z m366.815 304.963c-21.735 96.663-119.97 163.563-219.591 163.563-103.222 0-200.969-68.713-220.487-167.453 0-26.686 20.351-36.26 32.887-36.26h370.156c9.115 0.017 43.978 3.176 37.035 40.15z"\r\n                fill="#fbba13"\r\n                p-id="5845"\r\n              ></path>\r\n            </svg>\r\n            <span style="font-size: 11px">Q我吧</span>\r\n            <svg viewBox="0 0 1024 1024" width="10" height="10" style="margin-top: 1px">\r\n              <path\r\n                d="M342.528 916.48c19.456 0 38.4-7.168 53.248-21.504l338.944-327.68c14.848-14.336 23.552-34.304 23.552-55.296s-8.192-40.96-23.552-55.296l-338.944-327.68c-30.72-29.696-79.36-28.672-108.544 2.048-29.696 30.72-28.672 79.36 2.048 108.544l281.6 272.384-281.6 272.384c-30.72 29.696-31.232 78.336-2.048 108.544 15.36 15.872 35.328 23.552 55.296 23.552z"\r\n                fill="#000000"\r\n                p-id="7578"\r\n              ></path>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n\r\n        <svg\r\n          viewBox="0 0 1024 1024"\r\n          version="1.1"\r\n          width="17"\r\n          height="17"\r\n          style="margin-left: auto; margin-right: 10px"\r\n          @click="sharedState.QQ.panel = !sharedState.QQ.panel"\r\n        >\r\n          <path\r\n            d="M512 0a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666h426.666666a42.666667 42.666667 0 0 1 0 85.333334H554.666667v426.666666a42.666667 42.666667 0 0 1-85.333334 0V554.666667H42.666667a42.666667 42.666667 0 0 1 0-85.333334h426.666666V42.666667a42.666667 42.666667 0 0 1 42.666667-42.666667z"\r\n            fill="#191919"\r\n            p-id="4261"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n\r\n      <div style="width: 100%; height: 10px"></div>\r\n      <div id="QQ_home_chars">\r\n        <div\r\n          style="\r\n            width: 100%;\r\n            height: 30px;\r\n            background-color: #eff3ff;\r\n            margin-top: 5px;\r\n            border-radius: 5px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            gap: 2px;\r\n          "\r\n        >\r\n          <svg viewBox="0 0 1024 1024" width="16" height="16">\r\n            <path\r\n              d="M446.112323 177.545051c137.567677 0.219798 252.612525 104.59798 266.162424 241.493333 13.562828 136.895354-78.778182 261.818182-213.617777 289.008485-134.852525 27.203232-268.386263-52.156768-308.945455-183.608889s25.018182-272.252121 151.738182-325.779394A267.235556 267.235556 0 0 1 446.112323 177.545051m0-62.060607c-182.794343 0-330.989899 148.195556-330.989899 330.989899s148.195556 330.989899 330.989899 330.989899 330.989899-148.195556 330.989899-330.989899-148.195556-330.989899-330.989899-330.989899z m431.321212 793.341415a30.849293 30.849293 0 0 1-21.94101-9.102223l-157.220202-157.220202c-11.752727-12.179394-11.584646-31.534545 0.37495-43.50707 11.972525-11.972525 31.327677-12.140606 43.494141-0.37495l157.220202 157.220202a31.036768 31.036768 0 0 1 6.723232 33.810101 31.004444 31.004444 0 0 1-28.651313 19.174142z m0 0"\r\n              fill="#919095"\r\n            ></path>\r\n          </svg>\r\n          <span style="color: #919095">搜索</span>\r\n        </div>\r\n\r\n        <div style="width: 100%; height: 13px"></div>\r\n        <div id="QQ_home_chars_div">\r\n          <home_chars v-for="(value, key) in sharedState.QQ.chars" :key="key" :value="value" :name="key"> </home_chars>\r\n        </div>\r\n\r\n        <div v-if="Object.keys(sharedState.QQ.chars).length == 0" style="text-align: center">点击右上角+添加角色</div>\r\n        <div v-if="Object.keys(sharedState.QQ.chars).length == 0" style="text-align: center; margin-top: 4px">\r\n          点击左上角头像修改手机颜色\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      v-show="!sharedState.QQ.activeChatId && sharedState.QQ.activePage == 3"\r\n      id="QQ_space_page"\r\n      style="height: 100%"\r\n    >\r\n      <div style="width: 100%; height: 35px"></div>\r\n      <div style="display: flex">\r\n        <span style="font-size: 16px; margin-left: 10px; color: black !important">动态</span>\r\n        <svg viewBox="0 0 1024 1024" width="20" height="20" style="margin-left: auto">\r\n          <path\r\n            d="M593.420488 922.099512c24.553022 0 44.456585 19.903563 44.456585 44.456586v11.988292c0 24.553022-19.903563 44.456585-44.456585 44.456586h-159.843903c-24.553022 0-44.456585-19.903563-44.456585-44.456586v-11.988292c0-24.553022 19.903563-44.456585 44.456585-44.456586h159.843903zM515.996098 0c24.276293 0 43.957073 19.68078 43.957073 43.957073l0.002997 54.191079C735.392843 121.808047 870.649756 272.137241 870.649756 454.056585V740.277073h102.4c24.553022 0 44.456585 19.903563 44.456585 44.456586v11.988292c0 24.553022-19.903563 44.456585-44.456585 44.456586H870.649756v1.998048H152.35122v-1.998048H52.948293C28.39527 841.178537 8.491707 821.274974 8.491707 796.721951v-11.988292C8.491707 760.180636 28.39527 740.277073 52.948293 740.277073H152.35122V454.056585c0-181.229019 134.231914-331.106654 308.696538-355.632702L461.049756 43.957073c0-24.276293 19.68078-43.957073 43.957073-43.957073h10.989269z m25.620979 197.047571h-60.233178c-126.178779 0-228.706654 101.264109-230.744664 226.958361l-0.029971 3.816273-0.000999 312.454868h521.783446V427.822205c0-127.454533-103.3211-230.774634-230.774634-230.774634z"\r\n            fill="#000000"\r\n            p-id="3355"\r\n          ></path>\r\n        </svg>\r\n        <svg viewBox="0 0 1065 1024" width="20" height="20" style="margin-right: 10px; margin-left: 15px">\r\n          <path\r\n            d="M1002.234305 330.02867V693.97133c0 53.148789-28.346021 101.741967-73.902125 128.063272l-315.349481 182.224419c-46.062284 26.321305-102.248146 26.321305-148.31043 0l-315.349481-182.224419c-46.062284-26.321305-73.902126-75.420662-73.902126-128.063272V330.02867c0-53.148789 28.346021-101.741967 73.902126-128.063272l315.349481-182.224419c46.062284-26.321305 102.248146-26.321305 148.31043 0l315.349481 182.224419c45.556105 26.321305 73.902126 74.914483 73.902125 128.063272z m-76.939199 0c0-25.308947-13.666831-49.099357-35.432526-61.753831l-315.349481-182.224419c-22.271873-12.654474-49.099357-12.654474-71.37123 0l-315.349481 182.224419c-22.271873 12.654474-35.432526 36.444884-35.432526 61.753831V693.97133c0 25.308947 13.666831 49.099357 35.432526 61.753831l315.349481 182.224419c22.271873 12.654474 49.099357 12.654474 71.37123 0l315.349481-182.224419c22.271873-12.654474 35.432526-36.444884 35.432526-61.753831V330.02867zM362.424123 508.709837C362.424123 410.004943 442.400395 329.522491 541.611468 329.522491s179.187346 80.482452 179.187346 179.187346-80.482452 179.187346-179.187346 179.187345-179.187346-79.470094-179.187345-179.187345z m76.939199 0c0 56.692042 46.062284 102.248146 102.248146 102.248146s102.248146-46.062284 102.248146-102.248146-46.062284-102.248146-102.248146-102.248146-102.248146 46.568463-102.248146 102.248146z"\r\n            fill="#000000"\r\n            p-id="13806"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n      <div style="width: 100%; height: 1px; background-color: #e6e6e6; margin-bottom: 10px; margin-top: 10px"></div>\r\n      <div id="space_contents" class="space_contents" style="overflow-y: auto; width: 100%; height: 100%">\r\n        <post v-for="value of sharedState.QQ.post" :key="value.id || Math.random()" :post="value"></post>\r\n        <div style="margin-bottom: 150px"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="QQ_bottom_nav">\r\n      <div\r\n        id="QQ_message_nav"\r\n        style="display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 1px"\r\n        @click="sharedState.QQ.activePage = 1"\r\n      >\r\n        <svg\r\n          id="QQ_message_svg"\r\n          class="icon"\r\n          viewBox="0 0 1024 1024"\r\n          width="20"\r\n          height="20"\r\n          style="transform: scale(1.15); transform-origin: center"\r\n          :style="{\r\n            fill: sharedState.QQ.activePage == 1 ? \'#019aff\' : \'#000000\',\r\n          }"\r\n        >\r\n          <path\r\n            d="M822.016 61.44H196.864A155.88352 155.88352 0 0 0 40.96 216.94976v426.2144a155.88352 155.88352 0 0 0 155.904 155.50976h9.6256a1.97632 1.97632 0 0 1 1.96608 1.9456l0.97792 84.992A72.832 72.832 0 0 0 322.72896 945.152l211.37408-141.09184a31.9744 31.9744 0 0 1 17.80736-5.39648h270.1056A155.88352 155.88352 0 0 0 977.92 643.16416V216.94976A155.88352 155.88352 0 0 0 822.016 61.44z m85.06368 581.72416a85.05344 85.05344 0 0 1-85.06368 84.84864H551.936a102.69184 102.69184 0 0 0-57.21088 17.33632l-211.39456 141.09184a1.9712 1.9712 0 0 1-3.072-1.6128l-0.97792-85.02272A72.97024 72.97024 0 0 0 206.4896 728.0128h-9.6256a85.05344 85.05344 0 0 1-85.06368-84.84864V216.94976A85.05344 85.05344 0 0 1 196.864 132.096h625.152a85.05344 85.05344 0 0 1 85.06368 84.84864v426.2144z"\r\n          ></path>\r\n          <path\r\n            d="M311.08608 381.76768a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z m207.80032 0a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z m212.52096 0a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z"\r\n          ></path>\r\n        </svg>\r\n        <span>消息</span>\r\n      </div>\r\n\r\n      <div\r\n        id="QQ_people_nav"\r\n        style="display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 1px"\r\n        @click="sharedState.phone.activeApp = \'RedNote\'"\r\n      >\r\n        <svg id="QQ_people_svg" viewBox="0 0 1024 1024" style="fill: #000000" width="20" height="20">\r\n          <path\r\n            d="M620.744191 538.879184c82.736353-40.523949 140.308583-124.785028 140.308583-222.936465 0-137.367601-111.714338-249.080915-249.02668-249.080915-137.367601 0-249.080915 111.713314-249.080915 249.080915 0 98.151437 57.57223 182.412516 140.363841 222.936465C235.330238 586.429153 111.796714 740.736565 111.796714 923.694503c0 18.464537 15.032368 33.443693 33.496905 33.443693 18.464537 0 33.497928-14.979156 33.497928-33.443693 0-183.774537 149.46001-333.343017 333.234547-333.343017 183.77556 0 333.234547 149.568481 333.234547 333.343017 0 18.464537 14.978133 33.443693 33.443693 33.443693 18.519796 0 33.496905-14.979156 33.496905-33.443693C912.20124 740.736565 788.668739 586.429153 620.744191 538.879184zM329.886801 315.942719c0-100.438527 81.70179-182.194552 182.140317-182.194552 100.384291 0 182.086082 81.756025 182.086082 182.194552 0 100.384291-81.702813 182.086082-182.086082 182.086082C411.587568 498.0288 329.886801 416.32701 329.886801 315.942719z"\r\n          ></path>\r\n        </svg>\r\n        <span>联系人</span>\r\n      </div>\r\n\r\n      <div\r\n        id="QQ_moment_nav"\r\n        style="\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex-direction: column;\r\n          gap: 1px;\r\n          position: relative;\r\n        "\r\n        @click="\r\n          sharedState.QQ.activePage = 3;\r\n          sharedState.QQ.post.forEach(item => (item.read = true));\r\n        "\r\n      >\r\n        <svg\r\n          id="QQ_moment_svg"\r\n          viewBox="0 0 1059 1024"\r\n          width="20"\r\n          height="20"\r\n          :style="{\r\n            fill: sharedState.QQ.activePage == 3 ? \'#019aff\' : \'#000000\',\r\n          }"\r\n        >\r\n          <path\r\n            d="M206.566465 1008.20002c11.278404 7.517627 30.080982 15.035253 45.117545 15.035254 11.281023 0 26.324133-3.75554 37.605156-7.517627l240.646548-127.777391 240.646547 127.777391c11.278404 7.517627 22.558118 7.517627 37.602537 7.517627 15.037872 0 30.075744-3.75554 45.118854-15.035254 22.559427-15.030015 37.598609-45.097903 30.082292-71.402393l-45.124092-278.110282L1037.545084 459.503632c18.799959-18.790793 26.321514-48.85868 18.799959-75.163172-7.516317-26.311038-33.839141-45.103141-60.156726-48.85868L714.181074 290.382568 593.854527 42.338864C582.577432 16.027826 556.254609 0.99912 526.177555 0.99912c-30.080982 0-56.403806 15.028706-67.684829 41.339744l-120.32 248.043704L63.679182 331.723621c-26.316276 3.756849-52.640409 22.548951-60.161965 48.853443-7.516317 26.309729-3.758159 56.376307 18.801269 75.169719l199.285852 199.183713-45.120164 278.106353c-3.758159 30.065269 7.521555 60.133156 30.082291 75.163171zM63.679182 406.886793l274.492235-41.339744 48.878322-7.518936 22.559427-45.097903 116.568389-248.042394 120.318691 248.043703 22.562046 45.097903 48.88225 7.516317 274.485688 41.339744L789.383529 606.074435l-33.845688 33.822117 7.522865 45.103141 45.124092 278.103734-240.651785-127.777391-41.356767-26.311039-45.124093 22.555499-240.646547 131.532931 45.120164-278.103734 7.521555-45.103141-30.082292-33.823427L63.679182 406.888102z"\r\n            p-id="37579"\r\n          ></path>\r\n          <path\r\n            d="M526.176246 692.509463c-131.604951 0-176.725115-127.777391-176.725116-131.53424-3.763396-15.035253 3.758159-30.065269 18.796031-33.828665 15.044419-3.75554 30.080982 3.763396 33.845688 18.793411 0 3.762087 33.839141 93.953964 124.084706 93.953965 90.239018 0 124.078159-93.953964 124.078159-93.953965 3.763396-15.030015 18.801269-22.548951 33.845688-18.793411 15.036563 3.763396 22.558118 22.555499 18.79603 33.828665 0 3.756849-45.120164 131.53555-176.721186 131.535549z"\r\n            p-id="37580"\r\n          ></path>\r\n        </svg>\r\n        <span>动态</span>\r\n        <div\r\n          v-show="sharedState.QQ.postUnread > 0"\r\n          class="new_tips"\r\n          style="\r\n            position: absolute;\r\n            right: -8px;\r\n            top: -8px;\r\n            background-color: red;\r\n            color: white;\r\n            width: 15px;\r\n            height: 15px;\r\n            border-radius: 50%;\r\n            justify-content: center;\r\n            align-items: center;\r\n            font-size: 12px;\r\n            display: flex;\r\n          "\r\n        >\r\n          {{ sharedState.QQ.postUnread }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      id="QQ_friend_info"\r\n      style="display: none; background-color: white; height: 100%; width: 100%; padding-top: 50px; padding-left: 10px"\r\n    >\r\n      <span>自定义名称:</span><input id="setcharname" type="text" name="" placeholder="这里输入名称" />\r\n      <br />\r\n      <br />\r\n      <span>自定义头像:</span>\r\n      <input id="QQ_head_input" type="file" />\r\n\r\n      <br /><br /><br />\r\n      <button onclick="Setfriendinfo(false)">取消</button>\r\n      <button onclick="Setfriendinfo(true)">确定</button>\r\n    </div>\r\n\r\n    <div id="QQ_chat_list" style="width: 100%; height: 100%; padding-top: 0px">\r\n      <chat_page\r\n        v-for="(value, key) in sharedState.QQ.chars"\r\n        v-show="sharedState.QQ.activeChatId === key"\r\n        :key="key"\r\n        :data-name="key"\r\n        :value="value"\r\n        :name="key"\r\n      />\r\n    </div>\r\n    <transition name="popup">\r\n      <div v-show="sharedState.phone.panel" class="chat-setting-popup">\r\n        <div class="chat-setting-header">\r\n          <span>手机设置</span>\r\n          <svg class="close-setting-btn" viewBox="0 0 1024 1024" width="20" height="20" @click="closeSetting(false)">\r\n            <path\r\n              d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\r\n              fill="#666666"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n        <div class="chat-setting-content" style="padding-top: 5px; overflow-x: hidden">\r\n          <fieldset\r\n            style="\r\n              border: 1px solid;\r\n              padding: 5px 10px 10px;\r\n              width: 100%;\r\n              display: flex;\r\n              gap: 15px;\r\n              flex-direction: column;\r\n            "\r\n          >\r\n            <legend>颜色设置:</legend>\r\n            <div class="setting-item">\r\n              <span>user气泡</span>\r\n              <div style="flex: 1">\r\n                <input\r\n                  id="text-color-input"\r\n                  v-model="phone_settings.userBubble"\r\n                  style="width: 100%"\r\n                  type="text"\r\n                  placeholder="颜色值"\r\n                />\r\n              </div>\r\n              <input v-model="phone_settings.userBubble" type="color" class="color-picker" />\r\n            </div>\r\n            <div class="setting-item">\r\n              <span>user字体</span>\r\n              <div style="flex: 1">\r\n                <input\r\n                  id="text-color-input"\r\n                  v-model="phone_settings.userText"\r\n                  style="width: 100%"\r\n                  type="text"\r\n                  placeholder="颜色值"\r\n                />\r\n              </div>\r\n              <input v-model="phone_settings.userText" type="color" class="color-picker" />\r\n            </div>\r\n            <div style="font-size: 14px; text-align: center">右边的框点一下可以选颜色</div>\r\n          </fieldset>\r\n          <fieldset\r\n            style="\r\n              border: 1px solid;\r\n              padding: 5px 10px 10px;\r\n              width: 100%;\r\n              display: flex;\r\n              flex-direction: column;\r\n              gap: 15px;\r\n            "\r\n          >\n            <legend>手机设置:</legend>\n            <div style="display: flex; width: 100%; align-items: center; gap: 5px">\n              <span>导航按键</span>\n              <select v-model="sharedState.phone.navButton" class="QQ_chars-form-select" style="flex: 1">\n                <option :value="false">不显示</option>\n                <option :value="true">显示</option>\n              </select>\n            </div>\n            <div class="setting-item">\n              <span>主屏壁纸</span>\n              <div style="flex: 1">\n                <input\n                  v-model="phone_settings.wallpaper"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入图片链接，留空恢复默认"\n                />\n              </div>\n              <button type="button" class="color-picker" style="min-width: 64px" @click="phone_settings.wallpaper = \'\'">\n                清除\n              </button>\n            </div>\n            <fieldset style="border: 1px dashed #e0e0e0; padding: 8px; border-radius: 8px">\n              <legend style="padding: 0 6px">主屏图标</legend>\n              <div class="setting-item" v-for="key in [\'QQ\',\'RedNote\',\'Douyin\',\'Tinder\',\'Instagram\']" :key="key">\n                <span>{{ key }}</span>\n                <div style="flex: 1">\n                  <input\n                    v-model="phone_settings.icons[key]"\n                    style="width: 100%"\n                    type="text"\n                    :placeholder="`输入${key}图标链接，留空用默认`"\n                  />\n                </div>\n                <button\n                  type="button"\n                  class="color-picker"\n                  style="min-width: 64px"\n                  @click="phone_settings.icons[key] = \'\'"\n                >\n                  重置\n                </button>\n              </div>\n            </fieldset>\n            <div class="setting-item">\n              <svg style="width: 1.5rem; height: 1.5rem" viewBox="0 0 1024 1024" @click="setPhoneSize(\'width\', -10)">\n                <path\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n              <span>手机宽度</span>\r\n              <div style="flex: 1">\r\n                <input v-model="sharedState.phone.width.now" style="width: 100%" type="number" />\r\n              </div>\r\n              <svg\r\n                style="width: 1.5rem; height: 1.5rem; transform: rotate(180deg)"\r\n                viewBox="0 0 1024 1024"\r\n                @click="setPhoneSize(\'width\', 10)"\r\n              >\r\n                <path\r\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\r\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n            <div class="setting-item">\r\n              <svg style="width: 1.5rem; height: 1.5rem" viewBox="0 0 1024 1024" @click="setPhoneSize(\'height\', -10)">\r\n                <path\r\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\r\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n              <span>手机高度</span>\r\n              <div style="flex: 1">\r\n                <input v-model="sharedState.phone.height.now" style="width: 100%" type="number" />\r\n              </div>\r\n              <svg\r\n                style="width: 1.5rem; height: 1.5rem; transform: rotate(180deg)"\r\n                viewBox="0 0 1024 1024"\r\n                @click="setPhoneSize(\'height\', 10)"\r\n              >\r\n                <path\r\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\r\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n          </fieldset>\r\n          <fieldset style="border: 1px solid; padding: 5px 10px 10px; width: 100%">\r\n            <legend>有新消息时:</legend>\r\n            <div style="display: flex; align-items: center; gap: 5px">\r\n              <span>有格式自动弹出</span>\r\n              <input v-model="phone_settings.autoShow" checked="" type="checkbox" style="width: 1rem; height: 1rem" />\r\n            </div>\r\n            <div style="display: flex; align-items: center; margin-top: 5px; gap: 5px">\r\n              <span>无格式自动隐藏</span>\r\n              <input v-model="phone_settings.autoHide" checked="" type="checkbox" style="width: 1rem; height: 1rem" />\r\n            </div>\r\n            <div style="font-size: 12px; color: gray; margin-top: 10px">由于改了格式所以此项无效</div>\r\n          </fieldset>\r\n          <fieldset style="border: 1px solid; padding: 5px 10px 10px; width: 100%">\r\n            <legend>点击发送按钮时:</legend>\r\n            <div style="display: flex; align-items: start">\r\n              <span>直接发送消息</span>\r\n              <input v-model="phone_settings.sendModel" type="radio" value="normal" />\r\n            </div>\r\n            <div style="display: flex; align-items: start; margin-top: 5px">\r\n              <span>把消息添加到酒馆输入框</span>\r\n              <input v-model="phone_settings.sendModel" type="radio" value="尾附" />\r\n            </div>\r\n          </fieldset>\r\n        </div>\r\n        <div class="chat-setting-footer">\r\n          <button id="save-setting-btn" @click="closeSetting(true)">保存</button>\r\n          <button id="cancel-setting-btn" @click="closeSetting(false)">取消</button>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n\r\n    <transition name="fade">\r\n      <div v-show="sharedState.QQ.panel || sharedState.phone.panel" class="popup-overlay"></div>\r\n    </transition>\r\n    <transition name="popup">\r\n      <div v-show="sharedState.QQ.panel" class="QQ_chars-panel">\r\n        <div style="display: flex; align-items: center; margin-bottom: 10px">\r\n          <div style="text-align: center; font-size: 24px">角色管理面板</div>\r\n          <svg\r\n            style="margin-left: auto"\r\n            class="close-setting-btn"\r\n            viewBox="0 0 1024 1024"\r\n            width="24"\r\n            height="24"\r\n            @click="sharedState.QQ.panel = false"\r\n          >\r\n            <path\r\n              d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\r\n              fill="#666666"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n\r\n        <div class="QQ_chars-role-list" style="margin-bottom: 20px">\r\n          <div v-if="chars.length == 0" class="QQ_chars-empty-state">\r\n            <svg\r\n              style="margin: auto"\r\n              width="40"\r\n              height="40"\r\n              viewBox="0 0 24 24"\r\n              fill="none"\r\n              xmlns="http://www.w3.org/2000/svg"\r\n            >\r\n              <path\r\n                d="M12 4.35418C12.7329 3.52375 13.8053 3 15 3C17.2091 3 19 4.79086 19 7C19 9.20914 17.2091 11 15 11C13.8053 11 12.7329 10.4762 12 9.64582M15 21H3V20C3 16.6863 5.68629 14 9 14C12.3137 14 15 16.6863 15 20V21ZM15 21H21V20C21 16.6863 18.3137 14 15 14C13.9071 14 12.8826 14.2922 12 14.8027"\r\n                stroke="#888"\r\n                stroke-width="2"\r\n                stroke-linecap="round"\r\n                stroke-linejoin="round"\r\n              />\r\n            </svg>\r\n            <p class="QQ_chars-empty-text">暂无角色，请添加新角色</p>\r\n          </div>\r\n          <div v-for="value of chars" :key="value.id" class="QQ_chars-role-item">\r\n            <div class="QQ_chars-role-info">\r\n              <div class="QQ_chars-role-name" :title="value.name">{{ value.name }}</div>\r\n              <div :class="`QQ_chars-role-type ${value.class}`">{{ value.showtype }}</div>\r\n            </div>\r\n            <button class="QQ_chars-delete-btn" @click="removeChar(value)">删除</button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="QQ_chars-add-role-form">\r\n          <h3 class="QQ_chars-form-title">添加新角色</h3>\r\n          <div class="QQ_chars-form-row">\r\n            <label class="QQ_chars-form-label" for="roleName">角色名称:</label>\r\n            <div style="flex: 1 1 0%">\r\n              <input\r\n                id="roleName"\r\n                v-model="addCharInfo.name"\r\n                class="QQ_chars-form-input"\r\n                type="text"\r\n                placeholder="输入角色名称"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class="QQ_chars-form-row">\r\n            <label class="QQ_chars-form-label" for="roleType">角色类型:</label>\r\n            <div style="flex: 1 1 0%">\r\n              <select v-model="addCharInfo.type" class="QQ_chars-form-select">\r\n                <option value="friend">好友</option>\r\n                <option value="Group">群聊</option>\r\n                <option value="npc">NPC</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <button id="addRoleBtn" class="QQ_chars-submit-btn" @click="addChar">添加角色</button>\r\n        </div>\r\n\r\n        <div style="font-size: 12px; color: gray; margin-top: 10px">修改角色后退出聊天重进,让手机重新加载</div>\r\n        <div style="font-size: 12px; color: gray; margin-top: 3px">角色其他信息点进聊天框右上角修改</div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, ref, watch } from \'vue\';\r\nimport { IndexedDB, MyINI, sharedState } from \'../shared-state\';\r\nimport chat_page from \'./chat_page.vue\';\r\nimport home_chars from \'./home_chars.vue\';\r\nimport post from \'./post.vue\';\r\n// 添加这一行，确保面板初始状态是关闭的\r\nonMounted(() => {\r\n  sharedState.phone.panel = false;\r\n});\r\n\r\nconst chars = computed(() => {\r\n  const list = [];\r\n  const Sections = sharedState.QQ.charini.getAllSections();\r\n\r\n  // 遍历所有角色（包括不在配置文件中的）\r\n  for (const char in sharedState.QQ.chars) {\r\n    const obj = {};\r\n    obj.id = char;\r\n    obj.name = sharedState.QQ.chars[char].name;\r\n\r\n    // 检查是否在配置文件中\r\n    const inConfig = Sections.includes(char);\r\n\r\n    if (inConfig) {\r\n      // 从配置文件读取类型\r\n      const chartype = sharedState.QQ.charini.readValue(char, \'类型\');\r\n      if (chartype == \'群聊\') {\r\n        obj.chartype = \'Group\';\r\n        obj.showtype = \'群聊\';\r\n        obj.class = \'QQ_chars-type-group\';\r\n      } else if (chartype.toLowerCase() == \'npc\') {\r\n        obj.chartype = \'npc\';\r\n        obj.showtype = \'npc\';\r\n        obj.class = \'QQ_chars-type-npc\';\r\n      } else {\r\n        obj.chartype = \'friend\';\r\n        obj.showtype = \'好友\';\r\n        obj.class = \'QQ_chars-type-friend\';\r\n      }\r\n    } else {\r\n      // 不在配置文件中的角色，从内存中读取\r\n      const charData = sharedState.QQ.chars[char];\r\n      obj.chartype = charData.chartype || \'friend\';\r\n\r\n      if (obj.chartype == \'Group\') {\r\n        obj.showtype = \'群聊(临时)\';\r\n        obj.class = \'QQ_chars-type-group-temp\';\r\n      } else if (obj.chartype == \'npc\') {\r\n        obj.showtype = \'NPC(临时)\';\r\n        obj.class = \'QQ_chars-type-npc-temp\';\r\n      } else {\r\n        obj.showtype = \'好友(临时)\';\r\n        obj.class = \'QQ_chars-type-friend-temp\';\r\n      }\r\n    }\r\n\r\n    obj.inConfig = inConfig; // 标记是否在配置文件中\r\n    list.push(obj);\r\n  }\r\n  return list;\r\n});\r\n\r\nconst addCharInfo = ref({\n  name: \'\',\n  type: \'friend\',\n});\nlet backupColor = JSON.parse(JSON.stringify(sharedState.phone.colorSettings));\nlet backupWallpaper = sharedState.phone.wallpaper || \'\';\nlet backupIcons = JSON.parse(JSON.stringify(sharedState.phone.icons));\nconst phone_settings = ref({\n  background: sharedState.phone.colorSettings.background,\n  border: sharedState.phone.colorSettings.border,\n  button: sharedState.phone.colorSettings.button,\n  autoShow: sharedState.phone.autoShow,\n  autoHide: sharedState.phone.autoHide,\n  userBubble: sharedState.QQ.default.bubble,\n  userText: sharedState.QQ.default.text,\n  sendModel: sharedState.phone.sendModel,\n  wallpaper: sharedState.phone.wallpaper,\n  icons: JSON.parse(JSON.stringify(sharedState.phone.icons)),\n});\n\r\nwatch(\r\n  () => sharedState.phone.panel,\r\n  open => {\n    if (open) {\n      backupColor = JSON.parse(JSON.stringify(sharedState.phone.colorSettings));\n      backupWallpaper = sharedState.phone.wallpaper || \'\';\n      backupIcons = JSON.parse(JSON.stringify(sharedState.phone.icons));\n      phone_settings.value.background = sharedState.phone.colorSettings.background;\n      phone_settings.value.border = sharedState.phone.colorSettings.border;\n      phone_settings.value.button = sharedState.phone.colorSettings.button;\n      phone_settings.value.autoShow = sharedState.phone.autoShow;\n      phone_settings.value.autoHide = sharedState.phone.autoHide;\n      phone_settings.value.userBubble = sharedState.QQ.default.bubble;\n      phone_settings.value.userText = sharedState.QQ.default.text;\n      phone_settings.value.sendModel = sharedState.phone.sendModel;\n      phone_settings.value.wallpaper = sharedState.phone.wallpaper;\n      phone_settings.value.icons = JSON.parse(JSON.stringify(sharedState.phone.icons));\n    }\n  },\n);\n\r\nwatch(\r\n  () => phone_settings.value.wallpaper,\r\n  val => {\r\n    sharedState.phone.wallpaper = (val || \'\').trim();\r\n  },\r\n);\r\n\r\nfunction removeChar(char) {\r\n  const result = confirm(`确定要删除角色：${char.name}吗？`);\r\n  if (!result) {\r\n    return;\r\n  }\r\n\r\n  console.log(`删除角色:${char.id}`);\r\n\r\n  // 如果在配置文件中，从配置文件删除\r\n  if (char.inConfig) {\r\n    sharedState.QQ.charini.removeSection(char.id);\r\n  }\r\n\r\n  // 从内存中删除\r\n  if (char.id in sharedState.QQ.chars) {\r\n    delete sharedState.QQ.chars[char.id];\r\n  }\r\n\r\n  // 删除聊天记录（可选）\r\n  if (char.id in sharedState.QQ.chathistory) {\r\n    delete sharedState.QQ.chathistory[char.id];\r\n  }\r\n\r\n  // 保存更改\r\n  sharedState.QQ.saveChars();\r\n}\r\n\r\nfunction addChar() {\r\n  if (!addCharInfo.value.name) {\r\n    return;\r\n  }\r\n  let id = addCharInfo.value.name;\r\n  if (addCharInfo.value.type == \'Group\') {\r\n    const Sections = sharedState.QQ.charini.getAllSections();\r\n    while (true) {\r\n      id = \'\';\r\n      for (let i = 0; i < 6; i++) {\r\n        id += Math.floor(Math.random() * 10);\r\n      }\r\n      if (!Sections.includes(id)) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (addCharInfo.value.type == \'Group\' || addCharInfo.value.type == \'npc\') {\r\n    sharedState.QQ.charini.writeValue(id, \'类型\', addCharInfo.value.type == \'Group\' ? \'群聊\' : \'npc\');\r\n    if (addCharInfo.value.type == \'Group\') {\r\n      sharedState.QQ.charini.writeValue(id, \'群名\', addCharInfo.value.name);\r\n    }\r\n  } else {\r\n    sharedState.QQ.charini.writeValue(id, \'类型\', \'好友\');\r\n  }\r\n\r\n  sharedState.QQ.chars[id] = {\r\n    name: addCharInfo.value.name,\r\n    chartype: addCharInfo.value.type,\r\n    head: \'\',\r\n    background: \'\',\r\n    bubble: \'\',\r\n    text: \'\',\r\n  };\r\n\r\n  addCharInfo.value.name = \'\';\r\n  sharedState.QQ.saveChars();\r\n}\r\n\r\nasync function closeSetting(save) {\n  sharedState.phone.panel = false;\n  if (!save) {\n    sharedState.phone.colorSettings = JSON.parse(JSON.stringify(backupColor));\n    phone_settings.value.autoHide = sharedState.phone.autoHide;\n    phone_settings.value.autoShow = sharedState.phone.autoShow;\n    phone_settings.value.userBubble = sharedState.QQ.default.bubble;\n    phone_settings.value.userText = sharedState.QQ.default.text;\n    phone_settings.value.sendModel = sharedState.phone.sendModel;\n    sharedState.phone.wallpaper = backupWallpaper;\n    phone_settings.value.wallpaper = backupWallpaper;\n    sharedState.phone.icons = JSON.parse(JSON.stringify(backupIcons));\n    phone_settings.value.icons = JSON.parse(JSON.stringify(backupIcons));\n    return;\n  }\n\n  sharedState.phone.autoHide = phone_settings.value.autoHide;\n  sharedState.phone.autoShow = phone_settings.value.autoShow;\n  sharedState.QQ.default.bubble = phone_settings.value.userBubble;\n  sharedState.QQ.default.text = phone_settings.value.userText;\n  sharedState.phone.sendModel = phone_settings.value.sendModel;\n  sharedState.phone.wallpaper = (phone_settings.value.wallpaper || \'\').trim();\n  sharedState.phone.icons = JSON.parse(JSON.stringify(phone_settings.value.icons || {}));\n  // 保存到世界书\n  try {\n    const entry = sharedState.ST.getEntry([\'手机-基本设置\'], true);\n    if (!entry) {\n      alert(\'手机-基本设置条目不存在\');\n      return;\n    }\n    const ini = new MyINI();\n    ini.loadText(entry.content);\n    ini.writeValue(\'基本设置\', \'外框颜色\', sharedState.phone.colorSettings.border);\n    ini.writeValue(\'基本设置\', \'内框颜色\', sharedState.phone.colorSettings.background);\n    ini.writeValue(\'基本设置\', \'侧边按钮\', sharedState.phone.colorSettings.button);\n    ini.writeValue(\'基本设置\', \'主屏壁纸\', sharedState.phone.wallpaper);\n    ini.writeValue(\'基本设置\', \'图标-QQ\', sharedState.phone.icons.QQ || \'\');\n    ini.writeValue(\'基本设置\', \'图标-RedNote\', sharedState.phone.icons.RedNote || \'\');\n    ini.writeValue(\'基本设置\', \'图标-Douyin\', sharedState.phone.icons.Douyin || \'\');\n    ini.writeValue(\'基本设置\', \'图标-Tinder\', sharedState.phone.icons.Tinder || \'\');\n    ini.writeValue(\'基本设置\', \'图标-Instagram\', sharedState.phone.icons.Instagram || \'\');\n    ini.writeValue(\'基本设置\', \'自动显示\', sharedState.phone.autoShow);\n    ini.writeValue(\'基本设置\', \'自动隐藏\', sharedState.phone.autoHide);\n    ini.writeValue(\'基本设置\', \'气泡颜色\', sharedState.QQ.default.bubble);\n    ini.writeValue(\'基本设置\', \'字体颜色\', sharedState.QQ.default.text);\n    ini.writeValue(\'基本设置\', \'发送模式\', sharedState.phone.sendModel);\n    ini.writeValue(\'基本设置\', \'导航按键\', sharedState.phone.navButton);\n    console.log(`${ini.getAllText()}`);\n    await setLorebookEntries(sharedState.ST.worldName, [{ uid: entry.uid, content: ini.getAllText() }]);\n  } catch (e) {\n    console.error(`基本设置保存到世界书失败!${e}`);\n  }\n\n  // 保存手机尺寸\n  IndexedDB.setData(\'width\', sharedState.phone.width.now);\n  IndexedDB.setData(\'height\', sharedState.phone.height.now);\n  IndexedDB.setData(\'navButton\', sharedState.phone.navButton);\n}\n\nfunction setPhoneSize(sizeType, change) {\n  const minwidth = sharedState.phone.width.min;\r\n  const maxwidth = sharedState.phone.width.max;\r\n  const minheight = sharedState.phone.height.min;\r\n  const maxheight = sharedState.phone.height.max;\r\n\r\n  if (sizeType == \'width\') {\r\n    if (sharedState.phone.width.now + change < minwidth) {\r\n      sharedState.phone.width.now = minwidth;\r\n    } else if (sharedState.phone.width.now + change > maxwidth) {\r\n      sharedState.phone.width.now = maxwidth;\r\n    } else {\r\n      sharedState.phone.width.now += change;\r\n    }\r\n  } else if (sizeType == \'height\') {\r\n    if (sharedState.phone.height.now + change < minheight) {\r\n      sharedState.phone.height.now = minheight;\r\n    } else if (sharedState.phone.height.now + change > maxheight) {\r\n      sharedState.phone.height.now = maxheight;\r\n    } else {\r\n      sharedState.phone.height.now += change;\r\n    }\r\n  }\r\n}\r\n\r\n// function restoreColor() {}\r\n<\/script>\r\n\r\n<style scoped>\r\n/* 遮罩层 */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.2s ease;\r\n}\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n.popup-enter-active,\r\n.popup-leave-active {\r\n  transition:\r\n    opacity 0.2s ease,\r\n    transform 0.2s ease;\r\n}\r\n.popup-enter-from,\r\n.popup-leave-to {\r\n  opacity: 0;\r\n  transform: translate(-50%, -46%) scale(0.96); /* 轻缩小+上移 */\r\n}\r\n.popup-enter-to,\r\n.popup-leave-from {\r\n  opacity: 1;\r\n  transform: translate(-50%, -50%) scale(1);\r\n}\r\n</style>\r\n\r\n<style src="./chat.css"></style>\r\n\r\n<style>\r\n.QQ_chars-panel {\r\n  /* max-width: 300px; */\r\n  width: 80%;\r\n  background-color: white;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\r\n  padding: 15px;\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1000;\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-height: 80%;\r\n  height: auto;\r\n  border: 1px solid #eaeaea;\r\n  color: black;\r\n\r\n  .QQ_chars-form-label {\r\n    color: black !important;\r\n  }\r\n}\r\n\r\n.QQ_chars-title {\r\n  text-align: center;\r\n  margin-bottom: 15px;\r\n  color: #2c3e50;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n}\r\n\r\n.QQ_chars-role-list {\r\n  margin-bottom: 20px;\r\n  overflow-y: auto;\r\n  max-height: 50%;\r\n  height: auto;\r\n  padding: 0 10px;\r\n}\r\n\r\n.QQ_chars-role-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.QQ_chars-role-item:hover {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.QQ_chars-role-info {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.QQ_chars-role-name {\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.QQ_chars-role-type {\r\n  font-size: 12px;\r\n  padding: 4px 8px;\r\n  border-radius: 12px;\r\n  color: white;\r\n}\r\n\r\n.QQ_chars-type-friend {\r\n  background-color: #4caf50;\r\n}\r\n\r\n.QQ_chars-type-group {\r\n  background-color: #2196f3;\r\n}\r\n\r\n.QQ_chars-type-npc {\r\n  background-color: #ff9800;\r\n}\r\n\r\n.QQ_chars-type-select {\r\n  width: 100%;\r\n  padding: 4px 6px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n}\r\n.QQ_chars-type-friend-temp {\r\n  background-color: #81c784;\r\n  opacity: 0.8;\r\n}\r\n\r\n.QQ_chars-type-group-temp {\r\n  background-color: #64b5f6;\r\n  opacity: 0.8;\r\n}\r\n\r\n.QQ_chars-type-npc-temp {\r\n  background-color: #ffb74d;\r\n  opacity: 0.8;\r\n}\r\n\r\n.QQ_chars-delete-btn {\r\n  background-color: #f44336;\r\n  color: white;\r\n  border: none;\r\n  padding: 4px 8px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  margin-left: 8px;\r\n  transition: background-color 0.2s;\r\n  height: 26px;\r\n}\r\n\r\n.QQ_chars-delete-btn:hover {\r\n  background-color: #d32f2f;\r\n}\r\n\r\n.QQ_chars-add-role-form {\r\n  background-color: #f9f9f9;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  border: 1px solid #eaeaea;\r\n}\r\n\r\n.QQ_chars-form-title {\r\n  margin-bottom: 10px;\r\n  color: #2c3e50;\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n}\r\n\r\n.QQ_chars-form-row {\r\n  display: flex;\r\n  margin-bottom: 8px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.QQ_chars-form-label {\r\n  font-size: 12px;\r\n  width: 70px;\r\n}\r\n\r\n.QQ_chars-form-input,\r\n.QQ_chars-form-select {\r\n  padding: 5px 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 3px;\r\n  font-size: 12px;\r\n  width: 100%;\r\n}\r\n\r\n.QQ_chars-form-input:focus,\r\n.QQ_chars-form-select:focus {\r\n  outline: none;\r\n  border-color: #2196f3;\r\n}\r\n\r\n.QQ_chars-submit-btn {\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  padding: 6px 12px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n  width: 100%;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.QQ_chars-submit-btn:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.QQ_chars-empty-state {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n  color: #888;\r\n}\r\n\r\n.QQ_chars-empty-text {\r\n  margin-top: 5px;\r\n  font-size: 12px;\r\n}\r\n</style>\r\n'],sourceRoot:''}]);const s=r},6924:(e,n,t)=>{var a=t(5303);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('ed74cc1c',a,!1,{ssrId:!0})},6934:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.douyin-container[data-v-8ace24c2]{width:100%;height:100%;background-color:#000;position:relative;overflow:hidden;color:#fff;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Helvetica,Arial,sans-serif}.home-content[data-v-8ace24c2]{width:100%;height:100%;position:relative}.video-container[data-v-8ace24c2]{width:100%;height:100%;transition:transform 0.3s cubic-bezier(0.2,0,0.2,1)}.video-item[data-v-8ace24c2]{width:100%;height:100%;position:relative;background-color:#1a1a1a}.video-background[data-v-8ace24c2]{width:100%;height:100%;background-size:cover;background-position:center;background-repeat:no-repeat;display:flex;align-items:center;justify-content:center}.video-placeholder[data-v-8ace24c2]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#000}.text-video-content[data-v-8ace24c2]{width:80%;font-size:24px;line-height:1.5;text-align:center;color:#fff;font-weight:bold}.video-overlay-text[data-v-8ace24c2]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;pointer-events:none}.text-video-content-overlay[data-v-8ace24c2]{width:80%;font-size:24px;line-height:1.5;text-align:center;color:#fff;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,0.8)}.sidebar-right[data-v-8ace24c2]{position:absolute;right:10px;bottom:120px;display:flex;flex-direction:column;align-items:center;gap:20px;z-index:10}.sidebar-item[data-v-8ace24c2]{display:flex;flex-direction:column;align-items:center}.count[data-v-8ace24c2]{font-size:13px;margin-top:5px;text-shadow:0 1px 1px rgba(0,0,0,0.3)}.avatar-container[data-v-8ace24c2]{position:relative;margin-bottom:15px}.avatar[data-v-8ace24c2]{width:48px;height:48px;border-radius:50%;border:2px solid #fff;background-size:cover}.follow-icon[data-v-8ace24c2]{position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);width:20px;height:20px;background-color:#fe2c55;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;line-height:1}.record-container[data-v-8ace24c2]{margin-top:10px}.record-bg[data-v-8ace24c2]{width:48px;height:48px;background:#222;border-radius:50%;display:flex;align-items:center;justify-content:center;border:8px solid #111;animation:rotate-8ace24c2 5s linear infinite}.record-img[data-v-8ace24c2]{width:24px;height:24px;border-radius:50%;background-size:cover}@keyframes rotate-8ace24c2{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.bottom-info[data-v-8ace24c2]{position:absolute;left:10px;bottom:80px;width:75%;z-index:10;text-align:left}.username[data-v-8ace24c2]{font-size:17px;font-weight:600;margin-bottom:8px;text-shadow:0 1px 1px rgba(0,0,0,0.5)}.description[data-v-8ace24c2]{font-size:15px;line-height:1.4;margin-bottom:10px;text-shadow:0 1px 1px rgba(0,0,0,0.5);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.music-info[data-v-8ace24c2]{display:flex;align-items:center;gap:5px}.music-text-container[data-v-8ace24c2]{width:150px;overflow:hidden;white-space:nowrap}.music-text[data-v-8ace24c2]{font-size:14px;animation:scroll-8ace24c2 10s linear infinite}@keyframes scroll-8ace24c2{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}.top-nav[data-v-8ace24c2]{position:absolute;top:40px;left:0;width:100%;display:flex;justify-content:center;align-items:center;gap:20px;z-index:20;font-size:16px;color:#ccc;pointer-events:none}.nav-item[data-v-8ace24c2]{pointer-events:auto}.nav-item.active[data-v-8ace24c2]{color:#fff;font-weight:600;position:relative}.nav-item.active[data-v-8ace24c2]::after{content:\'\';position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);width:20px;height:2px;background-color:#fff}.search-icon[data-v-8ace24c2]{position:absolute;right:20px;pointer-events:auto}.back-icon-fixed[data-v-8ace24c2]{position:absolute;top:40px;left:10px;z-index:100;filter:drop-shadow(0 0 2px rgba(0,0,0,0.5));cursor:pointer}.bottom-tabbar[data-v-8ace24c2]{position:absolute;bottom:0;left:0;width:100%;height:50px;display:flex;justify-content:space-around;align-items:center;background:linear-gradient(to top,rgba(0,0,0,0.8),transparent);z-index:20;font-size:16px;color:#ccc;padding-bottom:20px}.tab-item[data-v-8ace24c2]{position:relative;z-index:30}.tab-item.active[data-v-8ace24c2]{color:#fff;font-weight:600}.add-btn[data-v-8ace24c2]{width:45px;height:30px;background-color:#fff;border-radius:8px;display:flex;align-items:center;justify-content:center;position:relative;z-index:30}.add-btn[data-v-8ace24c2]::before,.add-btn[data-v-8ace24c2]::after{content:\'\';position:absolute;top:0;width:4px;height:100%;border-radius:2px}.add-btn[data-v-8ace24c2]::before{left:0;background-color:#0ff}.add-btn[data-v-8ace24c2]::after{right:0;background-color:#f0f}.add-icon[data-v-8ace24c2]{color:#000;font-size:20px;font-weight:bold;z-index:1;background-color:#fff;width:80%;height:100%;display:flex;align-items:center;justify-content:center}.me-page[data-v-8ace24c2]{position:absolute;top:0;left:0;width:100%;height:calc(100% - 70px);background-color:#161823;z-index:10;overflow-y:auto}.me-header[data-v-8ace24c2]{position:relative;padding-top:150px;margin-bottom:20px}.me-bg[data-v-8ace24c2]{position:absolute;top:0;left:0;width:100%;height:150px;background-color:#2e3038}.me-avatar[data-v-8ace24c2]{width:90px;height:90px;border-radius:50%;border:4px solid #161823;margin-left:20px;margin-top:-45px;position:relative;z-index:1;background-size:cover;background-position:center}.edit-avatar-hint[data-v-8ace24c2]{position:absolute;bottom:0;right:0;background:rgba(0,0,0,0.6);border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;font-size:12px;cursor:pointer}.me-info[data-v-8ace24c2]{padding:10px 20px}.edit-icon[data-v-8ace24c2]{font-size:14px;color:#888;margin-left:5px;cursor:pointer}.name-input[data-v-8ace24c2]{background:transparent;border:none;border-bottom:1px solid #fe2c55;color:#fff;font-size:24px;font-weight:bold;width:200px;outline:none}.input-dialog[data-v-8ace24c2]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);z-index:100;display:flex;align-items:center;justify-content:center}.dialog-content[data-v-8ace24c2]{background-color:#252525;border-radius:8px;padding:20px;width:80%;max-width:300px}.dialog-title[data-v-8ace24c2]{font-size:18px;font-weight:bold;margin-bottom:15px;color:#fff;text-align:center}.dialog-input[data-v-8ace24c2]{width:100%;padding:10px;background-color:#333;border:1px solid #444;border-radius:4px;color:#fff;margin-bottom:20px;outline:none}.dialog-buttons[data-v-8ace24c2]{display:flex;justify-content:space-between}.dialog-buttons button[data-v-8ace24c2]{padding:8px 20px;border:none;border-radius:4px;cursor:pointer;background-color:#444;color:#fff}.dialog-buttons button.confirm[data-v-8ace24c2]{background-color:#fe2c55}.me-name[data-v-8ace24c2]{font-size:24px;font-weight:bold;margin-bottom:5px}.me-douyin-id[data-v-8ace24c2]{font-size:12px;color:#888}.me-stats[data-v-8ace24c2]{display:flex;gap:20px;padding:0 20px;margin-bottom:20px}.stat-item[data-v-8ace24c2]{color:#888;font-size:14px}.stat-item span[data-v-8ace24c2]{color:#fff;font-weight:bold;font-size:16px;margin-right:5px}.me-tabs[data-v-8ace24c2]{display:flex;justify-content:space-around;border-bottom:1px solid #333;padding-bottom:10px}.me-tab[data-v-8ace24c2]{color:#888;font-size:16px;padding-bottom:5px}.me-tab.active[data-v-8ace24c2]{color:#fff;font-weight:bold;border-bottom:2px solid #fe2c55}.me-content[data-v-8ace24c2]{padding:50px 0;text-align:center;color:#666}.post-dialog[data-v-8ace24c2]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#161823;z-index:50;display:flex;flex-direction:column}.post-header[data-v-8ace24c2]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;border-bottom:1px solid #333}.post-title[data-v-8ace24c2]{font-weight:bold;font-size:18px}.post-submit[data-v-8ace24c2]{color:#fe2c55;font-weight:bold}.post-content[data-v-8ace24c2]{flex:1;padding:20px;display:flex;flex-direction:column;gap:20px}.input-group[data-v-8ace24c2]{display:flex;flex-direction:column;gap:8px}.input-group label[data-v-8ace24c2]{color:#888;font-size:14px}.input-group input[data-v-8ace24c2],.input-group textarea[data-v-8ace24c2]{width:100%;background-color:#252525;border:none;border-radius:4px;color:#fff;font-size:16px;padding:10px;outline:none}.input-group textarea[data-v-8ace24c2]{height:150px;resize:none}.friends-page[data-v-8ace24c2]{position:absolute;top:0;left:0;width:100%;height:calc(100% - 70px);background-color:#161823;z-index:10;overflow-y:auto}.friends-header[data-v-8ace24c2]{display:flex;justify-content:space-between;align-items:center;padding:40px 20px 10px;position:sticky;top:0;background-color:#161823;z-index:5}.friends-title[data-v-8ace24c2]{font-size:20px;font-weight:bold}.friends-list[data-v-8ace24c2]{padding:0 10px}.friend-item[data-v-8ace24c2]{display:flex;align-items:center;padding:12px 10px}.friend-item[data-v-8ace24c2]:active{background-color:rgba(255,255,255,0.05)}.friend-avatar[data-v-8ace24c2]{width:50px;height:50px;border-radius:50%;background-size:cover;background-position:center;margin-right:15px;border:1px solid #333}.friend-info[data-v-8ace24c2]{flex:1;overflow:hidden}.friend-name-row[data-v-8ace24c2]{display:flex;align-items:center;gap:5px;margin-bottom:4px}.friend-name[data-v-8ace24c2]{font-size:16px;font-weight:600;color:#fff}.friend-douyin-id[data-v-8ace24c2]{font-size:12px;color:#888}.message-page[data-v-8ace24c2]{position:absolute;top:0;left:0;width:100%;height:calc(100% - 70px);background-color:#161823;z-index:10;overflow-y:auto}.message-header[data-v-8ace24c2]{display:flex;justify-content:space-between;align-items:center;padding:40px 20px 10px;position:sticky;top:0;background-color:#161823;z-index:5;border-bottom:1px solid #222}.message-title[data-v-8ace24c2]{font-size:18px;font-weight:bold}.message-list[data-v-8ace24c2]{padding:0}.message-item[data-v-8ace24c2]{display:flex;align-items:center;padding:12px 15px}.message-item[data-v-8ace24c2]:active{background-color:rgba(255,255,255,0.05)}.message-avatar[data-v-8ace24c2]{width:50px;height:50px;border-radius:50%;background-size:cover;background-position:center;margin-right:15px;position:relative;border:1px solid #333}.unread-badge[data-v-8ace24c2]{position:absolute;top:-2px;right:-2px;background-color:#fe2c55;color:#fff;font-size:10px;min-width:16px;height:16px;border-radius:8px;display:flex;align-items:center;justify-content:center;padding:0 4px}.message-info[data-v-8ace24c2]{flex:1;overflow:hidden}.message-name-row[data-v-8ace24c2]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.message-name[data-v-8ace24c2]{font-size:16px;font-weight:500;color:#fff}.message-time[data-v-8ace24c2]{font-size:12px;color:#666}.message-content-preview[data-v-8ace24c2]{font-size:13px;color:#999;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.profile-page[data-v-8ace24c2]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#161823;z-index:60;overflow-y:auto}.back-btn[data-v-8ace24c2]{position:absolute;top:40px;left:10px;z-index:70;padding:10px}.douyin-id-input[data-v-8ace24c2]{background:transparent;border:none;border-bottom:1px solid #fe2c55;color:#fff;width:120px;font-size:12px;outline:none}.profile-actions[data-v-8ace24c2]{display:flex;justify-content:center;gap:10px;margin-bottom:20px;padding:0 20px}.action-btn[data-v-8ace24c2]{flex:1;height:36px;display:flex;align-items:center;justify-content:center;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer}.message-btn[data-v-8ace24c2]{background-color:#fe2c55;color:#fff}.works-grid[data-v-8ace24c2]{display:grid;grid-template-columns:repeat(3,1fr);gap:1px}.work-item[data-v-8ace24c2]{aspect-ratio:3/4;position:relative;background-color:#222}.work-cover[data-v-8ace24c2]{width:100%;height:100%;background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.work-title-preview[data-v-8ace24c2]{font-size:12px;padding:5px;text-align:center;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.work-likes[data-v-8ace24c2]{position:absolute;bottom:5px;left:5px;font-size:12px;display:flex;align-items:center;gap:3px;text-shadow:0 1px 1px rgba(0,0,0,0.5)}.comment-drawer-mask[data-v-8ace24c2]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);z-index:200;display:flex;flex-direction:column;justify-content:flex-end}.comment-drawer[data-v-8ace24c2]{background-color:#161823;border-top-left-radius:12px;border-top-right-radius:12px;height:70%;width:100%;display:flex;flex-direction:column;position:relative;animation:slideUp-8ace24c2 0.3s ease-out}@keyframes slideUp-8ace24c2{from{transform:translateY(100%)}to{transform:translateY(0)}}.comment-header[data-v-8ace24c2]{padding:15px;text-align:center;position:relative;border-bottom:1px solid #222}.comment-title[data-v-8ace24c2]{font-size:14px;font-weight:bold}.comment-close[data-v-8ace24c2]{position:absolute;right:15px;top:12px;font-size:24px;color:#666}.comment-list[data-v-8ace24c2]{flex:1;overflow-y:auto;padding:15px}.comment-item[data-v-8ace24c2]{display:flex;margin-bottom:20px}.comment-avatar[data-v-8ace24c2]{width:32px;height:32px;border-radius:50%;background-size:cover;background-position:center;margin-right:10px;flex-shrink:0}.comment-content-container[data-v-8ace24c2]{flex:1;margin-right:10px}.comment-user[data-v-8ace24c2]{color:#888;font-size:13px;margin-bottom:4px}.comment-text[data-v-8ace24c2]{font-size:14px;line-height:1.4;margin-bottom:6px;color:#ddd}.reply-to[data-v-8ace24c2]{color:#999;margin-right:4px}.comment-meta[data-v-8ace24c2]{font-size:12px;color:#666;display:flex;gap:15px}.comment-like[data-v-8ace24c2]{display:flex;flex-direction:column;align-items:center;gap:2px;color:#666;font-size:12px}.empty-comments[data-v-8ace24c2]{text-align:center;color:#666;margin-top:50px;font-size:14px}.comment-input-wrapper[data-v-8ace24c2]{background-color:#161823;border-top:1px solid #222}.replying-banner[data-v-8ace24c2]{display:flex;justify-content:space-between;align-items:center;padding:8px 15px 0;font-size:12px;color:#999}.cancel-reply[data-v-8ace24c2]{font-size:16px;padding:0 5px;cursor:pointer}.comment-input-area[data-v-8ace24c2]{padding:10px 15px;display:flex;align-items:center;gap:10px}.comment-input-area input[data-v-8ace24c2]{flex:1;background-color:#252525;border:none;border-radius:18px;padding:10px 15px;color:#fff;font-size:14px;outline:none}.emoji-icon[data-v-8ace24c2]{font-size:24px;color:#666}\n','',{version:3,sources:['webpack://./src/柏柏同层/Douyin/Douyin.vue'],names:[],mappings:'AAyjCA,mCACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,iBAAkB,CAClB,eAAgB,CAChB,UAAW,CACX,yFACF,CAEA,+BACE,UAAW,CACX,WAAY,CACZ,iBACF,CAEA,kCACE,UAAW,CACX,WAAY,CACZ,mDACF,CAEA,6BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,wBACF,CAEA,mCACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,0BAA2B,CAC3B,2BAA4B,CAC5B,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,oCACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,qBACF,CAEA,qCACE,SAAU,CACV,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,UAAW,CACX,gBACF,CAEA,qCACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,mBACF,CAEA,6CACE,SAAU,CACV,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,UAAW,CACX,gBAAiB,CACjB,qCACF,CAEA,gCACE,iBAAkB,CAClB,UAAW,CACX,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,QAAS,CACT,UACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,kBACF,CAEA,wBACE,cAAe,CACf,cAAe,CACf,qCACF,CAEA,mCACE,iBAAkB,CAClB,kBACF,CAEA,yBACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,qBACF,CAEA,8BACE,iBAAkB,CAClB,YAAa,CACb,QAAS,CACT,0BAA2B,CAC3B,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,aACF,CAEA,mCACE,eACF,CAEA,4BACE,UAAW,CACX,WAAY,CACZ,eAAgB,CAChB,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,qBAAsB,CACtB,4CACF,CAEA,6BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBACF,CAEA,2BACE,KACE,sBACF,CACA,GACE,wBACF,CACF,CAEA,8BACE,iBAAkB,CAClB,SAAU,CACV,WAAY,CACZ,SAAU,CACV,UAAW,CACX,eACF,CAEA,2BACE,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,qCACF,CAEA,8BACE,cAAe,CACf,eAAgB,CAChB,kBAAmB,CACnB,qCAAyC,CACzC,mBAAoB,CACpB,oBAAqB,CACrB,2BAA4B,CAC5B,eACF,CAEA,6BACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,uCACE,WAAY,CACZ,eAAgB,CAChB,kBACF,CAEA,6BACE,cAAe,CACf,6CACF,CAEA,2BACE,GACE,0BACF,CACA,KACE,2BACF,CACF,CAGA,0BACE,iBAAkB,CAClB,QAAS,CACT,MAAO,CACP,UAAW,CACX,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,QAAS,CACT,UAAW,CACX,cAAe,CACf,UAAW,CACX,mBACF,CAEA,2BACE,mBACF,CAEA,kCACE,UAAW,CACX,eAAgB,CAChB,iBACF,CAEA,yCACE,UAAW,CACX,iBAAkB,CAClB,WAAY,CACZ,QAAS,CACT,0BAA2B,CAC3B,UAAW,CACX,UAAW,CACX,qBACF,CAEA,8BACE,iBAAkB,CAClB,UAAW,CACX,mBACF,CAGA,kCACE,iBAAkB,CAClB,QAAS,CACT,SAAU,CACV,WAAY,CACZ,2CAA+C,CAC/C,cACF,CAEA,gCACE,iBAAkB,CAClB,QAAS,CACT,MAAO,CACP,UAAW,CACX,WAAY,CACZ,YAAa,CACb,4BAA6B,CAC7B,kBAAmB,CACnB,8DAAoE,CACpE,UAAW,CACX,cAAe,CACf,UAAW,CACX,mBACF,CAEA,2BACE,iBAAkB,CAClB,UACF,CAEA,kCACE,UAAW,CACX,eACF,CAEA,0BACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,iBAAkB,CAClB,UACF,CAEA,mEAEE,UAAW,CACX,iBAAkB,CAClB,KAAM,CACN,SAAU,CACV,WAAY,CACZ,iBACF,CAEA,kCACE,MAAO,CACP,qBACF,CAEA,iCACE,OAAQ,CACR,qBACF,CAEA,2BACE,UAAW,CACX,cAAe,CACf,gBAAiB,CACjB,SAAU,CACV,qBAAsB,CACtB,SAAU,CACV,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBACF,CAGA,0BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,wBAAyB,CACzB,wBAAyB,CACzB,UAAW,CACX,eACF,CAEA,4BACE,iBAAkB,CAClB,iBAAkB,CAClB,kBACF,CAEA,wBACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,YAAa,CACb,wBACF,CAEA,4BACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,wBAAyB,CACzB,gBAAiB,CACjB,gBAAiB,CACjB,iBAAkB,CAClB,SAAU,CACV,qBAAsB,CACtB,0BACF,CAEA,mCACE,iBAAkB,CAClB,QAAS,CACT,OAAQ,CACR,0BAA8B,CAC9B,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,cAAe,CACf,cACF,CAEA,0BACE,iBACF,CAEA,4BACE,cAAe,CACf,UAAW,CACX,eAAgB,CAChB,cACF,CAEA,6BACE,sBAAuB,CACvB,WAAY,CACZ,+BAAgC,CAChC,UAAW,CACX,cAAe,CACf,gBAAiB,CACjB,WAAY,CACZ,YACF,CAGA,+BACE,cAAe,CACf,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,gCAAoC,CACpC,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,iCACE,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,SAAU,CACV,eACF,CAEA,+BACE,cAAe,CACf,gBAAiB,CACjB,kBAAmB,CACnB,UAAW,CACX,iBACF,CAEA,+BACE,UAAW,CACX,YAAa,CACb,qBAAsB,CACtB,qBAAsB,CACtB,iBAAkB,CAClB,UAAW,CACX,kBAAmB,CACnB,YACF,CAEA,iCACE,YAAa,CACb,6BACF,CAEA,wCACE,gBAAiB,CACjB,WAAY,CACZ,iBAAkB,CAClB,cAAe,CACf,qBAAsB,CACtB,UACF,CAEA,gDACE,wBACF,CAEA,0BACE,cAAe,CACf,gBAAiB,CACjB,iBACF,CAEA,+BACE,cAAe,CACf,UACF,CAEA,2BACE,YAAa,CACb,QAAS,CACT,cAAe,CACf,kBACF,CAEA,4BACE,UAAW,CACX,cACF,CAEA,iCACE,UAAW,CACX,gBAAiB,CACjB,cAAe,CACf,gBACF,CAEA,0BACE,YAAa,CACb,4BAA6B,CAC7B,4BAA6B,CAC7B,mBACF,CAEA,yBACE,UAAW,CACX,cAAe,CACf,kBACF,CAEA,gCACE,UAAW,CACX,gBAAiB,CACjB,+BACF,CAEA,6BACE,cAAe,CACf,iBAAkB,CAClB,UACF,CAGA,8BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,UAAW,CACX,YAAa,CACb,qBACF,CAEA,8BACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,iBAAkB,CAClB,4BACF,CAEA,6BACE,gBAAiB,CACjB,cACF,CAEA,8BACE,aAAc,CACd,gBACF,CAEA,+BACE,MAAO,CACP,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,8BACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,2EAEE,UAAW,CACX,wBAAyB,CACzB,WAAY,CACZ,iBAAkB,CAClB,UAAW,CACX,cAAe,CACf,YAAa,CACb,YACF,CAEA,uCACE,YAAa,CACb,WACF,CAGA,+BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,wBAAyB,CACzB,wBAAyB,CACzB,UAAW,CACX,eACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,sBAAuB,CACvB,eAAgB,CAChB,KAAM,CACN,wBAAyB,CACzB,SACF,CAEA,gCACE,cAAe,CACf,gBACF,CAEA,+BACE,cACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,iBAEF,CAEA,qCACE,uCACF,CAEA,gCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,iBAAkB,CAClB,qBACF,CAEA,8BACE,MAAO,CACP,eACF,CAEA,kCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,iBACF,CAEA,8BACE,cAAe,CACf,eAAgB,CAChB,UACF,CAEA,mCACE,cAAe,CACf,UACF,CAGA,+BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,wBAAyB,CACzB,wBAAyB,CACzB,UAAW,CACX,eACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,sBAAuB,CACvB,eAAgB,CAChB,KAAM,CACN,wBAAyB,CACzB,SAAU,CACV,4BACF,CAEA,gCACE,cAAe,CACf,gBACF,CAEA,+BACE,SACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,iBACF,CAEA,sCACE,uCACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,iBAAkB,CAClB,iBAAkB,CAClB,qBACF,CAEA,+BACE,iBAAkB,CAClB,QAAS,CACT,UAAW,CACX,wBAAyB,CACzB,UAAW,CACX,cAAe,CACf,cAAe,CACf,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,aACF,CAEA,+BACE,MAAO,CACP,eACF,CAEA,mCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,iBACF,CAEA,+BACE,cAAe,CACf,eAAgB,CAChB,UACF,CAEA,+BACE,cAAe,CACf,UACF,CAEA,0CACE,cAAe,CACf,UAAW,CACX,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAGA,+BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,UAAW,CACX,eACF,CAEA,2BACE,iBAAkB,CAClB,QAAS,CACT,SAAU,CACV,UAAW,CACX,YACF,CAEA,kCACE,sBAAuB,CACvB,WAAY,CACZ,+BAAgC,CAChC,UAAW,CACX,WAAY,CACZ,cAAe,CACf,YACF,CAEA,kCACE,YAAa,CACb,sBAAuB,CACvB,QAAS,CACT,kBAAmB,CACnB,cACF,CAEA,6BACE,MAAO,CACP,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,cACF,CAEA,8BACE,wBAAyB,CACzB,UACF,CAEA,6BACE,YAAa,CACb,mCAAqC,CACrC,OACF,CAEA,4BACE,gBAAiB,CACjB,iBAAkB,CAClB,qBACF,CAEA,6BACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CACtB,0BAA2B,CAC3B,YAAa,CACb,kBAAmB,CACnB,sBACF,CAEA,qCACE,cAAe,CACf,WAAY,CACZ,iBAAkB,CAClB,mBAAoB,CACpB,oBAAqB,CACrB,2BAA4B,CAC5B,eACF,CAEA,6BACE,iBAAkB,CAClB,UAAW,CACX,QAAS,CACT,cAAe,CACf,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,qCACF,CAGA,sCACE,cAAe,CACf,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,gCAAoC,CACpC,WAAY,CACZ,YAAa,CACb,qBAAsB,CACtB,wBACF,CAEA,iCACE,wBAAyB,CACzB,2BAA4B,CAC5B,4BAA6B,CAC7B,UAAW,CACX,UAAW,CACX,YAAa,CACb,qBAAsB,CACtB,iBAAkB,CAClB,wCACF,CAEA,4BACE,KACE,0BACF,CACA,GACE,uBACF,CACF,CAEA,iCACE,YAAa,CACb,iBAAkB,CAClB,iBAAkB,CAClB,4BACF,CAEA,gCACE,cAAe,CACf,gBACF,CAEA,gCACE,iBAAkB,CAClB,UAAW,CACX,QAAS,CACT,cAAe,CACf,UACF,CAEA,+BACE,MAAO,CACP,eAAgB,CAChB,YACF,CAEA,+BACE,YAAa,CACb,kBACF,CAEA,iCACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,iBAAkB,CAClB,aACF,CAEA,4CACE,MAAO,CACP,iBACF,CAEA,+BACE,UAAW,CACX,cAAe,CACf,iBACF,CAEA,+BACE,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,UACF,CAEA,2BACE,UAAW,CACX,gBACF,CAEA,+BACE,cAAe,CACf,UAAW,CACX,YAAa,CACb,QACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,kBAAmB,CACnB,OAAQ,CACR,UAAW,CACX,cACF,CAEA,iCACE,iBAAkB,CAClB,UAAW,CACX,eAAgB,CAChB,cACF,CAEA,wCACE,wBAAyB,CACzB,yBACF,CAEA,kCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,kBAAmB,CACnB,cAAe,CACf,UACF,CAEA,+BACE,cAAe,CACf,aAAc,CACd,cACF,CAEA,qCACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,2CACE,MAAO,CACP,wBAAyB,CACzB,WAAY,CACZ,kBAAmB,CACnB,iBAAkB,CAClB,UAAW,CACX,cAAe,CACf,YACF,CAEA,6BACE,cAAe,CACf,UACF',sourcesContent:['<template>\n  <div v-show="sharedState.phone.activeApp == \'Douyin\'" class="douyin-container">\n    <svg\n      v-show="currentTab === \'home\' && !showFriendProfile && !showChatDetailPage && !showPostDialog"\n      class="back-icon-fixed"\n      viewBox="0 0 1024 1024"\n      width="28"\n      height="28"\n      fill="#ffffff"\n      @click="sharedState.phone.activeApp = \'home\'"\n    >\n      <path\n        d="M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z"\n      />\n    </svg>\n\n    <div v-show="currentTab === \'home\'" class="home-content">\n      <div\n        ref="videoContainerRef"\n        class="video-container"\n        :style="{ transform: `translateY(-${currentTranslateY}px)` }"\n        @touchstart="handleTouchStart"\n        @touchmove="handleTouchMove"\n        @touchend="handleTouchEnd"\n      >\n        <div v-for="video in sharedState.Douyin.videos" :key="video.id" class="video-item">\n          <div\n            class="video-background"\n            :style="video.video ? `background-image: url(${video.video})` : \'background-color: #000\'"\n          >\n            <div v-if="!video.video" class="video-placeholder">\n              <div\n                v-if="video.content || video.textContent || video.title"\n                class="text-video-content"\n                v-html="warpHandle(video.content || video.textContent || video.title)"\n              ></div>\n              <span v-else style="font-size: 20px; color: #fff">视频加载中...</span>\n            </div>\n            <div v-else class="video-overlay-text">\n              <div\n                v-if="video.content || video.textContent"\n                class="text-video-content-overlay"\n                v-html="warpHandle(video.content || video.textContent)"\n              ></div>\n            </div>\n          </div>\n\n          <div class="sidebar-right">\n            <div class="sidebar-item avatar-container" @click.stop="goToProfile(video)">\n              <div class="avatar" :style="`background-image: url(\'${video.head}\')`"></div>\n              <div v-if="video.sender !== (sharedState.Douyin.userName || sharedState.ST.userName)" class="follow-icon">\n                +\n              </div>\n            </div>\n\n            <div class="sidebar-item" @click="toggleLike(video)">\n              <svg viewBox="0 0 1024 1024" width="35" height="35" :fill="video.isLike ? \'#fe2c55\' : \'#ffffff\'">\n                <path\n                  d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"\n                />\n              </svg>\n              <span class="count">{{ video.like }}</span>\n            </div>\n\n            <div class="sidebar-item" @click="showComments(video)">\n              <svg viewBox="0 0 1024 1024" width="35" height="35" fill="#ffffff">\n                <path\n                  d="M904 512c0 238-192 432-428 432a454.4 454.4 0 0 1-137.6-21.2L120 976l62.4-180.8A397.6 397.6 0 0 1 80 512C80 274 272 80 508 80s428 194 396 432z"\n                  opacity="0.9"\n                />\n              </svg>\n              <span class="count">{{ video.comment }}</span>\n            </div>\n\n            <div class="sidebar-item">\n              <svg viewBox="0 0 1024 1024" width="35" height="35" fill="#ffffff">\n                <path\n                  d="M512 85.333333C276.352 85.333333 85.333333 276.352 85.333333 512s191.018667 426.666667 426.666667 426.666667 426.666667-191.018667 426.666667-426.666667S747.648 85.333333 512 85.333333z m0 768c-188.16 0-341.333333-153.173333-341.333333-341.333333s153.173333-341.333333 341.333333-341.333333 341.333333 153.173333 341.333333 341.333333-153.173333 341.333333-341.333333 341.333333z"\n                  opacity="0.9"\n                />\n                <path d="M512 256l-170.666667 298.666667h128v213.333333h85.333334v-213.333333h128z" fill="#ffffff" />\n              </svg>\n              <span class="count">{{ video.collect }}</span>\n            </div>\n\n            <div class="sidebar-item">\n              <svg viewBox="0 0 1024 1024" width="35" height="35" fill="#ffffff">\n                <path\n                  d="M741.12 650.24c-53.76 0-101.76 23.04-135.68 59.52l-235.52-136.96c6.4-18.56 10.24-38.4 10.24-59.52 0-19.2-3.2-37.76-8.96-55.04l238.08-142.72C643.2 353.28 690.56 378.88 741.12 378.88c94.08 0 170.24-76.16 170.24-170.24S835.2 38.4 741.12 38.4 570.88 114.56 570.88 208.64c0 21.12 4.48 40.96 11.52 59.52l-234.88 140.8c-33.92-38.4-83.2-63.36-138.24-63.36C115.2 345.6 38.4 422.4 38.4 517.12s76.8 171.52 170.88 171.52c53.12 0 100.48-23.04 133.76-58.88l238.08 138.24c-5.76 16.64-8.96 34.56-8.96 53.12 0 94.08 76.16 170.24 170.24 170.24 94.08 0 170.24-76.16 170.24-170.24s-77.44-170.88-171.52-170.88z"\n                  opacity="0.9"\n                />\n              </svg>\n              <span class="count">{{ video.share }}</span>\n            </div>\n\n            <div class="sidebar-item record-container">\n              <div class="record-bg">\n                <div class="record-img" :style="`background-image: url(\'${video.head}\')`"></div>\n              </div>\n            </div>\n          </div>\n\n          <div class="bottom-info">\n            <div class="username">@{{ video.sender }}</div>\n            <div class="description" v-html="warpHandle(video.content || video.textContent || video.title)"></div>\n            <div class="music-info">\n              <div class="music-icon">🎵</div>\n              <div class="music-text-container">\n                <div class="music-text">{{ video.music }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="top-nav">\n        <div class="nav-item">直播</div>\n        <div class="nav-item">北京</div>\n        <div class="nav-item active">推荐</div>\n        <div class="nav-item">关注</div>\n        <svg class="search-icon" viewBox="0 0 1024 1024" width="20" height="20" fill="#ffffff">\n          <path\n            d="M448 768A320 320 0 1 0 448 128a320 320 0 0 0 0 640z m297.344-76.992l214.592 214.592-54.336 54.336-214.592-214.592a384 384 0 1 1 54.336-54.336z"\n          />\n        </svg>\n      </div>\n    </div>\n\n    <div v-if="currentTab === \'me\'" class="me-page">\n      <div class="me-header">\n        <div class="me-bg"></div>\n        <div\n          class="me-avatar"\n          :style="`background-image: url(\'${sharedState.Douyin.userHead || sharedState.ST.userHead}\')`"\n        >\n          <div class="edit-avatar-hint" @click="startEditAvatar">📷</div>\n        </div>\n        <div class="me-info">\n          <div v-if="!isEditingName" class="me-name">\n            {{ sharedState.Douyin.userName || sharedState.ST.userName }}\n            <span class="edit-icon" @click="startEditName">✎</span>\n          </div>\n          <div v-else class="me-name-edit">\n            <input\n              ref="nameInputRef"\n              v-model="newUserName"\n              class="name-input"\n              placeholder="输入昵称"\n              @blur="saveName"\n              @keyup.enter="saveName"\n            />\n          </div>\n          <div class="me-douyin-id">\n            抖音号：\n            <span v-if="!isEditingUserDouyinId" @click="startEditUserDouyinId"\n              >{{ sharedState.Douyin.userDouyinId || \'88888888\' }} ✎</span\n            >\n            <input\n              v-else\n              ref="userDouyinIdInputRef"\n              v-model="newUserDouyinId"\n              class="douyin-id-input"\n              @blur="saveUserDouyinId"\n              @keyup.enter="saveUserDouyinId"\n            />\n          </div>\n        </div>\n      </div>\n      <div class="me-stats">\n        <div class="stat-item">\n          <span>{{\n            sharedState.Douyin.getUserVideos(sharedState.Douyin.userName || sharedState.ST.userName).reduce(\n              (acc: number, cur: any) => acc + (parseInt(cur.like) || 0),\n              0,\n            )\n          }}</span>\n          获赞\n        </div>\n        <div class="stat-item" @click="editStats(\'friends\')">\n          <span>{{ sharedState.Douyin.friends || 0 }}</span> 朋友\n        </div>\n        <div class="stat-item" @click="editStats(\'following\')">\n          <span>{{ sharedState.Douyin.following || 0 }}</span> 关注\n        </div>\n        <div class="stat-item" @click="editStats(\'followers\')">\n          <span>{{ sharedState.Douyin.followers || 0 }}</span> 粉丝\n        </div>\n      </div>\n\n      <div class="me-tabs">\n        <div class="me-tab active">\n          作品 {{ sharedState.Douyin.getUserVideos(sharedState.Douyin.userName || sharedState.ST.userName).length }}\n        </div>\n        <div class="me-tab">私密</div>\n        <div class="me-tab">推荐</div>\n        <div class="me-tab">收藏</div>\n        <div class="me-tab">喜欢</div>\n      </div>\n      <div class="me-content">\n        <div class="works-grid">\n          <div\n            v-for="video in sharedState.Douyin.getUserVideos(sharedState.Douyin.userName || sharedState.ST.userName)"\n            :key="video.id"\n            class="work-item"\n            @click="playWork(video)"\n          >\n            <div\n              class="work-cover"\n              :style="video.video ? `background-image: url(${video.video})` : \'background-color: #333\'"\n            >\n              <div v-if="!video.video" class="work-title-preview">{{ video.title }}</div>\n            </div>\n            <div class="work-likes">\n              <svg viewBox="0 0 1024 1024" width="12" height="12" fill="#fff">\n                <path\n                  d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"\n                />\n              </svg>\n              {{ video.like }}\n            </div>\n          </div>\n        </div>\n        <div\n          v-if="sharedState.Douyin.getUserVideos(sharedState.Douyin.userName || sharedState.ST.userName).length === 0"\n          class="empty-state"\n        >\n          暂无作品\n        </div>\n      </div>\n    </div>\n\n    <div v-if="showPostDialog" class="post-dialog">\n      <div class="post-header">\n        <div @click="showPostDialog = false">取消</div>\n        <div class="post-title">发布作品</div>\n        <div class="post-submit" @click="submitPost">发布</div>\n      </div>\n      <div class="post-content">\n        <div class="input-group">\n          <label>标题</label>\n          <input v-model="postTitle" type="text" placeholder="输入标题 (可选)" />\n        </div>\n        <div class="input-group">\n          <label>内容</label>\n          <textarea v-model="postTextContent" placeholder="添加作品描述..."></textarea>\n        </div>\n        <div class="input-group">\n          <label>BGM 名字</label>\n          <input v-model="postMusic" type="text" placeholder="输入背景音乐名称 (可选)" />\n        </div>\n      </div>\n    </div>\n\n    <div v-if="currentTab === \'friends\'" class="friends-page">\n      <div class="friends-header">\n        <div class="friends-title">朋友</div>\n        <div class="friends-add-icon">\n          <svg viewBox="0 0 1024 1024" width="20" height="20" fill="#ffffff">\n            <path\n              d="M512 832a32 32 0 0 1-32-32v-256H224a32 32 0 0 1 0-64h256V224a32 32 0 0 1 64 0v256h256a32 32 0 0 1 0 64H544v256a32 32 0 0 1-32 32z"\n            />\n          </svg>\n        </div>\n      </div>\n      <div class="friends-list">\n        <div\n          v-for="[id, friend] in Object.entries(sharedState.QQ.chars).filter(([k, c]: any) => c.chartype === \'friend\')"\n          :key="id"\n          class="friend-item"\n          @click="openFriendProfile(friend)"\n        >\n          <div\n            class="friend-avatar"\n            :style="`background-image: url(\'${friend.douyinHead || friend.head || \'\'}\')`"\n          ></div>\n          <div class="friend-info">\n            <div class="friend-name-row">\n              <div class="friend-name">{{ friend.douyinName || id }}</div>\n            </div>\n            <div v-if="friend.douyinId" class="friend-douyin-id">抖音号: {{ friend.douyinId }}</div>\n            <div v-else class="friend-douyin-id">未设置抖音号</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="currentTab === \'message\'" class="message-page">\n      <div class="message-header">\n        <div class="message-title">消息</div>\n        <div class="message-actions"></div>\n      </div>\n      <div class="message-list">\n        <div\n          v-for="(chat, id) in sharedState.Douyin.chathistory"\n          :key="id"\n          class="message-item"\n          @click="openChat(String(id))"\n        >\n          <div class="message-avatar" :style="`background-image: url(\'${getHead(String(id))}\')`">\n            <div v-if="chat.unread" class="unread-badge">{{ chat.unread }}</div>\n          </div>\n          <div class="message-info">\n            <div class="message-name-row">\n              <span class="message-name">{{ getName(String(id)) }}</span>\n              <span class="message-time">{{ chat.time || \'\' }}</span>\n            </div>\n            <div class="message-content-preview">\n              {{ chat.lastMsg || \'暂无消息\' }}\n            </div>\n          </div>\n        </div>\n        <div v-if="Object.keys(sharedState.Douyin.chathistory).length === 0" class="empty-state">\n          <div style="font-size: 40px; margin-bottom: 20px">💬</div>\n          暂无消息\n        </div>\n      </div>\n    </div>\n\n    <div v-if="showAvatarInput" class="input-dialog">\n      <div class="dialog-content">\n        <div class="dialog-title">设置头像链接</div>\n        <input v-model="newUserHead" placeholder="输入图片链接" class="dialog-input" />\n        <div class="dialog-buttons">\n          <button @click="showAvatarInput = false">取消</button>\n          <button class="confirm" @click="saveAvatarOrFriend">确定</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="showStatsInput" class="input-dialog">\n      <div class="dialog-content">\n        <div class="dialog-title">设置数值</div>\n        <input\n          v-model="newStatsValue"\n          type="number"\n          placeholder="输入数值"\n          class="dialog-input"\n          @keyup.enter="saveStats"\n        />\n        <div class="dialog-buttons">\n          <button @click="showStatsInput = false">取消</button>\n          <button class="confirm" @click="saveStats">确定</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if="showFriendProfile" class="profile-page">\n      <div class="back-btn" @click="showFriendProfile = false">\n        <svg viewBox="0 0 1024 1024" width="24" height="24" fill="#ffffff">\n          <path\n            d="M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z"\n          />\n        </svg>\n      </div>\n      <div class="me-header">\n        <div class="me-bg"></div>\n        <div class="me-avatar" :style="`background-image: url(\'${currentFriend.douyinHead || currentFriend.head}\')`">\n          <div class="edit-avatar-hint" @click="startEditFriendAvatar">📷</div>\n        </div>\n        <div class="me-info">\n          <div v-if="!isEditingFriendName" class="me-name">\n            {{ currentFriend.douyinName || currentFriend.name }}\n            <span class="edit-icon" @click="startEditFriendName">✎</span>\n          </div>\n          <div v-else class="me-name-edit">\n            <input\n              ref="friendNameInputRef"\n              v-model="newFriendName"\n              class="name-input"\n              placeholder="输入昵称"\n              @blur="saveFriendName"\n              @keyup.enter="saveFriendName"\n            />\n          </div>\n          <div class="me-douyin-id">\n            抖音号：\n            <input\n              v-if="isEditingDouyinId"\n              ref="douyinIdInput"\n              v-model="newDouyinId"\n              class="douyin-id-input"\n              @blur="saveDouyinId"\n              @keyup.enter="saveDouyinId"\n            />\n            <span v-else @click="startEditDouyinId">{{ currentFriend.douyinId || \'点击设置\' }} ✎</span>\n          </div>\n        </div>\n      </div>\n      <div class="me-stats">\n        <div class="stat-item">\n          <span>{{\n            sharedState.Douyin.getUserVideos(currentFriend.douyinName || currentFriend.name).reduce(\n              (acc: number, cur: any) => acc + (parseInt(cur.like) || 0),\n              0,\n            )\n          }}</span>\n          获赞\n        </div>\n        <div class="stat-item" @click="editFriendStats(\'friends\')">\n          <span>{{ currentFriend.douyinFriends || currentFriend.friends || 0 }}</span> 朋友\n        </div>\n        <div class="stat-item" @click="editFriendStats(\'following\')">\n          <span>{{ currentFriend.douyinFollowing || currentFriend.following || 0 }}</span> 关注\n        </div>\n        <div class="stat-item" @click="editFriendStats(\'followers\')">\n          <span>{{ currentFriend.douyinFollowers || currentFriend.followers || 0 }}</span> 粉丝\n        </div>\n      </div>\n      <div class="profile-actions">\n        <div class="action-btn message-btn" @click="openChat(getFriendId(currentFriend))">发私信</div>\n      </div>\n      <div class="me-tabs">\n        <div class="me-tab active">\n          作品 {{ sharedState.Douyin.getUserVideos(currentFriend.douyinName || currentFriend.name).length }}\n        </div>\n        <div class="me-tab">喜欢</div>\n      </div>\n      <div class="me-content">\n        <div class="works-grid">\n          <div\n            v-for="video in sharedState.Douyin.getUserVideos(currentFriend.douyinName || currentFriend.name)"\n            :key="video.id"\n            class="work-item"\n            @click="playWork(video)"\n          >\n            <div\n              class="work-cover"\n              :style="video.video ? `background-image: url(${video.video})` : \'background-color: #333\'"\n            >\n              <div v-if="!video.video" class="work-title-preview">{{ video.title }}</div>\n            </div>\n            <div class="work-likes">\n              <svg viewBox="0 0 1024 1024" width="12" height="12" fill="#fff">\n                <path\n                  d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"\n                />\n              </svg>\n              {{ video.like }}\n            </div>\n          </div>\n        </div>\n        <div\n          v-if="sharedState.Douyin.getUserVideos(currentFriend.douyinName || currentFriend.name).length === 0"\n          class="empty-state"\n        >\n          暂无作品\n        </div>\n      </div>\n    </div>\n\n    <div class="bottom-tabbar">\n      <div class="tab-item" :class="{ active: currentTab === \'home\' }" @click="currentTab = \'home\'">首页</div>\n      <div class="tab-item" :class="{ active: currentTab === \'friends\' }" @click="currentTab = \'friends\'">朋友</div>\n      <div class="add-btn" @click="showPostDialog = true">\n        <div class="add-icon">+</div>\n      </div>\n      <div class="tab-item" :class="{ active: currentTab === \'message\' }" @click="currentTab = \'message\'">消息</div>\n      <div class="tab-item" :class="{ active: currentTab === \'me\' }" @click="currentTab = \'me\'">我</div>\n    </div>\n\n    <ChatDetail v-if="showChatDetailPage" :chatId="activeChatId" @back="closeChat" />\n\n    <div v-if="showCommentDrawer" class="comment-drawer-mask" @click="closeComments">\n      <div class="comment-drawer" @click.stop>\n        <div class="comment-header">\n          <div class="comment-title">评论 ({{ currentVideoComments.length }})</div>\n          <div class="comment-close" @click="closeComments">×</div>\n        </div>\n        <div class="comment-list">\n          <div\n            v-for="(comment, index) in currentVideoComments"\n            :key="index"\n            class="comment-item"\n            @click="replyComment(comment)"\n          >\n            <div class="comment-avatar" :style="`background-image: url(\'${comment.head}\')`"></div>\n            <div class="comment-content-container">\n              <div class="comment-user">{{ comment.sender }}</div>\n              <div class="comment-text">\n                <span v-if="comment.replyTo" class="reply-to">回复 {{ comment.replyTo }}: </span>\n                {{ comment.content }}\n              </div>\n              <div class="comment-meta">\n                <span class="comment-time">{{ comment.time }}</span>\n                <span class="comment-reply">回复</span>\n              </div>\n            </div>\n            <div class="comment-like">\n              <svg viewBox="0 0 1024 1024" width="20" height="20" fill="#999">\n                <path\n                  d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"\n                />\n              </svg>\n              <span>{{ comment.like }}</span>\n            </div>\n          </div>\n          <div v-if="currentVideoComments.length === 0" class="empty-comments">暂无评论，快来抢沙发</div>\n        </div>\n        <div class="comment-input-wrapper">\n          <div v-if="replyingTo" class="replying-banner">\n            <span>回复 @{{ replyingTo.sender }}:</span>\n            <span class="cancel-reply" @click="cancelReply">×</span>\n          </div>\n          <div class="comment-input-area">\n            <input\n              v-model="commentInput"\n              type="text"\n              :placeholder="replyingTo ? `回复 @${replyingTo.sender}:` : \'善语结善缘，恶语伤人心\'"\n              @keyup.enter="submitComment"\n            />\n            <div class="emoji-icon" @click="submitComment">↑</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang="ts">\nimport { nextTick, onBeforeUnmount, onMounted, ref, watch } from \'vue\';\nimport { sharedState } from \'../shared-state\';\nimport ChatDetail from \'./chat_detail.vue\';\n\nconst currentTab = ref(\'home\');\n\nfunction warpHandle(content: string) {\n  if (!content) {\n    return \'\';\n  }\ncontent = content.replace(/\\\\n/g, \'<br>\');\n  content = content.replace(/\\[(img|vedio|bqb)/g, `<br>[$1`);\n  return content;\n}\n\nconst showPostDialog = ref(false);\nconst postTextContent = ref(\'\');\nconst postTitle = ref(\'\');\nconst postMusic = ref(\'\');\n\n// 个人资料编辑相关\nconst isEditingName = ref(false);\nconst newUserName = ref(\'\');\nconst nameInputRef = ref<HTMLInputElement | null>(null);\n\nconst isEditingUserDouyinId = ref(false);\nconst newUserDouyinId = ref(\'\');\nconst userDouyinIdInputRef = ref<HTMLInputElement | null>(null);\n\nconst showAvatarInput = ref(false);\nconst newUserHead = ref(\'\');\n\n// 朋友资料相关\nconst showFriendProfile = ref(false);\nconst currentFriend = ref<any>({});\nconst isEditingDouyinId = ref(false);\nconst newDouyinId = ref(\'\');\nconst douyinIdInput = ref<HTMLInputElement | null>(null);\n\nconst isEditingFriendName = ref(false);\nconst newFriendName = ref(\'\');\nconst friendNameInputRef = ref<HTMLInputElement | null>(null);\n\nconst showFriendAvatarInput = ref(false);\nconst newFriendHead = ref(\'\');\n\n// 评论相关\nconst showCommentDrawer = ref(false);\nconst currentVideoComments = ref<any[]>([]);\nconst commentInput = ref(\'\');\nconst replyingTo = ref<any>(null);\n\nconst replyComment = (comment: any) => {\n  replyingTo.value = comment;\n  commentInput.value = \'\';\n  // Focus logic would go here if we had a ref to the input\n};\n\nconst cancelReply = () => {\n  replyingTo.value = null;\n};\n\nconst submitComment = () => {\n  if (!commentInput.value.trim()) return;\n\n  const currentVideo = sharedState.Douyin.videos[sharedState.Douyin.activeVideoIndex];\n  if (!currentVideo) return;\n\n  const content = commentInput.value.trim();\n  const videoId = currentVideo.id;\n  const user = sharedState.Douyin.userName || sharedState.ST.userName;\n  // const time = new Date().toLocaleString(\'zh-CN\', { month: \'2-digit\', day: \'2-digit\', hour: \'2-digit\', minute: \'2-digit\' }).replace(///g, \'-\');\n  // 按照要求格式 MM-DD HH:MM\n  const now = new Date();\n  const month = (now.getMonth() + 1).toString().padStart(2, \'0\');\n  const day = now.getDate().toString().padStart(2, \'0\');\n  const hour = now.getHours().toString().padStart(2, \'0\');\n  const minute = now.getMinutes().toString().padStart(2, \'0\');\n  const time = `${month}-${day} ${hour}:${minute}`;\n\n  let message = \'\';\n  if (replyingTo.value) {\n    // 回复评论格式: <douyin>视频ID|回复人|回复内容|时间MM-DD HH:MM|该回复点赞数|@被回复人</douyin>\n    message = `{{user}}在抖音回复了评论：\n<douyin>${videoId}|${user}|${content}|${time}|0|@${replyingTo.value.sender}</douyin>`;\n  } else {\n    // 评论格式: <douyin>视频ID|评论人|评论内容|时间MM-DD HH:MM|该评论点赞数</douyin>\n    message = `{{user}}在抖音发表了评论：\n<douyin>${videoId}|${user}|${content}|${time}|0</douyin>`;\n  }\n\n  // 将消息放入对话框，不立即发送\n  const val = $(\'#send_textarea\').val();\n  const old_content = (typeof val === \'string\' ? val : \'\').trim();\n  const new_content = old_content ? old_content + \'\\n\\n\' + message : message;\n\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  // 乐观更新 UI (可选，但为了即时反馈最好加上，不过 index.ts 会处理最终逻辑)\n  // 这里暂时不乐观更新，等待 AI 回复或者 index.ts 的逻辑处理\n\n  commentInput.value = \'\';\n  replyingTo.value = null;\n  toastr.success(\'已生成评论指令，请点击发送\');\n};\n\n// 统计数据编辑相关\nconst showStatsInput = ref(false);\nconst editingStatsKey = ref(\'\');\nconst editingStatsTarget = ref(\'\'); // \'user\' or \'friend\'\nconst newStatsValue = ref(\'\');\n\nconst editStats = (key: string) => {\n  editingStatsKey.value = key;\n  editingStatsTarget.value = \'user\';\n  // 显示的是当前计算后的值，但这里我们还是让用户输入新的基础值比较好理解，或者直接输入期望的最终显示值\n  // 按照需求：在自定义的基础上增减。意味着用户输入的是 base 值。\n  // 但为了用户体验，我们可以直接让用户输入他们想看到的数字，然后我们反推 base 值\n  // base = target - (current - base) -> base = target - change\n  // change = current - base\n  // newBase = input - change\n  const currentVal = (sharedState.Douyin as any)[key] || 0;\n  const baseVal =\n    (sharedState.Douyin as any)[\n      \'base\' + key.charAt(0).toUpperCase() + key.slice(1)\n    ] || 0;\n  newStatsValue.value = String(currentVal); // 默认显示当前值\n  showStatsInput.value = true;\n};\n\nconst editFriendStats = (key: string) => {\n  editingStatsKey.value = key;\n  editingStatsTarget.value = \'friend\';\n  const charKey = \'douyin\' + key.charAt(0).toUpperCase() + key.slice(1);\n  const baseKey = \'douyinBase\' + key.charAt(0).toUpperCase() + key.slice(1);\n\n  const currentVal = currentFriend.value[charKey] || 0;\n  newStatsValue.value = String(currentVal);\n  showStatsInput.value = true;\n};\n\nconst saveStats = () => {\n  const newVal = parseInt(newStatsValue.value);\n  if (isNaN(newVal)) {\n    showStatsInput.value = false;\n    return;\n  }\n\n  if (editingStatsTarget.value === \'user\') {\n    const key = editingStatsKey.value;\n    const baseKey = \'base\' + key.charAt(0).toUpperCase() + key.slice(1);\n\n    // 计算当前的变动值\n    const currentVal = (sharedState.Douyin as any)[key] || 0;\n    const oldBaseVal = (sharedState.Douyin as any)[baseKey] || 0;\n    const change = currentVal - oldBaseVal;\n\n    // 设置新的基础值 = 用户期望值 - 变动值\n    // 这样 基础值 + 变动值 = 用户期望值\n    (sharedState.Douyin as any)[baseKey] = newVal - change;\n\n    // 更新显示值 (re-sync)\n    (sharedState.Douyin as any)[key] = newVal;\n\n    sharedState.Douyin.saveSettings();\n  } else {\n    const key = editingStatsKey.value;\n    const charKey = \'douyin\' + key.charAt(0).toUpperCase() + key.slice(1);\n    const baseKey = \'douyinBase\' + key.charAt(0).toUpperCase() + key.slice(1);\n\n    const currentVal = currentFriend.value[charKey] || 0;\n    // 如果是临时对象可能没有 baseKey\n    const oldBaseVal = currentFriend.value[baseKey] || 0;\n    const change = currentVal - oldBaseVal;\n\n    // 更新对象\n    currentFriend.value[baseKey] = newVal - change;\n    currentFriend.value[charKey] = newVal;\n\n    // 如果是真实角色，保存\n    const realKey = Object.keys(sharedState.QQ.chars).find(k => sharedState.QQ.chars[k] === currentFriend.value);\n    if (realKey) {\n      // 内存对象已经被更新\n      sharedState.QQ.saveChars();\n    }\n  }\n  showStatsInput.value = false;\n};\n\n// 聊天相关\nconst showChatDetailPage = ref(false);\nconst activeChatId = ref(\'\');\n\nconst openChat = (id: string) => {\n  activeChatId.value = id;\n  showChatDetailPage.value = true;\n};\n\nconst closeChat = () => {\n  showChatDetailPage.value = false;\n  activeChatId.value = \'\';\n};\n\nconst getHead = (id: string) => {\n  const char = sharedState.QQ.chars[id];\n  return char?.douyinHead || char?.head || \'\';\n};\n\nconst getName = (id: string) => {\n  const char = sharedState.QQ.chars[id];\n  if (!char) return id;\n  if (char.douyinName) return char.douyinName;\n  if (char.chartype === \'friend\') return id;\n  return char.name || id;\n};\n\n// 滑动相关逻辑\nconst currentTranslateY = ref(0);\nlet startY = 0;\nlet lastY = 0;\nlet isMoving = false;\nconst videoContainerRef = ref<HTMLElement | null>(null);\nconst videoHeight = ref(850);\n\nonMounted(() => {\n  updateHeight();\n  window.addEventListener(\'resize\', updateHeight);\n});\n\nonBeforeUnmount(() => {\n  window.removeEventListener(\'resize\', updateHeight);\n});\n\nwatch(\n  () => sharedState.phone.activeApp,\n  newVal => {\n    if (newVal === \'Douyin\') {\n      nextTick(() => {\n        updateHeight();\n      });\n    }\n  },\n);\n\nconst updateHeight = () => {\n  if (videoContainerRef.value && videoContainerRef.value.clientHeight > 0) {\n    videoHeight.value = videoContainerRef.value.clientHeight;\n  } else {\n    // Fallback or default\n    const container = document.querySelector(\'.douyin-container\');\n    if (container && container.clientHeight > 0) {\n      videoHeight.value = container.clientHeight;\n    }\n  }\n\n  if (sharedState.Douyin) {\n    currentTranslateY.value = sharedState.Douyin.activeVideoIndex * videoHeight.value;\n  }\n};\n\nconst handleTouchStart = (e: TouchEvent) => {\n  if (currentTab.value !== \'home\') return; // 只在首页允许滑动\n  startY = e.touches[0].clientY;\n  lastY = startY;\n  isMoving = true;\n};\n\nconst handleTouchMove = (e: TouchEvent) => {\n  if (!isMoving || currentTab.value !== \'home\') return;\n  const currentY = e.touches[0].clientY;\n  const deltaY = lastY - currentY;\n  // 这里可以添加阻尼效果\n  lastY = currentY;\n};\n\nconst handleTouchEnd = (e: TouchEvent) => {\n  if (currentTab.value !== \'home\') return;\n  isMoving = false;\n  const endY = e.changedTouches[0].clientY;\n  const diff = startY - endY;\n\n  if (Math.abs(diff) > 50) {\n    if (diff > 0) {\n      // 上滑，下一个视频\n      if (sharedState.Douyin.activeVideoIndex < sharedState.Douyin.videos.length - 1) {\n        sharedState.Douyin.activeVideoIndex++;\n      }\n    } else if (sharedState.Douyin.activeVideoIndex > 0) {\n      // 下滑，上一个视频\n      sharedState.Douyin.activeVideoIndex--;\n    }\n  }\n\n  // 更新位移\n  currentTranslateY.value = sharedState.Douyin.activeVideoIndex * videoHeight.value;\n};\n\nconst toggleLike = (video: any) => {\n  video.isLike = !video.isLike;\n  // 可以在这里添加点赞动画逻辑\n  if (video.isLike) {\n    // 模拟数字增加\n    const count = parseFloat(video.like);\n    if (!isNaN(count)) {\n      // 简单处理，实际需要解析 \'w\' 等单位\n    }\n  }\n};\n\nconst showComments = (video: any) => {\n  console.log(\'Show comments for video:\', video.id);\n  currentVideoComments.value = video.comments || [];\n  showCommentDrawer.value = true;\n};\n\nconst closeComments = () => {\n  showCommentDrawer.value = false;\n};\n\nconst submitPost = async () => {\n  if (!postTextContent.value.trim() && !postTitle.value.trim()) return;\n\n  const id = Math.random().toString(36).substring(2, 8);\n  // const sender = sharedState.Douyin.userName || sharedState.ST.userName;\n  const title = postTitle.value || postTextContent.value.substring(0, 20);\n  const content = postTextContent.value;\n  const music = postMusic.value || \'原声\';\n\n  let message = `{{user}}发布了抖音视频，请按照规范格式输出该视频及3-5条评论：\n\n`;\n  message += `视频ID: ${id}\n`;\n  message += `标题: ${title}\n`;\n  message += `内容描述: ${content}\n`;\n  message += `BGM: ${music}`;\n\n  // 将消息放入对话框，不立即发送\n  const val = $(\'#send_textarea\').val();\n  const old_content = (typeof val === \'string\' ? val : \'\').trim();\n  const new_content = old_content ? old_content + \'\\n\\n\' + message : message;\n\n  $(\'#send_textarea\')\n    .val(new_content)[0]\n    .dispatchEvent(new Event(\'input\', { bubbles: true }));\n\n  showPostDialog.value = false;\n  postTextContent.value = \'\';\n  postTitle.value = \'\';\n  postMusic.value = \'\';\n  currentTab.value = \'home\';\n\n  toastr.success(\'已生成发布指令，请点击发送\');\n};\n\n// 个人资料编辑方法\nconst startEditName = () => {\n  newUserName.value = sharedState.Douyin.userName || sharedState.ST.userName;\n  isEditingName.value = true;\n  nextTick(() => {\n    nameInputRef.value?.focus();\n  });\n};\n\nconst saveName = () => {\n  const newName = newUserName.value.trim();\n  const oldEffectiveName = sharedState.Douyin.userName || sharedState.ST.userName;\n  const newEffectiveName = newName || sharedState.ST.userName;\n\n  if (oldEffectiveName !== newEffectiveName) {\n    sharedState.Douyin.videos.forEach((v: any) => {\n      if (v.sender === oldEffectiveName) {\n        v.sender = newEffectiveName;\n      }\n    });\n  }\n\n  sharedState.Douyin.userName = newName;\n  sharedState.Douyin.saveSettings();\n  isEditingName.value = false;\n};\n\nconst startEditUserDouyinId = () => {\n  newUserDouyinId.value = sharedState.Douyin.userDouyinId || \'88888888\';\n  isEditingUserDouyinId.value = true;\n  nextTick(() => {\n    userDouyinIdInputRef.value?.focus();\n  });\n};\n\nconst saveUserDouyinId = () => {\n  // 允许设置为空，即重置\n  sharedState.Douyin.userDouyinId = newUserDouyinId.value.trim();\n  sharedState.Douyin.saveSettings();\n  isEditingUserDouyinId.value = false;\n};\n\nconst startEditAvatar = () => {\n  newUserHead.value = sharedState.Douyin.userHead || sharedState.ST.userHead;\n  showAvatarInput.value = true;\n};\n\nconst saveAvatar = () => {\n  const newHead = newUserHead.value.trim();\n  const effectiveName = sharedState.Douyin.userName || sharedState.ST.userName;\n  const targetHead = newHead || sharedState.ST.userHead;\n\n  // 更新当前用户所有视频的头像\n  sharedState.Douyin.videos.forEach((v: any) => {\n    if (v.sender === effectiveName) {\n      v.head = targetHead;\n    }\n  });\n\n  sharedState.Douyin.userHead = newHead;\n  sharedState.Douyin.saveSettings();\n  showAvatarInput.value = false;\n};\n\nconst openFriendProfile = (friend: any) => {\n  currentFriend.value = friend;\n  showFriendProfile.value = true;\n  isEditingDouyinId.value = false;\n  isEditingFriendName.value = false;\n};\n\nconst startEditDouyinId = () => {\n  newDouyinId.value = currentFriend.value.douyinId || \'\';\n  isEditingDouyinId.value = true;\n  nextTick(() => {\n    douyinIdInput.value?.focus();\n  });\n};\n\nconst saveDouyinId = () => {\n  if (newDouyinId.value.trim()) {\n    currentFriend.value.douyinId = newDouyinId.value.trim();\n    const realKey = Object.keys(sharedState.QQ.chars).find(k => sharedState.QQ.chars[k] === currentFriend.value);\n    if (realKey) {\n      sharedState.QQ.saveChars();\n    }\n  }\n  isEditingDouyinId.value = false;\n};\n\nconst startEditFriendName = () => {\n  newFriendName.value = currentFriend.value.douyinName || currentFriend.value.name;\n  isEditingFriendName.value = true;\n  nextTick(() => {\n    friendNameInputRef.value?.focus();\n  });\n};\n\nconst saveFriendName = () => {\n  const newName = newFriendName.value.trim();\n  const oldEffectiveName = currentFriend.value.douyinName || currentFriend.value.name;\n\n  if (newName && newName !== oldEffectiveName) {\n    currentFriend.value.douyinName = newName;\n    const realKey = Object.keys(sharedState.QQ.chars).find(k => sharedState.QQ.chars[k] === currentFriend.value);\n    if (realKey) {\n      sharedState.QQ.saveChars();\n\n      // 同步更新已发布的视频发布者名称\n      sharedState.Douyin.videos.forEach((v: any) => {\n        if (v.sender === oldEffectiveName) {\n          v.sender = newName;\n        }\n      });\n    }\n  }\n  isEditingFriendName.value = false;\n};\n\nconst startEditFriendAvatar = () => {\n  // 简单起见，复用同一个输入框逻辑，或者使用prompt\n  // 为了体验一致，这里我们复用 showAvatarInput 逻辑，但需要区分是修改谁的\n  // 由于 showAvatarInput 设计时只考虑了 user，这里我们临时用 prompt 或者复用弹窗并加个标志位\n  // 既然 "朋友的user也可以设置"，这里使用 input-dialog\n  newUserHead.value = currentFriend.value.douyinHead || currentFriend.value.head;\n  // 标记当前是在修改朋友头像\n  (showAvatarInput.value as any) = \'friend\';\n};\n\n// 修改 saveAvatar 逻辑以支持朋友头像保存\nconst saveAvatarOrFriend = () => {\n  if ((showAvatarInput.value as any) === \'friend\') {\n    const newHead = newUserHead.value.trim();\n    if (newHead) {\n      currentFriend.value.douyinHead = newHead;\n      const realKey = Object.keys(sharedState.QQ.chars).find(k => sharedState.QQ.chars[k] === currentFriend.value);\n      if (realKey) {\n        sharedState.QQ.saveChars();\n\n        // 更新该朋友发布的所有视频的头像\n        sharedState.Douyin.videos.forEach((v: any) => {\n          if (v.sender === currentFriend.value.name || v.sender === currentFriend.value.douyinName) {\n            v.head = newHead;\n          }\n        });\n      }\n    }\n    showAvatarInput.value = false;\n  } else {\n    saveAvatar();\n  }\n};\n\nconst getFriendId = (friend: any) => {\n  const key = Object.keys(sharedState.QQ.chars).find(k => sharedState.QQ.chars[k] === friend);\n  return key || friend.name;\n};\n\nconst playWork = (video: any) => {\n  // 播放选中的作品\n  // 简单实现：跳转到首页并定位到该视频\n  const index = sharedState.Douyin.videos.findIndex((v: any) => v.id === video.id);\n  if (index !== -1) {\n    sharedState.Douyin.activeVideoIndex = index;\n    currentTab.value = \'home\';\n    updateHeight();\n  }\n  // 关闭可能打开的资料页\n  showFriendProfile.value = false;\n};\n\nconst goToProfile = (video: any) => {\n  const sender = video.sender;\n  const userEffectiveName = sharedState.Douyin.userName || sharedState.ST.userName;\n\n  if (sender === userEffectiveName) {\n    currentTab.value = \'me\';\n  } else {\n    // 查找是否是已知好友\n    const friend = Object.values(sharedState.QQ.chars).find(\n      (c: any) => (c.name === sender || c.douyinName === sender) && c.chartype === \'friend\',\n    );\n    if (friend) {\n      // currentTab.value = \'friends\'; // 可选：切换到底部 tab 高亮\n      openFriendProfile(friend);\n    } else {\n      // 陌生人或 NPC，构建临时对象\n      const stranger = {\n        name: sender,\n        head: video.head,\n        douyinId: \'\',\n        likes: video.like || \'0\', // 简单复用视频的点赞数作为展示，或者默认0\n        friends: \'0\',\n        following: \'0\',\n        followers: \'0\',\n      };\n      openFriendProfile(stranger);\n    }\n  }\n};\n<\/script>\n\n<style scoped>\n.douyin-container {\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  position: relative;\n  overflow: hidden;\n  color: #fff;\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Helvetica, Arial, sans-serif;\n}\n\n.home-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.video-container {\n  width: 100%;\n  height: 100%;\n  transition: transform 0.3s cubic-bezier(0.2, 0, 0.2, 1);\n}\n\n.video-item {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: #1a1a1a;\n}\n\n.video-background {\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.video-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #000;\n}\n\n.text-video-content {\n  width: 80%;\n  font-size: 24px;\n  line-height: 1.5;\n  text-align: center;\n  color: #fff;\n  font-weight: bold;\n}\n\n.video-overlay-text {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n}\n\n.text-video-content-overlay {\n  width: 80%;\n  font-size: 24px;\n  line-height: 1.5;\n  text-align: center;\n  color: #fff;\n  font-weight: bold;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n}\n\n.sidebar-right {\n  position: absolute;\n  right: 10px;\n  bottom: 120px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  z-index: 10;\n}\n\n.sidebar-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.count {\n  font-size: 13px;\n  margin-top: 5px;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n}\n\n.avatar-container {\n  position: relative;\n  margin-bottom: 15px;\n}\n\n.avatar {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  border: 2px solid #fff;\n  background-size: cover;\n}\n\n.follow-icon {\n  position: absolute;\n  bottom: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 20px;\n  height: 20px;\n  background-color: #fe2c55;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n  line-height: 1;\n}\n\n.record-container {\n  margin-top: 10px;\n}\n\n.record-bg {\n  width: 48px;\n  height: 48px;\n  background: #222;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 8px solid #111;\n  animation: rotate 5s linear infinite;\n}\n\n.record-img {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background-size: cover;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.bottom-info {\n  position: absolute;\n  left: 10px;\n  bottom: 80px;\n  width: 75%;\n  z-index: 10;\n  text-align: left;\n}\n\n.username {\n  font-size: 17px;\n  font-weight: 600;\n  margin-bottom: 8px;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);\n}\n\n.description {\n  font-size: 15px;\n  line-height: 1.4;\n  margin-bottom: 10px;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.music-info {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.music-text-container {\n  width: 150px;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.music-text {\n  font-size: 14px;\n  animation: scroll 10s linear infinite;\n}\n\n@keyframes scroll {\n  0% {\n    transform: translateX(100%);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n}\n\n/* 顶部导航 */\n.top-nav {\n  position: absolute;\n  top: 40px;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  z-index: 20;\n  font-size: 16px;\n  color: #ccc;\n  pointer-events: none; /* 让事件穿透到下层，除非 nav-item 自己有 pointer-events: auto */\n}\n\n.nav-item {\n  pointer-events: auto;\n}\n\n.nav-item.active {\n  color: #fff;\n  font-weight: 600;\n  position: relative;\n}\n\n.nav-item.active::after {\n  content: \'\';\n  position: absolute;\n  bottom: -8px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 20px;\n  height: 2px;\n  background-color: #fff;\n}\n\n.search-icon {\n  position: absolute;\n  right: 20px;\n  pointer-events: auto;\n}\n\n/* 固定返回按钮 */\n.back-icon-fixed {\n  position: absolute;\n  top: 40px;\n  left: 10px;\n  z-index: 100; /* 确保层级最高 */\n  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.5)); /* 增加阴影防止背景太亮看不清 */\n  cursor: pointer;\n}\n\n.bottom-tabbar {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 50px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);\n  z-index: 20;\n  font-size: 16px;\n  color: #ccc;\n  padding-bottom: 20px;\n}\n\n.tab-item {\n  position: relative;\n  z-index: 30; /* 确保可点击 */\n}\n\n.tab-item.active {\n  color: #fff;\n  font-weight: 600;\n}\n\n.add-btn {\n  width: 45px;\n  height: 30px;\n  background-color: #fff;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  z-index: 30; /* 确保可点击 */\n}\n\n.add-btn::before,\n.add-btn::after {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  width: 4px;\n  height: 100%;\n  border-radius: 2px;\n}\n\n.add-btn::before {\n  left: 0;\n  background-color: #0ff;\n}\n\n.add-btn::after {\n  right: 0;\n  background-color: #f0f;\n}\n\n.add-icon {\n  color: #000;\n  font-size: 20px;\n  font-weight: bold;\n  z-index: 1;\n  background-color: #fff;\n  width: 80%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* "我" 页面样式 */\n.me-page {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 70px); /* 留出底部导航空间 */\n  background-color: #161823;\n  z-index: 10;\n  overflow-y: auto;\n}\n\n.me-header {\n  position: relative;\n  padding-top: 150px;\n  margin-bottom: 20px;\n}\n\n.me-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 150px;\n  background-color: #2e3038;\n}\n\n.me-avatar {\n  width: 90px;\n  height: 90px;\n  border-radius: 50%;\n  border: 4px solid #161823;\n  margin-left: 20px;\n  margin-top: -45px;\n  position: relative;\n  z-index: 1;\n  background-size: cover;\n  background-position: center;\n}\n\n.edit-avatar-hint {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n  border-radius: 50%;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.me-info {\n  padding: 10px 20px;\n}\n\n.edit-icon {\n  font-size: 14px;\n  color: #888;\n  margin-left: 5px;\n  cursor: pointer;\n}\n\n.name-input {\n  background: transparent;\n  border: none;\n  border-bottom: 1px solid #fe2c55;\n  color: #fff;\n  font-size: 24px;\n  font-weight: bold;\n  width: 200px;\n  outline: none;\n}\n\n/* 输入弹窗 */\n.input-dialog {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.dialog-content {\n  background-color: #252525;\n  border-radius: 8px;\n  padding: 20px;\n  width: 80%;\n  max-width: 300px;\n}\n\n.dialog-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 15px;\n  color: #fff;\n  text-align: center;\n}\n\n.dialog-input {\n  width: 100%;\n  padding: 10px;\n  background-color: #333;\n  border: 1px solid #444;\n  border-radius: 4px;\n  color: #fff;\n  margin-bottom: 20px;\n  outline: none;\n}\n\n.dialog-buttons {\n  display: flex;\n  justify-content: space-between;\n}\n\n.dialog-buttons button {\n  padding: 8px 20px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background-color: #444;\n  color: #fff;\n}\n\n.dialog-buttons button.confirm {\n  background-color: #fe2c55;\n}\n\n.me-name {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n\n.me-douyin-id {\n  font-size: 12px;\n  color: #888;\n}\n\n.me-stats {\n  display: flex;\n  gap: 20px;\n  padding: 0 20px;\n  margin-bottom: 20px;\n}\n\n.stat-item {\n  color: #888;\n  font-size: 14px;\n}\n\n.stat-item span {\n  color: #fff;\n  font-weight: bold;\n  font-size: 16px;\n  margin-right: 5px;\n}\n\n.me-tabs {\n  display: flex;\n  justify-content: space-around;\n  border-bottom: 1px solid #333;\n  padding-bottom: 10px;\n}\n\n.me-tab {\n  color: #888;\n  font-size: 16px;\n  padding-bottom: 5px;\n}\n\n.me-tab.active {\n  color: #fff;\n  font-weight: bold;\n  border-bottom: 2px solid #fe2c55;\n}\n\n.me-content {\n  padding: 50px 0;\n  text-align: center;\n  color: #666;\n}\n\n/* 发布弹窗样式 */\n.post-dialog {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #161823;\n  z-index: 50;\n  display: flex;\n  flex-direction: column;\n}\n\n.post-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  border-bottom: 1px solid #333;\n}\n\n.post-title {\n  font-weight: bold;\n  font-size: 18px;\n}\n\n.post-submit {\n  color: #fe2c55;\n  font-weight: bold;\n}\n\n.post-content {\n  flex: 1;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.input-group {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.input-group label {\n  color: #888;\n  font-size: 14px;\n}\n\n.input-group input,\n.input-group textarea {\n  width: 100%;\n  background-color: #252525;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 16px;\n  padding: 10px;\n  outline: none;\n}\n\n.input-group textarea {\n  height: 150px;\n  resize: none;\n}\n\n/* 朋友列表页面 */\n.friends-page {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 70px);\n  background-color: #161823;\n  z-index: 10;\n  overflow-y: auto;\n}\n\n.friends-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 40px 20px 10px;\n  position: sticky;\n  top: 0;\n  background-color: #161823;\n  z-index: 5;\n}\n\n.friends-title {\n  font-size: 20px;\n  font-weight: bold;\n}\n\n.friends-list {\n  padding: 0 10px;\n}\n\n.friend-item {\n  display: flex;\n  align-items: center;\n  padding: 12px 10px;\n  /* border-bottom: 1px solid #222; */\n}\n\n.friend-item:active {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n\n.friend-avatar {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  margin-right: 15px;\n  border: 1px solid #333;\n}\n\n.friend-info {\n  flex: 1;\n  overflow: hidden;\n}\n\n.friend-name-row {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  margin-bottom: 4px;\n}\n\n.friend-name {\n  font-size: 16px;\n  font-weight: 600;\n  color: #fff;\n}\n\n.friend-douyin-id {\n  font-size: 12px;\n  color: #888;\n}\n\n/* 消息页面样式 */\n.message-page {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 70px);\n  background-color: #161823;\n  z-index: 10;\n  overflow-y: auto;\n}\n\n.message-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 40px 20px 10px;\n  position: sticky;\n  top: 0;\n  background-color: #161823;\n  z-index: 5;\n  border-bottom: 1px solid #222;\n}\n\n.message-title {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.message-list {\n  padding: 0;\n}\n\n.message-item {\n  display: flex;\n  align-items: center;\n  padding: 12px 15px;\n}\n\n.message-item:active {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n\n.message-avatar {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  margin-right: 15px;\n  position: relative;\n  border: 1px solid #333;\n}\n\n.unread-badge {\n  position: absolute;\n  top: -2px;\n  right: -2px;\n  background-color: #fe2c55;\n  color: #fff;\n  font-size: 10px;\n  min-width: 16px;\n  height: 16px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 4px;\n}\n\n.message-info {\n  flex: 1;\n  overflow: hidden;\n}\n\n.message-name-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 4px;\n}\n\n.message-name {\n  font-size: 16px;\n  font-weight: 500;\n  color: #fff;\n}\n\n.message-time {\n  font-size: 12px;\n  color: #666;\n}\n\n.message-content-preview {\n  font-size: 13px;\n  color: #999;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* 朋友资料页 */\n.profile-page {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #161823;\n  z-index: 60; /* 覆盖一切 */\n  overflow-y: auto;\n}\n\n.back-btn {\n  position: absolute;\n  top: 40px;\n  left: 10px;\n  z-index: 70;\n  padding: 10px;\n}\n\n.douyin-id-input {\n  background: transparent;\n  border: none;\n  border-bottom: 1px solid #fe2c55;\n  color: #fff;\n  width: 120px;\n  font-size: 12px;\n  outline: none;\n}\n\n.profile-actions {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  margin-bottom: 20px;\n  padding: 0 20px;\n}\n\n.action-btn {\n  flex: 1;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.message-btn {\n  background-color: #fe2c55;\n  color: #fff;\n}\n\n.works-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1px;\n}\n\n.work-item {\n  aspect-ratio: 3/4;\n  position: relative;\n  background-color: #222;\n}\n\n.work-cover {\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-position: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.work-title-preview {\n  font-size: 12px;\n  padding: 5px;\n  text-align: center;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.work-likes {\n  position: absolute;\n  bottom: 5px;\n  left: 5px;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);\n}\n\n/* 评论区样式 */\n.comment-drawer-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 200;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n\n.comment-drawer {\n  background-color: #161823;\n  border-top-left-radius: 12px;\n  border-top-right-radius: 12px;\n  height: 70%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  animation: slideUp 0.3s ease-out;\n}\n\n@keyframes slideUp {\n  from {\n    transform: translateY(100%);\n  }\n  to {\n    transform: translateY(0);\n  }\n}\n\n.comment-header {\n  padding: 15px;\n  text-align: center;\n  position: relative;\n  border-bottom: 1px solid #222;\n}\n\n.comment-title {\n  font-size: 14px;\n  font-weight: bold;\n}\n\n.comment-close {\n  position: absolute;\n  right: 15px;\n  top: 12px;\n  font-size: 24px;\n  color: #666;\n}\n\n.comment-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 15px;\n}\n\n.comment-item {\n  display: flex;\n  margin-bottom: 20px;\n}\n\n.comment-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  margin-right: 10px;\n  flex-shrink: 0;\n}\n\n.comment-content-container {\n  flex: 1;\n  margin-right: 10px;\n}\n\n.comment-user {\n  color: #888;\n  font-size: 13px;\n  margin-bottom: 4px;\n}\n\n.comment-text {\n  font-size: 14px;\n  line-height: 1.4;\n  margin-bottom: 6px;\n  color: #ddd;\n}\n\n.reply-to {\n  color: #999;\n  margin-right: 4px;\n}\n\n.comment-meta {\n  font-size: 12px;\n  color: #666;\n  display: flex;\n  gap: 15px;\n}\n\n.comment-like {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n  color: #666;\n  font-size: 12px;\n}\n\n.empty-comments {\n  text-align: center;\n  color: #666;\n  margin-top: 50px;\n  font-size: 14px;\n}\n\n.comment-input-wrapper {\n  background-color: #161823;\n  border-top: 1px solid #222;\n}\n\n.replying-banner {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 15px 0;\n  font-size: 12px;\n  color: #999;\n}\n\n.cancel-reply {\n  font-size: 16px;\n  padding: 0 5px;\n  cursor: pointer;\n}\n\n.comment-input-area {\n  padding: 10px 15px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.comment-input-area input {\n  flex: 1;\n  background-color: #252525;\n  border: none;\n  border-radius: 18px;\n  padding: 10px 15px;\n  color: #fff;\n  font-size: 14px;\n  outline: none;\n}\n\n.emoji-icon {\n  font-size: 24px;\n  color: #666;\n}\n</style>\n'],sourceRoot:''}]);const s=r},7225:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'[data-v-0d279e8b] .slide-fade-enter-from{transform:translateX(100%);opacity:0}[data-v-0d279e8b] .slide-fade-enter-to{transform:translateX(0);opacity:1}[data-v-0d279e8b] .slide-fade-enter-active,[data-v-0d279e8b] .slide-fade-leave-active{transition:all 0.2s ease}[data-v-0d279e8b] .slide-fade-leave-active{position:absolute;inset:0}[data-v-0d279e8b] .slide-fade-leave-from{transform:translateX(0);opacity:1}[data-v-0d279e8b] .slide-fade-leave-to{transform:translateX(100%);opacity:0}.fade-enter-active[data-v-0d279e8b],.fade-leave-active[data-v-0d279e8b]{transition:opacity 0.2s ease}.fade-enter-from[data-v-0d279e8b],.fade-leave-to[data-v-0d279e8b]{opacity:0}.popup-enter-active[data-v-0d279e8b],.popup-leave-active[data-v-0d279e8b]{transition:opacity 0.2s ease,transform 0.2s ease}.popup-enter-from[data-v-0d279e8b],.popup-leave-to[data-v-0d279e8b]{opacity:0;transform:translate(-50%,-46%) scale(0.96)}.popup-enter-to[data-v-0d279e8b],.popup-leave-from[data-v-0d279e8b]{opacity:1;transform:translate(-50%,-50%) scale(1)}\n','',{version:3,sources:['webpack://./src/柏柏同层/index.vue'],names:[],mappings:'AA6kBA,yCACE,0BAA2B,CAC3B,SACF,CAEA,uCACE,uBAAwB,CACxB,SACF,CAEA,sFAEE,wBACF,CAGA,2CACE,iBAAkB,CAClB,OACF,CAGA,yCACE,uBAAwB,CACxB,SACF,CAEA,uCACE,0BAA2B,CAC3B,SACF,CAGA,wEAEE,4BACF,CACA,kEAEE,SACF,CAEA,0EAEE,gDAGF,CACA,oEAEE,SAAU,CACV,0CACF,CACA,oEAEE,SAAU,CACV,uCACF',sourcesContent:['<template>\n  <transition name="popup">\n    <div\n      v-show="sharedState.phone.show"\n      :class="`card${!sharedState.ST.isMobile ? \' card-pc\' : \'\'}`"\n      id="baibai_phone"\n      ref="cardRef"\n      @mousedown="startDrag"\n      @touchstart="startDrag"\n      @touchend="handleTouchEnd($event, false)"\n    >\n      <div class="btn1"></div>\n      <div class="btn2"></div>\n      <div class="btn3"></div>\n      <div class="btn4"></div>\n      <div class="dinbu">\n        <span id="time" style="font-size: 12px">{{ sharedState.phone.time }}</span>\n        <div style="display: flex; align-items: center; justify-self: end; gap: 2px">\n          <svg viewBox="0 0 1024 1024" width="16" height="15">\n            <path\n              d="M926.634667 294.912a32 32 0 1 1-39.936 50.005333C780.512 260.128 649.824 213.333333 512.053333 213.333333c-137.813333 0-268.544 46.826667-374.752 131.669334a32 32 0 1 1-39.936-50.005334C214.784 201.194667 359.562667 149.333333 512.053333 149.333333c152.437333 0 297.173333 51.818667 414.581334 145.578667z m-235.413334 298.133333a32 32 0 0 1-38.442666 51.178667A233.418667 233.418667 0 0 0 512.021333 597.333333c-51.541333 0-100.48 16.629333-140.8 46.912a32 32 0 1 1-38.442666-51.157333A297.408 297.408 0 0 1 512.021333 533.333333c65.504 0 127.893333 21.184 179.2 59.722667z m128-149.344a32 32 0 0 1-38.442666 51.168C703.829333 437.066667 610.378667 405.333333 512.032 405.333333c-98.368 0-191.850667 31.754667-268.8 89.578667a32 32 0 1 1-38.453333-51.157333C292.736 377.664 399.669333 341.333333 512.032 341.333333c112.32 0 219.242667 36.309333 307.189333 102.368zM512 853.333333a64 64 0 1 1 0-128 64 64 0 0 1 0 128z"\n              fill="currentColor"\n            ></path>\n          </svg>\n          <span style="font-size: 12px">78%</span>\n          <svg viewBox="0 0 1024 1024" width="15" height="15" style="justify-self: end">\n            <path\n              d="M984.2 434.8c-5-2.9-8.2-8.2-8.2-13.9v-99.3c0-53.6-43.9-97.5-97.5-97.5h-781C43.9 224 0 267.9 0 321.5v380.9C0 756.1 43.9 800 97.5 800h780.9c53.6 0 97.5-43.9 97.5-97.5v-99.3c0-5.8 3.2-11 8.2-13.9 23.8-13.9 39.8-39.7 39.8-69.2v-16c0.1-29.6-15.9-55.5-39.7-69.3zM912 702.5c0 12-6.2 19.9-9.9 23.6-3.7 3.7-11.7 9.9-23.6 9.9h-781c-11.9 0-19.9-6.2-23.6-9.9-3.7-3.7-9.9-11.7-9.9-23.6v-381c0-11.9 6.2-19.9 9.9-23.6 3.7-3.7 11.7-9.9 23.6-9.9h780.9c11.9 0 19.9 6.2 23.6 9.9 3.7 3.7 9.9 11.7 9.9 23.6v381z"\n              p-id="4287"\n              fill="currentColor"\n            ></path>\n            <path\n              d="M736 344v336c0 8.8-7.2 16-16 16H112c-8.8 0-16-7.2-16-16V344c0-8.8 7.2-16 16-16h608c8.8 0 16 7.2 16 16z"\n              p-id="4288"\n              fill="currentColor"\n            ></path>\n          </svg>\n        </div>\n      </div>\n      <div class="card-int" style="background-color: white">\n        <div id="Home_page" v-show="sharedState.phone.activeApp == \'home\'">\n          <Home></Home>\n        </div>\n\n        <div\n          id="App_Page"\n          v-show="sharedState.phone.activeApp && sharedState.phone.activeApp != \'home\'"\n          style="height: 100%"\n        >\n          <div class="twitter" id="App_twitter" style="display: none">\n            <div class="mimictwitter">\n              <div style="margin-right: 8px; margin-top: 10px">\n                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; align-items: center">\n                  <div\n                    style="border-radius: 50%; width: 32px; height: 32px; margin-left: 7px"\n                    class="twitter-close-btn user_avatar"\n                  ></div>\n                  <svg viewBox="0 0 24 24" style="width: 24.73px; height: 54px; justify-self: center">\n                    <g>\n                      <path\n                        d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"\n                      ></path>\n                    </g>\n                  </svg>\n                  <svg style="margin-left: auto; width: 24px; height: 24px" viewBox="0 0 1024 1024" aria-hidden="true">\n                    <g>\n                      <path\n                        d="M596.992 512q0 34.016-24 59.008-12 12-27.488 18.496T512.992 596q-34.016 0-59.008-24.992-4.992-4.992-8.51199999-10.016t-6.49600001-11.008-4.992-12.512-3.48799999-12.992-1.50400001-12.512q0-35.00800001 24.992-59.488t59.488-24.512 59.488 24q7.008 8 12.992 17.504t8.512 20.512T596.96 512z m0 332q0 35.00800001-24 59.008-8 8-17.504 13.504t-20.512 8.512-22.016 3.008q-34.016 0-59.008-24.992-6.016-4.992-10.496-12t-7.488-14.496-4.992-16-2.016-16.512q0-35.00800001 24.992-59.488t59.488-24.51199999 59.488 24.99199999q11.008 11.008 17.504 27.008t6.496 32z m0-664.992q0 35.00800001-24 59.008-8 8-17.504 13.504t-20.512 8.512-22.016 3.00800001q-34.016 0-59.008-24.51200001T428.96 179.04000001t24.992-59.00800001q12-12 27.488-18.496t31.488-6.496q35.00800001 0 60 24.992 11.008 11.008 17.504 27.008t6.496 32z"\n                        fill="#000000"\n                        p-id="1477"\n                      ></path>\n                    </g>\n                  </svg>\n                </div>\n                <div style="margin-top: 13px"></div>\n                <div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center">\n                  <span style="color: rgb(95, 111, 123)">为你推荐</span>\n                  <span><strong>正在关注</strong></span>\n                </div>\n                <div\n                  style="\n                    margin-top: 8px;\n                    display: grid;\n                    grid-template-columns: 1fr 1fr;\n                    align-items: center;\n                    justify-items: center;\n                  "\n                >\n                  <div></div>\n                  <div style="background-color: rgb(29, 155, 240); width: 100%; height: 4px; border-radius: 50px"></div>\n                </div>\n                <div style="width: 100%; height: 1px; background-color: rgb(240, 244, 245); margin-top: 2px"></div>\n              </div>\n\n              <div class="twitter-content">\n                <hr />\n              </div>\n            </div>\n          </div>\n          <transition name="slide-fade">\n            <div\n              v-show="sharedState.phone.activeApp == \'QQ\'"\n              id="QQ_div"\n              style="background-color: #eff3ff; width: 100%; height: 100%; box-sizing: border-box; position: relative"\n            >\n              <QQ></QQ>\n            </div>\n          </transition>\n\n      <div\n        id="RedNote_div"\n        v-show="sharedState.phone.activeApp == \'RedNote\'"\n        style="background-color: #eff3ff; width: 100%; height: 100%"\n      >\n        <RedNote></RedNote>\n      </div>\n\n      <div\n        id="Douyin_div"\n        v-show="sharedState.phone.activeApp == \'Douyin\'"\n        style="width: 100%; height: 100%; background-color: #000"\n      >\n        <Douyin></Douyin>\n      </div>\n\n      <div\n        id="Tinder_div"\n        v-show="sharedState.phone.activeApp == \'Tinder\'"\n        style="width: 100%; height: 100%; background-color: #fff"\n      >\n        <Tinder></Tinder>\n      </div>\n\n      <div\n        id="Instagram_div"\n        v-show="sharedState.phone.activeApp == \'Instagram\'"\n        style="width: 100%; height: 100%; background-color: #fff"\n      >\n        <Instagram></Instagram>\n      </div>\n\n      <div class="discord" id="App_discord" style="display: none; width: 100%; height: 100%">\n            <div class="discord-homepage" style="width: 100%; height: 100%">\n              <div class="discord-top">\n                <svg\n                  t="1744127791511"\n                  class="discord-top-return"\n                  viewBox="0 0 1024 1024"\n                  version="1.1"\n                  xmlns="http://www.w3.org/2000/svg"\n                  p-id="3402"\n                  width="28"\n                  height="28"\n                >\n                  <path\n                    d="M440.070244 831.562927c11.813463 0 23.601951-4.49561 32.593171-13.486829a45.980098 45.980098 0 0 0 0-65.161366l-198.730927-198.730927 589.674146 0.499512c24.001561 0 43.507512-19.431024 43.40761-43.40761 0-24.101463-19.480976-43.63239-43.507512-43.63239l-592.221659-0.574439 201.378342-201.378341a45.980098 45.980098 0 0 0 0-65.161366 45.980098 45.980098 0 0 0-65.186342 0L131.29678 476.734439a45.955122 45.955122 0 0 0-13.53678 33.16761v0.574439c0 13.361951 5.994146 25.300293 15.409951 33.292488l274.307122 274.332097c8.99122 8.966244 20.804683 13.461854 32.593171 13.461854z"\n                    p-id="3403"\n                    fill="#505058"\n                  ></path>\n                </svg>\n                <svg\n                  aria-hidden="true"\n                  width="20"\n                  height="20"\n                  fill="none"\n                  viewBox="0 0 24 24"\n                  style="margin-left: 15px; margin-right: 10px"\n                >\n                  <path\n                    fill="#313237"\n                    fill-rule="evenodd"\n                    d="M18.09 1.63c.4-.7 1.43-.7 1.82 0l3.96 6.9c.38.66-.12 1.47-.91 1.47h-7.92c-.79 0-1.3-.81-.91-1.48l3.96-6.9Zm.46 1.87h.9c.3 0 .52.26.5.55l-.22 2.02c-.01.16-.17.26-.33.23a1.92 1.92 0 0 0-.8 0c-.16.03-.32-.07-.33-.23l-.21-2.02a.5.5 0 0 1 .5-.55ZM19 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"\n                    clip-rule="evenodd"\n                    class=""\n                  ></path>\n                  <path\n                    fill="#313237"\n                    d="M14.8 3.34a.48.48 0 0 0-.24-.69A9.94 9.94 0 0 0 11 2c-4.97 0-9 3.58-9 8 0 1.5.47 2.91 1.28 4.11.14.21.12.49-.06.67l-1.51 1.51A1 1 0 0 0 2.4 18h5.1a.5.5 0 0 0 .49-.5c0-2.86 1.62-5.3 3.97-6.56.28-.15.38-.51.25-.8a2.86 2.86 0 0 1 .18-2.61l2.4-4.19ZM18.91 12.98a5.45 5.45 0 0 1 2.18 6.2c-.1.33-.09.68.1.96l.83 1.32a1 1 0 0 1-.84 1.54h-5.5A5.6 5.6 0 0 1 10 17.5a5.6 5.6 0 0 1 5.68-5.5c1.2 0 2.32.36 3.23.98Z"\n                    class=""\n                  ></path>\n                </svg>\n                <div class="discord-top-title"><strong>类脑ΟΔΥΣΣΕΙΑ</strong></div>\n                <div\n                  style="\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    background-color: #ebebeb;\n                    border-radius: 50%;\n                    height: 32px;\n                    width: 32px;\n                    margin-left: auto;\n                    margin-right: 10px;\n                  "\n                >\n                  <svg viewBox="0 0 1024 1024" width="16" height="16">\n                    <path\n                      d="M991.418182 972.8L791.272727 772.654545c79.127273-83.781818 130.327273-195.490909 130.327273-316.50909 0-251.345455-200.145455-451.490909-446.836364-451.49091C232.727273 0 32.581818 204.8 32.581818 451.490909s200.145455 451.490909 446.836364 451.490909c97.745455 0 190.836364-32.581818 265.309091-88.436363l200.145454 204.8 46.545455-46.545455zM102.4 451.490909c0-209.454545 167.563636-381.672727 377.018182-381.672727s377.018182 172.218182 377.018182 381.672727-172.218182 386.327273-381.672728 386.327273c-204.8 0-372.363636-172.218182-372.363636-386.327273z"\n                      fill="#55565c"\n                      p-id="12001"\n                    ></path>\n                  </svg>\n                </div>\n              </div>\n\n              <div style="width: 100%; height: 1px; background-color: #dcdcdc"></div>\n              <div style="width: 100%; height: 1px; background-color: #d8d9db"></div>\n\n              <div class="discord-top-button">\n                <div class="sortbutton">\n                  <svg\n                    aria-hidden="true"\n                    role="img"\n                    xmlns="http://www.w3.org/2000/svg"\n                    width="16"\n                    height="16"\n                    fill="none"\n                    viewBox="0 0 24 24"\n                  >\n                    <path\n                      fill="#515256"\n                      d="M16.3 21.7a1 1 0 0 0 1.4 0l4-4a1 1 0 0 0-1.4-1.4L18 18.58V3a1 1 0 1 0-2 0v15.59l-2.3-2.3a1 1 0 0 0-1.4 1.42l4 4ZM6.3 2.3a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L8 5.42V21a1 1 0 1 1-2 0V5.41l-2.3 2.3a1 1 0 0 1-1.4-1.42l4-4Z"\n                      class=""\n                    ></path>\n                  </svg>\n                  <div style="font-size: 14px; color: #515256">排序 & 查看</div>\n                  <svg\n                    aria-hidden="true"\n                    role="img"\n                    xmlns="http://www.w3.org/2000/svg"\n                    width="20"\n                    fill="none"\n                    viewBox="0 0 24 24"\n                  >\n                    <path\n                      fill="#515256"\n                      d="M5.3 9.3a1 1 0 0 1 1.4 0l5.3 5.29 5.3-5.3a1 1 0 1 1 1.4 1.42l-6 6a1 1 0 0 1-1.4 0l-6-6a1 1 0 0 1 0-1.42Z"\n                      class=""\n                    ></path>\n                  </svg>\n                </div>\n\n                <div class="tagbutton">\n                  <div style="font-size: 14px; color: #515256">标签</div>\n                  <svg\n                    aria-hidden="true"\n                    role="img"\n                    xmlns="http://www.w3.org/2000/svg"\n                    width="20"\n                    fill="none"\n                    viewBox="0 0 24 24"\n                  >\n                    <path\n                      fill="#515256"\n                      d="M5.3 9.3a1 1 0 0 1 1.4 0l5.3 5.29 5.3-5.3a1 1 0 1 1 1.4 1.42l-6 6a1 1 0 0 1-1.4 0l-6-6a1 1 0 0 1 0-1.42Z"\n                      class=""\n                    ></path>\n                  </svg>\n                </div>\n              </div>\n\n              <div style="width: 100%; height: 1px; background-color: #dcdcdc"></div>\n              <div style="width: 100%; height: 1px; background-color: #d8d9db"></div>\n              <div class="discord-cardlist">\n                <div class="discord-cardget">\n                  <span>查看帖子</span>\n                </div>\n              </div>\n            </div>\n            <div class="discord-thread-list" style="width: 100%; height: 100%; display: none"></div>\n          </div>\n        </div>\n\n        <div class="page_button" v-show="sharedState.phone.navButton" style="background-color: none" id="page_button">\n          <div style="width: 45px; display: flex; justify-content: center; height: 20px">\n            <svg viewBox="0 0 1024 1024" width="20" height="20">\n              <path\n                d="M810.666667 213.333333a42.666667 42.666667 0 0 1 42.368 37.674667L853.333333 256v274.304c0 79.274667-50.944 147.498667-120.490666 152.106667L725.333333 682.666667H273.706667l97.792 97.834666a42.666667 42.666667 0 0 1-56.32 63.872l-4.010667-3.541333-170.666667-170.666667a42.666667 42.666667 0 0 1 0-60.330666l170.666667-170.666667a42.666667 42.666667 0 0 1 63.872 56.32l-3.541333 4.010667L273.706667 597.333333H725.333333c19.584 0 39.936-24.618667 42.410667-59.861333l0.256-7.168V256a42.666667 42.666667 0 0 1 42.666667-42.666667z"\n                fill="#000000"\n                p-id="13502"\n              ></path>\n            </svg>\n          </div>\n\n          <div @click="changeApp" style="width: 45px; display: flex; justify-content: center">\n            <svg\n              t="1736242335450"\n              class="icon"\n              viewBox="0 0 1024 1024"\n              version="1.1"\n              xmlns="http://www.w3.org/2000/svg"\n              p-id="8709"\n              width="20"\n              height="20"\n            >\n              <path\n                d="M762.3 565.3c0-19 15.7-34.1 34.7-34.1 19 0 34.2 15.1 34.2 34.1v336.3c0 19-15.2 34.4-34.2 34.4H229.6c-19.1 0-34.7-15.4-34.7-34.4V565.3c0-19 15.7-34.1 34.7-34.1 18.6 0 34.2 15.1 34.2 34.1v301.9h498.5V565.3z m-638.2 9.3l388.8-387.8 389.3 387.8c13.2 13.2 35.2 13.2 48.4 0 13.4-13.2 13.4-35.1 0-48.3L538 114.1l-0.7-0.5c-13.4-13.2-35.2-13.2-48.6 0l-413 412.6c-13.6 13.2-13.6 35.1 0 48.3 13.2 13.2 35.2 13.2 48.4 0.1z"\n                fill="#231815"\n                p-id="8710"\n              ></path>\n            </svg>\n          </div>\n\n          <div @click="returnPage" style="width: 45px; display: flex; justify-content: center">\n            <svg\n              t="1736242697753"\n              class="icon"\n              viewBox="0 0 1024 1024"\n              version="1.1"\n              xmlns="http://www.w3.org/2000/svg"\n              p-id="9742"\n              width="20"\n              height="20"\n            >\n              <path\n                d="M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z"\n                fill="#272636"\n                p-id="9743"\n              ></path>\n            </svg>\n          </div>\n        </div>\n      </div>\n      <div\n        @dblclick="sharedState.phone.show = !sharedState.phone.show"\n        @mousedown="startDrag"\n        @touchstart="startDrag"\n        @touchend="handleTouchEnd($event, true)"\n        @click="console.log(JSON.stringify(sharedState.QQ.chars))"\n        class="top"\n        ref="topRef"\n        style="display: flex; align-items: center; justify-content: center"\n      >\n        <svg\n          t="1735485675807"\n          class="icon"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n          p-id="9713"\n          width="16"\n          height="16"\n          style="display: none"\n        >\n          <path\n            d="M716.8 805.823147 716.8 384.709973c0-95.68256-77.544107-173.2608-173.216427-173.2608L56.664747 211.449173c-3.754667 0-6.795947 3.024213-6.795947 6.741333L49.8688 805.819733c0 3.71712 3.04128 6.72768 6.795947 6.72768l130.061653 0c3.754667 0 6.792533-3.027627 6.792533-6.765227L193.518933 344.562347c0-3.744427 3.04128-6.782293 6.795947-6.782293l279.68512 0c52.52096 0 95.112533 42.571093 95.112533 95.09888l0 372.8896c0 3.741013 3.037867 6.761813 6.772053 6.761813l128.146773 0c3.72736 0 6.772053-3.017387 6.772053-6.72768M454.15424 805.778773c0 3.744427-3.01056 6.76864-6.76864 6.76864L317.354667 812.547413c-3.754667 0-6.795947-3.027627-6.795947-6.76864L310.55872 452.348587c0-3.741013 3.04128-6.77888 6.795947-6.77888l130.030933 0c3.75808 0 6.76864 3.037867 6.76864 6.77888l0 353.447253L454.15424 805.778773zM974.134613 805.778773c0 3.744427-3.044693 6.76864-6.79936 6.76864l-130.000213 0c-3.764907 0-6.826667-3.027627-6.826667-6.76864L830.508373 218.251947c0-3.75808 3.06176-6.792533 6.826667-6.792533l130.000213 0c3.75808 0 6.79936 3.034453 6.79936 6.792533L974.134613 805.778773z"\n            fill="#ffffff"\n            p-id="9714"\n          ></path>\n        </svg>\n      </div>\n\n      <div id="baibai_regexBubble_cache" style="width: 0; height: 0; position: absolute; display: none">\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script setup>\nimport bubble from \'./QQ/bubble/bubble.vue\';\nimport QQ from \'./QQ/QQ.vue\';\nimport RedNote from \'./RedNote/RedNote.vue\';\nimport Douyin from \'./Douyin/Douyin.vue\';\nimport Tinder from \'./Tinder/Tinder.vue\';\nimport Instagram from \'./Instagram/Instagram.vue\';\nimport { sharedState } from \'./shared-state\';\nimport Home from \'./Home.vue\';\nconsole.log(`index.vue取到的user头像:${sharedState.ST.userHead}`);\nconst user_avatar = computed(() => {\n  return `url(\'${sharedState.ST.userHead}\')`;\n});\n\n// 新增: 获取 .card 的 ref\nconst cardRef = ref(null);\nconst topRef = ref(null);\n\n// 新增: 拖动相关变量\nlet isDragging = false;\nlet startX = 0;\nlet startY = 0;\nlet initialLeft = 0;\nlet initialTop = 0;\nlet isTouchEvent = false; // 用于区分 touch 或 mouse\nlet hasMoved = false; // 是否真正移动（超过阈值）\n\n// 新增: 双击检测变量（仅触屏）\nlet lastTapTime = 0;\nconst doubleTapDelay = 300; // 双击间隔阈值（ms）\nconst dragThreshold = 5; // 拖动最小距离阈值（px）\n\n// 开始拖动（兼容 touchstart 和 mousedown）\nconst startDrag = e => {\n  if (e.target != cardRef.value && e.target != topRef.value) {\n    return;\n  }\n  if (!cardRef.value) return; // 确保 ref 已就绪\n  e.preventDefault();\n  console.log(`开始拖动`);\n  isDragging = true;\n  hasMoved = false; // 重置移动标志\n  isTouchEvent = e.type === \'touchstart\'; // 判断事件类型\n\n  // 根据事件类型获取起始坐标\n  if (isTouchEvent && e.touches.length > 0) {\n    startX = e.touches[0].clientX;\n    startY = e.touches[0].clientY;\n  } else {\n    startX = e.clientX;\n    startY = e.clientY;\n  }\n\n  initialLeft = cardRef.value.offsetLeft; // 初始 left\n  initialTop = cardRef.value.offsetTop; // 初始 top\n\n  // 使用 jQuery 绑定全局 move 和 end 事件（兼容环境限制）\n  if (isTouchEvent) {\n    $(\'body\').on(\'touchmove\', onDrag);\n    // 注意: touchend 绑定到 @touchend，无需在这里绑定\n  } else {\n    $(\'body\').on(\'mousemove\', onDrag);\n    $(\'body\').on(\'mouseup\', stopDrag);\n  }\n\n  e.preventDefault(); // 防止默认行为\n};\n\n// 拖动中（兼容 touchmove 和 mousemove）\nconst onDrag = e => {\n  console.log(`鼠标/触屏拖动中`);\n  if (!isDragging) return;\n\n  let currentX, currentY;\n  if (isTouchEvent && e.touches.length > 0) {\n    currentX = e.touches[0].clientX;\n    currentY = e.touches[0].clientY;\n  } else {\n    currentX = e.clientX;\n    currentY = e.clientY;\n  }\n\n  const dx = currentX - startX; // X 偏移\n  const dy = currentY - startY; // Y 偏移\n\n  // 如果偏移超过阈值，才视为真正拖动\n  if (Math.abs(dx) > dragThreshold || Math.abs(dy) > dragThreshold) {\n    hasMoved = true;\n    cardRef.value.style.left = `${initialLeft + dx}px`;\n    cardRef.value.style.top = `${initialTop + dy}px`;\n  }\n\n  e.preventDefault(); // 防止默认行为\n};\n\n// 停止拖动（仅用于 mouseup）\nconst stopDrag = () => {\n  console.log(`停止拖动 (鼠标)`);\n  isDragging = false;\n  hasMoved = false;\n\n  $(\'body\').off(\'mousemove\', onDrag);\n  $(\'body\').off(\'mouseup\', stopDrag);\n};\n\n// 新增: 处理触屏结束（整合双击和拖动停止）\nconst handleTouchEnd = (e, showChange = false) => {\n  console.log(`触屏结束,${showChange}`);\n  isDragging = false;\n\n  // 移除 touchmove 监听\n  $(\'body\').off(\'touchmove\', onDrag);\n\n  if (!hasMoved) {\n    // 如果没有真正移动，检查双击\n    const currentTime = new Date().getTime();\n    const tapInterval = currentTime - lastTapTime;\n\n    if (tapInterval < doubleTapDelay && tapInterval > 0 && showChange) {\n      // 双击检测到，触发隐藏逻辑\n      sharedState.phone.show = !sharedState.phone.show;\n      e.preventDefault(); // 防止默认双击行为（如缩放）\n    }\n\n    lastTapTime = currentTime; // 更新上次 tap 时间\n  }\n\n  hasMoved = false; // 重置移动标志\n};\n\nconst bgColor = computed(() => {\n  return sharedState.phone.colorSettings.background || \'#1b1717\';\n});\nconst borderColor = computed(() => {\n  let color = sharedState.phone.colorSettings.border || \'#dcdcdc\';\n  return `4px solid ${color}`;\n});\nconst buttonColor = computed(() => {\n  let color = sharedState.phone.colorSettings.button || \'#ce1212\';\n  return color;\n});\n\nconst card_width = computed(() => {\n  if (!sharedState.phone.width.now || !Number(sharedState.phone.width.now)) {\n    return \'200px\';\n  } else if (sharedState.phone.width.now > sharedState.phone.width.max) {\n    return `${sharedState.phone.width.max}px`;\n  } else if (sharedState.phone.width.now < sharedState.phone.width.min) {\n    return `${sharedState.phone.width.min}px`;\n  } else {\n    return `${sharedState.phone.width.now}px`;\n  }\n});\n\nconst card_height = computed(() => {\n  if (!sharedState.phone.height.now || !Number(sharedState.phone.height.now)) {\n    return `${sharedState.phone.height.min}px`;\n  } else if (sharedState.phone.height.now > sharedState.phone.height.max) {\n    return `${sharedState.phone.height.max}px`;\n  } else if (sharedState.phone.height.now < sharedState.phone.height.min) {\n    return `${sharedState.phone.height.min}px`;\n  } else {\n    return `${sharedState.phone.height.now}px`;\n  }\n});\n\nfunction returnPage() {\n  console.log(`点击了returnPage:${sharedState.phone.activeApp}`);\n  console.log(`Chatid:${sharedState.QQ.activeChatId}`);\n  if (sharedState.phone.activeApp == \'QQ\') {\n    if (!sharedState.QQ.activeChatId || sharedState.QQ.activeChatId == \'\') {\n      console.log(`切换APP`);\n      sharedState.phone.activeApp = \'RedNote\';\n    } else {\n      sharedState.QQ.activeChatId = null;\n    }\n  } else if (sharedState.phone.activeApp == \'RedNote\') {\n    if (!sharedState.RedNote.activePost || sharedState.RedNote.activePost == \'\') {\n      sharedState.phone.activeApp = \'QQ\';\n    } else {\n      sharedState.RedNote.activePost = null;\n    }\n  }\n}\n\nfunction changeApp() {\n  if (sharedState.phone.activeApp == \'QQ\') {\n    sharedState.phone.activeApp = \'RedNote\';\n  } else {\n    sharedState.phone.activeApp = \'QQ\';\n  }\n}\n<\/script>\n\n<style>\n@import \'./index.css\';\n.card {\n  /* background-color: v-bind(bgColor); */\n  border: v-bind(borderColor);\n  height: v-bind(card_height);\n  width: v-bind(card_width);\n  min-width: v-bind(card_width);\n  min-height: v-bind(card_height);\n  letter-spacing: 1px;\n  line-height: 1.4;\n}\n.top {\n  /* background-color: v-bind(bgColor); */\n  touch-action: none;\n}\n.btn1,\n.btn2,\n.btn3 {\n  background-color: v-bind(buttonColor);\n}\n\n.user_avatar {\n  background-image: v-bind(user_avatar);\n}\n/* .card-pc {\n  width: min(350px, 95vw, calc(70vh / 2));\n  height: auto;\n  aspect-ratio: 1 / 2;\n  max-height: 70vh;\n  max-width: min(350px, 95%);\n} */\n</style>\n\n<style scoped>\n/* 滑动出入 */\n/* 进入的起始状态 */\n:deep(.slide-fade-enter-from) {\n  transform: translateX(100%);\n  opacity: 0;\n}\n/* 进入的结束状态 */\n:deep(.slide-fade-enter-to) {\n  transform: translateX(0);\n  opacity: 1;\n}\n/* 进入和离开时的过渡 */\n:deep(.slide-fade-enter-active),\n:deep(.slide-fade-leave-active) {\n  transition: all 0.2s ease;\n}\n\n/* 关键：让正在离开的元素保持绝对定位，避免被新元素挤/盖 */\n:deep(.slide-fade-leave-active) {\n  position: absolute;\n  inset: 0;\n}\n\n/* 离开时的起始状态 */\n:deep(.slide-fade-leave-from) {\n  transform: translateX(0);\n  opacity: 1;\n}\n/* 离开时的结束状态 */\n:deep(.slide-fade-leave-to) {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n/* 遮罩层 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n/* 弹框动画 */\n.popup-enter-active,\n.popup-leave-active {\n  transition:\n    opacity 0.2s ease,\n    transform 0.2s ease;\n}\n.popup-enter-from,\n.popup-leave-to {\n  opacity: 0;\n  transform: translate(-50%, -46%) scale(0.96); /* 轻缩小+上移 */\n}\n.popup-enter-to,\n.popup-leave-from {\n  opacity: 1;\n  transform: translate(-50%, -50%) scale(1);\n}\n</style>\n'],sourceRoot:''}]);const s=r},8007:e=>{e.exports=function(e){if('undefined'==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var a='';t.supports&&(a+='@supports ('.concat(t.supports,') {')),t.media&&(a+='@media '.concat(t.media,' {'));var i=void 0!==t.layer;i&&(a+='@layer'.concat(t.layer.length>0?' '.concat(t.layer):'',' {')),a+=t.css,i&&(a+='}'),t.media&&(a+='}'),t.supports&&(a+='}');var o=t.sourceMap;o&&'undefined'!=typeof btoa&&(a+='\n/*# sourceMappingURL=data:application/json;base64,'.concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))),' */')),n.styleTagTransform(a,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},8136:(e,n,t)=>{var a=t(599);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('5811bebd',a,!1,{ssrId:!0})},8249:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.fade-enter-active[data-v-26f36778],.fade-leave-active[data-v-26f36778]{transition:opacity 0.2s ease}.fade-enter-from[data-v-26f36778],.fade-leave-to[data-v-26f36778]{opacity:0}.popup-enter-active[data-v-26f36778],.popup-leave-active[data-v-26f36778]{transition:opacity 0.2s ease,transform 0.2s ease}.popup-enter-from[data-v-26f36778],.popup-leave-to[data-v-26f36778]{opacity:0;transform:translate(-50%,-46%) scale(0.96)}.popup-enter-to[data-v-26f36778],.popup-leave-from[data-v-26f36778]{opacity:1;transform:translate(-50%,-50%) scale(1)}\n','',{version:3,sources:['webpack://./src/柏柏同层/QQ/chat_page.vue'],names:[],mappings:'AAunCA,wEAEE,4BACF,CACA,kEAEE,SACF,CAEA,0EAEE,gDAGF,CACA,oEAEE,SAAU,CACV,0CACF,CACA,oEAEE,SAAU,CACV,uCACF',sourcesContent:['<template>\n  <transition name="slide-fade">\n    <div\n      v-if="props.value.chartype != \'npc\'"\n      class="QQ_chat_page"\n      :style="`width: 100%; height: 100%; padding-top: 0px;${backgroundImg}`"\n    >\n      <div style="padding-top: 7px; backdrop-filter: blur(1px); background-color: rgb(255, 255, 255, 0.1)">\n        <div\n          style="\n            width: 100%;\n            height: 20px;\n            display: grid;\n            top: 0;\n            left: 0;\n            grid-template-columns: auto 1fr auto;\n            align-items: center;\n            margin-top: 20px;\n          "\n        >\n          <svg\n            class="QQ-close-btn"\n            viewBox="0 0 1024 1024"\n            style="height: 14px; width: 14px; margin-left: 8px"\n            @click="returnHome"\n          >\n            <path\n              d="M769.137778 153.372444L444.984889 512l324.152889 358.684444c36.408889 35.043556 36.408889 91.989333 0 126.976a95.744 95.744 0 0 1-131.868445 0l-377.571555-417.678222c-1.536-1.365333-3.584-1.877333-5.063111-3.299555A87.438222 87.438222 0 0 1 227.555556 512c-0.341333-23.324444 8.533333-46.876444 27.079111-64.739556 1.479111-1.422222 3.527111-1.934222 5.063111-3.185777L637.269333 26.339556a95.744 95.744 0 0 1 131.868445 0c36.408889 35.043556 36.408889 91.932444 0 127.032888z"\n              fill="#666666"\n              p-id="1570"\n            ></path>\n          </svg>\n          <div style="display: flex; align-items: center; max-width: 100%; overflow: hidden; margin-left: 5px">\n            <div\n              v-show="sharedState.QQ.allUnRead > 0"\n              class="new_tips"\n              style="\n                background-color: gray;\n                color: #fff;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                justify-content: center;\n                align-items: center;\n                font-size: 12px;\n                display: flex;\n              "\n            >\n              {{ sharedState.QQ.allUnRead }}\n            </div>\n            <span class="QQ_chat_username">{{ props.value.name }}</span>\n          </div>\n          <svg\n            id="QQ_chat_page_setting"\n            viewBox="0 0 1024 1024"\n            style="height: 15px; width: 15px; margin-right: 14px"\n            @click="openSetting"\n          >\n            <path\n              d="M901.632 896H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808zM901.632 568.32H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808zM901.632 240.64H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808z"\n              p-id="4301"\n              fill="#666666"\n            ></path>\n          </svg>\n        </div>\n        <div\n          style="width: 100%; height: 0.5px; background-color: #eee; margin-top: 5px; border-top: 1px solid #9a9a9a"\n        ></div>\n      </div>\n      <div\n        ref="msgContentRef"\n        class="msgcontent"\n        :style="{ marginBottom: computedMargin }"\n        style="padding-top: 15px; padding-bottom: 0"\n        @click="\n          containerShow.show = false;\n          containerShow.showtype = \'\';\n          isIncrease = false;\n        "\n      >\n        <bubble\n          v-for="msg in sharedState.QQ.chathistory[props.name]?.msgs || []"\n          :bubble="msg"\n          :is-group="sharedState.QQ.chathistory[props.name]?.chartype"\n          :senderinfo="sharedState.QQ.chars[msg?.sender]"\n        ></bubble>\n      </div>\n      \x3c!-- <div\n        style="display: none"\n        v-if="inputShow"\n        class="input-container"\n        :style="`background-color:${sharedState.QQ.chars[props.name].inputColor}`"\n      >\n        <div style="display: flex; align-items: center; width: 100%">\n          <div style="flex-grow: 1; margin-left: 5px; margin-right: 2%">\n            <input\n              v-model="text_value"\n              @keyup.enter="sendText(false)"\n              class="userInput"\n              type="text"\n              name=""\n              style="\n                box-sizing: border-box;\n                background-color: transparent;\n                background-color: unset !important;\n                border: 1px solid rgb(0, 0, 0, 0.5) !important;\n                color: black !important;\n              "\n            />\n          </div>\n          <div @click="sendText(true)" style="margin-right: 7px" id="QQ_chat_send-btn">\n            <button\n              style="\n                background-color: #fff;\n                border-radius: 10px;\n                height: 31px;\n                display: block;\n                width: 3.5rem;\n                background-color: transparent;\n                border: 1px solid rgb(0, 0, 0, 0.5);\n                color: black !important;\n              "\n            >\n              发送\n            </button>\n          </div>\n        </div>\n        <div class="QQ_chatpage_function">\n          <svg\n            @click="function_click(\'voice\')"\n            :class="`QQ_chatpage_function_voice${containerShow.showtype == \'voice\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            width="28"\n            height="25"\n          >\n            <path\n              d="M320.093091 234.682182a191.906909 191.906909 0 1 1 383.813818 0V512a191.906909 191.906909 0 1 1-383.813818 0V234.682182zM512 127.906909a106.728727 106.728727 0 0 0-106.728727 106.775273V512a106.728727 106.728727 0 1 0 213.457454 0V234.682182A106.728727 106.728727 0 0 0 512 127.906909zM192 448.093091c23.505455 0 42.589091 19.083636 42.589091 42.589091a277.410909 277.410909 0 0 0 554.821818 0 42.589091 42.589091 0 0 1 85.178182 0 362.589091 362.589091 0 0 1-320 360.122182v87.877818a42.589091 42.589091 0 0 1-85.178182 0v-87.924364a362.635636 362.635636 0 0 1-320-360.075636c0-23.552 19.083636-42.589091 42.589091-42.589091z"\n              p-id="8419"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'img\')"\n            :class="`QQ_chatpage_function_img${containerShow.showtype == \'img\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"\n              p-id="10905"\n            ></path>\n          </svg>\n          <svg class="QQ_chatpage_function_camera" viewBox="0 0 1024 1024" width="28" height="28">\n            <path\n              d="M269.44 256l23.296-75.381333A74.666667 74.666667 0 0 1 364.074667 128h295.850666a74.666667 74.666667 0 0 1 71.338667 52.618667L754.56 256H821.333333c64.8 0 117.333333 52.533333 117.333334 117.333333v426.666667c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V373.333333c0-64.8 52.533333-117.333333 117.333334-117.333333h66.773333z m23.605333 64H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v426.666667a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V373.333333a53.333333 53.333333 0 0 0-53.333334-53.333333h-90.378666a32 32 0 0 1-30.570667-22.549333l-30.272-97.930667a10.666667 10.666667 0 0 0-10.186667-7.52H364.074667a10.666667 10.666667 0 0 0-10.186667 7.52l-30.272 97.92A32 32 0 0 1 293.045333 320zM512 725.333333c-88.362667 0-160-71.637333-160-160 0-88.362667 71.637333-160 160-160 88.362667 0 160 71.637333 160 160 0 88.362667-71.637333 160-160 160z m0-64a96 96 0 1 0 0-192 96 96 0 0 0 0 192z"\n              p-id="6401"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'transfer\')"\n            :class="`QQ_chatpage_function_redpacket${containerShow.showtype == \'transfer\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            p-id="12169"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M827 357.60909131a522.16363653 522.16363653 0 0 1-159.83181826 81.9 155.45454521 155.45454521 0 0 1-310.33636348 0A522.16363653 522.16363653 0 0 1 197 357.60909131V798.36363652A90 90 0 0 0 287 888.36363653h450a90 90 0 0 0 90-90V357.60909131z m0-85.58181826V225.63636348A90 90 0 0 0 737 135.63636347H287A90 90 0 0 0 197 225.63636348v46.34999999a457.93636347 457.93636347 0 0 0 169.97727305 102.06818174 155.49545479 155.49545479 0 0 1 290.0454539 0A457.89545479 457.89545479 0 0 0 827 272.02727305zM287 70.18181826h450A155.45454521 155.45454521 0 0 1 892.45454521 225.63636348v572.72727304a155.45454521 155.45454521 0 0 1-155.45454521 155.45454522H287A155.45454521 155.45454521 0 0 1 131.54545479 798.36363652V225.63636348A155.45454521 155.45454521 0 0 1 287 70.18181826z m225 450a90 90 0 1 0 0-180 90 90 0 0 0 0 180z"\n              p-id="12170"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'emoji\')"\n            :class="`QQ_chatpage_function_emoji${containerShow.showtype == \'emoji\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            p-id="13480"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M512 64a448 448 0 1 1 0 896A448 448 0 0 1 512 64z m0 64a384 384 0 1 0 0 768A384 384 0 0 0 512 128zM282.624 611.2H351.36c35.52 60.416 82.112 96.128 160.64 96.128 73.92 0 117.888-27.072 155.008-84.928l6.848-11.2h67.52a246.208 246.208 0 0 1-453.76 11.84l-4.992-11.84H351.36z m387.2-251.264a48 48 0 1 1 0 96 48 48 0 0 1 0-96z m-315.2 0a48 48 0 1 1 0 96 48 48 0 0 1 0-96z"\n              p-id="13481"\n            ></path>\n          </svg>\n          <svg class="QQ_chatpage_function_other" viewBox="0 0 1024 1024" p-id="14615" width="28" height="28">\n            <path\n              d="M512 958.016611c-119.648434 0-232.1288-46.367961-316.736783-130.559656-84.640667-84.255342-131.263217-196.255772-131.263217-315.455235 0-119.168499 46.624271-231.199892 131.232254-315.424271 84.607983-84.191695 197.088348-130.559656 316.736783-130.559656s232.1288 46.367961 316.704099 130.559656c84.67163 84.224378 131.263217 196.255772 131.263217 315.391587 0.032684 119.199462-46.591587 231.232576-131.263217 315.455235C744.1288 911.615966 631.648434 958.016611 512 958.016611zM512 129.983389c-102.623626 0-199.071738 39.743475-271.583282 111.936783-72.480581 72.12794-112.416718 168.063432-112.416718 270.079828s39.903454 197.951888 112.384034 270.047144c72.511544 72.191587 168.959656 111.936783 271.583282 111.936783 102.592662 0 199.071738-39.743475 271.583282-111.936783 72.480581-72.160624 112.416718-168.063432 112.384034-270.079828 0-102.016396-39.903454-197.919204-112.384034-270.016181C711.071738 169.759548 614.592662 129.983389 512 129.983389z"\n              p-id="14616"\n            ></path>\n            <path\n              d="M736.00086 480.00086 544.00086 480.00086 544.00086 288.00086c0-17.664722-14.336138-32.00086-32.00086-32.00086s-32.00086 14.336138-32.00086 32.00086l0 192L288.00086 480.00086c-17.664722 0-32.00086 14.336138-32.00086 32.00086s14.336138 32.00086 32.00086 32.00086l192 0 0 192c0 17.695686 14.336138 32.00086 32.00086 32.00086s32.00086-14.303454 32.00086-32.00086L544.00258 544.00086l192 0c17.695686 0 32.00086-14.336138 32.00086-32.00086S753.696546 480.00086 736.00086 480.00086z"\n              p-id="14617"\n            ></path>\n          </svg>\n        </div>\n        <div class="drawer-wrap" :class="{ open: containerShow.show }">\n          <transition name="drawer">\n            <div\n              v-show="containerShow.show"\n              class="chat_function_container"\n              style="width: 100%; height: 250px; margin-top: 5px; border-top: #d7d5d5 1px solid"\n            >\n              <div v-show="containerShow.showtype == \'emoji\'" class="emoji_container">\n                <img\n                  v-for="(value, key) in sharedState.emoji"\n                  @click="sendEmoji(value, key)"\n                  :data-name="key"\n                  :src="value"\n                  alt="加载失败"\n                  loading="lazy"\n                  class="emoji_container_img"\n                />\n              </div>\n              <div\n                v-show="containerShow.showtype == \'voice\' || containerShow.showtype == \'img\'"\n                class="input_container"\n              >\n                <span>文字描述:</span>\n                <input v-model="specialText" type="text" placeholder="发送内容的文字描述" />\n                <button @click="sendSpecial" class="chat_function_input_container_button">确定</button>\n              </div>\n              <div v-show="containerShow.showtype == \'transfer\'" class="input_container">\n                <span>给对方转账:</span>\n                <input v-model="specialText" type="text" placeholder="输入转账金额,无需单位" />\n                <button @click="sendSpecial" class="chat_function_input_container_button">确定转账</button>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </div> --\x3e\n      <footer\n        v-if="inputShow"\n        class="chat-bar-wrap"\n        :class="{ \'is-mobile\': sharedState.ST.isMobile }"\n        role="contentinfo"\n        aria-label="聊天输入栏"\n        :style="`background-color:${sharedState.QQ.chars[props.name].inputColor || \'#f2f3f5\'}`"\n      >\n        <div class="chat-bar" aria-label="输入工具栏">\n          \x3c!-- 加号：更多功能入口 --\x3e\n          <button class="icon-btn" aria-label="更多功能" @click="special.show = !special.show">\n            <svg\n              class="icon"\n              viewBox="0 0 24 24"\n              fill="none"\n              stroke="currentColor"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              aria-hidden="true"\n            >\n              <path d="M12 5v14M5 12h14" />\n            </svg>\n          </button>\n\n          \x3c!-- 输入框主体 --\x3e\n          <div\n            class="input-shell"\n            style="\n              flex: 1 !important;\n              display: flex !important;\n              align-items: center !important;\n              background: #ffffff !important;\n              border-radius: 8px !important;\n              padding: 10px 12px !important;\n              box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04) !important;\n              min-width: 0 !important;\n            "\n          >\n            \x3c!-- input本体：先清空继承，再设定所需样式 --\x3e\n            <input\n              id="messageInput"\n              v-model="text_value"\n              placeholder="输入消息…"\n              style="\n                all: unset !important; /* 清空全局影响 */\n                box-sizing: border-box !important;\n                display: block !important;\n                width: 100% !important;\n                font-size: 15px !important;\n                line-height: 20px !important;\n                color: #333 !important;\n                background: transparent !important;\n                caret-color: #4a90e2 !important; /* 光标颜色可选 */\n              "\n              @keyup.enter="sendText(false)"\n            />\n          </div>\n\n          \x3c!-- 表情按钮（在右边，与发送键同侧） --\x3e\n          <button class="icon-btn" aria-label="表情" @click="function_click(\'emoji\')">\n            <svg\n              class="icon"\n              viewBox="0 0 24 24"\n              fill="none"\n              stroke="currentColor"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              aria-hidden="true"\n            >\n              <circle cx="12" cy="12" r="10" />\n              <path d="M8 10h.01M16 10h.01" />\n              <path d="M8.5 15c1 .8 2.2 1.2 3.5 1.2s2.5-.4 3.5-1.2" />\n            </svg>\n          </button>\n\n          \x3c!-- 发送按钮（始终可见；输入为空时置灰）:disabled="!text_value.trim()" --\x3e\n          <button\n            id="sendBtn"\n            :class="{ active: isAnimating }"\n            class="send-btn"\n            aria-label="发送"\n            @click="sendText(true)"\n          >\n            <svg\n              class="plane"\n              viewBox="0 0 24 24"\n              fill="none"\n              stroke="currentColor"\n              stroke-width="2"\n              stroke-linecap="round"\n              stroke-linejoin="round"\n              aria-hidden="true"\n            >\n              <path d="m22 2-7 20-3-9-9-3Z" />\n              <path d="M22 2 11 13" />\n            </svg>\n          </button>\n        </div>\n        <div class="drawer-wrap" :class="{ open: containerShow.show }">\n          <transition name="drawer">\n            <div\n              v-show="containerShow.show"\n              class="chat_function_container"\n              style="width: 100%; height: 250px; margin-top: 5px; border-top: #d7d5d5 1px solid"\n            >\n              <div v-show="containerShow.showtype == \'emoji\'" class="emoji_container">\n                <img\n                  v-for="(value, key) in sharedState.emoji"\n                  :data-name="key"\n                  :src="value"\n                  alt="加载失败"\n                  loading="lazy"\n                  class="emoji_container_img"\n                  @click="sendEmoji(value, key)"\n                />\n              </div>\n              <div\n                v-show="containerShow.showtype == \'voice\' || containerShow.showtype == \'img\'"\n                class="input_container"\n              >\n                <span>文字描述:</span>\n                <input v-model="specialText" type="text" placeholder="发送内容的文字描述" />\n                <button class="chat_function_input_container_button" @click="sendSpecial">确定</button>\n              </div>\n              <div v-show="containerShow.showtype == \'transfer\'" class="input_container">\n                <span>给对方转账:</span>\n                <input v-model="specialText" type="text" placeholder="输入转账金额,无需单位" />\n                <button class="chat_function_input_container_button" @click="sendSpecial">确定转账</button>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </footer>\n      <transition name="popup">\n        <div v-show="setting.enable && props.value.chartype != \'Group\'" class="chat-setting-popup">\n          <div class="chat-setting-header">\n            <span>聊天设置</span>\n            <svg class="close-setting-btn" viewBox="0 0 1024 1024" width="20" height="20" @click="closeSetting(false)">\n              <path\n                d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\n                fill="#666666"\n              ></path>\n            </svg>\n          </div>\n          <div class="chat-setting-content">\n            <div class="setting-item">\n              <span>气泡颜色</span>\n              <div style="flex: 1">\n                <input\n                  id="bubble-color-input"\n                  v-model="setting.bubble"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="颜色值"\n                />\n              </div>\n              <input id="bubble-color" v-model="setting.bubble" type="color" class="color-picker" />\n            </div>\n            <div class="setting-item">\n              <span>字体颜色</span>\n              <div style="flex: 1">\n                <input\n                  id="text-color-input"\n                  v-model="setting.text"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="颜色值"\n                />\n              </div>\n              <input id="text-color" v-model="setting.text" type="color" class="color-picker" />\n            </div>\n            <div class="setting-item">\n              <span>输入框色</span>\n              <div style="flex: 1">\n                <input\n                  id="text-color-input"\n                  v-model="setting.inputColor"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="颜色值"\n                />\n              </div>\n              <input id="text-color" v-model="setting.inputColor" type="color" class="color-picker" />\n            </div>\n            <div v-if="props.value.chartype == \'friend\'" class="setting-item">\n              <span>角色备注</span>\n              <div style="flex: 1">\n                <input\n                  id="chatbg-input"\n                  v-model="setting.name"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="对角色的备注"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="bg">选择文件</button>\n            </div>\n            <div class="setting-item">\n              <span>聊天壁纸</span>\n              <div style="flex: 1">\n                <input\n                  id="chatbg-input"\n                  v-model="setting.background"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入图片URL"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="bg">选择文件</button>\n            </div>\n            <div class="setting-item">\n              <span>聊天头像</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.head"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入图片URL"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="head">选择文件</button>\n            </div>\n            <div class="setting-item">\n              <span>使用机型</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.phone"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入手机型号"\n                />\n              </div>\n              <button style="display: none" class="pickfile-setting-btn" data-id="head">选择文件</button>\n            </div>\n            <div class="preview" style="margin: 0 auto">\n              <div\n                id="chat-setting-preview"\n                class="QQ_chat_msgdiv"\n                data-name="${username}"\n                :style="{\n                  margin: \'0 auto\',\n                  \'background-color\': setting.bubble,\n                  color: setting.text,\n                }"\n              >\n                <span>这是预览文本</span>\n              </div>\n            </div>\n            <input id="pickfile-input" type="file" accept="image/*" capture="camera" style="display: none" />\n          </div>\n          <div class="chat-setting-footer">\n            <button id="randomcolor-setting-btn" style="background-color: #919bec; color: white" @click="randomColor">\n              随机\n            </button>\n            <button id="save-setting-btn" @click="closeSetting(true)">保存</button>\n            <button id="cancel-setting-btn" @click="closeSetting(false)">取消</button>\n          </div>\n          <div style="font-size: 14px; color: gray; margin-left: 10px; margin-bottom: 5px">\n            聊天头像输入\'char\'就是用卡封面当头像\n          </div>\n          <div style="font-size: 14px; color: gray; margin-left: 10px; margin-bottom: 5px">\n            输入框颜色留空（就是不输入）就是透明\n          </div>\n        </div>\n      </transition>\n\n      <transition name="popup">\n        <div v-show="setting.enable && props.value.chartype == \'Group\'" class="chat-setting-popup">\n          <div class="chat-setting-header">\n            <span>聊天设置</span>\n            <svg class="close-setting-btn" viewBox="0 0 1024 1024" width="20" height="20" @click="closeSetting(false)">\n              <path\n                d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\n                fill="#666666"\n              ></path>\n            </svg>\n          </div>\n          <div class="chat-setting-content">\n            <div class="setting-item">\n              <span>群名称</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="groupSetting.name"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入群名"\n                />\n              </div>\n            </div>\n            <div class="setting-item">\n              <span>群壁纸</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.background"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="聊天壁纸"\n                />\n              </div>\n            </div>\n            <div class="setting-item">\n              <span>群头像</span>\n              <div style="flex: 1">\n                <input\n                  id="chathead-input"\n                  v-model="setting.head"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="群聊头像"\n                />\n              </div>\n            </div>\n            <div class="setting-item" style="align-items: start">\n              <span style="margin-top: 5px">群成员</span>\n              <div style="flex: 1">\n                <textarea\n                  v-model="groupSetting.members"\n                  rows="4"\n                  placeholder="告诉Ai群里都有谁，怎么输入都行没有格式规范，写个‘一群随机路人’进去也行"\n                ></textarea>\n              </div>\n            </div>\n            <div class="setting-item" style="align-items: start">\n              <span style="margin-top: 5px">群说明</span>\n              <div style="flex: 1">\n                <textarea\n                  v-model="groupSetting.content"\n                  rows="4"\n                  placeholder="告诉Ai角色们会在这里聊什么之类的，比如分享日常，聊八卦"\n                ></textarea>\n              </div>\n            </div>\n          </div>\n          <div style="font-size: 14px; color: gray; margin-left: 10px; margin-bottom: 5px">\n            点击保存后,会自动创建一个条目存放这些内容<br />\n            默认为蓝灯D4,可在创建后自行修改<br />\n            条目名称为：群聊{{ props.name }}\n          </div>\n          <div class="chat-setting-footer">\n            <button\n              id="randomcolor-setting-btn"\n              style="background-color: rgb(243 112 112); color: white"\n              @click="removeChar"\n            >\n              删除\n            </button>\n            <button id="save-setting-btn" @click="closeSettingGroup(true)">保存</button>\n            <button id="cancel-setting-btn" @click="closeSettingGroup(false)">取消</button>\n          </div>\n        </div>\n      </transition>\n\n      <transition name="fade">\n        <div v-show="setting.enable || special.show" class="popup-overlay"></div>\n      </transition>\n    </div>\n  </transition>\n</template>\n\n<script setup>\nimport { computed, nextTick, onBeforeUnmount, onMounted, ref, watch } from \'vue\';\nimport { sharedState } from \'../shared-state\';\nimport bubble from \'./bubble/bubble.vue\';\n\nconst props = defineProps([\'value\', \'name\']);\nconst text_value = ref(\'\');\nconst isAnimating = ref(false);\nconst msgContentRef = ref(null);\nconst currentMsgs = computed(() => sharedState.QQ.chathistory[props.name]?.msgs || []);\nconst setting = ref({\n  enable: false,\n  bubble: props.value.bubble || \'#FFFFFF\',\n  text: props.value.text || \'#000000\',\n  inputColor: props.value.inputColor || \'#FFFFFF\',\n  head: props.value.head,\n  background: props.value.background,\n  phone: props.value?.phone || \'隐藏机型\',\n  name: props.value.name || \'\',\n});\nconst backupSetting = JSON.parse(JSON.stringify(setting.value));\nconst containerShow = ref({\n  show: false,\n  showtype: \'\',\n});\nconst special = ref({\n  show: false,\n  msgtype: \'\',\n  text: {\n    voice: \'\',\n    img: \'\',\n    transfer: \'\',\n  },\n});\nconst backgroundImg = computed(() => {\n  if (props.name in sharedState.QQ.chars) {\n    const img = sharedState.QQ.chars[props.name].background;\n    if (img) {\n      return `background-image:url(\'${img}\')`;\n    } else {\n      return \'\';\n    }\n  } else {\n    console.log(`没有壁纸`);\n    return \'\';\n  }\n});\nconst inputShow = computed(() => {\n  if (\'banSend\' in props.value && props.value.banSend) {\n    return false;\n  } else {\n    return true;\n  }\n});\nconst groupSetting = ref({\n  name: \'\',\n  content: \'\',\n  members: \'\',\n});\n\nfunction openSetting() {\n  if (props.value.chartype == \'Group\') {\n    loadGroupSetting();\n  }\n  setting.value.enable = !setting.value.enable;\n}\n\nfunction loadGroupSetting() {\n  const char = sharedState.QQ.chars[props.name];\n  if (!char) return;\n  groupSetting.value.name = char.name;\n  groupSetting.value.members = char.members;\n  groupSetting.value.content = char.content;\n  setting.value.head = char.head;\n}\n\n// 定义你的变量（假设叫isIncrease，为true时增加margin-bottom）\nconst isIncrease = ref(false); // 你可以从props、store或其他地方设置这个值\n\n// 定义增加的数值（单位px，你可以改成变量）\nconst extraMargin = 250;\n\n// 计算margin-bottom的值\nconst computedMargin = computed(() => {\n  return \'0px\';\n  const base = 85; // 原有基础值\n  return `${base + (isIncrease.value ? extraMargin : 0)}px`;\n});\n\nwatch(\n  // 同步变动设置界面里的值\n  () => props.value,\n  newValue => {\n    setting.value.bubble = newValue.bubble;\n    setting.value.text = newValue.text;\n    setting.value.head = newValue.head;\n    setting.value.background = newValue.background;\n  },\n  { deep: true },\n); // 使用 deep: true 来侦听 props.value 对象内部属性的变化\n\nwatch(\n  () => sharedState.QQ.chathistory[props.name]?.msgs?.length,\n  newValue => {\n    scrollToBottom();\n  },\n);\n\nlet ro = null;\nlet prevClientH = 0;\nlet suspendRO = false; // 程序化滚动时暂停 RO 改写\nlet pendingShowBaseline = false; // 从隐藏回显示后的第一次，仅同步基线\nconst visible = computed(() => props.value?.chartype !== \'npc\');\nfunction teardownObserver() {\n  ro?.disconnect();\n  ro = null;\n}\n\nfunction setupObserver() {\n  const el = msgContentRef.value;\n  if (!el) return; // ref 还没到位，直接返回\n\n  // 先安全读取一次高度\n  prevClientH = el.clientHeight || 0;\n\n  // 每次重绑都先清理\n  teardownObserver();\n\n  ro = new ResizeObserver(() => {\n    const el = msgContentRef.value;\n    if (!el) return;\n\n    if (el.clientHeight === 0) {\n      pendingShowBaseline = true;\n      return;\n    }\n    if (suspendRO) {\n      prevClientH = el.clientHeight;\n      return;\n    }\n    if (pendingShowBaseline) {\n      pendingShowBaseline = false;\n      prevClientH = el.clientHeight;\n      return;\n    }\n\n    // 保底：如果已在底部就强贴底\n    const atBottom = el.scrollHeight - (el.scrollTop + el.clientHeight) <= 20;\n    if (atBottom) {\n      el.scrollTop = el.scrollHeight - el.clientHeight;\n      prevClientH = el.clientHeight;\n      return;\n    }\n\n    // 非底部时保持 bottomGap 不变\n    const bottomGap = el.scrollHeight - (el.scrollTop + prevClientH);\n    el.scrollTop = el.scrollHeight - el.clientHeight - bottomGap;\n    prevClientH = el.clientHeight;\n  });\n\n  ro.observe(el);\n}\n\nonMounted(async () => {\n  // 等下一帧，确保过了 transition 初始渲染\n  await nextTick();\n  if (visible.value) setupObserver();\n});\n\n// 当 v-if 切换或 ref 变化时，动态（重）绑定/解绑\nwatch([visible, msgContentRef], async ([isVisible]) => {\n  if (isVisible) {\n    await nextTick();\n    setupObserver();\n  } else {\n    teardownObserver();\n  }\n});\n\nonBeforeUnmount(() => {\n  teardownObserver();\n});\n\n// —— 其它函数里也加保险 ——\nconst scrollToBottom = () => {\n  const el = msgContentRef.value;\n  if (!el) return; // 防空\n  suspendRO = true;\n  nextTick(() => {\n    requestAnimationFrame(() => {\n      el.scrollTop = el.scrollHeight;\n      prevClientH = el.clientHeight || 0;\n      requestAnimationFrame(() => {\n        suspendRO = false;\n      });\n    });\n  });\n};\n\n// 进入会话时滚到底\nwatch(\n  () => sharedState.QQ.activeChatId,\n  newId => {\n    if (newId && newId === props.name) {\n      scrollToBottom();\n    }\n  },\n);\n\nfunction returnHome() {\n  sharedState.QQ.activeChatId = null;\n}\n\nfunction sendText(send) {\n  const sendValue = text_value.value;\n  if (sharedState.generate || !inputShow.value) {\n    return;\n  }\n  text_value.value = \'\';\n  const name = props.name;\n  console.log(`给${name}发送消息:${sendValue}`);\n  if (!sendValue.match(/\\S/) && sharedState.QQ.cacheMsg.length == 0) {\n    return;\n  }\n\n  isAnimating.value = true;\n  setTimeout(() => (isAnimating.value = false), 120);\n\n  if (name in sharedState.QQ.chathistory == false) {\n    sharedState.QQ.chathistory[name] = {\n      chartype: sharedState.QQ.chars[name].chartype == \'Group\' ? \'Group\' : \'private\',\n      msgs: [],\n    };\n  }\n\n  const time = new Date().toLocaleTimeString([], { hour: \'2-digit\', minute: \'2-digit\' });\n  if (sendValue) {\n    sharedState.QQ.addMsg(name, {\n      msgtype: \'text\',\n      content: sendValue,\n      sender: \'user\',\n      time: time,\n    });\n  }\n\n  const chartype = sharedState.QQ.chars[props.name]?.chartype;\n  const msgTag = `\n<msg>{{user}}|${props.name}|${sendValue}|${time}</msg>`;\n\n  if (sharedState.phone.sendModel == \'尾附\') {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message += `\n在群聊${props.name}中发送消息:${sendValue}`;\n    } else {\n      message += `\n给${props.name}发送消息:${sendValue}`;\n    }\n    // 添加 tag\n    message += msgTag;\n\n    const old_content = $(\'#send_textarea\').val().trim();\n    const new_content = old_content + message;\n    $(\'#send_textarea\')\n      .val(new_content.trim() || \'\')[0]\n      .dispatchEvent(new Event(\'input\', { bubbles: true }));\n    sharedState.QQ.cacheMsg = [];\n    return;\n  }\n\n  if (send) {\n    let message = sharedState.QQ.cacheMsg.join(\'\\n\').trim();\n    if (sendValue) {\n      if (chartype == \'Group\') {\n        message += `\n在群聊${props.name}中发送消息:${sendValue}`;\n      } else {\n        message += `\n给${props.name}发送消息:${sendValue}`;\n      }\n      message += msgTag;\n    }\n    sharedState.QQ.cacheMsg = [];\n    triggerSlash(`/send ${message.trim()}|/trigger`);\n  } else if (sendValue) {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message = `\n在群聊${props.name}中发送消息:${sendValue}`;\n    } else {\n      message = `\n给${props.name}发送消息:${sendValue}`;\n    }\n    message += msgTag;\n    sharedState.QQ.cacheMsg.push(message.trim());\n  }\n\n  // 不确定需不需要反正归零了就对了\n  sharedState.QQ.chathistory[name].unread = 0;\n}\n\nfunction closeSetting(save) {\n  setting.value.enable = false;\n  if (!save) {\n    setting.value = JSON.parse(JSON.stringify(backupSetting));\n    return;\n  }\n\n  if (setting.value.text) {\n    sharedState.QQ.chars[props.name].text = setting.value.text;\n  }\n  if (setting.value.bubble) {\n    sharedState.QQ.chars[props.name].bubble = setting.value.bubble;\n  }\n  if (setting.value.head) {\n    sharedState.QQ.chars[props.name].head = setting.value.head;\n  }\n  if (setting.value.background) {\n    sharedState.QQ.chars[props.name].background = setting.value.background;\n  }\n  if (setting.value.phone) {\n    sharedState.QQ.chars[props.name].phone = setting.value.phone;\n  }\n  if (props.value.chartype == \'friend\' && setting.value.name) {\n    sharedState.QQ.chars[props.name].name = setting.value.name;\n  }\n\n  // 输入框颜色为空则为透明\n  let inputColor = setting.value.inputColor;\n  if (!inputColor || inputColor == \'留空\' || inputColor == \'透明\') {\n    inputColor = \'transparent\';\n  }\n  sharedState.QQ.chars[props.name].inputColor = inputColor;\n\n  sharedState.QQ.saveChars();\n}\n\nasync function closeSettingGroup(save) {\n  setting.value.enable = false;\n\n  if (!save) {\n    loadGroupSetting();\n    return;\n  }\n\n  if (setting.value.background) {\n    sharedState.QQ.chars[props.name].background = setting.value.background;\n  }\n  if (setting.value.head) {\n    sharedState.QQ.chars[props.name].head = setting.value.head;\n  }\n  if (groupSetting.value.name) {\n    sharedState.QQ.chars[props.name].name = groupSetting.value.name;\n  }\n  if (groupSetting.value.members) {\n    sharedState.QQ.chars[props.name].members = groupSetting.value.members;\n  }\n  if (groupSetting.value.content) {\n    sharedState.QQ.chars[props.name].content = groupSetting.value.content;\n  }\n  await sharedState.QQ.saveChars();\n}\n\nfunction removeChar() {\n  alert(\'删除还没做,过几天再做\');\n  return;\n  if (!confirm(\'确定要删除吗?\\n聊天记录内的有关内容也会一起删除\')) {\n    return;\n  }\n  const isGroup = props.value.chartype == \'Group\';\n  console.log(`删除角色:${props.name}`);\n\n  // 先删除楼层的聊天记录\n\n  // 再删除世界书里的内容\n  const entryName = `群聊：${props.name}`;\n}\n\nfunction randomColor() {\n  const { bgColor, textColor } = sharedState.generateBubbleColor();\n  setting.value.bubble = bgColor;\n  setting.value.text = textColor;\n}\n\nfunction function_click(type) {\n  if (containerShow.value.showtype == type) {\n    containerShow.value.show = false;\n    containerShow.value.showtype = \'\';\n    isIncrease.value = false;\n  } else {\n    containerShow.value.show = true;\n    containerShow.value.showtype = type;\n    isIncrease.value = true;\n  }\n}\n\nfunction sendSpecial(type) {\n  if (sharedState.generate || !inputShow.value) {\n    return;\n  }\n  const name = props.name;\n  const send = false;\n  console.log(type, special.value.text[type]);\n  if (!special.value.text[type]) {\n    return;\n  }\n\n  const specialValue = special.value.text[type];\n  let sendType = \'\';\n  if (type == \'voice\') {\n    sendType = \'yy\';\n  } else if (type == \'transfer\') {\n    sendType = \'zz\';\n  } else {\n    sendType = type;\n  }\n  let sendMsg;\n  if (type != \'transfer\') {\n    sendMsg = `[${sendType}-${specialValue}]`;\n  } else {\n    sendMsg = `[${sendType}-${specialValue}元]`;\n  }\n  console.log(`发送出去的文本:${sendMsg}`);\n\n  if (name in sharedState.QQ.chathistory == false) {\n    sharedState.QQ.chathistory[name] = {\n      chartype: sharedState.QQ.chars[name].chartype == \'Group\' ? \'Group\' : \'private\',\n      msgs: [],\n    };\n  }\n\n  if (specialValue) {\n    const obj = {\n      msgtype: type,\n      content: specialValue,\n      sender: \'user\',\n      time: \'\',\n    };\n    if (type == \'transfer\') {\n      obj[\'count\'] = specialValue + \'元\';\n    }\n    sharedState.QQ.addMsg(name, obj);\n  }\n  const chartype = sharedState.QQ.chars[props.name]?.chartype;\n  if (sharedState.phone.sendModel == \'尾附\') {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message += `\n在群聊${props.name}中发送消息:${sendMsg}`;\n    } else {\n      message += `\n给${props.name}发送消息:${sendMsg}`;\n    }\n    const old_content = $(\'#send_textarea\').val().trim();\n    const new_content = old_content + message;\n    $(\'#send_textarea\')\n      .val(new_content.trim() || \'\')[0]\n      .dispatchEvent(new Event(\'input\', { bubbles: true }));\n    special.value.text[type] = \'\';\n    return;\n  }\n  if (send) {\n    let message = sharedState.QQ.cacheMsg.join(\'\\n\').trim();\n    if (specialValue) {\n      if (chartype == \'Group\') {\n        message += `\n在群聊${props.name}中发送消息:${sendMsg}`;\n      } else {\n        message += `\n给${props.name}发送消息:${sendMsg}`;\n      }\n    }\n    sharedState.QQ.cacheMsg = [];\n    triggerSlash(`/send ${message.trim()}|/trigger`);\n  } else {\n    let message = \'\';\n    if (chartype == \'Group\') {\n      message = `\n在群聊${props.name}中发送消息:${sendMsg}`;\n    } else {\n      message = `\n给${props.name}发送消息:${sendMsg}`;\n    }\n    sharedState.QQ.cacheMsg.push(message);\n  }\n  special.value.text[type] = \'\';\n  // 不确定需不需要反正归零了就对了\n  sharedState.QQ.chathistory[name].unread = 0;\n\n  special.value.show = false;\n}\n\nfunction sendEmoji(url, name) {\n  if (sharedState.generate || !inputShow.value) {\n    return;\n  }\n\n  if (props.name in sharedState.QQ.chathistory == false) {\n    console.log(`重置了聊天:${name}`);\n    console.log(JSON.stringify(sharedState.QQ.chathistory));\n    sharedState.QQ.chathistory[props.name] = {\n      chartype: sharedState.QQ.chars[props.name].chartype == \'Group\' ? \'Group\' : \'private\',\n      msgs: [],\n    };\n  }\n\n  sharedState.QQ.addMsg(props.name, {\n    msgtype: \'emoji\',\n    emoji: url,\n    content: name,\n    sender: \'user\',\n    time: \'\',\n  });\n\n  const chartype = sharedState.QQ.chars[props.name]?.chartype;\n  const sendMsg = `[bqb-${name}]`;\n  let message = \'\';\n\n  if (sharedState.phone.sendModel == \'尾附\') {\n    if (chartype == \'Group\') {\n      message += `\n在群聊${props.name}中发送消息:${sendMsg}`;\n    } else {\n      message += `\n给${props.name}发送消息:${sendMsg}`;\n    }\n    const old_content = $(\'#send_textarea\').val().trim();\n    const new_content = old_content + message;\n    $(\'#send_textarea\')\n      .val(new_content.trim() || \'\')[0]\n      .dispatchEvent(new Event(\'input\', { bubbles: true }));\n    return;\n  }\n\n  if (chartype == \'Group\') {\n    message = `\n在群聊${props.name}中发送消息:${sendMsg}`;\n  } else {\n    message = `\n给${props.name}发送消息:${sendMsg}`;\n  }\n  sharedState.QQ.cacheMsg.push(message);\n}\n<\/script>\n\n\x3c!-- 弹出框动画 --\x3e\n<style scoped>\n/* 遮罩层 */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n/* 弹框动画 */\n.popup-enter-active,\n.popup-leave-active {\n  transition:\n    opacity 0.2s ease,\n    transform 0.2s ease;\n}\n.popup-enter-from,\n.popup-leave-to {\n  opacity: 0;\n  transform: translate(-50%, -46%) scale(0.96); /* 轻缩小+上移 */\n}\n.popup-enter-to,\n.popup-leave-from {\n  opacity: 1;\n  transform: translate(-50%, -50%) scale(1);\n}\n</style>\n\n<style>\n.edge-catcher {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 30px; /* 可调 */\n  touch-action: none; /* 全放开，保证横向可捕获 */\n  z-index: 5; /* 确保在内容之上接收事件 */\n}\n\n/* 外层：占位 + 裁切，用 max-height 过渡实现“推开” */\n.drawer-wrap {\n  overflow: hidden;\n  max-height: 0; /* 关闭时不占空间 */\n  transition: max-height 0.24s ease;\n}\n.drawer-wrap.open {\n  max-height: 250px; /* 打开时占 250px 空间（你的固定高度） */\n}\n\n/* 内层：只做 transform/opacity，避免动布局属性 */\n.drawer-enter-active,\n.drawer-leave-active {\n  transition:\n    transform 0.24s ease,\n    opacity 0.24s ease;\n  will-change: transform, opacity;\n}\n.drawer-enter-from,\n.drawer-leave-to {\n  transform: translateY(100%); /* 从自身高度以下滑入/滑出 */\n  opacity: 0;\n}\n.drawer-enter-to,\n.drawer-leave-from {\n  transform: translateY(0);\n  opacity: 1;\n}\n</style>\n'],sourceRoot:''}]);const s=r},8304:(e,n,t)=>{var a=t(8249);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('6c8f4e27',a,!1,{ssrId:!0})},8481:(e,n,t)=>{var a=t(8482);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('61bbcb9e',a,!1,{ssrId:!0})},8482:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.douyin-chat-card{background-color:#161823;border-radius:8px;overflow:hidden;width:240px;max-width:100%;margin-top:5px;box-shadow:0 2px 8px rgba(0,0,0,0.2);cursor:pointer}.douyin-cover-container{width:100%;aspect-ratio:9/16;position:relative;background-color:#000}.douyin-cover{width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center}.douyin-play-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.3);border-radius:50%;padding:10px;display:flex;align-items:center;justify-content:center}.douyin-info{padding:10px}.douyin-title{color:white;font-size:14px;margin-bottom:8px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-align:left}.douyin-meta{display:flex;justify-content:space-between;align-items:center}.douyin-author{display:flex;align-items:center;gap:5px}.douyin-avatar{width:20px;height:20px;border-radius:50%;background-size:cover;background-position:center;background-color:#333}.douyin-name{color:#ccc;font-size:12px;max-width:100px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.douyin-like{display:flex;align-items:center;gap:3px;color:#999;font-size:12px}.douyin-title-overlay{width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:10px;box-sizing:border-box;text-align:center;word-break:break-all}\n','',{version:3,sources:['webpack://./src/柏柏同层/Douyin/card.vue'],names:[],mappings:'AA4DA,kBACE,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,WAAY,CACZ,cAAe,CACf,cAAe,CACf,oCAAwC,CACxC,cACF,CACA,wBACE,UAAW,CACX,iBAAkB,CAClB,iBAAkB,CAClB,qBACF,CACA,cACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,sBACF,CACA,kBACE,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,8BAAgC,CAChC,0BAA8B,CAC9B,iBAAkB,CAClB,YAAa,CACb,YAAa,CACb,kBAAmB,CACnB,sBACF,CACA,aACE,YACF,CACA,cACE,WAAY,CACZ,cAAe,CACf,iBAAkB,CAClB,mBAAoB,CACpB,oBAAqB,CACrB,2BAA4B,CAC5B,eAAgB,CAChB,eACF,CACA,aACE,YAAa,CACb,6BAA8B,CAC9B,kBACF,CACA,eACE,YAAa,CACb,kBAAmB,CACnB,OACF,CACA,eACE,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,0BAA2B,CAC3B,qBACF,CACA,aACE,UAAW,CACX,cAAe,CACf,eAAgB,CAChB,eAAgB,CAChB,kBAAmB,CACnB,sBACF,CACA,aACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,UAAW,CACX,cACF,CACA,sBACE,UAAW,CACX,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,YAAa,CACb,qBAAsB,CACtB,iBAAkB,CAClB,oBACF',sourcesContent:['<template>\n  <div class="douyin-chat-card">\n    <div class="douyin-cover-container">\n      <div class="douyin-cover" :style="coverStyle">\n        <div v-if="!props.cardContent.video" class="douyin-title-overlay" v-html="formattedContent"></div>\n        <div class="douyin-play-icon">\n          <svg viewBox="0 0 1024 1024" width="30" height="30" fill="rgba(255,255,255,0.8)">\n            <path d="M768 512L384 768V256z" />\n          </svg>\n        </div>\n      </div>\n    </div>\n    <div class="douyin-info">\n      <div class="douyin-title" v-html="formattedContent"></div>\n      <div class="douyin-meta">\n        <div class="douyin-author">\n          <div class="douyin-avatar" :style="`background-image: url(\'${props.cardContent.head}\');`"></div>\n          <div class="douyin-name">{{ props.cardContent.sender }}</div>\n        </div>\n        <div class="douyin-like">\n          <svg viewBox="0 0 1024 1024" width="14" height="14" fill="#999">\n            <path\n              d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"\n            />\n          </svg>\n          <span>{{ props.cardContent.like }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { computed } from \'vue\';\nconst props = defineProps([\'cardContent\']);\n\nconst coverStyle = computed(() => {\n  if (props.cardContent.video) {\n    return `background-image: url(\'${props.cardContent.video}\'); background-size: cover; background-position: center;`;\n  } else {\n    return `background-color: #161823; display: flex; align-items: center; justify-content: center; text-align: center; color: white; padding: 10px; font-size: 14px;`;\n  }\n});\n// 处理卡片显示的文字内容，逻辑与 douyin.vue 中的 warpHandle 类似\nconst formattedContent = computed(() => {\n  const c = props.cardContent;\n  // 优先显示 content 或 textContent，如果没有才显示 title\n  let text = c.content || c.textContent || c.title || \'\';\n\n  if (!text) return \'\';\n\n  // 处理换行符，将 \\n 替换为 html 的 <br>\n  text = text.replace(/\\\\n/g, \'<br>\'); // 处理转义的换行\n  text = text.replace(/\\n/g, \'<br>\'); // 处理真实的换行\n  // 简单处理一下图片等标签的换行显示（可选）\n  text = text.replace(/\\[(img|vedio|bqb)/g, `<br>[$1`);\n\n  return text;\n});\n<\/script>\n<style>\n.douyin-chat-card {\n  background-color: #161823;\n  border-radius: 8px;\n  overflow: hidden;\n  width: 240px;\n  max-width: 100%;\n  margin-top: 5px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n}\n.douyin-cover-container {\n  width: 100%;\n  aspect-ratio: 9/16;\n  position: relative;\n  background-color: #000;\n}\n.douyin-cover {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.douyin-play-icon {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 50%;\n  padding: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.douyin-info {\n  padding: 10px;\n}\n.douyin-title {\n  color: white;\n  font-size: 14px;\n  margin-bottom: 8px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-align: left;\n}\n.douyin-meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.douyin-author {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n.douyin-avatar {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  background-size: cover;\n  background-position: center;\n  background-color: #333;\n}\n.douyin-name {\n  color: #ccc;\n  font-size: 12px;\n  max-width: 100px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.douyin-like {\n  display: flex;\n  align-items: center;\n  gap: 3px;\n  color: #999;\n  font-size: 12px;\n}\n.douyin-title-overlay {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 10px;\n  box-sizing: border-box;\n  text-align: center;\n  word-break: break-all;\n}\n</style>\n'],sourceRoot:''}]);const s=r},9088:(e,n,t)=>{var a=t(4799);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('9855375e',a,!1,{ssrId:!0})},9254:(e,n,t)=>{var a=t(4469);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('7af0dabf',a,!1,{ssrId:!0})},9828:(e,n,t)=>{var a=t(5705);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('455be008',a,!1,{ssrId:!0})},9851:(e,n,t)=>{t.r(n),t.d(n,{default:()=>s});var a=t(1314),i=t.n(a),o=t(5378),r=t.n(o)()(i());r.push([e.id,'.QQ_chars-panel{width:80%;background-color:white;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,0.08);padding:15px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:1000;display:flex;flex-direction:column;max-height:80%;height:auto;border:1px solid #eaeaea;color:black;.QQ_chars-form-label{color:black !important}}.QQ_chars-title{text-align:center;margin-bottom:15px;color:#2c3e50;font-weight:500;font-size:18px}.QQ_chars-role-list{margin-bottom:20px;overflow-y:auto;max-height:50%;height:auto;padding:0 10px}.QQ_chars-role-item{display:flex;align-items:center;padding:10px 0;border-bottom:1px solid #f0f0f0;transition:background-color 0.2s}.QQ_chars-role-item:hover{background-color:#f9f9f9}.QQ_chars-role-info{flex:1;display:flex;align-items:center;justify-content:space-between}.QQ_chars-role-name{font-weight:500;font-size:14px;width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.QQ_chars-role-type{font-size:12px;padding:4px 8px;border-radius:12px;color:white}.QQ_chars-type-friend{background-color:#4caf50}.QQ_chars-type-group{background-color:#2196f3}.QQ_chars-type-npc{background-color:#ff9800}.QQ_chars-type-select{width:100%;padding:4px 6px;border:1px solid #e0e0e0;border-radius:4px;font-size:12px;background-color:white;cursor:pointer}.QQ_chars-type-friend-temp{background-color:#81c784;opacity:0.8}.QQ_chars-type-group-temp{background-color:#64b5f6;opacity:0.8}.QQ_chars-type-npc-temp{background-color:#ffb74d;opacity:0.8}.QQ_chars-delete-btn{background-color:#f44336;color:white;border:none;padding:4px 8px;border-radius:3px;cursor:pointer;font-size:12px;margin-left:8px;transition:background-color 0.2s;height:26px}.QQ_chars-delete-btn:hover{background-color:#d32f2f}.QQ_chars-add-role-form{background-color:#f9f9f9;padding:15px;border-radius:4px;border:1px solid #eaeaea}.QQ_chars-form-title{margin-bottom:10px;color:#2c3e50;font-weight:500;font-size:14px}.QQ_chars-form-row{display:flex;margin-bottom:8px;align-items:center;justify-content:space-between}.QQ_chars-form-label{font-size:12px;width:70px}.QQ_chars-form-input,.QQ_chars-form-select{padding:5px 8px;border:1px solid #ddd;border-radius:3px;font-size:12px;width:100%}.QQ_chars-form-input:focus,.QQ_chars-form-select:focus{outline:none;border-color:#2196f3}.QQ_chars-submit-btn{background-color:#4caf50;color:white;border:none;padding:6px 12px;border-radius:3px;cursor:pointer;font-size:12px;margin-top:5px;width:100%;transition:background-color 0.2s}.QQ_chars-submit-btn:hover{background-color:#45a049}.QQ_chars-empty-state{text-align:center;padding:20px 0;color:#888}.QQ_chars-empty-text{margin-top:5px;font-size:12px}\n','',{version:3,sources:['webpack://./src/柏柏同层/QQ/QQ.vue'],names:[],mappings:'AAk0BA,gBAEE,SAAU,CACV,sBAAuB,CACvB,iBAAkB,CAClB,qCAAyC,CACzC,YAAa,CACb,iBAAkB,CAClB,QAAS,CACT,OAAQ,CACR,8BAAgC,CAChC,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,cAAe,CACf,WAAY,CACZ,wBAAyB,CACzB,WAAY,CAEZ,qBACE,sBACF,CACF,CAEA,gBACE,iBAAkB,CAClB,kBAAmB,CACnB,aAAc,CACd,eAAgB,CAChB,cACF,CAEA,oBACE,kBAAmB,CACnB,eAAgB,CAChB,cAAe,CACf,WAAY,CACZ,cACF,CAEA,oBACE,YAAa,CACb,kBAAmB,CACnB,cAAe,CACf,+BAAgC,CAChC,gCACF,CAEA,0BACE,wBACF,CAEA,oBACE,MAAO,CACP,YAAa,CACb,kBAAmB,CACnB,6BACF,CAEA,oBACE,eAAgB,CAChB,cAAe,CACf,WAAY,CACZ,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAEA,oBACE,cAAe,CACf,eAAgB,CAChB,kBAAmB,CACnB,WACF,CAEA,sBACE,wBACF,CAEA,qBACE,wBACF,CAEA,mBACE,wBACF,CAEA,sBACE,UAAW,CACX,eAAgB,CAChB,wBAAyB,CACzB,iBAAkB,CAClB,cAAe,CACf,sBAAuB,CACvB,cACF,CACA,2BACE,wBAAyB,CACzB,WACF,CAEA,0BACE,wBAAyB,CACzB,WACF,CAEA,wBACE,wBAAyB,CACzB,WACF,CAEA,qBACE,wBAAyB,CACzB,WAAY,CACZ,WAAY,CACZ,eAAgB,CAChB,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,gCAAiC,CACjC,WACF,CAEA,2BACE,wBACF,CAEA,wBACE,wBAAyB,CACzB,YAAa,CACb,iBAAkB,CAClB,wBACF,CAEA,qBACE,kBAAmB,CACnB,aAAc,CACd,eAAgB,CAChB,cACF,CAEA,mBACE,YAAa,CACb,iBAAkB,CAClB,kBAAmB,CACnB,6BACF,CAEA,qBACE,cAAe,CACf,UACF,CAEA,2CAEE,eAAgB,CAChB,qBAAsB,CACtB,iBAAkB,CAClB,cAAe,CACf,UACF,CAEA,uDAEE,YAAa,CACb,oBACF,CAEA,qBACE,wBAAyB,CACzB,WAAY,CACZ,WAAY,CACZ,gBAAiB,CACjB,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,cAAe,CACf,UAAW,CACX,gCACF,CAEA,2BACE,wBACF,CAEA,sBACE,iBAAkB,CAClB,cAAe,CACf,UACF,CAEA,qBACE,cAAe,CACf,cACF',sourcesContent:['<template>\r\n  <div\r\n    v-show="sharedState.phone.activeApp == \'QQ\'"\r\n    id="App_QQ"\r\n    class="QQ"\r\n    style="width: 100%; height: 100%; box-sizing: border-box; position: relative"\r\n    :style="{\r\n      \'background-color\': sharedState.QQ.activePage == 1 ? \'#eff3ff\' : \'#FFFFFF\',\r\n    }"\r\n  >\r\n    <div v-show="!sharedState.QQ.activeChatId && sharedState.QQ.activePage == 1" id="QQ_home_page">\r\n      <div style="width: 100%; height: 30px"></div>\r\n      <div style="display: flex; align-items: center; gap: 5px; width: 100%; box-sizing: border-box">\r\n        <div\r\n          class="user_avatar"\r\n          style="width: 35px; height: 35px; border-radius: 50%; margin-left: 10px; cursor: pointer"\r\n          @click="sharedState.phone.activeApp = \'home\'"\r\n        ></div>\r\n        <div\r\n          style="\r\n            display: flex;\r\n            align-items: start;\r\n            justify-content: center;\r\n            flex-direction: column;\r\n            margin-left: 3px;\r\n            gap: 3px;\r\n          "\r\n        >\r\n          <span id="QQ_home_UserName" style="font-size: 14px; color: black !important"\r\n            ><strong>{{ sharedState.ST.userName }}</strong></span\r\n          >\r\n          <div\r\n            style="display: flex; align-items: center; height: 10px; cursor: pointer"\r\n            @click="sharedState.phone.panel = true"\r\n          >\r\n            <svg viewBox="0 0 1024 1024" width="13" height="13" style="margin-right: 2px">\r\n              <path\r\n                d="M957.539 464.339c-26.14-245.993-246.771-424.08-492.787-397.772C218.735 92.873 40.474 313.62 66.635 559.634 92.774 805.631 313.406 983.717 559.443 957.41c245.997-26.306 424.258-247.075 398.096-493.071z m-298.25-135.757c39.341 0 71.233 31.921 71.233 71.301 0 39.379-31.891 71.3-71.233 71.3-39.338 0-71.229-31.921-71.229-71.3 0-39.38 31.892-71.301 71.229-71.301z m-294.447 0c39.34 0 71.23 31.921 71.23 71.301 0 39.379-31.89 71.3-71.23 71.3s-71.228-31.921-71.228-71.3c0-39.38 31.887-71.301 71.228-71.301z m366.815 304.963c-21.735 96.663-119.97 163.563-219.591 163.563-103.222 0-200.969-68.713-220.487-167.453 0-26.686 20.351-36.26 32.887-36.26h370.156c9.115 0.017 43.978 3.176 37.035 40.15z"\r\n                fill="#fbba13"\r\n                p-id="5845"\r\n              ></path>\r\n            </svg>\r\n            <span style="font-size: 11px">Q我吧</span>\r\n            <svg viewBox="0 0 1024 1024" width="10" height="10" style="margin-top: 1px">\r\n              <path\r\n                d="M342.528 916.48c19.456 0 38.4-7.168 53.248-21.504l338.944-327.68c14.848-14.336 23.552-34.304 23.552-55.296s-8.192-40.96-23.552-55.296l-338.944-327.68c-30.72-29.696-79.36-28.672-108.544 2.048-29.696 30.72-28.672 79.36 2.048 108.544l281.6 272.384-281.6 272.384c-30.72 29.696-31.232 78.336-2.048 108.544 15.36 15.872 35.328 23.552 55.296 23.552z"\r\n                fill="#000000"\r\n                p-id="7578"\r\n              ></path>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n\r\n        <svg\r\n          viewBox="0 0 1024 1024"\r\n          version="1.1"\r\n          width="17"\r\n          height="17"\r\n          style="margin-left: auto; margin-right: 10px"\r\n          @click="sharedState.QQ.panel = !sharedState.QQ.panel"\r\n        >\r\n          <path\r\n            d="M512 0a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666h426.666666a42.666667 42.666667 0 0 1 0 85.333334H554.666667v426.666666a42.666667 42.666667 0 0 1-85.333334 0V554.666667H42.666667a42.666667 42.666667 0 0 1 0-85.333334h426.666666V42.666667a42.666667 42.666667 0 0 1 42.666667-42.666667z"\r\n            fill="#191919"\r\n            p-id="4261"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n\r\n      <div style="width: 100%; height: 10px"></div>\r\n      <div id="QQ_home_chars">\r\n        <div\r\n          style="\r\n            width: 100%;\r\n            height: 30px;\r\n            background-color: #eff3ff;\r\n            margin-top: 5px;\r\n            border-radius: 5px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            gap: 2px;\r\n          "\r\n        >\r\n          <svg viewBox="0 0 1024 1024" width="16" height="16">\r\n            <path\r\n              d="M446.112323 177.545051c137.567677 0.219798 252.612525 104.59798 266.162424 241.493333 13.562828 136.895354-78.778182 261.818182-213.617777 289.008485-134.852525 27.203232-268.386263-52.156768-308.945455-183.608889s25.018182-272.252121 151.738182-325.779394A267.235556 267.235556 0 0 1 446.112323 177.545051m0-62.060607c-182.794343 0-330.989899 148.195556-330.989899 330.989899s148.195556 330.989899 330.989899 330.989899 330.989899-148.195556 330.989899-330.989899-148.195556-330.989899-330.989899-330.989899z m431.321212 793.341415a30.849293 30.849293 0 0 1-21.94101-9.102223l-157.220202-157.220202c-11.752727-12.179394-11.584646-31.534545 0.37495-43.50707 11.972525-11.972525 31.327677-12.140606 43.494141-0.37495l157.220202 157.220202a31.036768 31.036768 0 0 1 6.723232 33.810101 31.004444 31.004444 0 0 1-28.651313 19.174142z m0 0"\r\n              fill="#919095"\r\n            ></path>\r\n          </svg>\r\n          <span style="color: #919095">搜索</span>\r\n        </div>\r\n\r\n        <div style="width: 100%; height: 13px"></div>\r\n        <div id="QQ_home_chars_div">\r\n          <home_chars v-for="(value, key) in sharedState.QQ.chars" :key="key" :value="value" :name="key"> </home_chars>\r\n        </div>\r\n\r\n        <div v-if="Object.keys(sharedState.QQ.chars).length == 0" style="text-align: center">点击右上角+添加角色</div>\r\n        <div v-if="Object.keys(sharedState.QQ.chars).length == 0" style="text-align: center; margin-top: 4px">\r\n          点击左上角头像修改手机颜色\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      v-show="!sharedState.QQ.activeChatId && sharedState.QQ.activePage == 3"\r\n      id="QQ_space_page"\r\n      style="height: 100%"\r\n    >\r\n      <div style="width: 100%; height: 35px"></div>\r\n      <div style="display: flex">\r\n        <span style="font-size: 16px; margin-left: 10px; color: black !important">动态</span>\r\n        <svg viewBox="0 0 1024 1024" width="20" height="20" style="margin-left: auto">\r\n          <path\r\n            d="M593.420488 922.099512c24.553022 0 44.456585 19.903563 44.456585 44.456586v11.988292c0 24.553022-19.903563 44.456585-44.456585 44.456586h-159.843903c-24.553022 0-44.456585-19.903563-44.456585-44.456586v-11.988292c0-24.553022 19.903563-44.456585 44.456585-44.456586h159.843903zM515.996098 0c24.276293 0 43.957073 19.68078 43.957073 43.957073l0.002997 54.191079C735.392843 121.808047 870.649756 272.137241 870.649756 454.056585V740.277073h102.4c24.553022 0 44.456585 19.903563 44.456585 44.456586v11.988292c0 24.553022-19.903563 44.456585-44.456585 44.456586H870.649756v1.998048H152.35122v-1.998048H52.948293C28.39527 841.178537 8.491707 821.274974 8.491707 796.721951v-11.988292C8.491707 760.180636 28.39527 740.277073 52.948293 740.277073H152.35122V454.056585c0-181.229019 134.231914-331.106654 308.696538-355.632702L461.049756 43.957073c0-24.276293 19.68078-43.957073 43.957073-43.957073h10.989269z m25.620979 197.047571h-60.233178c-126.178779 0-228.706654 101.264109-230.744664 226.958361l-0.029971 3.816273-0.000999 312.454868h521.783446V427.822205c0-127.454533-103.3211-230.774634-230.774634-230.774634z"\r\n            fill="#000000"\r\n            p-id="3355"\r\n          ></path>\r\n        </svg>\r\n        <svg viewBox="0 0 1065 1024" width="20" height="20" style="margin-right: 10px; margin-left: 15px">\r\n          <path\r\n            d="M1002.234305 330.02867V693.97133c0 53.148789-28.346021 101.741967-73.902125 128.063272l-315.349481 182.224419c-46.062284 26.321305-102.248146 26.321305-148.31043 0l-315.349481-182.224419c-46.062284-26.321305-73.902126-75.420662-73.902126-128.063272V330.02867c0-53.148789 28.346021-101.741967 73.902126-128.063272l315.349481-182.224419c46.062284-26.321305 102.248146-26.321305 148.31043 0l315.349481 182.224419c45.556105 26.321305 73.902126 74.914483 73.902125 128.063272z m-76.939199 0c0-25.308947-13.666831-49.099357-35.432526-61.753831l-315.349481-182.224419c-22.271873-12.654474-49.099357-12.654474-71.37123 0l-315.349481 182.224419c-22.271873 12.654474-35.432526 36.444884-35.432526 61.753831V693.97133c0 25.308947 13.666831 49.099357 35.432526 61.753831l315.349481 182.224419c22.271873 12.654474 49.099357 12.654474 71.37123 0l315.349481-182.224419c22.271873-12.654474 35.432526-36.444884 35.432526-61.753831V330.02867zM362.424123 508.709837C362.424123 410.004943 442.400395 329.522491 541.611468 329.522491s179.187346 80.482452 179.187346 179.187346-80.482452 179.187346-179.187346 179.187345-179.187346-79.470094-179.187345-179.187345z m76.939199 0c0 56.692042 46.062284 102.248146 102.248146 102.248146s102.248146-46.062284 102.248146-102.248146-46.062284-102.248146-102.248146-102.248146-102.248146 46.568463-102.248146 102.248146z"\r\n            fill="#000000"\r\n            p-id="13806"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n      <div style="width: 100%; height: 1px; background-color: #e6e6e6; margin-bottom: 10px; margin-top: 10px"></div>\r\n      <div id="space_contents" class="space_contents" style="overflow-y: auto; width: 100%; height: 100%">\r\n        <post v-for="value of sharedState.QQ.post" :key="value.id || Math.random()" :post="value"></post>\r\n        <div style="margin-bottom: 150px"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="QQ_bottom_nav">\r\n      <div\r\n        id="QQ_message_nav"\r\n        style="display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 1px"\r\n        @click="sharedState.QQ.activePage = 1"\r\n      >\r\n        <svg\r\n          id="QQ_message_svg"\r\n          class="icon"\r\n          viewBox="0 0 1024 1024"\r\n          width="20"\r\n          height="20"\r\n          style="transform: scale(1.15); transform-origin: center"\r\n          :style="{\r\n            fill: sharedState.QQ.activePage == 1 ? \'#019aff\' : \'#000000\',\r\n          }"\r\n        >\r\n          <path\r\n            d="M822.016 61.44H196.864A155.88352 155.88352 0 0 0 40.96 216.94976v426.2144a155.88352 155.88352 0 0 0 155.904 155.50976h9.6256a1.97632 1.97632 0 0 1 1.96608 1.9456l0.97792 84.992A72.832 72.832 0 0 0 322.72896 945.152l211.37408-141.09184a31.9744 31.9744 0 0 1 17.80736-5.39648h270.1056A155.88352 155.88352 0 0 0 977.92 643.16416V216.94976A155.88352 155.88352 0 0 0 822.016 61.44z m85.06368 581.72416a85.05344 85.05344 0 0 1-85.06368 84.84864H551.936a102.69184 102.69184 0 0 0-57.21088 17.33632l-211.39456 141.09184a1.9712 1.9712 0 0 1-3.072-1.6128l-0.97792-85.02272A72.97024 72.97024 0 0 0 206.4896 728.0128h-9.6256a85.05344 85.05344 0 0 1-85.06368-84.84864V216.94976A85.05344 85.05344 0 0 1 196.864 132.096h625.152a85.05344 85.05344 0 0 1 85.06368 84.84864v426.2144z"\r\n          ></path>\r\n          <path\r\n            d="M311.08608 381.76768a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z m207.80032 0a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z m212.52096 0a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z"\r\n          ></path>\r\n        </svg>\r\n        <span>消息</span>\r\n      </div>\r\n\r\n      <div\r\n        id="QQ_people_nav"\r\n        style="display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 1px"\r\n        @click="sharedState.phone.activeApp = \'RedNote\'"\r\n      >\r\n        <svg id="QQ_people_svg" viewBox="0 0 1024 1024" style="fill: #000000" width="20" height="20">\r\n          <path\r\n            d="M620.744191 538.879184c82.736353-40.523949 140.308583-124.785028 140.308583-222.936465 0-137.367601-111.714338-249.080915-249.02668-249.080915-137.367601 0-249.080915 111.713314-249.080915 249.080915 0 98.151437 57.57223 182.412516 140.363841 222.936465C235.330238 586.429153 111.796714 740.736565 111.796714 923.694503c0 18.464537 15.032368 33.443693 33.496905 33.443693 18.464537 0 33.497928-14.979156 33.497928-33.443693 0-183.774537 149.46001-333.343017 333.234547-333.343017 183.77556 0 333.234547 149.568481 333.234547 333.343017 0 18.464537 14.978133 33.443693 33.443693 33.443693 18.519796 0 33.496905-14.979156 33.496905-33.443693C912.20124 740.736565 788.668739 586.429153 620.744191 538.879184zM329.886801 315.942719c0-100.438527 81.70179-182.194552 182.140317-182.194552 100.384291 0 182.086082 81.756025 182.086082 182.194552 0 100.384291-81.702813 182.086082-182.086082 182.086082C411.587568 498.0288 329.886801 416.32701 329.886801 315.942719z"\r\n          ></path>\r\n        </svg>\r\n        <span>联系人</span>\r\n      </div>\r\n\r\n      <div\r\n        id="QQ_moment_nav"\r\n        style="\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          flex-direction: column;\r\n          gap: 1px;\r\n          position: relative;\r\n        "\r\n        @click="\r\n          sharedState.QQ.activePage = 3;\r\n          sharedState.QQ.post.forEach(item => (item.read = true));\r\n        "\r\n      >\r\n        <svg\r\n          id="QQ_moment_svg"\r\n          viewBox="0 0 1059 1024"\r\n          width="20"\r\n          height="20"\r\n          :style="{\r\n            fill: sharedState.QQ.activePage == 3 ? \'#019aff\' : \'#000000\',\r\n          }"\r\n        >\r\n          <path\r\n            d="M206.566465 1008.20002c11.278404 7.517627 30.080982 15.035253 45.117545 15.035254 11.281023 0 26.324133-3.75554 37.605156-7.517627l240.646548-127.777391 240.646547 127.777391c11.278404 7.517627 22.558118 7.517627 37.602537 7.517627 15.037872 0 30.075744-3.75554 45.118854-15.035254 22.559427-15.030015 37.598609-45.097903 30.082292-71.402393l-45.124092-278.110282L1037.545084 459.503632c18.799959-18.790793 26.321514-48.85868 18.799959-75.163172-7.516317-26.311038-33.839141-45.103141-60.156726-48.85868L714.181074 290.382568 593.854527 42.338864C582.577432 16.027826 556.254609 0.99912 526.177555 0.99912c-30.080982 0-56.403806 15.028706-67.684829 41.339744l-120.32 248.043704L63.679182 331.723621c-26.316276 3.756849-52.640409 22.548951-60.161965 48.853443-7.516317 26.309729-3.758159 56.376307 18.801269 75.169719l199.285852 199.183713-45.120164 278.106353c-3.758159 30.065269 7.521555 60.133156 30.082291 75.163171zM63.679182 406.886793l274.492235-41.339744 48.878322-7.518936 22.559427-45.097903 116.568389-248.042394 120.318691 248.043703 22.562046 45.097903 48.88225 7.516317 274.485688 41.339744L789.383529 606.074435l-33.845688 33.822117 7.522865 45.103141 45.124092 278.103734-240.651785-127.777391-41.356767-26.311039-45.124093 22.555499-240.646547 131.532931 45.120164-278.103734 7.521555-45.103141-30.082292-33.823427L63.679182 406.888102z"\r\n            p-id="37579"\r\n          ></path>\r\n          <path\r\n            d="M526.176246 692.509463c-131.604951 0-176.725115-127.777391-176.725116-131.53424-3.763396-15.035253 3.758159-30.065269 18.796031-33.828665 15.044419-3.75554 30.080982 3.763396 33.845688 18.793411 0 3.762087 33.839141 93.953964 124.084706 93.953965 90.239018 0 124.078159-93.953964 124.078159-93.953965 3.763396-15.030015 18.801269-22.548951 33.845688-18.793411 15.036563 3.763396 22.558118 22.555499 18.79603 33.828665 0 3.756849-45.120164 131.53555-176.721186 131.535549z"\r\n            p-id="37580"\r\n          ></path>\r\n        </svg>\r\n        <span>动态</span>\r\n        <div\r\n          v-show="sharedState.QQ.postUnread > 0"\r\n          class="new_tips"\r\n          style="\r\n            position: absolute;\r\n            right: -8px;\r\n            top: -8px;\r\n            background-color: red;\r\n            color: white;\r\n            width: 15px;\r\n            height: 15px;\r\n            border-radius: 50%;\r\n            justify-content: center;\r\n            align-items: center;\r\n            font-size: 12px;\r\n            display: flex;\r\n          "\r\n        >\r\n          {{ sharedState.QQ.postUnread }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      id="QQ_friend_info"\r\n      style="display: none; background-color: white; height: 100%; width: 100%; padding-top: 50px; padding-left: 10px"\r\n    >\r\n      <span>自定义名称:</span><input id="setcharname" type="text" name="" placeholder="这里输入名称" />\r\n      <br />\r\n      <br />\r\n      <span>自定义头像:</span>\r\n      <input id="QQ_head_input" type="file" />\r\n\r\n      <br /><br /><br />\r\n      <button onclick="Setfriendinfo(false)">取消</button>\r\n      <button onclick="Setfriendinfo(true)">确定</button>\r\n    </div>\r\n\r\n    <div id="QQ_chat_list" style="width: 100%; height: 100%; padding-top: 0px">\r\n      <chat_page\r\n        v-for="(value, key) in sharedState.QQ.chars"\r\n        v-show="sharedState.QQ.activeChatId === key"\r\n        :key="key"\r\n        :data-name="key"\r\n        :value="value"\r\n        :name="key"\r\n      />\r\n    </div>\r\n    <transition name="popup">\r\n      <div v-show="sharedState.phone.panel" class="chat-setting-popup">\r\n        <div class="chat-setting-header">\r\n          <span>手机设置</span>\r\n          <svg class="close-setting-btn" viewBox="0 0 1024 1024" width="20" height="20" @click="closeSetting(false)">\r\n            <path\r\n              d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\r\n              fill="#666666"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n        <div class="chat-setting-content" style="padding-top: 5px; overflow-x: hidden">\r\n          <fieldset\r\n            style="\r\n              border: 1px solid;\r\n              padding: 5px 10px 10px;\r\n              width: 100%;\r\n              display: flex;\r\n              gap: 15px;\r\n              flex-direction: column;\r\n            "\r\n          >\r\n            <legend>颜色设置:</legend>\r\n            <div class="setting-item">\r\n              <span>user气泡</span>\r\n              <div style="flex: 1">\r\n                <input\r\n                  id="text-color-input"\r\n                  v-model="phone_settings.userBubble"\r\n                  style="width: 100%"\r\n                  type="text"\r\n                  placeholder="颜色值"\r\n                />\r\n              </div>\r\n              <input v-model="phone_settings.userBubble" type="color" class="color-picker" />\r\n            </div>\r\n            <div class="setting-item">\r\n              <span>user字体</span>\r\n              <div style="flex: 1">\r\n                <input\r\n                  id="text-color-input"\r\n                  v-model="phone_settings.userText"\r\n                  style="width: 100%"\r\n                  type="text"\r\n                  placeholder="颜色值"\r\n                />\r\n              </div>\r\n              <input v-model="phone_settings.userText" type="color" class="color-picker" />\r\n            </div>\r\n            <div style="font-size: 14px; text-align: center">右边的框点一下可以选颜色</div>\r\n          </fieldset>\r\n          <fieldset\r\n            style="\r\n              border: 1px solid;\r\n              padding: 5px 10px 10px;\r\n              width: 100%;\r\n              display: flex;\r\n              flex-direction: column;\r\n              gap: 15px;\r\n            "\r\n          >\n            <legend>手机设置:</legend>\n            <div style="display: flex; width: 100%; align-items: center; gap: 5px">\n              <span>导航按键</span>\n              <select v-model="sharedState.phone.navButton" class="QQ_chars-form-select" style="flex: 1">\n                <option :value="false">不显示</option>\n                <option :value="true">显示</option>\n              </select>\n            </div>\n            <div class="setting-item">\n              <span>主屏壁纸</span>\n              <div style="flex: 1">\n                <input\n                  v-model="phone_settings.wallpaper"\n                  style="width: 100%"\n                  type="text"\n                  placeholder="输入图片链接，留空恢复默认"\n                />\n              </div>\n              <button type="button" class="color-picker" style="min-width: 64px" @click="phone_settings.wallpaper = \'\'">\n                清除\n              </button>\n            </div>\n            <fieldset style="border: 1px dashed #e0e0e0; padding: 8px; border-radius: 8px">\n              <legend style="padding: 0 6px">主屏图标</legend>\n              <div class="setting-item" v-for="key in [\'QQ\',\'RedNote\',\'Douyin\',\'Tinder\',\'Instagram\']" :key="key">\n                <span>{{ key }}</span>\n                <div style="flex: 1">\n                  <input\n                    v-model="phone_settings.icons[key]"\n                    style="width: 100%"\n                    type="text"\n                    :placeholder="`输入${key}图标链接，留空用默认`"\n                  />\n                </div>\n                <button\n                  type="button"\n                  class="color-picker"\n                  style="min-width: 64px"\n                  @click="phone_settings.icons[key] = \'\'"\n                >\n                  重置\n                </button>\n              </div>\n            </fieldset>\n            <div class="setting-item">\n              <svg style="width: 1.5rem; height: 1.5rem" viewBox="0 0 1024 1024" @click="setPhoneSize(\'width\', -10)">\n                <path\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n              <span>手机宽度</span>\r\n              <div style="flex: 1">\r\n                <input v-model="sharedState.phone.width.now" style="width: 100%" type="number" />\r\n              </div>\r\n              <svg\r\n                style="width: 1.5rem; height: 1.5rem; transform: rotate(180deg)"\r\n                viewBox="0 0 1024 1024"\r\n                @click="setPhoneSize(\'width\', 10)"\r\n              >\r\n                <path\r\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\r\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n            <div class="setting-item">\r\n              <svg style="width: 1.5rem; height: 1.5rem" viewBox="0 0 1024 1024" @click="setPhoneSize(\'height\', -10)">\r\n                <path\r\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\r\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n              <span>手机高度</span>\r\n              <div style="flex: 1">\r\n                <input v-model="sharedState.phone.height.now" style="width: 100%" type="number" />\r\n              </div>\r\n              <svg\r\n                style="width: 1.5rem; height: 1.5rem; transform: rotate(180deg)"\r\n                viewBox="0 0 1024 1024"\r\n                @click="setPhoneSize(\'height\', 10)"\r\n              >\r\n                <path\r\n                  d="M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z"\r\n                  p-id="3334"\r\n                ></path>\r\n                <path\r\n                  d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"\r\n                  p-id="3335"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n          </fieldset>\r\n          <fieldset style="border: 1px solid; padding: 5px 10px 10px; width: 100%">\r\n            <legend>有新消息时:</legend>\r\n            <div style="display: flex; align-items: center; gap: 5px">\r\n              <span>有格式自动弹出</span>\r\n              <input v-model="phone_settings.autoShow" checked="" type="checkbox" style="width: 1rem; height: 1rem" />\r\n            </div>\r\n            <div style="display: flex; align-items: center; margin-top: 5px; gap: 5px">\r\n              <span>无格式自动隐藏</span>\r\n              <input v-model="phone_settings.autoHide" checked="" type="checkbox" style="width: 1rem; height: 1rem" />\r\n            </div>\r\n            <div style="font-size: 12px; color: gray; margin-top: 10px">由于改了格式所以此项无效</div>\r\n          </fieldset>\r\n          <fieldset style="border: 1px solid; padding: 5px 10px 10px; width: 100%">\r\n            <legend>点击发送按钮时:</legend>\r\n            <div style="display: flex; align-items: start">\r\n              <span>直接发送消息</span>\r\n              <input v-model="phone_settings.sendModel" type="radio" value="normal" />\r\n            </div>\r\n            <div style="display: flex; align-items: start; margin-top: 5px">\r\n              <span>把消息添加到酒馆输入框</span>\r\n              <input v-model="phone_settings.sendModel" type="radio" value="尾附" />\r\n            </div>\r\n          </fieldset>\r\n        </div>\r\n        <div class="chat-setting-footer">\r\n          <button id="save-setting-btn" @click="closeSetting(true)">保存</button>\r\n          <button id="cancel-setting-btn" @click="closeSetting(false)">取消</button>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n\r\n    <transition name="fade">\r\n      <div v-show="sharedState.QQ.panel || sharedState.phone.panel" class="popup-overlay"></div>\r\n    </transition>\r\n    <transition name="popup">\r\n      <div v-show="sharedState.QQ.panel" class="QQ_chars-panel">\r\n        <div style="display: flex; align-items: center; margin-bottom: 10px">\r\n          <div style="text-align: center; font-size: 24px">角色管理面板</div>\r\n          <svg\r\n            style="margin-left: auto"\r\n            class="close-setting-btn"\r\n            viewBox="0 0 1024 1024"\r\n            width="24"\r\n            height="24"\r\n            @click="sharedState.QQ.panel = false"\r\n          >\r\n            <path\r\n              d="M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z"\r\n              fill="#666666"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n\r\n        <div class="QQ_chars-role-list" style="margin-bottom: 20px">\r\n          <div v-if="chars.length == 0" class="QQ_chars-empty-state">\r\n            <svg\r\n              style="margin: auto"\r\n              width="40"\r\n              height="40"\r\n              viewBox="0 0 24 24"\r\n              fill="none"\r\n              xmlns="http://www.w3.org/2000/svg"\r\n            >\r\n              <path\r\n                d="M12 4.35418C12.7329 3.52375 13.8053 3 15 3C17.2091 3 19 4.79086 19 7C19 9.20914 17.2091 11 15 11C13.8053 11 12.7329 10.4762 12 9.64582M15 21H3V20C3 16.6863 5.68629 14 9 14C12.3137 14 15 16.6863 15 20V21ZM15 21H21V20C21 16.6863 18.3137 14 15 14C13.9071 14 12.8826 14.2922 12 14.8027"\r\n                stroke="#888"\r\n                stroke-width="2"\r\n                stroke-linecap="round"\r\n                stroke-linejoin="round"\r\n              />\r\n            </svg>\r\n            <p class="QQ_chars-empty-text">暂无角色，请添加新角色</p>\r\n          </div>\r\n          <div v-for="value of chars" :key="value.id" class="QQ_chars-role-item">\r\n            <div class="QQ_chars-role-info">\r\n              <div class="QQ_chars-role-name" :title="value.name">{{ value.name }}</div>\r\n              <div :class="`QQ_chars-role-type ${value.class}`">{{ value.showtype }}</div>\r\n            </div>\r\n            <button class="QQ_chars-delete-btn" @click="removeChar(value)">删除</button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="QQ_chars-add-role-form">\r\n          <h3 class="QQ_chars-form-title">添加新角色</h3>\r\n          <div class="QQ_chars-form-row">\r\n            <label class="QQ_chars-form-label" for="roleName">角色名称:</label>\r\n            <div style="flex: 1 1 0%">\r\n              <input\r\n                id="roleName"\r\n                v-model="addCharInfo.name"\r\n                class="QQ_chars-form-input"\r\n                type="text"\r\n                placeholder="输入角色名称"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class="QQ_chars-form-row">\r\n            <label class="QQ_chars-form-label" for="roleType">角色类型:</label>\r\n            <div style="flex: 1 1 0%">\r\n              <select v-model="addCharInfo.type" class="QQ_chars-form-select">\r\n                <option value="friend">好友</option>\r\n                <option value="Group">群聊</option>\r\n                <option value="npc">NPC</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <button id="addRoleBtn" class="QQ_chars-submit-btn" @click="addChar">添加角色</button>\r\n        </div>\r\n\r\n        <div style="font-size: 12px; color: gray; margin-top: 10px">修改角色后退出聊天重进,让手机重新加载</div>\r\n        <div style="font-size: 12px; color: gray; margin-top: 3px">角色其他信息点进聊天框右上角修改</div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, ref, watch } from \'vue\';\r\nimport { IndexedDB, MyINI, sharedState } from \'../shared-state\';\r\nimport chat_page from \'./chat_page.vue\';\r\nimport home_chars from \'./home_chars.vue\';\r\nimport post from \'./post.vue\';\r\n// 添加这一行，确保面板初始状态是关闭的\r\nonMounted(() => {\r\n  sharedState.phone.panel = false;\r\n});\r\n\r\nconst chars = computed(() => {\r\n  const list = [];\r\n  const Sections = sharedState.QQ.charini.getAllSections();\r\n\r\n  // 遍历所有角色（包括不在配置文件中的）\r\n  for (const char in sharedState.QQ.chars) {\r\n    const obj = {};\r\n    obj.id = char;\r\n    obj.name = sharedState.QQ.chars[char].name;\r\n\r\n    // 检查是否在配置文件中\r\n    const inConfig = Sections.includes(char);\r\n\r\n    if (inConfig) {\r\n      // 从配置文件读取类型\r\n      const chartype = sharedState.QQ.charini.readValue(char, \'类型\');\r\n      if (chartype == \'群聊\') {\r\n        obj.chartype = \'Group\';\r\n        obj.showtype = \'群聊\';\r\n        obj.class = \'QQ_chars-type-group\';\r\n      } else if (chartype.toLowerCase() == \'npc\') {\r\n        obj.chartype = \'npc\';\r\n        obj.showtype = \'npc\';\r\n        obj.class = \'QQ_chars-type-npc\';\r\n      } else {\r\n        obj.chartype = \'friend\';\r\n        obj.showtype = \'好友\';\r\n        obj.class = \'QQ_chars-type-friend\';\r\n      }\r\n    } else {\r\n      // 不在配置文件中的角色，从内存中读取\r\n      const charData = sharedState.QQ.chars[char];\r\n      obj.chartype = charData.chartype || \'friend\';\r\n\r\n      if (obj.chartype == \'Group\') {\r\n        obj.showtype = \'群聊(临时)\';\r\n        obj.class = \'QQ_chars-type-group-temp\';\r\n      } else if (obj.chartype == \'npc\') {\r\n        obj.showtype = \'NPC(临时)\';\r\n        obj.class = \'QQ_chars-type-npc-temp\';\r\n      } else {\r\n        obj.showtype = \'好友(临时)\';\r\n        obj.class = \'QQ_chars-type-friend-temp\';\r\n      }\r\n    }\r\n\r\n    obj.inConfig = inConfig; // 标记是否在配置文件中\r\n    list.push(obj);\r\n  }\r\n  return list;\r\n});\r\n\r\nconst addCharInfo = ref({\n  name: \'\',\n  type: \'friend\',\n});\nlet backupColor = JSON.parse(JSON.stringify(sharedState.phone.colorSettings));\nlet backupWallpaper = sharedState.phone.wallpaper || \'\';\nlet backupIcons = JSON.parse(JSON.stringify(sharedState.phone.icons));\nconst phone_settings = ref({\n  background: sharedState.phone.colorSettings.background,\n  border: sharedState.phone.colorSettings.border,\n  button: sharedState.phone.colorSettings.button,\n  autoShow: sharedState.phone.autoShow,\n  autoHide: sharedState.phone.autoHide,\n  userBubble: sharedState.QQ.default.bubble,\n  userText: sharedState.QQ.default.text,\n  sendModel: sharedState.phone.sendModel,\n  wallpaper: sharedState.phone.wallpaper,\n  icons: JSON.parse(JSON.stringify(sharedState.phone.icons)),\n});\n\r\nwatch(\r\n  () => sharedState.phone.panel,\r\n  open => {\n    if (open) {\n      backupColor = JSON.parse(JSON.stringify(sharedState.phone.colorSettings));\n      backupWallpaper = sharedState.phone.wallpaper || \'\';\n      backupIcons = JSON.parse(JSON.stringify(sharedState.phone.icons));\n      phone_settings.value.background = sharedState.phone.colorSettings.background;\n      phone_settings.value.border = sharedState.phone.colorSettings.border;\n      phone_settings.value.button = sharedState.phone.colorSettings.button;\n      phone_settings.value.autoShow = sharedState.phone.autoShow;\n      phone_settings.value.autoHide = sharedState.phone.autoHide;\n      phone_settings.value.userBubble = sharedState.QQ.default.bubble;\n      phone_settings.value.userText = sharedState.QQ.default.text;\n      phone_settings.value.sendModel = sharedState.phone.sendModel;\n      phone_settings.value.wallpaper = sharedState.phone.wallpaper;\n      phone_settings.value.icons = JSON.parse(JSON.stringify(sharedState.phone.icons));\n    }\n  },\n);\n\r\nwatch(\r\n  () => phone_settings.value.wallpaper,\r\n  val => {\r\n    sharedState.phone.wallpaper = (val || \'\').trim();\r\n  },\r\n);\r\n\r\nfunction removeChar(char) {\r\n  const result = confirm(`确定要删除角色：${char.name}吗？`);\r\n  if (!result) {\r\n    return;\r\n  }\r\n\r\n  console.log(`删除角色:${char.id}`);\r\n\r\n  // 如果在配置文件中，从配置文件删除\r\n  if (char.inConfig) {\r\n    sharedState.QQ.charini.removeSection(char.id);\r\n  }\r\n\r\n  // 从内存中删除\r\n  if (char.id in sharedState.QQ.chars) {\r\n    delete sharedState.QQ.chars[char.id];\r\n  }\r\n\r\n  // 删除聊天记录（可选）\r\n  if (char.id in sharedState.QQ.chathistory) {\r\n    delete sharedState.QQ.chathistory[char.id];\r\n  }\r\n\r\n  // 保存更改\r\n  sharedState.QQ.saveChars();\r\n}\r\n\r\nfunction addChar() {\r\n  if (!addCharInfo.value.name) {\r\n    return;\r\n  }\r\n  let id = addCharInfo.value.name;\r\n  if (addCharInfo.value.type == \'Group\') {\r\n    const Sections = sharedState.QQ.charini.getAllSections();\r\n    while (true) {\r\n      id = \'\';\r\n      for (let i = 0; i < 6; i++) {\r\n        id += Math.floor(Math.random() * 10);\r\n      }\r\n      if (!Sections.includes(id)) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (addCharInfo.value.type == \'Group\' || addCharInfo.value.type == \'npc\') {\r\n    sharedState.QQ.charini.writeValue(id, \'类型\', addCharInfo.value.type == \'Group\' ? \'群聊\' : \'npc\');\r\n    if (addCharInfo.value.type == \'Group\') {\r\n      sharedState.QQ.charini.writeValue(id, \'群名\', addCharInfo.value.name);\r\n    }\r\n  } else {\r\n    sharedState.QQ.charini.writeValue(id, \'类型\', \'好友\');\r\n  }\r\n\r\n  sharedState.QQ.chars[id] = {\r\n    name: addCharInfo.value.name,\r\n    chartype: addCharInfo.value.type,\r\n    head: \'\',\r\n    background: \'\',\r\n    bubble: \'\',\r\n    text: \'\',\r\n  };\r\n\r\n  addCharInfo.value.name = \'\';\r\n  sharedState.QQ.saveChars();\r\n}\r\n\r\nasync function closeSetting(save) {\n  sharedState.phone.panel = false;\n  if (!save) {\n    sharedState.phone.colorSettings = JSON.parse(JSON.stringify(backupColor));\n    phone_settings.value.autoHide = sharedState.phone.autoHide;\n    phone_settings.value.autoShow = sharedState.phone.autoShow;\n    phone_settings.value.userBubble = sharedState.QQ.default.bubble;\n    phone_settings.value.userText = sharedState.QQ.default.text;\n    phone_settings.value.sendModel = sharedState.phone.sendModel;\n    sharedState.phone.wallpaper = backupWallpaper;\n    phone_settings.value.wallpaper = backupWallpaper;\n    sharedState.phone.icons = JSON.parse(JSON.stringify(backupIcons));\n    phone_settings.value.icons = JSON.parse(JSON.stringify(backupIcons));\n    return;\n  }\n\n  sharedState.phone.autoHide = phone_settings.value.autoHide;\n  sharedState.phone.autoShow = phone_settings.value.autoShow;\n  sharedState.QQ.default.bubble = phone_settings.value.userBubble;\n  sharedState.QQ.default.text = phone_settings.value.userText;\n  sharedState.phone.sendModel = phone_settings.value.sendModel;\n  sharedState.phone.wallpaper = (phone_settings.value.wallpaper || \'\').trim();\n  sharedState.phone.icons = JSON.parse(JSON.stringify(phone_settings.value.icons || {}));\n  // 保存到世界书\n  try {\n    const entry = sharedState.ST.getEntry([\'手机-基本设置\'], true);\n    if (!entry) {\n      alert(\'手机-基本设置条目不存在\');\n      return;\n    }\n    const ini = new MyINI();\n    ini.loadText(entry.content);\n    ini.writeValue(\'基本设置\', \'外框颜色\', sharedState.phone.colorSettings.border);\n    ini.writeValue(\'基本设置\', \'内框颜色\', sharedState.phone.colorSettings.background);\n    ini.writeValue(\'基本设置\', \'侧边按钮\', sharedState.phone.colorSettings.button);\n    ini.writeValue(\'基本设置\', \'主屏壁纸\', sharedState.phone.wallpaper);\n    ini.writeValue(\'基本设置\', \'图标-QQ\', sharedState.phone.icons.QQ || \'\');\n    ini.writeValue(\'基本设置\', \'图标-RedNote\', sharedState.phone.icons.RedNote || \'\');\n    ini.writeValue(\'基本设置\', \'图标-Douyin\', sharedState.phone.icons.Douyin || \'\');\n    ini.writeValue(\'基本设置\', \'图标-Tinder\', sharedState.phone.icons.Tinder || \'\');\n    ini.writeValue(\'基本设置\', \'图标-Instagram\', sharedState.phone.icons.Instagram || \'\');\n    ini.writeValue(\'基本设置\', \'自动显示\', sharedState.phone.autoShow);\n    ini.writeValue(\'基本设置\', \'自动隐藏\', sharedState.phone.autoHide);\n    ini.writeValue(\'基本设置\', \'气泡颜色\', sharedState.QQ.default.bubble);\n    ini.writeValue(\'基本设置\', \'字体颜色\', sharedState.QQ.default.text);\n    ini.writeValue(\'基本设置\', \'发送模式\', sharedState.phone.sendModel);\n    ini.writeValue(\'基本设置\', \'导航按键\', sharedState.phone.navButton);\n    console.log(`${ini.getAllText()}`);\n    await setLorebookEntries(sharedState.ST.worldName, [{ uid: entry.uid, content: ini.getAllText() }]);\n  } catch (e) {\n    console.error(`基本设置保存到世界书失败!${e}`);\n  }\n\n  // 保存手机尺寸\n  IndexedDB.setData(\'width\', sharedState.phone.width.now);\n  IndexedDB.setData(\'height\', sharedState.phone.height.now);\n  IndexedDB.setData(\'navButton\', sharedState.phone.navButton);\n}\n\nfunction setPhoneSize(sizeType, change) {\n  const minwidth = sharedState.phone.width.min;\r\n  const maxwidth = sharedState.phone.width.max;\r\n  const minheight = sharedState.phone.height.min;\r\n  const maxheight = sharedState.phone.height.max;\r\n\r\n  if (sizeType == \'width\') {\r\n    if (sharedState.phone.width.now + change < minwidth) {\r\n      sharedState.phone.width.now = minwidth;\r\n    } else if (sharedState.phone.width.now + change > maxwidth) {\r\n      sharedState.phone.width.now = maxwidth;\r\n    } else {\r\n      sharedState.phone.width.now += change;\r\n    }\r\n  } else if (sizeType == \'height\') {\r\n    if (sharedState.phone.height.now + change < minheight) {\r\n      sharedState.phone.height.now = minheight;\r\n    } else if (sharedState.phone.height.now + change > maxheight) {\r\n      sharedState.phone.height.now = maxheight;\r\n    } else {\r\n      sharedState.phone.height.now += change;\r\n    }\r\n  }\r\n}\r\n\r\n// function restoreColor() {}\r\n<\/script>\r\n\r\n<style scoped>\r\n/* 遮罩层 */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.2s ease;\r\n}\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n.popup-enter-active,\r\n.popup-leave-active {\r\n  transition:\r\n    opacity 0.2s ease,\r\n    transform 0.2s ease;\r\n}\r\n.popup-enter-from,\r\n.popup-leave-to {\r\n  opacity: 0;\r\n  transform: translate(-50%, -46%) scale(0.96); /* 轻缩小+上移 */\r\n}\r\n.popup-enter-to,\r\n.popup-leave-from {\r\n  opacity: 1;\r\n  transform: translate(-50%, -50%) scale(1);\r\n}\r\n</style>\r\n\r\n<style src="./chat.css"></style>\r\n\r\n<style>\r\n.QQ_chars-panel {\r\n  /* max-width: 300px; */\r\n  width: 80%;\r\n  background-color: white;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\r\n  padding: 15px;\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1000;\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-height: 80%;\r\n  height: auto;\r\n  border: 1px solid #eaeaea;\r\n  color: black;\r\n\r\n  .QQ_chars-form-label {\r\n    color: black !important;\r\n  }\r\n}\r\n\r\n.QQ_chars-title {\r\n  text-align: center;\r\n  margin-bottom: 15px;\r\n  color: #2c3e50;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n}\r\n\r\n.QQ_chars-role-list {\r\n  margin-bottom: 20px;\r\n  overflow-y: auto;\r\n  max-height: 50%;\r\n  height: auto;\r\n  padding: 0 10px;\r\n}\r\n\r\n.QQ_chars-role-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.QQ_chars-role-item:hover {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.QQ_chars-role-info {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.QQ_chars-role-name {\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.QQ_chars-role-type {\r\n  font-size: 12px;\r\n  padding: 4px 8px;\r\n  border-radius: 12px;\r\n  color: white;\r\n}\r\n\r\n.QQ_chars-type-friend {\r\n  background-color: #4caf50;\r\n}\r\n\r\n.QQ_chars-type-group {\r\n  background-color: #2196f3;\r\n}\r\n\r\n.QQ_chars-type-npc {\r\n  background-color: #ff9800;\r\n}\r\n\r\n.QQ_chars-type-select {\r\n  width: 100%;\r\n  padding: 4px 6px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n}\r\n.QQ_chars-type-friend-temp {\r\n  background-color: #81c784;\r\n  opacity: 0.8;\r\n}\r\n\r\n.QQ_chars-type-group-temp {\r\n  background-color: #64b5f6;\r\n  opacity: 0.8;\r\n}\r\n\r\n.QQ_chars-type-npc-temp {\r\n  background-color: #ffb74d;\r\n  opacity: 0.8;\r\n}\r\n\r\n.QQ_chars-delete-btn {\r\n  background-color: #f44336;\r\n  color: white;\r\n  border: none;\r\n  padding: 4px 8px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  margin-left: 8px;\r\n  transition: background-color 0.2s;\r\n  height: 26px;\r\n}\r\n\r\n.QQ_chars-delete-btn:hover {\r\n  background-color: #d32f2f;\r\n}\r\n\r\n.QQ_chars-add-role-form {\r\n  background-color: #f9f9f9;\r\n  padding: 15px;\r\n  border-radius: 4px;\r\n  border: 1px solid #eaeaea;\r\n}\r\n\r\n.QQ_chars-form-title {\r\n  margin-bottom: 10px;\r\n  color: #2c3e50;\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n}\r\n\r\n.QQ_chars-form-row {\r\n  display: flex;\r\n  margin-bottom: 8px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.QQ_chars-form-label {\r\n  font-size: 12px;\r\n  width: 70px;\r\n}\r\n\r\n.QQ_chars-form-input,\r\n.QQ_chars-form-select {\r\n  padding: 5px 8px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 3px;\r\n  font-size: 12px;\r\n  width: 100%;\r\n}\r\n\r\n.QQ_chars-form-input:focus,\r\n.QQ_chars-form-select:focus {\r\n  outline: none;\r\n  border-color: #2196f3;\r\n}\r\n\r\n.QQ_chars-submit-btn {\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  padding: 6px 12px;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n  width: 100%;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.QQ_chars-submit-btn:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.QQ_chars-empty-state {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n  color: #888;\r\n}\r\n\r\n.QQ_chars-empty-text {\r\n  margin-top: 5px;\r\n  font-size: 12px;\r\n}\r\n</style>\r\n'],sourceRoot:''}]);const s=r},9875:(e,n,t)=>{var a=t(6688);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('906ac368',a,!1,{ssrId:!0})},9976:(e,n,t)=>{var a=t(9851);a.__esModule&&(a=a.default),'string'==typeof a&&(a=[[e.id,a,'']]),a.locals&&(e.exports=a.locals);(0,t(4424).A)('2e1ca97f',a,!1,{ssrId:!0})}},t={};function a(e){var i=t[e];if(void 0!==i)return i.exports;var o=t[e]={id:e,exports:{}};return n[e](o,o.exports,a),o.exports}a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},a.nc=void 0;const i=Vue,o=_;var r=a.n(o);class s{sections;autoSave;save;constructor(){this.sections={},this.autoSave=''}loadLines(e){this.sections={};let n='';for(const t of e){const e=t.trim();if(e.startsWith('[')&&e.endsWith(']'))n=e.slice(1,-1);else if(n&&e.includes('=')){const[t,...a]=e.split('='),i=a.join('=').trim();this.sections[n]||(this.sections[n]={}),this.sections[n][t.trim()]=i}}return Object.keys(this.sections).length>0}loadText(e){if('string'!=typeof e)return console.error('Invalid text input'),!1;const n=e.replace(/\r\n/g,'\n').split(/\n+/).map(e=>e.trim()).filter(e=>e.length>0);return this.loadLines(n)}getAllSections(){return Object.keys(this.sections)}getAllKeys(e){return this.sections[e]?Object.keys(this.sections[e]):[]}readValue(e,n){return this.sections[e]?.[n]||''}readValueDouble(e,n){const t=parseFloat(this.readValue(e,n));return isNaN(t)?-1:t}writeValue(e,n,t){return!!n&&(this.sections[e]||(this.sections[e]={}),this.sections[e][n]=t.toString(),this.autoSave&&this.save(this.autoSave),!0)}getKeyByValue(e,n){const t=this.sections[e]||{};return Object.keys(t).find(e=>t[e]===n)||''}containsKey(e){return e in this.sections}removeSection(e){return delete this.sections[e],!0}getAllText(){let e='';for(const n of Object.keys(this.sections)){e+=`\n[${n}]`;const t=this.sections[n];for(const n of Object.keys(t)){e+=`\n${n}=${t[n]}`}}return e=e.trim(),e}}const l=(0,i.reactive)({ST:{worldInit:async()=>{let e=getChatWorldbookName('current');if(!e){e=getCharWorldbookNames('current').primary}if(e||(e=await getOrCreateChatWorldbook('current')),e){l.ST.worldName=e;try{l.ST.entries=await getWorldbook(e)}catch(e){console.error(e),l.ST.entries=[]}}},userName:'',userHead:'',charName:'',charHead:'',isMobile:!1,worldName:'',chatId:'',entries:[],getEntry:(e,n)=>l.ST.entries&&l.ST.entries.find(n=>e.includes(n.name))||null},RedNote:{randomHead:[],post:[],activePost:'',addPost:e=>{e.id||(e.id=Math.random().toString(36).substring(2)),l.RedNote.post.find(n=>n.id===e.id)||(e.comments||(e.comments=[]),l.RedNote.post.unshift(e))},getRandomHead:()=>0===l.RedNote.randomHead.length?'':l.RedNote.randomHead[Math.floor(Math.random()*l.RedNote.randomHead.length)]},Douyin:{userName:'',userHead:'',userDouyinId:'',baseFollowing:0,baseFollowers:0,baseFriends:0,following:0,followers:0,friends:0,videos:[],chathistory:{},activeVideoIndex:0,addVideo(e){e.id||(e.id=Math.random().toString(36).substring(2)),l.Douyin.videos.find(n=>n.id===e.id)||(e.comments||(e.comments=[]),e.like||(e.like='0'),e.comment||(e.comment='0'),e.collect||(e.collect='0'),e.share||(e.share='0'),l.Douyin.videos.unshift(e))},addMsg(e,n){if('time'in n==0||!n.time||n.time,e in l.Douyin.chathistory==0&&(l.Douyin.chathistory[e]={chartype:'private',msgs:[]}),0==l.Douyin.chathistory[e].msgs.length)n.time&&l.Douyin.chathistory[e].msgs.push({msgtype:'system',sender:'system',content:n.time,time:n.time});else{const t=l.Douyin.chathistory[e].msgs.at(-1);if(t&&t.content===n.content&&t.sender===n.sender&&t.msgtype===n.msgtype)return;const a=t?t.time:'';if(a){const t=a.replace('：',':').split(':'),i=n.time.replace('：',':').split(':');t.length>=2&&i.length>=2&&Math.abs(t[1]-i[1])>=5&&l.Douyin.chathistory[e].msgs.push({msgtype:'system',sender:'system',content:n.time,time:n.time})}}if(l.Douyin.chathistory[e].msgs.push(n),l.Douyin.chathistory[e].lastMsg=n.content,l.Douyin.chathistory[e].time=n.time,l.Douyin.chathistory[e].unread||(l.Douyin.chathistory[e].unread=0),l.QQ.activeChatId==e&&'Douyin'==l.phone.activeApp)l.Douyin.chathistory[e].unread=0;else if('user'!=n.sender){const n=Number(l.Douyin.chathistory[e].unread)+1;l.Douyin.chathistory[e].unread=n}else'user'==n.sender&&(l.Douyin.chathistory[e].unread=0)},getUserVideos:e=>e?l.Douyin.videos.filter(n=>n.sender===e):[],async saveSettings(){const e=l.ST.getEntry(['手机-基本设置'],!0);if(!e)return;const n=new s;n.loadText(e.content),l.Douyin.userName&&n.writeValue('基本设置','抖音昵称',l.Douyin.userName),l.Douyin.userHead&&n.writeValue('基本设置','抖音头像',l.Douyin.userHead),l.Douyin.userDouyinId&&n.writeValue('基本设置','抖音号',l.Douyin.userDouyinId),n.writeValue('基本设置','抖音关注',l.Douyin.baseFollowing||0),n.writeValue('基本设置','抖音粉丝',l.Douyin.baseFollowers||0),n.writeValue('基本设置','抖音朋友',l.Douyin.baseFriends||0),await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}])}},Instagram:{userName:'',userHead:'',userBio:'',followers:'0',following:'0',posts:[],stories:[],activePost:'',chathistory:{},addMsg(e,n){'time'in n==0||!n.time||n.time,e in l.Instagram.chathistory==0&&(l.Instagram.chathistory[e]={chartype:'private',msgs:[],unread:0});const t=l.Instagram.chathistory[e].msgs.at(-1);if(!t||t.content!==n.content||t.sender!==n.sender||t.time!==n.time)if(l.Instagram.chathistory[e].msgs.push(n),l.Instagram.chathistory[e].lastMsg=n.content,l.Instagram.chathistory[e].time=n.time,l.Instagram.chathistory[e].unread||(l.Instagram.chathistory[e].unread=0),l.QQ.activeChatId==e&&'Instagram'==l.phone.activeApp)l.Instagram.chathistory[e].unread=0;else if('user'!=n.sender){const n=Number(l.Instagram.chathistory[e].unread)+1;l.Instagram.chathistory[e].unread=n}else'user'==n.sender&&(l.Instagram.chathistory[e].unread=0)},addPost(e){e.id||(e.id=Math.random().toString(36).substring(2)),l.Instagram.posts.find(n=>n.id===e.id)||(e.comments||(e.comments=[]),e.likes||(e.likes=0),e.liked||(e.liked=!1),e.saved||(e.saved=!1),l.Instagram.posts.unshift(e))},async saveSettings(){const e=l.ST.getEntry(['手机-基本设置'],!0);if(e){const n=new s;n.loadText(e.content),l.Instagram.userName&&n.writeValue('基本设置','Instagram昵称',l.Instagram.userName),l.Instagram.userHead&&n.writeValue('基本设置','Instagram头像',l.Instagram.userHead),l.Instagram.userBio&&n.writeValue('基本设置','Instagram签名',l.Instagram.userBio),l.Instagram.followers&&n.writeValue('基本设置','Instagram粉丝',l.Instagram.followers),l.Instagram.following&&n.writeValue('基本设置','Instagram关注',l.Instagram.following),await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}])}}},Tinder:{userName:'',userHead:'',userBio:'',accountStatus:'active',deletionReason:'',userAlbum:[],matches:[],noped:[],potentialMatches:[],generatedStrangers:[],chathistory:{},addPotentialMatch(e){e.id||(e.id=Math.random().toString(36).substring(2)),l.Tinder.potentialMatches.find(n=>n.id===e.id)||l.Tinder.potentialMatches.push(e)},addGeneratedStranger(e){e.id||(e.id=Math.random().toString(36).substring(2)),l.Tinder.generatedStrangers.find(n=>n.id===e.id)||l.Tinder.generatedStrangers.push(e)},addMatch(e){if(l.Tinder.matches.find(n=>n.id===e.id))return;l.Tinder.matches.push(e);const n=e.id||e.name;l.Tinder.chathistory[n]||(l.Tinder.chathistory[n]={msgs:[],unread:0,lastMsg:'You matched! Say hi.',time:(new Date).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})});const t=(new Date).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});e.name},addMatchFromLoad(e){l.Tinder.matches.find(n=>n.id===e.id)||l.Tinder.matches.push(e)},addNope(e){l.Tinder.noped.includes(e)||l.Tinder.noped.push(e)},addMsg(e,n){'time'in n==0||!n.time||n.time,e in l.Tinder.chathistory==0&&(l.Tinder.chathistory[e]={msgs:[]});const t=l.Tinder.chathistory[e].msgs.at(-1);if(!t||t.content!==n.content||t.sender!==n.sender||t.time!==n.time)if(l.Tinder.chathistory[e].msgs.push(n),l.Tinder.chathistory[e].lastMsg=n.content,l.Tinder.chathistory[e].time=n.time,l.Tinder.chathistory[e].unread||(l.Tinder.chathistory[e].unread=0),l.QQ.activeChatId==e&&'Tinder'==l.phone.activeApp)l.Tinder.chathistory[e].unread=0;else if('user'!=n.sender){const n=Number(l.Tinder.chathistory[e].unread)+1;l.Tinder.chathistory[e].unread=n}else'user'==n.sender&&(l.Tinder.chathistory[e].unread=0)},async saveSettings(){const e=l.ST.getEntry(['手机-基本设置'],!0);if(e){const n=new s;n.loadText(e.content),l.Tinder.userName&&n.writeValue('基本设置','Tinder昵称',l.Tinder.userName),l.Tinder.userBio&&n.writeValue('基本设置','Tinder签名',l.Tinder.userBio),l.Tinder.userHead&&n.writeValue('基本设置','Tinder头像',l.Tinder.userHead),await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}])}const n={matches:l.Tinder.matches.map(e=>({id:e.id,name:e.name,head:e.head,bio:e.bio,age:e.age,album:e.album})),noped:l.Tinder.noped,generatedStrangers:l.Tinder.generatedStrangers,userAlbum:l.Tinder.userAlbum,accountStatus:l.Tinder.accountStatus,deletionReason:l.Tinder.deletionReason,chathistory:l.Tinder.chathistory};try{await insertOrAssignVariables({TinderState:n},{type:'chat'})}catch(e){console.error('Failed to save Tinder chat variables:',e)}}},phone:{colorSettings:{background:'',border:'',button:''},wallpaper:'',icons:{QQ:'',RedNote:'',Douyin:'',Tinder:'',Instagram:''},sendModel:'normal',navButton:!1,show:!1,autoShow:!1,autoHide:!1,activeApp:'home',time:'',width:{min:300,max:800,now:400},height:{min:600,max:1200,now:800}},backupQQ:{chathistory:{},douyinChathistory:{},post:[]},QQ:{charini:new s,chars:{char1:{head:'https://sharkpan.xyz/f/k7eU6/ComfyUI_00033_.png',background:'',text:'#FFFFFF',bubble:'#4d559a',chartype:'friend',name:'char1',phone:'苹果21 pro max Ultra',inputColor:'#FFFFFF'},char2:{head:'https://sharkpan.xyz/f/BZjSa/%E5%A4%B4%E5%83%8F%20%282%29.jpg',background:'',text:'#FFFFFF',bubble:'#61aea8',chartype:'friend',name:'char2'},group1:{head:'https://sharkpan.xyz/f/k7eU6/ComfyUI_00033_.png',background:'',chartype:'Group',name:'群聊1'}},chathistory:{char1:{chartype:'private',msgs:[{msgtype:'img',content:'hahaha',sender:'char1'},{msgtype:'text',content:'hahaha',sender:'user',time:'12:12'}],lastMsg:'hahaha'},group1:{chartype:'Group',msgs:[{msgtype:'text',content:'hahaha',sender:'char2324'},{msgtype:'img',content:'hahaha',sender:'user',additionalText:'这是多出来的文本'},{msgtype:'music',content:'',sender:'user',song:'愿与愁',singer:'林俊杰'},{msgtype:'music',content:'',sender:'char1',song:'愿与愁',singer:'林俊杰'},{msgtype:'emoji',emoji:'http://sharkpan.xyz/f/DnJHK/F12BF133675BA34684A60CF38E17D328_0.gif',content:'',sender:'char1',additionalText:''},{msgtype:'voice',content:'这是语音内容',voicetime:'2',sender:'char1',time:'12:12'}],lastMsg:'这是语音内容',unread:'3'}},post:[{id:'34ks6k',sender:'char1',content:'这是一条QQ动态内容',imgs:[{imgtype:'img',content:'一张配图'},{imgtype:'emoji',url:'http://sharkpan.xyz/f/rOpu6/9277120A65282CFEAB9E191B34474729_0.gif'}],comment:[{sender:'路人1',content:'123'},{sender:'路人2',content:'456'}],time:'12:21',like:'0',see:'0',read:!1}],postUnread:(0,i.computed)(()=>{let e=0;for(const n of l.QQ.post)'read'in n!=0&&n.read||e++;return e}),activeChatId:null,default:{bubble:'#a0c6f8',text:'#ffffff'},music:{audio:new Audio,id:'',msgRef:null},chatfunction:{},activefunction:null,activePage:1,panel:!1,cacheMsg:[],time:'',allUnRead:(0,i.computed)(()=>{let e=0;for(const n of Object.values(l.QQ.chathistory)){const t=n;t&&'number'==typeof t.unread&&(e+=t.unread)}for(const n of Object.values(l.Douyin.chathistory)){const t=n;t&&'number'==typeof t.unread&&(e+=t.unread)}for(const n of Object.values(l.Instagram.chathistory)){const t=n;t&&'number'==typeof t.unread&&(e+=t.unread)}for(const n of Object.values(l.Tinder.chathistory)){const t=n;t&&'number'==typeof t.unread&&(e+=t.unread)}return e+=l.QQ.postUnread,e}),addMsg(e,n){if('time'in n==0||!n.time||n.time,e in this.chathistory==0&&(this.chathistory[e]={chartype:'Group'==l.QQ.chars[e]?.chartype?'Group':'private',msgs:[]}),0==this.chathistory[e].msgs.length)n.time&&this.chathistory[e].msgs.push({msgtype:'system',sender:'system',content:n.time,time:n.time});else{const t=this.chathistory[e].msgs.at(-1);if(t&&t.content===n.content&&t.sender===n.sender&&t.msgtype===n.msgtype)return;const a=t?t.time:'';if(a){const t=a.replace('：',':').split(':'),i=n.time.replace('：',':').split(':');t.length>=2&&i.length>=2&&Math.abs(t[1]-i[1])>=5&&this.chathistory[e].msgs.push({msgtype:'system',sender:'system',content:n.time,time:n.time})}}if(this.chathistory[e].msgs.push(n),this.chathistory[e].lastMsg=n.content,this.chathistory[e].time=n.time,this.chathistory[e].unread||(this.chathistory[e].unread=0),l.QQ.activeChatId==e&&'Douyin'==l.phone.activeApp)this.chathistory[e].unread=0;else if('user'!=n.sender){const n=Number(this.chathistory[e].unread)+1;this.chathistory[e].unread=n}else'user'==n.sender&&(this.chathistory[e].unread=0)},async saveSettings(){const e=l.ST.getEntry(['手机-基本设置'],!0);if(!e)return;const n=new s;n.loadText(e.content),l.Douyin.userName&&n.writeValue('基本设置','抖音昵称',l.Douyin.userName),l.Douyin.userHead&&n.writeValue('基本设置','抖音头像',l.Douyin.userHead),l.Douyin.userDouyinId&&n.writeValue('基本设置','抖音号',l.Douyin.userDouyinId),await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}])},async saveChars(){const e=l.ST.getEntry(['手机-角色'],!0);if(!e)return;const n=new s;for(const[e,t]of Object.entries(l.QQ.chars)){if(!t)continue;if(t.banSend)continue;const a=e;t.head&&n.writeValue(a,'头像',t.head),t.bubble&&n.writeValue(a,'气泡颜色',t.bubble),t.text&&n.writeValue(a,'字体颜色',t.text),t.background&&n.writeValue(a,'聊天壁纸',t.background),t.phone&&n.writeValue(a,'手机型号',t.phone),t.inputColor&&n.writeValue(a,'输入框颜色',t.inputColor),t.douyinId&&n.writeValue(a,'抖音号',t.douyinId),t.douyinName&&n.writeValue(a,'抖音昵称',t.douyinName),t.douyinHead&&n.writeValue(a,'抖音头像',t.douyinHead),t.douyinBaseFollowing&&n.writeValue(a,'抖音关注',t.douyinBaseFollowing),t.douyinBaseFollowers&&n.writeValue(a,'抖音粉丝',t.douyinBaseFollowers),t.douyinBaseFriends&&n.writeValue(a,'抖音朋友',t.douyinBaseFriends),t.tinderName&&n.writeValue(a,'Tinder昵称',t.tinderName),t.tinderBio&&n.writeValue(a,'Tinder签名',t.tinderBio),t.tinderHead&&n.writeValue(a,'Tinder头像',t.tinderHead),t.tinderAlbum&&n.writeValue(a,'Tinder相册',JSON.stringify(t.tinderAlbum)),t.instagramName&&n.writeValue(a,'Instagram昵称',t.instagramName),t.instagramId&&n.writeValue(a,'Instagram号',t.instagramId),t.instagramBio&&n.writeValue(a,'Instagram签名',t.instagramBio),t.instagramHead&&n.writeValue(a,'Instagram头像',t.instagramHead),t.instagramFollowers&&n.writeValue(a,'Instagram粉丝',t.instagramFollowers),t.instagramFollowing&&n.writeValue(a,'Instagram关注',t.instagramFollowing),'Group'===t.chartype?(n.writeValue(a,'类型','群聊'),n.writeValue(a,'群名',t.name),t.members&&n.writeValue(a,'群成员',t.members),t.content&&n.writeValue(a,'群作用',t.content)):'npc'===t.chartype?(n.writeValue(a,'类型','npc'),n.writeValue(a,'备注',t.name)):(n.writeValue(a,'类型','好友'),n.writeValue(a,'备注',t.name))}await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}])}},regexBubble:{msgRegex:/<msg>(.+?)\|(.+?)\|(.+)\|(.+?)<\/msg>/g,douyinMsgRegex:/<douyin_msg>([\s\S]+?)<\/douyin_msg>/g,rednoteRegex:/<rednote>([\s\S]+?)<\/rednote>/g,douyinRegex:/<douyin>([\s\S]+?)<\/douyin>/g,tinderRegex:/<tinder>([\s\S]+?)<\/tinder>/g,instagramRegex:/<instagram>([\s\S]+?)<\/instagram>/g,instagramMsgRegex:/<instagram_msg>([\s\S]+?)<\/instagram_msg>/g,list:[{message_id:0,message_name:'xxx和xxx的私聊',messages:[],to:null}]},RandomHead:[],emoji:{},resetDouyinStats(){l.Douyin.following=l.Douyin.baseFollowing,l.Douyin.followers=l.Douyin.baseFollowers,l.Douyin.friends=l.Douyin.baseFriends;for(const e in l.QQ.chars){const n=l.QQ.chars[e];n.douyinFollowing=n.douyinBaseFollowing||0,n.douyinFollowers=n.douyinBaseFollowers||0,n.douyinFriends=n.douyinBaseFriends||0}},GetRandomHead(){if(console.log('调用了获取随机头像'),0===l.RandomHead.length)return null;let e=1/0;const n=[];for(const t of l.RandomHead)t.count<e?(e=t.count,n.length=0,n.push(t)):t.count===e&&n.push(t);const t=n[Math.floor(Math.random()*n.length)];return t.count++,t.url},generateBubbleColor(){const e=function(e,n,t){e/=360,n/=100,t/=100;const a=Math.floor(6*e),i=6*e-a,o=t*(1-n),r=t*(1-i*n),s=t*(1-(1-i)*n);let l,c,d;switch(a%6){case 0:[l,c,d]=[t,s,o];break;case 1:[l,c,d]=[r,t,o];break;case 2:[l,c,d]=[o,t,s];break;case 3:[l,c,d]=[o,r,t];break;case 4:[l,c,d]=[s,o,t];break;case 5:[l,c,d]=[t,o,r]}return[Math.round(255*l),Math.round(255*c),Math.round(255*d)]}([0,60,120,180,240,300,360][Math.floor(6*Math.random())]+60*Math.random(),20+25*Math.random(),75+5*Math.random()),n=(function(...e){e.map(e=>e.toString(16).padStart(2,'0')).join('')}(...e),(299*e[0]+587*e[1]+114*e[2])/1e3>180?'#333333':'#FFFFFF');return{bgColor:`rgba(${e[0]}, ${e[1]}, ${e[2]}, 0.9)`,textColor:n}},backup(){this.backupQQ.chathistory=JSON.parse(JSON.stringify(this.QQ.chathistory)),this.backupQQ.douyinChathistory=JSON.parse(JSON.stringify(this.Douyin.chathistory)),this.backupQQ.post=JSON.parse(JSON.stringify(this.QQ.post));const e=e=>{for(const n of Object.values(e)){const e=n;if('unread'in e==0||!e.unread||0==e.unread){for(const n of e.msgs)n.read=!0;continue}let t=Number(e.unread);t<0&&(t=0);for(let n=e.msgs.length-1;n>=0;n--)t>0&&'system'!=e.msgs[n].msgtype?(e.msgs[n].read=!1,t-=1):e.msgs[n].read=!0}};e(this.backupQQ.chathistory),e(this.backupQQ.douyinChathistory),console.log(`处理完的backupQQ:\n${JSON.stringify(this.backupQQ)}`)},loadRead(){const e=(e,n,t,a)=>{for(const i of Object.keys(e)){if(i in n==0)continue;if(t==i&&a){e[i].unread=0;continue}const o=e[i].msgs.length,r=n[i].msgs.length,s=Math.min(o,r);for(let t=0;t<s;t++){const a=e[i].msgs[t],o=n[i].msgs[t];if('system'==a.msgtype){a.read=!0;continue}if(!m(a,o,['read']))break;'read'in o&&1==o.read&&(a.read=!0)}let l=0;for(let n=e[i].msgs.length-1;n>=0;n--){const t=e[i].msgs[n];if('user'==t.sender)break;if('read'in t&&t.read)break;'read'in t!=0&&1==t.read||l++}e[i].unread=l}};e(this.QQ.chathistory,this.backupQQ.chathistory,this.QQ.activeChatId,'Douyin'!==this.phone.activeApp),e(this.Douyin.chathistory,this.backupQQ.douyinChathistory,this.QQ.activeChatId,'Douyin'===this.phone.activeApp);const n=Math.min(this.QQ.post.length,this.backupQQ.post.length);for(let e=0;e<n;e++)this.QQ.post[e].id==this.backupQQ.post[e].id&&('read'in this.backupQQ.post[e]&&this.backupQQ.post[e].read?this.QQ.post[e].read=!0:this.QQ.post[e].read=!1)},GetRandomId(e,n=!1){if(n){let n='';n+=Math.floor(9*Math.random()+1);for(let t=0;t<e-1;t++)n+=Math.floor(10*Math.random());return n}return Math.random().toString(36).substring(2,2+e)},checkAudioAvailability:async e=>new Promise(n=>{const t=new Audio;let a;const i=()=>{r(),n(!0)},o=()=>{r(),n(!1)},r=()=>{t.removeEventListener('loadedmetadata',i),t.removeEventListener('error',o),clearTimeout(a),t.src=''};t.preload='metadata',t.src=e,a=setTimeout(o,3e3),t.addEventListener('loadedmetadata',i),t.addEventListener('error',o)}),async Http_Get(e){const n=new AbortController,t=setTimeout(()=>n.abort(),1e4);try{const a=await fetch(e,{method:'GET',signal:n.signal});if(clearTimeout(t),!a.ok)return console.error('请求失败：',a.status,a.statusText),null;return await a.json()}catch(e){return'AbortError'===e.name?console.error('请求超时，请检查网络或重试'):console.error('请求出错：',e),null}},generate:!1,lock:!1,async removeChar(){}}),c=(e,n,t,a=!0)=>{if(!e)return;if(e in l.QQ.chars)return;if('system'==n||'system'==e)return;const{bgColor:i,textColor:o}=l.generateBubbleColor(),r={head:l.GetRandomHead(),background:'',text:o,inputColor:'#FFFFFF',bubble:i,chartype:n||'npc',name:e,...t};l.QQ.chars[e]=r,a&&l.QQ.saveChars()},d=(e,n)=>{const t={id:e,name:e,head:''},a=e=>e?e.trim().toLowerCase():'',i=a(e);if('user'===i||i===a(l.ST.userName)||'Instagram'===n&&i===a(l.Instagram.userName)||'Douyin'===n&&i===a(l.Douyin.userName)||'Tinder'===n&&i===a(l.Tinder.userName))return t.id='user','Douyin'===n?(t.name=l.Douyin.userName||l.ST.userName,t.head=l.Douyin.userHead||l.ST.userHead):'Tinder'===n?(t.name=l.Tinder.userName||l.ST.userName,t.head=l.Tinder.userHead||l.ST.userHead):'Instagram'===n?(t.name=l.Instagram.userName||l.ST.userName,t.head=l.Instagram.userHead||l.ST.userHead):(t.name=l.ST.userName,t.head=l.ST.userHead),t;let o=l.QQ.chars[e],r=e;if(!o){const e=Object.entries(l.QQ.chars).find(([e,t])=>{const o=a(t.name),r=a(e),s=a(t.douyinName),l=a(t.tinderName),c=a(t.instagramName),d=a(t.instagramId);return r===i||o===i||('Douyin'===n&&s===i||('Tinder'===n&&l===i||'Instagram'===n&&(c===i||d===i)))});e&&(r=e[0],o=e[1])}if(!o&&i.length>1){const e=Object.entries(l.QQ.chars).find(([e,t])=>{const o=a(t.name),r=a(t.douyinName),s=a(t.tinderName),l=a(t.instagramName);return!(!o||!(o.includes(i)||i.length>o.length&&i.includes(o)))||(!('Douyin'!==n||!r||!(r.includes(i)||i.length>r.length&&i.includes(r)))||(!('Tinder'!==n||!s||!(s.includes(i)||i.length>s.length&&i.includes(s)))||!('Instagram'!==n||!l||!(l.includes(i)||i.length>l.length&&i.includes(l)))))});e&&(r=e[0],o=e[1])}if(o)t.id=r,t.head=o.head,t.name=o.name,'Douyin'===n?(o.douyinName&&(t.name=o.douyinName),o.douyinHead&&(t.head=o.douyinHead)):'Tinder'===n?(o.tinderName&&(t.name=o.tinderName),o.tinderHead&&(t.head=o.tinderHead)):'Instagram'===n&&(o.instagramName&&(t.name=o.instagramName),o.instagramHead&&(t.head=o.instagramHead));else if('Douyin'===n)t.head=l.RedNote.getRandomHead();else if('RedNote'===n)t.head=l.RedNote.getRandomHead();else if('Tinder'===n){const n=l.Tinder.matches.find(n=>n.name===e||n.id===e);n?(n.name&&(t.name=n.name),n.head&&(t.head=n.head)):t.head=l.RedNote.getRandomHead()}return t.head||(t.head=l.RedNote.getRandomHead()),t},p=new class{dbName;db=null;constructor(e='named-storage'){this.dbName=e}async initDB(){return new Promise((e,n)=>{const t=indexedDB.open(this.dbName,1);t.onerror=()=>n(t.error),t.onsuccess=()=>{this.db=t.result,e(t.result)},t.onupgradeneeded=e=>{const n=e.target.result;n.objectStoreNames.contains('namedData')||n.createObjectStore('namedData',{keyPath:'name'})}})}async ensureConnected(){return this.db||await this.initDB(),this.db}async setData(e,n){const t=await this.ensureConnected();return new Promise((a,i)=>{const o=t.transaction(['namedData'],'readwrite').objectStore('namedData').put({name:e,data:n});o.onsuccess=()=>a(),o.onerror=()=>i(o.error)})}async getData(e){const n=await this.ensureConnected();return new Promise((t,a)=>{const i=n.transaction(['namedData'],'readonly').objectStore('namedData').get(e);i.onsuccess=()=>{const e=i.result;t(e?e.data:null)},i.onerror=()=>a(i.error)})}async deleteData(e){const n=await this.ensureConnected();return new Promise((t,a)=>{const i=n.transaction(['namedData'],'readwrite').objectStore('namedData').delete(e);i.onsuccess=()=>t(),i.onerror=()=>a(i.error)})}async getAllKeys(){const e=await this.ensureConnected();return new Promise((n,t)=>{const a=e.transaction(['namedData'],'readonly').objectStore('namedData').getAllKeys();a.onsuccess=()=>n(a.result),a.onerror=()=>t(a.error)})}}('baibai_phone');function m(e,n,t){const a=r().omit(r().cloneDeep(e),t),i=r().omit(r().cloneDeep(n),t);return r().isEqual(a,i)}const u={class:'music-container',style:{display:'grid','grid-template-columns':'1fr 64px',width:'100%'}},A={style:{display:'flex','flex-direction':'column','margin-top':'8px',overflow:'hidden','max-width':'100%'}},h={class:'hide-title music-name',style:{'font-size':'1.2rem'}},g={class:'hide-title music-author',style:{color:'#8d8c8d','margin-left':'3px','margin-top':'5px','font-size':'1rem'}},C={style:{'margin-left':'auto',position:'relative',height:'64px',width:'64px'}},f={class:'icon-container',style:{width:'64px',position:'relative'}},v={style:{position:'absolute',left:'-3px',top:'-5px'},viewBox:'0 0 1024 1024',width:'72',height:'72'},b={class:'music-play-button'},x={style:{display:'flex','align-items':'center',gap:'5px'}},y={viewBox:'0 0 1024 1024',style:{width:'0.9rem',height:'0.9rem'}},B=(0,i.defineComponent)({__name:'music',props:['song','singer'],setup(e){const n=e,t=l.GetRandomId(10),a=(0,i.ref)('');let o='';const r=(0,i.ref)(!1);let s=null;async function c(){if(r.value=!0,!o){let e=await async function(e,n){let t=`https://api.vkeys.cn/v2/music/netease?word=${e}`;n&&(t+=`-${n}`);let a=await l.Http_Get(t);if(!a)return;let i='',o=[];for(const e of a.data)!i&&e.cover&&(i=e.cover),e.id&&o.push(e.id);for(const e of o)try{console.log(`准备检测音源 ID:${e}`);const n=await l.Http_Get(`https://api.vkeys.cn/v2/music/netease?id=${e}`);if(!n?.data?.url)continue;if(await l.checkAudioAvailability(n.data.url))return console.log(`找到可用音源: ${n.data.url}`),{url:n.data.url,cover:i}}catch(n){console.warn(`音源检测失败: ${e}`,n)}}(n.song,n.singer);if(console.log(JSON.stringify(e)),!e?.url&&(console.log('网易云获取失败,开始在QQ音乐中搜索'),e=await async function(e){try{e=e.replace(/\s/g,'');let n='';const t=await l.Http_Get(`https://api.vkeys.cn/v2/music/tencent?word=${e}`);if(!t?.data?.length)return;let a=[];for(const e of t.data)if(!n&&e.cover&&(n=e.cover),e.id&&a.push(e.id),e.grp)for(const n of e.grp)n.id&&a.push(n.id);console.log(`id数量:${a.length}`);for(const e of a)try{console.log(`准备检测音源 ID:${e}`);const t=await l.Http_Get(`https://api.vkeys.cn/v2/music/tencent?id=${e}`);if(!t?.data?.url)continue;if(await l.checkAudioAvailability(t.data.url))return console.log(`找到可用音源: ${t.data.url}`),{url:t.data.url,cover:n}}catch(n){console.warn(`音源检测失败: ${e}`,n)}}catch(e){console.error('获取音源失败:',e)}}(n.song),!e||!e.url))return void toastr.error('获取音源失败!');o=e.url,a.value=e.cover}l.QQ.music.audio.src!=o&&(l.QQ.music.audio.src=o),l.QQ.music.id=t,l.QQ.music.audio.play(),s?.(),s=(0,i.watch)(()=>l.QQ.music.id,(e,n)=>{n===t&&e!==t&&(r.value=!1,s?.(),s=null)})}function d(){l.QQ.music.id==t&&l.QQ.music.audio.pause(),r.value=!1}return(e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',null,[(0,i.createElementVNode)('div',u,[(0,i.createElementVNode)('div',A,[(0,i.createElementVNode)('div',h,[(0,i.createElementVNode)('strong',null,(0,i.toDisplayString)(n.song),1)]),(0,i.createElementVNode)('div',g,(0,i.toDisplayString)(n.singer),1)]),(0,i.createElementVNode)('div',C,[(0,i.createElementVNode)('div',f,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',v,[...t[0]||(t[0]=[(0,i.createElementVNode)('path',{d:'M773.9392 301.8752m-200.0384 0a200.0384 200.0384 0 1 0 400.0768 0 200.0384 200.0384 0 1 0-400.0768 0Z',fill:'#d81e06','p-id':'51386'},null,-1),(0,i.createElementVNode)('path',{d:'M924.4672 706.2528a24.32 24.32 0 0 1-24.2688 24.2688h-145.7664a24.3712 24.3712 0 0 0-24.2688 24.32 24.2688 24.2688 0 0 0 24.2688 24.2688h48.5888a24.32 24.32 0 0 1 24.2688 24.32 24.32 24.32 0 0 1-24.2688 24.2688h-64.512A388.7616 388.7616 0 0 1 122.88 390.4512h-48.5888a24.32 24.32 0 0 1 0-48.5888h97.28a24.2688 24.2688 0 0 0 6.8096-47.5648l0.768-0.9728H122.88a24.32 24.32 0 1 1 0-48.5888h101.632a388.7616 388.7616 0 0 1 619.52 437.248h56.32a24.32 24.32 0 0 1 24.1152 24.2688z',fill:'#2c2c2c','p-id':'51387'},null,-1),(0,i.createElementVNode)('path',{d:'M565.8112 478.8736a3.84 3.84 0 0 0-4.5568 4.608c3.1744 14.7456 7.8848 40.96 9.984 60.0576 3.6352 32.2048-28.5696 62.3104-53.6064 70.7584-39.424 13.568-84.8896-18.688-95.1296-56.32-11.776-43.9808 12.6464-97.5872 53.2992-115.0464 4.5056-2.0992 9.0112-3.8912 13.568-5.9904 9.3184-4.2496 4.8128-11.1616 3.2768-17.5104-4.1984-17.4592-6.6048-34.9184 2.4064-51.2 13.568-24.4224 48.7936-43.6736 76.1856-31.9488a276.48 276.48 0 0 1 34.6624 16.5888 25.1904 25.1904 0 0 1 10.5472 28.2624c-5.7344 15.36-20.7872 18.9952-36.7616 9.6768a196.1984 196.1984 0 0 0-17.4592-9.9328 16.2304 16.2304 0 0 0-23.808 15.36 150.3744 150.3744 0 0 0 1.9456 18.0224 18.4832 18.4832 0 0 0 13.568 14.8992 200.3456 200.3456 0 0 1 29.3888 8.9088c38.8096 17.152 66.56 45.1584 79.5136 87.04 24.064 77.6704-21.0944 155.0848-87.9616 184.6272a182.016 182.016 0 0 1-116.8384 13.2096 185.6 185.6 0 0 1-126.464-104.8064c-18.0736-40.96-22.8864-82.7904-8.7552-127.0784 18.9952-59.2384 56.9344-99.6352 114.7392-121.9072a23.4496 23.4496 0 0 1 28.0064 9.728 21.1456 21.1456 0 0 1-6.0416 29.5424 259.8912 259.8912 0 0 1-25.2928 13.568c-31.8976 16.2304-51.7632 42.752-64.4096 75.8784-24.7296 64.4096 9.3184 139.1104 65.6384 168.3456 51.7632 27.0848 122.5728 16.2304 160.8192-28.3136A106.2912 106.2912 0 0 0 619.52 542.72c-5.12-25.6-34.5088-59.2896-53.7088-63.8464z m-53.4016 5.9904a6.144 6.144 0 0 0-7.9872-4.5056c-33.28 11.4688-47.5136 47.2576-31.9488 76.4416a28.0064 28.0064 0 0 0 30.1056 13.824c14.1824-4.1984 24.1152-14.4384 22.016-27.6992-2.9696-19.5072-7.936-38.8096-12.1856-58.0608z',fill:'#d81e06','p-id':'51388'},null,-1)])])),(0,i.withDirectives)((0,i.createElementVNode)('div',{class:'music-img',style:(0,i.normalizeStyle)(`width: 64px;\n              height: 64px;\n              position: absolute;\n              left: 0;\n              top: 0;\n              background-size: cover;\n              z-index: 1;\n              background-image: url('${(0,i.unref)(a)}');`)},null,4),[[i.vShow,(0,i.unref)(a)]])]),(0,i.createElementVNode)('div',b,[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('svg',{onClick:c,class:'icon-music-play',viewBox:'0 0 1024 1024',width:'24',height:'24'},[...t[1]||(t[1]=[(0,i.createElementVNode)('path',{d:'M902.420317 544.833016l-585.142857-357.587302v715.174603l585.142857-357.587301z','p-id':'42990',fill:'#ffffff'},null,-1)])],512)),[[i.vShow,!(0,i.unref)(r)]]),(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('svg',{class:'icon-music-stop',onClick:d,t:'1743245033745',viewBox:'0 0 1024 1024',width:'19',height:'19'},[...t[2]||(t[2]=[(0,i.createElementVNode)('path',{d:'M290.133333 128h-39.808C206.336 128 170.666667 178.944 170.666667 241.792v540.416C170.666667 845.056 206.336 896 250.325333 896H290.133333c43.946667 0 79.658667-50.944 79.658667-113.792V241.792C369.792 178.944 334.08 128 290.133333 128zM773.674667 128H733.866667c-43.989333 0-79.658667 50.944-79.658667 113.792v540.416c0 62.848 35.669333 113.792 79.658667 113.792h39.808C817.664 896 853.333333 845.056 853.333333 782.208V241.792C853.333333 178.944 817.664 128 773.674667 128z',fill:'#ffffff','p-id':'43402'},null,-1)])],512)),[[i.vShow,(0,i.unref)(r)]])])])]),t[5]||(t[5]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'2px','background-color':'#efefef','margin-bottom':'5px','margin-top':'5px'}},null,-1)),(0,i.createElementVNode)('div',x,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',y,[...t[3]||(t[3]=[(0,i.createElementVNode)('path',{d:'M0 0m184.32 0l655.36 0q184.32 0 184.32 184.32l0 655.36q0 184.32-184.32 184.32l-655.36 0q-184.32 0-184.32-184.32l0-655.36q0-184.32 184.32-184.32Z',fill:'#EA3E3C','p-id':'1500'},null,-1),(0,i.createElementVNode)('path',{d:'M527.616 849.43872a373.6064 373.6064 0 0 1-162.54976-39.00416c-112.36352-55.16288-180.00896-176.29184-172.55424-308.67456 7.41376-130.34496 85.10464-237.4656 202.752-279.552a35.85024 35.85024 0 0 1 24.15616 67.51232c-107.66336 38.49216-150.81472 136.86784-155.29984 216.13568-5.86752 103.51616 46.08 197.79584 132.34176 240.13824 124.69248 60.30336 216.91392 22.35392 260.82304-5.64224 59.8016-38.16448 97.86368-100.01408 96.95232-157.55264-1.024-63.72352-24.064-120.99584-63.27296-157.14304a145.408 145.408 0 0 0-65.5872-35.28704q2.82624 9.76896 5.64224 19.32288c13.38368 45.63968 24.94464 85.05344 25.6 114.40128a134.26688 134.26688 0 0 1-37.69344 97.76128 139.1104 139.1104 0 0 1-100.6592 40.45824 140.10368 140.10368 0 0 1-100.47488-42.24 169.12384 169.12384 0 0 1-46.2848-122.76736c1.19808-85.12512 80.11776-153.28256 162.816-175.104a324.80256 324.80256 0 0 1-6.71744-67.05152 92.0576 92.0576 0 0 1 69.18144-91.81184c46.21312-12.53376 104.448 5.19168 124.66176 37.888a35.84 35.84 0 0 1-11.70432 49.31584 35.84 35.84 0 0 1-49.26464-11.65312 62.34112 62.34112 0 0 0-48.45568-5.21216c-4.32128 1.71008-12.35968 4.90496-12.76928 23.10144a270.87872 270.87872 0 0 0 6.73792 58.51136 217.4976 217.4976 0 0 1 133.56032 57.6512c53.57568 49.38752 85.0432 125.46048 86.35392 208.71168 1.29024 81.85856-49.7664 167.86432-130.048 219.136a310.14912 310.14912 0 0 1-168.2432 48.65024z m23.6544-457.55392c-56.77056 15.6672-107.4688 63.03744-108.07296 106.42432a98.304 98.304 0 0 0 25.6512 71.43424 68.0448 68.0448 0 0 0 49.36704 20.87936 67.24608 67.24608 0 0 0 49.44896-18.944 63.19104 63.19104 0 0 0 17.23392-46.08c-0.4096-19.79392-11.7248-58.368-22.67136-95.6928-3.61472-12.42112-7.35232-25.14944-10.9568-38.02112z',fill:'#FFFFFF','p-id':'1501'},null,-1)])])),t[4]||(t[4]=(0,i.createElementVNode)('div',{style:{'font-size':'0.9rem',color:'#8d8c8c'}},'网易云音乐',-1))])]))}}),w=['data-name'],k=['data-name'],E=['data-name'],S=['innerHTML'],N=['data-name'],Q={style:{width:'100%','background-color':'white','aspect-ratio':'1'}},V=['src','alt'],T={key:0,style:{'margin-top':'5px',display:'block'}},M=['data-name'],F={style:{display:'block'},class:'totext'},D={style:{'margin-right':'30px',display:'flex','align-items':'center'},viewBox:'0 0 1024 1024',width:'24',height:'24'},I={style:{display:'flex','align-items':'center',gap:'5px','margin-left':'auto'}},j={style:{display:'block'}},U={style:{transform:'rotate(-90deg)',display:'flex','align-items':'center'},t:'1742985508017',class:'icon',viewBox:'0 0 1024 1024',version:'1.1',xmlns:'http://www.w3.org/2000/svg','p-id':'38914',width:'20',height:'20'},H={style:{'margin-left':'2px'}},Y={style:{display:'block'}},W={style:{transform:'rotate(90deg)',display:'flex','align-items':'center'},class:'icon',viewBox:'0 0 1024 1024',width:'20',height:'20'},P={style:{display:'block','margin-left':'auto'},class:'totext'},O={style:{'margin-left':'30px',display:'flex','align-items':'center'},viewBox:'0 0 1024 1024',width:'24',height:'24'},L={class:'voice2text'},q={key:6,class:'give_money'},R={style:{'background-color':'#4396f7',height:'80px',width:'100%',color:'#ffffff','padding-top':'20px','padding-left':'12px',display:'flex','flex-direction':'column',gap:'5px',position:'relative'}},X={key:7,class:'give_money'},Z={style:{'background-color':'#4396f7',height:'80px',width:'100%',color:'#ffffff','padding-top':'20px','padding-left':'12px','padding-right':'12px',display:'flex',gap:'5px',position:'relative'}},G={style:{display:'flex','flex-direction':'column',gap:'5px','margin-left':'5px'}},J={style:{'text-align':'start'}},K={key:1,style:{color:'#959597','font-size':'12px','text-align':'center','margin-bottom':'20px'}},ee={__name:'bubble',props:{bubble:{type:Object},isGroup:{type:String},senderinfo:{type:Object},isDouyin:{type:Boolean}},setup(e){(0,i.useCssVars)(e=>({v646cf16c:m.value,v66874cc9:p.value,v0765126f:a.value,v38b56c6e:o.value,v82588890:d.value}));const n=e;'sender'in n.bubble==0&&console.log(`这条消息没有sender:\n${JSON.stringify(n.bubble)}`);const t=(0,i.computed)(()=>{const e=n.bubble.sender;if(n.isDouyin){if(n.senderinfo?.douyinHead)return n.senderinfo.douyinHead;if(l.QQ.chars[e]?.douyinHead)return l.QQ.chars[e].douyinHead}if(n.senderinfo?.head)return n.senderinfo?.head;try{if(e in l.QQ.chars==0)return''}catch(e){console.error(`这里出的问题${e}`)}return l.QQ.chars[e]?.head?l.QQ.chars[e].head:''});n.bubble?.sender&&'user'!=n.bubble?.sender&&n.bubble?.sender in l.QQ.chars==0&&c(n.bubble?.sender);const a=(0,i.computed)(()=>{if('user'==n.bubble.sender)return l.QQ.default.bubble;if(n.bubble.sender in l.QQ.chars)return l.QQ.chars[n.bubble.sender].bubble;return n.senderinfo?.bubble||l.QQ.default.bubble}),o=(0,i.computed)(()=>{if('user'==n.bubble.sender)return l.QQ.default.text;if(n.bubble.sender in l.QQ.chars)return l.QQ.chars[n.bubble.sender].text;return n.senderinfo?.text||l.QQ.default.text});let r=(0,i.ref)(!1);function s(){r.value=!r.value}const d=(0,i.computed)(()=>l.ST.isMobile?'13px':'15px'),p=(0,i.computed)(()=>l.ST.isMobile?'32px':'40px'),m=(0,i.computed)(()=>l.ST.isMobile?'10px':'20px');return(e,a)=>{return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,['system'!=n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:(0,i.normalizeClass)('user'==n.bubble.sender?'QQ_chat_mymsg':'QQ_chat_charmsg'),style:(0,i.normalizeStyle)(''+('emoji'==n.bubble.msgtype?'max-width: min(50%,300px);':''))},['user'!=n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,'data-name':n.bubble.sender,class:'QQ_chat_head',style:(0,i.normalizeStyle)({backgroundImage:`url(${t.value})`})},null,12,w)):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('div',{style:(0,i.normalizeStyle)(`width: ${'transfer'==n.bubble.msgtype&&'user'==n.bubble.sender?'100%':'auto'}; height: auto; margin-top: 4px; `)},['Group'==n.isGroup&&'user'!=n.bubble.sender&&'user'!=n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('span',{key:0,style:(0,i.normalizeStyle)('overflow: hidden; text-overflow: ellipsis; display: block; max-width: 100%;'+((0,i.unref)(l).ST.isMobile?'font-size:13px;':''))},(0,i.toDisplayString)((0,i.unref)(l).QQ.chars[n.bubble.sender]?.name||n.bubble.sender),5)):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' 这里是消息内容 '),(0,i.createCommentVNode)(' text类型 '),'text'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:(0,i.normalizeClass)('QQ_chat_msgdiv '+('Group'==n.isGroup&&'user'!=n.bubble.sender?'groupmsg':'')),'data-name':n.bubble.sender},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(n.bubble.content),1)],10,k)):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' img类型 '),'img'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:2,class:(0,i.normalizeClass)('QQ_chat_msgdiv '+('Group'==n.isGroup&&'user'!=n.bubble.sender?'groupmsg':'')),'data-name':n.bubble.sender},[(0,i.createElementVNode)('div',{class:'QQ_chat_fakeimg',style:(0,i.normalizeStyle)('text-align: center;'+(n.bubble.additionalText?'margin-bottom:5px;':''))},[(0,i.createElementVNode)('div',{innerHTML:(o=n.bubble.content,console.log(`warp:${o}`),o.replace(/\n/g,'<br>'))},null,8,S)],4),(0,i.createTextVNode)(' '+(0,i.toDisplayString)(n.bubble.additionalText),1)],10,E)):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' emoji类型 '),'emoji'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:3,class:(0,i.normalizeClass)('QQ_chat_msgdiv '+('Group'==n.isGroup&&'user'!=n.bubble.sender?'groupmsg':'')),'data-name':n.bubble.sender},[(0,i.createElementVNode)('div',Q,[(0,i.createElementVNode)('img',{class:'msgimg',loading:'lazy',src:n.bubble.emoji,alt:n.bubble.emoji?'图片加载失败,可能是网络问题':'Ai编了个不存在的表情包'},null,8,V)]),n.bubble.additionalText?((0,i.openBlock)(),(0,i.createElementBlock)('span',T,(0,i.toDisplayString)(n.bubble.additionalText),1)):(0,i.createCommentVNode)('v-if',!0)],10,N)):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' music类型 '),'music'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createBlock)(B,{key:4,class:(0,i.normalizeClass)('QQ_chat_music '+('Group'==n.isGroup&&'user'!=n.bubble.sender?'groupmsg':'')),song:n.bubble.song,singer:n.bubble.singer},null,8,['class','song','singer'])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' voice类型 '),'voice'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:5,class:(0,i.normalizeClass)('QQ_chat_msgdiv '+('Group'==n.isGroup&&'user'!=n.bubble.sender?'groupmsg':'')),'data-name':n.bubble.sender},['user'==n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'QQ_chat_voice',onClick:s,style:{width:'100%',display:'flex',gap:'5px','align-items':'center'}},[(0,i.createElementVNode)('span',F,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',D,[...a[0]||(a[0]=[(0,i.createElementVNode)('path',{d:'M999.611733 387.697778a37.831111 37.831111 0 0 0-48.355555 22.641778v0.512l-1.592889 5.233777c-58.88-241.208889-302.648889-388.892444-543.857778-330.012444A446.805333 446.805333 0 0 0 124.546844 295.253333a39.139556 39.139556 0 0 0 13.653334 53.077334 39.310222 39.310222 0 0 0 18.944 5.233777c13.084444 0 25.201778-6.826667 32.540444-18.375111a374.158222 374.158222 0 0 1 359.480889-183.978666 381.952 381.952 0 0 1 337.351111 334.279111 384.568889 384.568889 0 0 1-3.128889 115.086222v2.616889a38.855111 38.855111 0 0 0 21.560889 48.355555c19.456 6.826667 41.528889-3.185778 48.355556-22.641777l68.835555-192.284445a39.310222 39.310222 0 0 0-22.584889-48.924444z m-148.764444 348.956444a38.115556 38.115556 0 0 0-31.004445 16.839111 373.077333 373.077333 0 0 1-355.214222 157.639111 381.212444 381.212444 0 0 1-323.185778-306.346666 396.344889 396.344889 0 0 1 0-140.856889v-1.592889a39.139556 39.139556 0 0 0-22.072888-48.355556 38.058667 38.058667 0 0 0-48.355556 22.584889l-68.835556 191.317334a38.513778 38.513778 0 0 0 23.608889 48.867555c19.456 7.395556 40.96-3.128889 48.355556-22.584889v-3.697777c58.88 241.208889 302.705778 388.892444 543.914667 330.012444A448.739556 448.739556 0 0 0 881.851733 798.151111a38.684444 38.684444 0 0 0-8.362666-54.158222 31.857778 31.857778 0 0 0-22.641778-7.338667z','p-id':'41017',fill:'currentColor'},null,-1),(0,i.createElementVNode)('path',{d:'M310.687289 693.020444a50.517333 50.517333 0 0 0-33.166222 19.456 40.96 40.96 0 0 0 0 31.573334c1.592889 4.721778 3.697778 9.443556 6.257777 14.165333a26.794667 26.794667 0 0 0 13.198223 11.036445 30.833778 30.833778 0 0 0 12.060444 2.104888h5.290667c6.826667-1.080889 13.653333-2.616889 20.48-4.721777 15.758222-5.290667 32.028444-11.605333 48.924444-18.432 16.782222-6.826667 34.133333-15.758222 49.322667-23.608889 15.246222-7.907556 32.597333-17.863111 46.250667-26.282667 14.222222-8.419556 24.177778-15.758222 35.271111-24.177778 24.632889 19.456 50.915556 36.238222 78.791111 49.891556 33.621333 17.351111 68.835556 31.004444 105.073778 42.097778a56.32 56.32 0 0 0 20.48 3.640889 33.905778 33.905778 0 0 0 34.190222-26.282667 39.025778 39.025778 0 0 0-1.592889-35.726222 49.322667 49.322667 0 0 0-26.225778-18.375111 540.842667 540.842667 0 0 1-85.162667-33.621334 603.932444 603.932444 0 0 1-63.601777-38.912c20.48-23.096889 37.831111-48.355556 52.565333-75.662222a465.294222 465.294222 0 0 0 38.343111-98.304h49.436445a38.456889 38.456889 0 0 0 26.282666-12.060444 46.762667 46.762667 0 0 0 7.850667-26.282667 44.032 44.032 0 0 0-8.931556-28.899556 37.432889 37.432889 0 0 0-26.282666-11.036444H568.6784a116.167111 116.167111 0 0 0-9.500444-17.863111c-10.467556-12.629333-22.584889-25.770667-34.702223-38.912a47.786667 47.786667 0 0 0-27.818666-18.375111h-4.209778a36.636444 36.636444 0 0 0-24.177778 8.419555 35.896889 35.896889 0 0 0-18.375111 29.923556 51.2 51.2 0 0 0 16.270222 33.109333l6.314667 6.314667H315.352178a34.133333 34.133333 0 0 0-26.282667 12.629333 45.852444 45.852444 0 0 0-6.826667 26.282667c-0.512 10.467556 2.104889 20.48 7.907556 28.899555 6.826667 6.826667 16.270222 11.036444 26.282667 11.036445h47.274666c5.233778 15.758222 10.524444 32.028444 16.839111 47.786666a419.271111 419.271111 0 0 0 50.403556 94.094223c8.419556 11.036444 17.351111 22.584889 26.282667 33.109333a389.461333 389.461333 0 0 1-64.625778 39.936c-26.282667 12.629333-54.101333 23.096889-81.976889 32.028444z m131.299555-246.954666h140.344889c-6.826667 23.096889-16.839111 45.169778-28.387555 66.730666a325.290667 325.290667 0 0 1-39.936 55.751112 319.146667 319.146667 0 0 1-39.424-52.622223l-2.616889-4.209777a388.778667 388.778667 0 0 1-29.980445-65.649778z','p-id':'41018',fill:'currentColor'},null,-1)])]))]),(0,i.createElementVNode)('div',I,[(0,i.createElementVNode)('span',j,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',U,[...a[1]||(a[1]=[(0,i.createElementVNode)('path',{d:'M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z','p-id':'38915',fill:'currentColor'},null,-1)])]))]),(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(n.bubble?.voicetime)+'"',1)])])):(0,i.createCommentVNode)('v-if',!0),'user'!=n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'QQ_chat_voice',onClick:s,style:{width:'100%',display:'flex',gap:'5px','align-items':'center'}},[(0,i.createElementVNode)('span',H,(0,i.toDisplayString)(n.bubble?.voicetime)+'"',1),(0,i.createElementVNode)('span',Y,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',W,[...a[2]||(a[2]=[(0,i.createElementVNode)('path',{d:'M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z','p-id':'38915',fill:'currentColor'},null,-1)])]))]),(0,i.createElementVNode)('span',P,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',O,[...a[3]||(a[3]=[(0,i.createElementVNode)('path',{d:'M999.611733 387.697778a37.831111 37.831111 0 0 0-48.355555 22.641778v0.512l-1.592889 5.233777c-58.88-241.208889-302.648889-388.892444-543.857778-330.012444A446.805333 446.805333 0 0 0 124.546844 295.253333a39.139556 39.139556 0 0 0 13.653334 53.077334 39.310222 39.310222 0 0 0 18.944 5.233777c13.084444 0 25.201778-6.826667 32.540444-18.375111a374.158222 374.158222 0 0 1 359.480889-183.978666 381.952 381.952 0 0 1 337.351111 334.279111 384.568889 384.568889 0 0 1-3.128889 115.086222v2.616889a38.855111 38.855111 0 0 0 21.560889 48.355555c19.456 6.826667 41.528889-3.185778 48.355556-22.641777l68.835555-192.284445a39.310222 39.310222 0 0 0-22.584889-48.924444z m-148.764444 348.956444a38.115556 38.115556 0 0 0-31.004445 16.839111 373.077333 373.077333 0 0 1-355.214222 157.639111 381.212444 381.212444 0 0 1-323.185778-306.346666 396.344889 396.344889 0 0 1 0-140.856889v-1.592889a39.139556 39.139556 0 0 0-22.072888-48.355556 38.058667 38.058667 0 0 0-48.355556 22.584889l-68.835556 191.317334a38.513778 38.513778 0 0 0 23.608889 48.867555c19.456 7.395556 40.96-3.128889 48.355556-22.584889v-3.697777c58.88 241.208889 302.705778 388.892444 543.914667 330.012444A448.739556 448.739556 0 0 0 881.851733 798.151111a38.684444 38.684444 0 0 0-8.362666-54.158222 31.857778 31.857778 0 0 0-22.641778-7.338667z','p-id':'41017',fill:'currentColor'},null,-1),(0,i.createElementVNode)('path',{d:'M310.687289 693.020444a50.517333 50.517333 0 0 0-33.166222 19.456 40.96 40.96 0 0 0 0 31.573334c1.592889 4.721778 3.697778 9.443556 6.257777 14.165333a26.794667 26.794667 0 0 0 13.198223 11.036445 30.833778 30.833778 0 0 0 12.060444 2.104888h5.290667c6.826667-1.080889 13.653333-2.616889 20.48-4.721777 15.758222-5.290667 32.028444-11.605333 48.924444-18.432 16.782222-6.826667 34.133333-15.758222 49.322667-23.608889 15.246222-7.907556 32.597333-17.863111 46.250667-26.282667 14.222222-8.419556 24.177778-15.758222 35.271111-24.177778 24.632889 19.456 50.915556 36.238222 78.791111 49.891556 33.621333 17.351111 68.835556 31.004444 105.073778 42.097778a56.32 56.32 0 0 0 20.48 3.640889 33.905778 33.905778 0 0 0 34.190222-26.282667 39.025778 39.025778 0 0 0-1.592889-35.726222 49.322667 49.322667 0 0 0-26.225778-18.375111 540.842667 540.842667 0 0 1-85.162667-33.621334 603.932444 603.932444 0 0 1-63.601777-38.912c20.48-23.096889 37.831111-48.355556 52.565333-75.662222a465.294222 465.294222 0 0 0 38.343111-98.304h49.436445a38.456889 38.456889 0 0 0 26.282666-12.060444 46.762667 46.762667 0 0 0 7.850667-26.282667 44.032 44.032 0 0 0-8.931556-28.899556 37.432889 37.432889 0 0 0-26.282666-11.036444H568.6784a116.167111 116.167111 0 0 0-9.500444-17.863111c-10.467556-12.629333-22.584889-25.770667-34.702223-38.912a47.786667 47.786667 0 0 0-27.818666-18.375111h-4.209778a36.636444 36.636444 0 0 0-24.177778 8.419555 35.896889 35.896889 0 0 0-18.375111 29.923556 51.2 51.2 0 0 0 16.270222 33.109333l6.314667 6.314667H315.352178a34.133333 34.133333 0 0 0-26.282667 12.629333 45.852444 45.852444 0 0 0-6.826667 26.282667c-0.512 10.467556 2.104889 20.48 7.907556 28.899555 6.826667 6.826667 16.270222 11.036444 26.282667 11.036445h47.274666c5.233778 15.758222 10.524444 32.028444 16.839111 47.786666a419.271111 419.271111 0 0 0 50.403556 94.094223c8.419556 11.036444 17.351111 22.584889 26.282667 33.109333a389.461333 389.461333 0 0 1-64.625778 39.936c-26.282667 12.629333-54.101333 23.096889-81.976889 32.028444z m131.299555-246.954666h140.344889c-6.826667 23.096889-16.839111 45.169778-28.387555 66.730666a325.290667 325.290667 0 0 1-39.936 55.751112 319.146667 319.146667 0 0 1-39.424-52.622223l-2.616889-4.209777a388.778667 388.778667 0 0 1-29.980445-65.649778z','p-id':'41018',fill:'currentColor'},null,-1)])]))])])):(0,i.createCommentVNode)('v-if',!0),(0,i.withDirectives)((0,i.createElementVNode)('div',L,[a[4]||(a[4]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'black','margin-top':'10px','margin-bottom':'8px'}},null,-1)),(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(n.bubble?.content),1)],512),[[i.vShow,(0,i.unref)(r)]])],10,M)):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' transfer类型 '),'transfer'==n.bubble.msgtype&&'user'!=n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',q,[(0,i.createElementVNode)('div',R,[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(n.bubble?.count),1),a[5]||(a[5]=(0,i.createElementVNode)('span',null,'已转入你的余额',-1)),a[6]||(a[6]=(0,i.createElementVNode)('div',{style:{'border-radius':'50%','background-color':'#9fccf1',width:'50px',height:'50px',position:'absolute',right:'10px',display:'flex','align-items':'center','justify-content':'center',top:'15px'}},[(0,i.createElementVNode)('svg',{t:'1738258225266',class:'icon',viewBox:'0 0 1024 1024',version:'1.1',xmlns:'http://www.w3.org/2000/svg','p-id':'4449',width:'33',height:'33'},[(0,i.createElementVNode)('path',{d:'M954.014 510.695c-31.51 0.303-185.995-88.917-190.874-93.568-11.734-11.188-7.3-25.115 4.673-27.02s79.203-9.898 79.203-9.898c-41.318-110.437-133.518-198.636-254.527-227.223-193.138-45.643-392.87 83.827-437.013 281.424-0.38 1.685-3.047 21.83-19.045 21.191-10.83-0.432-46.309-14.539-59.136-20.556-14.644-6.868-18.601-5.094-14.16-27.201C113.37 156.643 370.632-12.653 617.554 45.272c204.919 48.063 347.27 225.878 362.91 428.477 2.619 27.151-11.203 36.797-26.451 36.944z m-322.516 55.059c20.284 0 36.729 16.427 36.729 36.727 0 20.265-16.445 36.729-36.729 36.729h-73.456v45.909c0 25.359-20.551 45.911-45.911 45.911-25.358 0-45.91-20.551-45.91-45.911V639.21h-73.456c-20.284 0-36.727-16.465-36.727-36.729 0-20.302 16.444-36.727 36.727-36.727h73.456v-36.73h-73.456c-20.284 0-36.727-16.461-36.727-36.726 0-20.3 16.444-36.729 36.727-36.729h73.456v-2.512l-81.508-81.491c-14.445-14.455-14.445-37.875 0-52.313s37.858-14.437 52.304 0l74.497 74.478 74.786-74.784c14.444-14.419 37.859-14.419 52.303 0 14.446 14.454 14.446 37.877 0 52.313l-80.558 80.559v3.749h73.456c20.284 0 36.729 16.429 36.729 36.729 0 20.267-16.445 36.726-36.729 36.726h-73.456v36.73h73.456z m-368.471 51.828c16.112 10.302 12.229 30.994-5.477 32.836s-73.153 6.725-73.153 6.725C228.353 760.157 317.44 841.379 432.63 868.585c193.137 45.623 390.651-77.582 434.806-275.179 0.906-4.054 0.877-3.418 2.457-12.122s4.139-21.945 21.142-16.052 58.475 18.085 71.394 21.539 11.465 8.548 9.846 20.553c-0.493 3.651-1.238 6.994-2.017 10.509-57.81 256.921-309.451 417.196-562.049 357.924-204.677-48.01-346.947-225.429-362.865-427.724-2.159-34.762 22.4-41.857 47.505-28.577 19.75 10.447 154.064 87.822 170.176 98.124z','p-id':'4450',fill:'#4090ee'})])],-1))]),a[7]||(a[7]=(0,i.createElementVNode)('div',{style:{'background-color':'#ffffff',width:'100%',height:'30px',color:'#959598','font-size':'13px','padding-left':'10px','padding-top':'8px'}},' QQ转账 ',-1))])):(0,i.createCommentVNode)('v-if',!0),'transfer'==n.bubble.msgtype&&'user'==n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',X,[(0,i.createElementVNode)('div',Z,[a[9]||(a[9]=(0,i.createElementVNode)('div',{style:{'border-radius':'50%','background-color':'#9fccf1',width:'50px','min-width':'50px','min-height':'50px',height:'50px',right:'10px',display:'flex','align-items':'center','justify-content':'center',top:'15px'}},[(0,i.createElementVNode)('svg',{t:'1738258225266',class:'icon',viewBox:'0 0 1024 1024',version:'1.1',xmlns:'http://www.w3.org/2000/svg','p-id':'4449',width:'33',height:'33'},[(0,i.createElementVNode)('path',{d:'M954.014 510.695c-31.51 0.303-185.995-88.917-190.874-93.568-11.734-11.188-7.3-25.115 4.673-27.02s79.203-9.898 79.203-9.898c-41.318-110.437-133.518-198.636-254.527-227.223-193.138-45.643-392.87 83.827-437.013 281.424-0.38 1.685-3.047 21.83-19.045 21.191-10.83-0.432-46.309-14.539-59.136-20.556-14.644-6.868-18.601-5.094-14.16-27.201C113.37 156.643 370.632-12.653 617.554 45.272c204.919 48.063 347.27 225.878 362.91 428.477 2.619 27.151-11.203 36.797-26.451 36.944z m-322.516 55.059c20.284 0 36.729 16.427 36.729 36.727 0 20.265-16.445 36.729-36.729 36.729h-73.456v45.909c0 25.359-20.551 45.911-45.911 45.911-25.358 0-45.91-20.551-45.91-45.911V639.21h-73.456c-20.284 0-36.727-16.465-36.727-36.729 0-20.302 16.444-36.727 36.727-36.727h73.456v-36.73h-73.456c-20.284 0-36.727-16.461-36.727-36.726 0-20.3 16.444-36.729 36.727-36.729h73.456v-2.512l-81.508-81.491c-14.445-14.455-14.445-37.875 0-52.313s37.858-14.437 52.304 0l74.497 74.478 74.786-74.784c14.444-14.419 37.859-14.419 52.303 0 14.446 14.454 14.446 37.877 0 52.313l-80.558 80.559v3.749h73.456c20.284 0 36.729 16.429 36.729 36.729 0 20.267-16.445 36.726-36.729 36.726h-73.456v36.73h73.456z m-368.471 51.828c16.112 10.302 12.229 30.994-5.477 32.836s-73.153 6.725-73.153 6.725C228.353 760.157 317.44 841.379 432.63 868.585c193.137 45.623 390.651-77.582 434.806-275.179 0.906-4.054 0.877-3.418 2.457-12.122s4.139-21.945 21.142-16.052 58.475 18.085 71.394 21.539 11.465 8.548 9.846 20.553c-0.493 3.651-1.238 6.994-2.017 10.509-57.81 256.921-309.451 417.196-562.049 357.924-204.677-48.01-346.947-225.429-362.865-427.724-2.159-34.762 22.4-41.857 47.505-28.577 19.75 10.447 154.064 87.822 170.176 98.124z','p-id':'4450',fill:'#4090ee'})])],-1)),(0,i.createElementVNode)('div',G,[(0,i.createElementVNode)('span',J,(0,i.toDisplayString)(n.bubble?.count),1),a[8]||(a[8]=(0,i.createElementVNode)('span',{style:{'text-align':'start'}},'已转入好友余额',-1))])]),a[10]||(a[10]=(0,i.createElementVNode)('div',{style:{'background-color':'#ffffff',width:'100%',height:'30px',color:'#959598','font-size':'13px','padding-left':'10px','padding-top':'8px','text-align':'start'}},' QQ转账 ',-1))])):(0,i.createCommentVNode)('v-if',!0)],4),'user'==n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'user_avatar Chat_MyHead',style:(0,i.normalizeStyle)(`height: ${p.value}; width: ${p.value}; min-width: ${p.value}; background-size: cover;background-image:url('${(0,i.unref)(l).ST.userHead}')`)},null,4)):(0,i.createCommentVNode)('v-if',!0)],6)):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' system类型 '),'system'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',K,(0,i.toDisplayString)(n.bubble?.content),1)):(0,i.createCommentVNode)('v-if',!0)],64);var o}}};a(1331);const ne=ee,te={style:{'padding-top':'7px','backdrop-filter':'blur(1px)','background-color':'rgb(255, 255, 255, 0.1)'}},ae={style:{width:'100%',height:'20px',display:'grid',top:'0',left:'0','grid-template-columns':'auto 1fr auto','align-items':'center','margin-top':'20px'}},ie={style:{display:'flex','align-items':'center','max-width':'100%',overflow:'hidden','margin-left':'5px'}},oe={class:'QQ_chat_username'},re={class:'chat-bar','aria-label':'输入工具栏'},se={class:'input-shell',style:{flex:'1 !important',display:'flex !important','align-items':'center !important',background:'#ffffff !important','border-radius':'8px !important',padding:'10px 12px !important','box-shadow':'0 1px 2px rgba(0, 0, 0, 0.04) !important','min-width':'0 !important'}},le={class:'chat_function_container',style:{width:'100%',height:'250px','margin-top':'5px','border-top':'#d7d5d5 1px solid'}},ce={class:'emoji_container'},de=['data-name','src','onClick'],pe={class:'input_container'},me={class:'input_container'},ue={class:'chat-setting-popup'},Ae={class:'chat-setting-header'},he={class:'chat-setting-content'},ge={class:'setting-item'},Ce={style:{flex:'1'}},fe={class:'setting-item'},ve={style:{flex:'1'}},be={class:'setting-item'},xe={style:{flex:'1'}},ye={key:0,class:'setting-item'},Be={style:{flex:'1'}},we={class:'setting-item'},ke={style:{flex:'1'}},Ee={class:'setting-item'},Se={style:{flex:'1'}},Ne={class:'setting-item'},Qe={style:{flex:'1'}},Ve={class:'preview',style:{margin:'0 auto'}},_e={class:'chat-setting-footer'},ze={class:'chat-setting-popup'},Te={class:'chat-setting-header'},Me={class:'chat-setting-content'},Fe={class:'setting-item'},De={style:{flex:'1'}},Ie={class:'setting-item'},je={style:{flex:'1'}},Ue={class:'setting-item'},$e={style:{flex:'1'}},He={class:'setting-item',style:{'align-items':'start'}},Ye={style:{flex:'1'}},We={class:'setting-item',style:{'align-items':'start'}},Pe={style:{flex:'1'}},Oe={style:{'font-size':'14px',color:'gray','margin-left':'10px','margin-bottom':'5px'}},Le={class:'chat-setting-footer'},qe={class:'popup-overlay'},Re={__name:'chat_page',props:['value','name'],setup(e){const n=e,t=(0,i.ref)(''),a=(0,i.ref)(!1),o=(0,i.ref)(null),r=((0,i.computed)(()=>l.QQ.chathistory[n.name]?.msgs||[]),(0,i.ref)({enable:!1,bubble:n.value.bubble||'#FFFFFF',text:n.value.text||'#000000',inputColor:n.value.inputColor||'#FFFFFF',head:n.value.head,background:n.value.background,phone:n.value?.phone||'隐藏机型',name:n.value.name||''})),s=JSON.parse(JSON.stringify(r.value)),c=(0,i.ref)({show:!1,showtype:''}),d=(0,i.ref)({show:!1,msgtype:'',text:{voice:'',img:'',transfer:''}}),p=(0,i.computed)(()=>{if(n.name in l.QQ.chars){const e=l.QQ.chars[n.name].background;return e?`background-image:url('${e}')`:''}return console.log('没有壁纸'),''}),m=(0,i.computed)(()=>!('banSend'in n.value)||!n.value.banSend),u=(0,i.ref)({name:'',content:'',members:''});function A(){'Group'==n.value.chartype&&h(),r.value.enable=!r.value.enable}function h(){const e=l.QQ.chars[n.name];e&&(u.value.name=e.name,u.value.members=e.members,u.value.content=e.content,r.value.head=e.head)}const g=(0,i.ref)(!1),C=(0,i.computed)(()=>'0px');(0,i.watch)(()=>n.value,e=>{r.value.bubble=e.bubble,r.value.text=e.text,r.value.head=e.head,r.value.background=e.background},{deep:!0}),(0,i.watch)(()=>l.QQ.chathistory[n.name]?.msgs?.length,e=>{k()});let f=null,v=0,b=!1,x=!1;const y=(0,i.computed)(()=>'npc'!==n.value?.chartype);function B(){f?.disconnect(),f=null}function w(){const e=o.value;e&&(v=e.clientHeight||0,B(),f=new ResizeObserver(()=>{const e=o.value;if(!e)return;if(0===e.clientHeight)return void(x=!0);if(b)return void(v=e.clientHeight);if(x)return x=!1,void(v=e.clientHeight);if(e.scrollHeight-(e.scrollTop+e.clientHeight)<=20)return e.scrollTop=e.scrollHeight-e.clientHeight,void(v=e.clientHeight);const n=e.scrollHeight-(e.scrollTop+v);e.scrollTop=e.scrollHeight-e.clientHeight-n,v=e.clientHeight}),f.observe(e))}(0,i.onMounted)(async()=>{await(0,i.nextTick)(),y.value&&w()}),(0,i.watch)([y,o],async([e])=>{e?(await(0,i.nextTick)(),w()):B()}),(0,i.onBeforeUnmount)(()=>{B()});const k=()=>{const e=o.value;e&&(b=!0,(0,i.nextTick)(()=>{requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight,v=e.clientHeight||0,requestAnimationFrame(()=>{b=!1})})}))};function E(){l.QQ.activeChatId=null}function S(e){const i=t.value;if(l.generate||!m.value)return;t.value='';const o=n.name;if(console.log(`给${o}发送消息:${i}`),!i.match(/\S/)&&0==l.QQ.cacheMsg.length)return;a.value=!0,setTimeout(()=>a.value=!1,120),o in l.QQ.chathistory==0&&(l.QQ.chathistory[o]={chartype:'Group'==l.QQ.chars[o].chartype?'Group':'private',msgs:[]});const r=(new Date).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});i&&l.QQ.addMsg(o,{msgtype:'text',content:i,sender:'user',time:r});const s=l.QQ.chars[n.name]?.chartype,c=`\n<msg>{{user}}|${n.name}|${i}|${r}</msg>`;if('尾附'==l.phone.sendModel){let e='';e+='Group'==s?`\n在群聊${n.name}中发送消息:${i}`:`\n给${n.name}发送消息:${i}`,e+=c;const t=$('#send_textarea').val().trim()+e;return $('#send_textarea').val(t.trim()||'')[0].dispatchEvent(new Event('input',{bubbles:!0})),void(l.QQ.cacheMsg=[])}if(e){let e=l.QQ.cacheMsg.join('\n').trim();i&&(e+='Group'==s?`\n在群聊${n.name}中发送消息:${i}`:`\n给${n.name}发送消息:${i}`,e+=c),l.QQ.cacheMsg=[],triggerSlash(`/send ${e.trim()}|/trigger`)}else if(i){let e='';e='Group'==s?`\n在群聊${n.name}中发送消息:${i}`:`\n给${n.name}发送消息:${i}`,e+=c,l.QQ.cacheMsg.push(e.trim())}l.QQ.chathistory[o].unread=0}function N(e){if(r.value.enable=!1,!e)return void(r.value=JSON.parse(JSON.stringify(s)));r.value.text&&(l.QQ.chars[n.name].text=r.value.text),r.value.bubble&&(l.QQ.chars[n.name].bubble=r.value.bubble),r.value.head&&(l.QQ.chars[n.name].head=r.value.head),r.value.background&&(l.QQ.chars[n.name].background=r.value.background),r.value.phone&&(l.QQ.chars[n.name].phone=r.value.phone),'friend'==n.value.chartype&&r.value.name&&(l.QQ.chars[n.name].name=r.value.name);let t=r.value.inputColor;t&&'留空'!=t&&'透明'!=t||(t='transparent'),l.QQ.chars[n.name].inputColor=t,l.QQ.saveChars()}async function Q(e){r.value.enable=!1,e?(r.value.background&&(l.QQ.chars[n.name].background=r.value.background),r.value.head&&(l.QQ.chars[n.name].head=r.value.head),u.value.name&&(l.QQ.chars[n.name].name=u.value.name),u.value.members&&(l.QQ.chars[n.name].members=u.value.members),u.value.content&&(l.QQ.chars[n.name].content=u.value.content),await l.QQ.saveChars()):h()}function V(){alert('删除还没做,过几天再做')}function T(){const{bgColor:e,textColor:n}=l.generateBubbleColor();r.value.bubble=e,r.value.text=n}function M(e){if(l.generate||!m.value)return;const t=n.name;if(console.log(e,d.value.text[e]),!d.value.text[e])return;const a=d.value.text[e];let i,o='';if(o='voice'==e?'yy':'transfer'==e?'zz':e,i='transfer'!=e?`[${o}-${a}]`:`[${o}-${a}元]`,console.log(`发送出去的文本:${i}`),t in l.QQ.chathistory==0&&(l.QQ.chathistory[t]={chartype:'Group'==l.QQ.chars[t].chartype?'Group':'private',msgs:[]}),a){const n={msgtype:e,content:a,sender:'user',time:''};'transfer'==e&&(n.count=a+'元'),l.QQ.addMsg(t,n)}const r=l.QQ.chars[n.name]?.chartype;if('尾附'==l.phone.sendModel){let t='';t+='Group'==r?`\n在群聊${n.name}中发送消息:${i}`:`\n给${n.name}发送消息:${i}`;const a=$('#send_textarea').val().trim()+t;return $('#send_textarea').val(a.trim()||'')[0].dispatchEvent(new Event('input',{bubbles:!0})),void(d.value.text[e]='')}{let e='';e='Group'==r?`\n在群聊${n.name}中发送消息:${i}`:`\n给${n.name}发送消息:${i}`,l.QQ.cacheMsg.push(e)}d.value.text[e]='',l.QQ.chathistory[t].unread=0,d.value.show=!1}return(0,i.watch)(()=>l.QQ.activeChatId,e=>{e&&e===n.name&&k()}),(e,s)=>((0,i.openBlock)(),(0,i.createBlock)(i.Transition,{name:'slide-fade'},{default:(0,i.withCtx)(()=>['npc'!=n.value.chartype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'QQ_chat_page',style:(0,i.normalizeStyle)(`width: 100%; height: 100%; padding-top: 0px;${p.value}`)},[(0,i.createElementVNode)('div',te,[(0,i.createElementVNode)('div',ae,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{class:'QQ-close-btn',viewBox:'0 0 1024 1024',style:{height:'14px',width:'14px','margin-left':'8px'},onClick:E},[...s[29]||(s[29]=[(0,i.createElementVNode)('path',{d:'M769.137778 153.372444L444.984889 512l324.152889 358.684444c36.408889 35.043556 36.408889 91.989333 0 126.976a95.744 95.744 0 0 1-131.868445 0l-377.571555-417.678222c-1.536-1.365333-3.584-1.877333-5.063111-3.299555A87.438222 87.438222 0 0 1 227.555556 512c-0.341333-23.324444 8.533333-46.876444 27.079111-64.739556 1.479111-1.422222 3.527111-1.934222 5.063111-3.185777L637.269333 26.339556a95.744 95.744 0 0 1 131.868445 0c36.408889 35.043556 36.408889 91.932444 0 127.032888z',fill:'#666666','p-id':'1570'},null,-1)])])),(0,i.createElementVNode)('div',ie,[(0,i.withDirectives)((0,i.createElementVNode)('div',{class:'new_tips',style:{'background-color':'gray',color:'#fff',width:'20px',height:'20px','border-radius':'50%','justify-content':'center','align-items':'center','font-size':'12px',display:'flex'}},(0,i.toDisplayString)((0,i.unref)(l).QQ.allUnRead),513),[[i.vShow,(0,i.unref)(l).QQ.allUnRead>0]]),(0,i.createElementVNode)('span',oe,(0,i.toDisplayString)(n.value.name),1)]),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{id:'QQ_chat_page_setting',viewBox:'0 0 1024 1024',style:{height:'15px',width:'15px','margin-right':'14px'},onClick:A},[...s[30]||(s[30]=[(0,i.createElementVNode)('path',{d:'M901.632 896H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808zM901.632 568.32H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808zM901.632 240.64H122.368c-30.72 0-55.808-25.088-55.808-55.808v-1.536c0-30.72 25.088-55.808 55.808-55.808h779.776c30.72 0 55.808 25.088 55.808 55.808v1.536c-0.512 30.72-25.6 55.808-56.32 55.808z','p-id':'4301',fill:'#666666'},null,-1)])]))]),s[31]||(s[31]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'0.5px','background-color':'#eee','margin-top':'5px','border-top':'1px solid #9a9a9a'}},null,-1))]),(0,i.createElementVNode)('div',{ref_key:'msgContentRef',ref:o,class:'msgcontent',style:(0,i.normalizeStyle)([{marginBottom:C.value},{'padding-top':'15px','padding-bottom':'0'}]),onClick:s[0]||(s[0]=e=>{c.value.show=!1,c.value.showtype='',g.value=!1})},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).QQ.chathistory[n.name]?.msgs||[],e=>((0,i.openBlock)(),(0,i.createBlock)(ne,{bubble:e,'is-group':(0,i.unref)(l).QQ.chathistory[n.name]?.chartype,senderinfo:(0,i.unref)(l).QQ.chars[e?.sender]},null,8,['bubble','is-group','senderinfo']))),256))],4),(0,i.createCommentVNode)(' <div\n        style="display: none"\n        v-if="inputShow"\n        class="input-container"\n        :style="`background-color:${sharedState.QQ.chars[props.name].inputColor}`"\n      >\n        <div style="display: flex; align-items: center; width: 100%">\n          <div style="flex-grow: 1; margin-left: 5px; margin-right: 2%">\n            <input\n              v-model="text_value"\n              @keyup.enter="sendText(false)"\n              class="userInput"\n              type="text"\n              name=""\n              style="\n                box-sizing: border-box;\n                background-color: transparent;\n                background-color: unset !important;\n                border: 1px solid rgb(0, 0, 0, 0.5) !important;\n                color: black !important;\n              "\n            />\n          </div>\n          <div @click="sendText(true)" style="margin-right: 7px" id="QQ_chat_send-btn">\n            <button\n              style="\n                background-color: #fff;\n                border-radius: 10px;\n                height: 31px;\n                display: block;\n                width: 3.5rem;\n                background-color: transparent;\n                border: 1px solid rgb(0, 0, 0, 0.5);\n                color: black !important;\n              "\n            >\n              发送\n            </button>\n          </div>\n        </div>\n        <div class="QQ_chatpage_function">\n          <svg\n            @click="function_click(\'voice\')"\n            :class="`QQ_chatpage_function_voice${containerShow.showtype == \'voice\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            width="28"\n            height="25"\n          >\n            <path\n              d="M320.093091 234.682182a191.906909 191.906909 0 1 1 383.813818 0V512a191.906909 191.906909 0 1 1-383.813818 0V234.682182zM512 127.906909a106.728727 106.728727 0 0 0-106.728727 106.775273V512a106.728727 106.728727 0 1 0 213.457454 0V234.682182A106.728727 106.728727 0 0 0 512 127.906909zM192 448.093091c23.505455 0 42.589091 19.083636 42.589091 42.589091a277.410909 277.410909 0 0 0 554.821818 0 42.589091 42.589091 0 0 1 85.178182 0 362.589091 362.589091 0 0 1-320 360.122182v87.877818a42.589091 42.589091 0 0 1-85.178182 0v-87.924364a362.635636 362.635636 0 0 1-320-360.075636c0-23.552 19.083636-42.589091 42.589091-42.589091z"\n              p-id="8419"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'img\')"\n            :class="`QQ_chatpage_function_img${containerShow.showtype == \'img\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"\n              p-id="10905"\n            ></path>\n          </svg>\n          <svg class="QQ_chatpage_function_camera" viewBox="0 0 1024 1024" width="28" height="28">\n            <path\n              d="M269.44 256l23.296-75.381333A74.666667 74.666667 0 0 1 364.074667 128h295.850666a74.666667 74.666667 0 0 1 71.338667 52.618667L754.56 256H821.333333c64.8 0 117.333333 52.533333 117.333334 117.333333v426.666667c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V373.333333c0-64.8 52.533333-117.333333 117.333334-117.333333h66.773333z m23.605333 64H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v426.666667a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V373.333333a53.333333 53.333333 0 0 0-53.333334-53.333333h-90.378666a32 32 0 0 1-30.570667-22.549333l-30.272-97.930667a10.666667 10.666667 0 0 0-10.186667-7.52H364.074667a10.666667 10.666667 0 0 0-10.186667 7.52l-30.272 97.92A32 32 0 0 1 293.045333 320zM512 725.333333c-88.362667 0-160-71.637333-160-160 0-88.362667 71.637333-160 160-160 88.362667 0 160 71.637333 160 160 0 88.362667-71.637333 160-160 160z m0-64a96 96 0 1 0 0-192 96 96 0 0 0 0 192z"\n              p-id="6401"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'transfer\')"\n            :class="`QQ_chatpage_function_redpacket${containerShow.showtype == \'transfer\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            p-id="12169"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M827 357.60909131a522.16363653 522.16363653 0 0 1-159.83181826 81.9 155.45454521 155.45454521 0 0 1-310.33636348 0A522.16363653 522.16363653 0 0 1 197 357.60909131V798.36363652A90 90 0 0 0 287 888.36363653h450a90 90 0 0 0 90-90V357.60909131z m0-85.58181826V225.63636348A90 90 0 0 0 737 135.63636347H287A90 90 0 0 0 197 225.63636348v46.34999999a457.93636347 457.93636347 0 0 0 169.97727305 102.06818174 155.49545479 155.49545479 0 0 1 290.0454539 0A457.89545479 457.89545479 0 0 0 827 272.02727305zM287 70.18181826h450A155.45454521 155.45454521 0 0 1 892.45454521 225.63636348v572.72727304a155.45454521 155.45454521 0 0 1-155.45454521 155.45454522H287A155.45454521 155.45454521 0 0 1 131.54545479 798.36363652V225.63636348A155.45454521 155.45454521 0 0 1 287 70.18181826z m225 450a90 90 0 1 0 0-180 90 90 0 0 0 0 180z"\n              p-id="12170"\n            ></path>\n          </svg>\n          <svg\n            @click="function_click(\'emoji\')"\n            :class="`QQ_chatpage_function_emoji${containerShow.showtype == \'emoji\' ? \' svg_selected\' : \'\'}`"\n            viewBox="0 0 1024 1024"\n            p-id="13480"\n            width="28"\n            height="28"\n          >\n            <path\n              d="M512 64a448 448 0 1 1 0 896A448 448 0 0 1 512 64z m0 64a384 384 0 1 0 0 768A384 384 0 0 0 512 128zM282.624 611.2H351.36c35.52 60.416 82.112 96.128 160.64 96.128 73.92 0 117.888-27.072 155.008-84.928l6.848-11.2h67.52a246.208 246.208 0 0 1-453.76 11.84l-4.992-11.84H351.36z m387.2-251.264a48 48 0 1 1 0 96 48 48 0 0 1 0-96z m-315.2 0a48 48 0 1 1 0 96 48 48 0 0 1 0-96z"\n              p-id="13481"\n            ></path>\n          </svg>\n          <svg class="QQ_chatpage_function_other" viewBox="0 0 1024 1024" p-id="14615" width="28" height="28">\n            <path\n              d="M512 958.016611c-119.648434 0-232.1288-46.367961-316.736783-130.559656-84.640667-84.255342-131.263217-196.255772-131.263217-315.455235 0-119.168499 46.624271-231.199892 131.232254-315.424271 84.607983-84.191695 197.088348-130.559656 316.736783-130.559656s232.1288 46.367961 316.704099 130.559656c84.67163 84.224378 131.263217 196.255772 131.263217 315.391587 0.032684 119.199462-46.591587 231.232576-131.263217 315.455235C744.1288 911.615966 631.648434 958.016611 512 958.016611zM512 129.983389c-102.623626 0-199.071738 39.743475-271.583282 111.936783-72.480581 72.12794-112.416718 168.063432-112.416718 270.079828s39.903454 197.951888 112.384034 270.047144c72.511544 72.191587 168.959656 111.936783 271.583282 111.936783 102.592662 0 199.071738-39.743475 271.583282-111.936783 72.480581-72.160624 112.416718-168.063432 112.384034-270.079828 0-102.016396-39.903454-197.919204-112.384034-270.016181C711.071738 169.759548 614.592662 129.983389 512 129.983389z"\n              p-id="14616"\n            ></path>\n            <path\n              d="M736.00086 480.00086 544.00086 480.00086 544.00086 288.00086c0-17.664722-14.336138-32.00086-32.00086-32.00086s-32.00086 14.336138-32.00086 32.00086l0 192L288.00086 480.00086c-17.664722 0-32.00086 14.336138-32.00086 32.00086s14.336138 32.00086 32.00086 32.00086l192 0 0 192c0 17.695686 14.336138 32.00086 32.00086 32.00086s32.00086-14.303454 32.00086-32.00086L544.00258 544.00086l192 0c17.695686 0 32.00086-14.336138 32.00086-32.00086S753.696546 480.00086 736.00086 480.00086z"\n              p-id="14617"\n            ></path>\n          </svg>\n        </div>\n        <div class="drawer-wrap" :class="{ open: containerShow.show }">\n          <transition name="drawer">\n            <div\n              v-show="containerShow.show"\n              class="chat_function_container"\n              style="width: 100%; height: 250px; margin-top: 5px; border-top: #d7d5d5 1px solid"\n            >\n              <div v-show="containerShow.showtype == \'emoji\'" class="emoji_container">\n                <img\n                  v-for="(value, key) in sharedState.emoji"\n                  @click="sendEmoji(value, key)"\n                  :data-name="key"\n                  :src="value"\n                  alt="加载失败"\n                  loading="lazy"\n                  class="emoji_container_img"\n                />\n              </div>\n              <div\n                v-show="containerShow.showtype == \'voice\' || containerShow.showtype == \'img\'"\n                class="input_container"\n              >\n                <span>文字描述:</span>\n                <input v-model="specialText" type="text" placeholder="发送内容的文字描述" />\n                <button @click="sendSpecial" class="chat_function_input_container_button">确定</button>\n              </div>\n              <div v-show="containerShow.showtype == \'transfer\'" class="input_container">\n                <span>给对方转账:</span>\n                <input v-model="specialText" type="text" placeholder="输入转账金额,无需单位" />\n                <button @click="sendSpecial" class="chat_function_input_container_button">确定转账</button>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </div> '),m.value?((0,i.openBlock)(),(0,i.createElementBlock)('footer',{key:0,class:(0,i.normalizeClass)(['chat-bar-wrap',{'is-mobile':(0,i.unref)(l).ST.isMobile}]),role:'contentinfo','aria-label':'聊天输入栏',style:(0,i.normalizeStyle)(`background-color:${(0,i.unref)(l).QQ.chars[n.name].inputColor||'#f2f3f5'}`)},[(0,i.createElementVNode)('div',re,[(0,i.createCommentVNode)(' 加号：更多功能入口 '),(0,i.createElementVNode)('button',{class:'icon-btn','aria-label':'更多功能',onClick:s[1]||(s[1]=e=>d.value.show=!d.value.show)},[...s[32]||(s[32]=[(0,i.createElementVNode)('svg',{class:'icon',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2','stroke-linecap':'round','stroke-linejoin':'round','aria-hidden':'true'},[(0,i.createElementVNode)('path',{d:'M12 5v14M5 12h14'})],-1)])]),(0,i.createCommentVNode)(' 输入框主体 '),(0,i.createElementVNode)('div',se,[(0,i.createCommentVNode)(' input本体：先清空继承，再设定所需样式 '),(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'messageInput','onUpdate:modelValue':s[2]||(s[2]=e=>t.value=e),placeholder:'输入消息…',style:{all:'unset !important','box-sizing':'border-box !important',display:'block !important',width:'100% !important','font-size':'15px !important','line-height':'20px !important',color:'#333 !important',background:'transparent !important','caret-color':'#4a90e2 !important'},onKeyup:s[3]||(s[3]=(0,i.withKeys)(e=>S(!1),['enter']))},null,544),[[i.vModelText,t.value]])]),(0,i.createCommentVNode)(' 表情按钮（在右边，与发送键同侧） '),(0,i.createElementVNode)('button',{class:'icon-btn','aria-label':'表情',onClick:s[4]||(s[4]=e=>{return n='emoji',void(c.value.showtype==n?(c.value.show=!1,c.value.showtype='',g.value=!1):(c.value.show=!0,c.value.showtype=n,g.value=!0));var n})},[...s[33]||(s[33]=[(0,i.createElementVNode)('svg',{class:'icon',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2','stroke-linecap':'round','stroke-linejoin':'round','aria-hidden':'true'},[(0,i.createElementVNode)('circle',{cx:'12',cy:'12',r:'10'}),(0,i.createElementVNode)('path',{d:'M8 10h.01M16 10h.01'}),(0,i.createElementVNode)('path',{d:'M8.5 15c1 .8 2.2 1.2 3.5 1.2s2.5-.4 3.5-1.2'})],-1)])]),(0,i.createCommentVNode)(' 发送按钮（始终可见；输入为空时置灰）:disabled="!text_value.trim()" '),(0,i.createElementVNode)('button',{id:'sendBtn',class:(0,i.normalizeClass)([{active:a.value},'send-btn']),'aria-label':'发送',onClick:s[5]||(s[5]=e=>S(!0))},[...s[34]||(s[34]=[(0,i.createElementVNode)('svg',{class:'plane',viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':'2','stroke-linecap':'round','stroke-linejoin':'round','aria-hidden':'true'},[(0,i.createElementVNode)('path',{d:'m22 2-7 20-3-9-9-3Z'}),(0,i.createElementVNode)('path',{d:'M22 2 11 13'})],-1)])],2)]),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['drawer-wrap',{open:c.value.show}])},[(0,i.createVNode)(i.Transition,{name:'drawer',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',le,[(0,i.withDirectives)((0,i.createElementVNode)('div',ce,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).emoji,(e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)('img',{'data-name':t,src:e,alt:'加载失败',loading:'lazy',class:'emoji_container_img',onClick:a=>function(e,t){if(l.generate||!m.value)return;n.name in l.QQ.chathistory==0&&(console.log(`重置了聊天:${t}`),console.log(JSON.stringify(l.QQ.chathistory)),l.QQ.chathistory[n.name]={chartype:'Group'==l.QQ.chars[n.name].chartype?'Group':'private',msgs:[]}),l.QQ.addMsg(n.name,{msgtype:'emoji',emoji:e,content:t,sender:'user',time:''});const a=l.QQ.chars[n.name]?.chartype,i=`[bqb-${t}]`;let o='';if('尾附'==l.phone.sendModel){o+='Group'==a?`\n在群聊${n.name}中发送消息:${i}`:`\n给${n.name}发送消息:${i}`;const e=$('#send_textarea').val().trim()+o;return void $('#send_textarea').val(e.trim()||'')[0].dispatchEvent(new Event('input',{bubbles:!0}))}o='Group'==a?`\n在群聊${n.name}中发送消息:${i}`:`\n给${n.name}发送消息:${i}`,l.QQ.cacheMsg.push(o)}(e,t)},null,8,de))),256))],512),[[i.vShow,'emoji'==c.value.showtype]]),(0,i.withDirectives)((0,i.createElementVNode)('div',pe,[s[35]||(s[35]=(0,i.createElementVNode)('span',null,'文字描述:',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':s[6]||(s[6]=n=>e.specialText=n),type:'text',placeholder:'发送内容的文字描述'},null,512),[[i.vModelText,e.specialText]]),(0,i.createElementVNode)('button',{class:'chat_function_input_container_button',onClick:M},'确定')],512),[[i.vShow,'voice'==c.value.showtype||'img'==c.value.showtype]]),(0,i.withDirectives)((0,i.createElementVNode)('div',me,[s[36]||(s[36]=(0,i.createElementVNode)('span',null,'给对方转账:',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':s[7]||(s[7]=n=>e.specialText=n),type:'text',placeholder:'输入转账金额,无需单位'},null,512),[[i.vModelText,e.specialText]]),(0,i.createElementVNode)('button',{class:'chat_function_input_container_button',onClick:M},'确定转账')],512),[[i.vShow,'transfer'==c.value.showtype]])],512),[[i.vShow,c.value.show]])]),_:1})],2)],6)):(0,i.createCommentVNode)('v-if',!0),(0,i.createVNode)(i.Transition,{name:'popup',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',ue,[(0,i.createElementVNode)('div',Ae,[s[38]||(s[38]=(0,i.createElementVNode)('span',null,'聊天设置',-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{class:'close-setting-btn',viewBox:'0 0 1024 1024',width:'20',height:'20',onClick:s[8]||(s[8]=e=>N(!1))},[...s[37]||(s[37]=[(0,i.createElementVNode)('path',{d:'M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z',fill:'#666666'},null,-1)])]))]),(0,i.createElementVNode)('div',he,[(0,i.createElementVNode)('div',ge,[s[39]||(s[39]=(0,i.createElementVNode)('span',null,'气泡颜色',-1)),(0,i.createElementVNode)('div',Ce,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'bubble-color-input','onUpdate:modelValue':s[9]||(s[9]=e=>r.value.bubble=e),style:{width:'100%'},type:'text',placeholder:'颜色值'},null,512),[[i.vModelText,r.value.bubble]])]),(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'bubble-color','onUpdate:modelValue':s[10]||(s[10]=e=>r.value.bubble=e),type:'color',class:'color-picker'},null,512),[[i.vModelText,r.value.bubble]])]),(0,i.createElementVNode)('div',fe,[s[40]||(s[40]=(0,i.createElementVNode)('span',null,'字体颜色',-1)),(0,i.createElementVNode)('div',ve,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'text-color-input','onUpdate:modelValue':s[11]||(s[11]=e=>r.value.text=e),style:{width:'100%'},type:'text',placeholder:'颜色值'},null,512),[[i.vModelText,r.value.text]])]),(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'text-color','onUpdate:modelValue':s[12]||(s[12]=e=>r.value.text=e),type:'color',class:'color-picker'},null,512),[[i.vModelText,r.value.text]])]),(0,i.createElementVNode)('div',be,[s[41]||(s[41]=(0,i.createElementVNode)('span',null,'输入框色',-1)),(0,i.createElementVNode)('div',xe,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'text-color-input','onUpdate:modelValue':s[13]||(s[13]=e=>r.value.inputColor=e),style:{width:'100%'},type:'text',placeholder:'颜色值'},null,512),[[i.vModelText,r.value.inputColor]])]),(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'text-color','onUpdate:modelValue':s[14]||(s[14]=e=>r.value.inputColor=e),type:'color',class:'color-picker'},null,512),[[i.vModelText,r.value.inputColor]])]),'friend'==n.value.chartype?((0,i.openBlock)(),(0,i.createElementBlock)('div',ye,[s[42]||(s[42]=(0,i.createElementVNode)('span',null,'角色备注',-1)),(0,i.createElementVNode)('div',Be,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'chatbg-input','onUpdate:modelValue':s[15]||(s[15]=e=>r.value.name=e),style:{width:'100%'},type:'text',placeholder:'对角色的备注'},null,512),[[i.vModelText,r.value.name]])]),s[43]||(s[43]=(0,i.createElementVNode)('button',{style:{display:'none'},class:'pickfile-setting-btn','data-id':'bg'},'选择文件',-1))])):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('div',we,[s[44]||(s[44]=(0,i.createElementVNode)('span',null,'聊天壁纸',-1)),(0,i.createElementVNode)('div',ke,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'chatbg-input','onUpdate:modelValue':s[16]||(s[16]=e=>r.value.background=e),style:{width:'100%'},type:'text',placeholder:'输入图片URL'},null,512),[[i.vModelText,r.value.background]])]),s[45]||(s[45]=(0,i.createElementVNode)('button',{style:{display:'none'},class:'pickfile-setting-btn','data-id':'bg'},'选择文件',-1))]),(0,i.createElementVNode)('div',Ee,[s[46]||(s[46]=(0,i.createElementVNode)('span',null,'聊天头像',-1)),(0,i.createElementVNode)('div',Se,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'chathead-input','onUpdate:modelValue':s[17]||(s[17]=e=>r.value.head=e),style:{width:'100%'},type:'text',placeholder:'输入图片URL'},null,512),[[i.vModelText,r.value.head]])]),s[47]||(s[47]=(0,i.createElementVNode)('button',{style:{display:'none'},class:'pickfile-setting-btn','data-id':'head'},'选择文件',-1))]),(0,i.createElementVNode)('div',Ne,[s[48]||(s[48]=(0,i.createElementVNode)('span',null,'使用机型',-1)),(0,i.createElementVNode)('div',Qe,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'chathead-input','onUpdate:modelValue':s[18]||(s[18]=e=>r.value.phone=e),style:{width:'100%'},type:'text',placeholder:'输入手机型号'},null,512),[[i.vModelText,r.value.phone]])]),s[49]||(s[49]=(0,i.createElementVNode)('button',{style:{display:'none'},class:'pickfile-setting-btn','data-id':'head'},'选择文件',-1))]),(0,i.createElementVNode)('div',Ve,[(0,i.createElementVNode)('div',{id:'chat-setting-preview',class:'QQ_chat_msgdiv','data-name':'${username}',style:(0,i.normalizeStyle)({margin:'0 auto','background-color':r.value.bubble,color:r.value.text})},[...s[50]||(s[50]=[(0,i.createElementVNode)('span',null,'这是预览文本',-1)])],4)]),s[51]||(s[51]=(0,i.createElementVNode)('input',{id:'pickfile-input',type:'file',accept:'image/*',capture:'camera',style:{display:'none'}},null,-1))]),(0,i.createElementVNode)('div',_e,[(0,i.createElementVNode)('button',{id:'randomcolor-setting-btn',style:{'background-color':'#919bec',color:'white'},onClick:T},' 随机 '),(0,i.createElementVNode)('button',{id:'save-setting-btn',onClick:s[19]||(s[19]=e=>N(!0))},'保存'),(0,i.createElementVNode)('button',{id:'cancel-setting-btn',onClick:s[20]||(s[20]=e=>N(!1))},'取消')]),s[52]||(s[52]=(0,i.createElementVNode)('div',{style:{'font-size':'14px',color:'gray','margin-left':'10px','margin-bottom':'5px'}},' 聊天头像输入\'char\'就是用卡封面当头像 ',-1)),s[53]||(s[53]=(0,i.createElementVNode)('div',{style:{'font-size':'14px',color:'gray','margin-left':'10px','margin-bottom':'5px'}},' 输入框颜色留空（就是不输入）就是透明 ',-1))],512),[[i.vShow,r.value.enable&&'Group'!=n.value.chartype]])]),_:1}),(0,i.createVNode)(i.Transition,{name:'popup',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',ze,[(0,i.createElementVNode)('div',Te,[s[55]||(s[55]=(0,i.createElementVNode)('span',null,'聊天设置',-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{class:'close-setting-btn',viewBox:'0 0 1024 1024',width:'20',height:'20',onClick:s[21]||(s[21]=e=>N(!1))},[...s[54]||(s[54]=[(0,i.createElementVNode)('path',{d:'M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z',fill:'#666666'},null,-1)])]))]),(0,i.createElementVNode)('div',Me,[(0,i.createElementVNode)('div',Fe,[s[56]||(s[56]=(0,i.createElementVNode)('span',null,'群名称',-1)),(0,i.createElementVNode)('div',De,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'chathead-input','onUpdate:modelValue':s[22]||(s[22]=e=>u.value.name=e),style:{width:'100%'},type:'text',placeholder:'输入群名'},null,512),[[i.vModelText,u.value.name]])])]),(0,i.createElementVNode)('div',Ie,[s[57]||(s[57]=(0,i.createElementVNode)('span',null,'群壁纸',-1)),(0,i.createElementVNode)('div',je,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'chathead-input','onUpdate:modelValue':s[23]||(s[23]=e=>r.value.background=e),style:{width:'100%'},type:'text',placeholder:'聊天壁纸'},null,512),[[i.vModelText,r.value.background]])])]),(0,i.createElementVNode)('div',Ue,[s[58]||(s[58]=(0,i.createElementVNode)('span',null,'群头像',-1)),(0,i.createElementVNode)('div',$e,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'chathead-input','onUpdate:modelValue':s[24]||(s[24]=e=>r.value.head=e),style:{width:'100%'},type:'text',placeholder:'群聊头像'},null,512),[[i.vModelText,r.value.head]])])]),(0,i.createElementVNode)('div',He,[s[59]||(s[59]=(0,i.createElementVNode)('span',{style:{'margin-top':'5px'}},'群成员',-1)),(0,i.createElementVNode)('div',Ye,[(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':s[25]||(s[25]=e=>u.value.members=e),rows:'4',placeholder:'告诉Ai群里都有谁，怎么输入都行没有格式规范，写个‘一群随机路人’进去也行'},null,512),[[i.vModelText,u.value.members]])])]),(0,i.createElementVNode)('div',We,[s[60]||(s[60]=(0,i.createElementVNode)('span',{style:{'margin-top':'5px'}},'群说明',-1)),(0,i.createElementVNode)('div',Pe,[(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':s[26]||(s[26]=e=>u.value.content=e),rows:'4',placeholder:'告诉Ai角色们会在这里聊什么之类的，比如分享日常，聊八卦'},null,512),[[i.vModelText,u.value.content]])])])]),(0,i.createElementVNode)('div',Oe,[s[61]||(s[61]=(0,i.createTextVNode)(' 点击保存后,会自动创建一个条目存放这些内容',-1)),s[62]||(s[62]=(0,i.createElementVNode)('br',null,null,-1)),s[63]||(s[63]=(0,i.createTextVNode)(' 默认为蓝灯D4,可在创建后自行修改',-1)),s[64]||(s[64]=(0,i.createElementVNode)('br',null,null,-1)),(0,i.createTextVNode)(' 条目名称为：群聊'+(0,i.toDisplayString)(n.name),1)]),(0,i.createElementVNode)('div',Le,[(0,i.createElementVNode)('button',{id:'randomcolor-setting-btn',style:{'background-color':'rgb(243 112 112)',color:'white'},onClick:V},' 删除 '),(0,i.createElementVNode)('button',{id:'save-setting-btn',onClick:s[27]||(s[27]=e=>Q(!0))},'保存'),(0,i.createElementVNode)('button',{id:'cancel-setting-btn',onClick:s[28]||(s[28]=e=>Q(!1))},'取消')])],512),[[i.vShow,r.value.enable&&'Group'==n.value.chartype]])]),_:1}),(0,i.createVNode)(i.Transition,{name:'fade',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',qe,null,512),[[i.vShow,r.value.enable||d.value.show]])]),_:1})],4)):(0,i.createCommentVNode)('v-if',!0)]),_:1}))}};a(8304),a(6566);var Xe=a(1400);const Ze=(0,Xe.A)(Re,[['__scopeId','data-v-26f36778']]),Ge=['data-name'],Je={key:0,viewBox:'0 0 1024 1024',width:'40',height:'40'},Ke={style:{width:'100%',display:'grid','grid-template-columns':'1fr 3rem','grid-template-rows':'1fr 1fr','row-gap':'4px'}},en={class:'QQ_home_name',style:{color:'black',display:'block','white-space':'nowrap','text-overflow':'ellipsis',overflow:'hidden'}},nn={class:'QQ_home_lasttime',style:{color:'#626367','justify-self':'end'}},tn={class:'QQ_home_lastmsg',style:{color:'#626367','white-space':'nowrap',overflow:'hidden','text-overflow':'ellipsis'}},an={__name:'home_chars',props:{value:{type:Object},name:{type:String}},setup(e){const n=e;const t=(0,i.computed)(()=>{if(n.name in l.QQ.chathistory==!1)return'';if(0==l.QQ.chathistory[n.name].msgs.length)return'';const e=l.QQ.chathistory[n.name].msgs.slice(-1)[0];if('time'in e){const n=e.time.match(/(\d+:\d+)/);return n?n[1]:e.time}return''}),a=(0,i.computed)(()=>{if(n.name in l.QQ.chathistory==!1)return'';if(0==l.QQ.chathistory[n.name].msgs.length)return'';const e=l.QQ.chathistory[n.name].msgs.slice(-1)[0];return'sender'in e?'Group'==n.value.chartype?`${e.sender}: ${e.content}`:e.content:''});return(e,o)=>'npc'!=n.value?.chartype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,onClick:o[0]||(o[0]=e=>{return n.value,t=n.name,l.QQ.activeChatId=t,void(t in l.QQ.chathistory&&(l.QQ.chathistory[t].unread=0));var t}),'data-name':n.value.name,class:'QQ_home_usermsg',style:(0,i.normalizeStyle)(''+((0,i.unref)(l).ST.isMobile?'font-size:12px;':''))},[(0,i.createElementVNode)('div',{class:'QQ_home_head',style:(0,i.normalizeStyle)(`background-image: url(${n.value.head||''})`)},['banSend'in n.value&&n.value.banSend?((0,i.openBlock)(),(0,i.createElementBlock)('svg',Je,[...o[1]||(o[1]=[(0,i.createElementVNode)('path',{d:'M512 0c282.752 0 512 229.248 512 512S794.752 1024 512 1024 0 794.752 0 512 229.248 0 512 0z',fill:'#32ABD1','p-id':'1717'},null,-1),(0,i.createElementVNode)('path',{d:'M512 192c176.768 0 320 143.232 320 320S688.768 832 512 832 192 688.768 192 512s143.232-320 320-320z',fill:'#FFFFFF','p-id':'1718'},null,-1),(0,i.createElementVNode)('path',{d:'M576 576v-117.376h64V576h-64z m-192 0v-117.376c0-70.656 57.344-128 128-128s128 57.344 128 128h-64c0-35.328-28.672-64-64-64s-64 28.672-64 64V576h-64z',fill:'#32ABD1','p-id':'1719'},null,-1),(0,i.createElementVNode)('path',{d:'M576 693.376H448a106.624 106.624 0 0 1 0-213.248h128a106.624 106.624 0 0 1 0 213.248zM512 544c-23.552 0-42.624 19.072-42.624 42.624s19.072 42.624 42.624 42.624 42.624-19.072 42.624-42.624S535.552 544 512 544z',fill:'#32ABD1','p-id':'1720'},null,-1)])])):(0,i.createCommentVNode)('v-if',!0)],4),(0,i.createElementVNode)('div',Ke,[(0,i.createElementVNode)('span',en,[(0,i.createElementVNode)('strong',null,(0,i.toDisplayString)(n.value.name),1)]),(0,i.createElementVNode)('span',nn,(0,i.toDisplayString)(t.value),1),(0,i.createElementVNode)('span',tn,(0,i.toDisplayString)(a.value),1),(0,i.withDirectives)((0,i.createElementVNode)('div',{class:'QQ_home_usermsg_new'},(0,i.toDisplayString)((0,i.unref)(l).QQ.chathistory[n.name]?.unread||''),513),[[i.vShow,(0,i.unref)(l).QQ.chathistory[n.name]?.unread]])])],12,Ge)):(0,i.createCommentVNode)('v-if',!0)}},on={class:'user_moment'},rn={class:'user_moment_title',style:{'margin-bottom':'7px'}},sn={style:{width:'100%',display:'grid','grid-template-rows':'1fr 1fr','row-gap':'4px'}},ln={style:{display:'flex','align-items':'center'}},cn={style:{color:'black !important'}},dn={class:'moment_sender'},pn={viewBox:'0 0 1024 1024',width:'18',height:'18',style:{'margin-left':'auto'}},mn={style:{color:'#626367','white-space':'nowrap',overflow:'hidden','text-overflow':'ellipsis','font-size':'12px'}},un=['innerHTML'],An={key:0,class:'space_fakeimg'},hn={style:{'background-color':'#f7f7f7',padding:'10px','border-radius':'8px','margin-top':'10px'}},gn={style:{display:'flex','align-items':'center',gap:'3px','margin-bottom':'5px'}},Cn={style:{color:'#474545','font-size':'14px'}},fn={class:'user_leave_message_list',style:{'padding-top':'5px','border-top':'1px solid #e0e0e0'}},vn={class:'user_leave_message',style:{'margin-bottom':'3px','font-size':'14px'}},bn={style:{color:'#3b5998','font-weight':'bold',cursor:'pointer'}},xn={style:{color:'#333'}},yn={style:{display:'flex','align-items':'center','justify-content':'flex-end',gap:'15px','margin-top':'10px',color:'#666','font-size':'13px'}},Bn={style:{display:'flex','align-items':'center',gap:'3px'}},wn={style:{display:'flex','align-items':'center',gap:'3px','margin-top':'10px'}},kn={style:{display:'flex','align-items':'center',width:'100%','background-color':'#f5f5f5','padding-right':'5px','margin-left':'5px'}},En={__name:'post',props:['post'],setup(e){const n=e;console.log(`创建新QQ动态内容:${JSON.stringify(n)}  ${n.post.id}`),c(n.post.sender);const t=(0,i.computed)(()=>{const e=n.post.sender;return e in l.QQ.chars&&l.QQ.chars[e].head?l.QQ.chars[e].head:''}),a=((0,i.computed)(()=>{const e=n.post.sender;return e in l.QQ.chars==0||'phone'in l.QQ.chars[e]==0?'隐藏机型':l.QQ.chars[e].phone}),(0,i.computed)(()=>n.post.content.replace(/\\n/g,'<br>'))),o=(0,i.ref)(''),r=(0,i.ref)(null);function s(){r.value&&r.value.focus()}function d(){if(!o.value)return;const e=`\n(在${n.post.sender}发的QQ动态${n.post.id}中评论:${o.value})\nQQ.Comment('${n.post.id}','${l.ST.userName}','${o.value}');`,t=$('#send_textarea').val().trim()+e;$('#send_textarea').val(t.trim()||'')[0].dispatchEvent(new Event('input',{bubbles:!0})),n.post.comment.push({sender:l.ST.userName,content:o.value}),o.value=''}return(e,l)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',on,[(0,i.createElementVNode)('div',rn,[(0,i.createElementVNode)('div',{class:'QQ_home_head head',style:(0,i.normalizeStyle)(`background-image:url('${t.value}')`)},null,4),(0,i.createElementVNode)('div',sn,[(0,i.createElementVNode)('div',ln,[(0,i.createElementVNode)('span',cn,[(0,i.createElementVNode)('strong',dn,(0,i.toDisplayString)(n.post.sender),1)]),((0,i.openBlock)(),(0,i.createElementBlock)('svg',pn,[...l[1]||(l[1]=[(0,i.createElementVNode)('path',{d:'M512.4 429.1c22.3 0 41.7 7.9 58.1 23.6 7.9 7.9 13.9 16.9 18.2 27.1 4.3 10.2 6.4 20.8 6.4 32 0 22.3-8.2 41.7-24.6 58.1-3.3 3.3-6.6 6.1-9.9 8.4s-6.9 4.4-10.8 6.4c-3.9 2-8 3.6-12.3 4.9-4.3 1.3-8.5 2.5-12.8 3.4-4.2 1-8.3 1.5-12.3 1.5-23 0-42.5-8.2-58.6-24.6s-24.1-35.9-24.1-58.6c0-22.6 7.9-42.2 23.6-58.6 5.3-4.6 11-8.9 17.2-12.8 6.2-3.9 13-6.7 20.2-8.4 7.2-1.6 14.4-2.4 21.7-2.4z m326.8 0c23 0 42.3 7.9 58.1 23.6 5.3 5.3 9.7 11 13.3 17.2 3.6 6.2 6.4 13 8.4 20.2 2 7.2 3 14.4 3 21.7 0 22.3-8.2 41.7-24.6 58.1-3.3 3.9-7.2 7.4-11.8 10.3-4.6 2.9-9.4 5.4-14.3 7.4s-10.2 3.6-15.8 4.9-11 2-16.3 2c-23 0-42.5-8.2-58.6-24.6-16.1-16.4-24.1-35.9-24.1-58.6 0-22.6 8.2-42.2 24.6-58.6 7.2-7.2 16.1-13 26.6-17.2 10.5-4.2 21-6.3 31.5-6.4z m-654.6 0c23 0 42.3 7.9 58.1 23.6 5.3 5.3 9.7 11 13.3 17.2 3.6 6.2 6.4 13 8.4 20.2s3 14.4 3 21.7c0 22.3-8 41.7-24.1 58.1s-35.6 24.6-58.6 24.6-42.3-8.2-58.1-24.6c-7.9-7.9-13.9-16.9-18.2-27.1-4.3-10.2-6.4-20.5-6.4-31 0-23 8.2-42.7 24.6-59.1 7.2-7.2 16.1-13 26.6-17.2 10.4-4.2 20.9-6.3 31.4-6.4z','p-id':'14923',fill:'#000000'},null,-1)])]))]),(0,i.createElementVNode)('span',mn,(0,i.toDisplayString)(n.post.time),1)])]),(0,i.createElementVNode)('span',{style:{color:'black !important','font-size':'15px','line-height':'1.3'},class:'moment_message',innerHTML:a.value},null,8,un),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(n.post.imgs,e=>((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,['img'==e.imgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',An,(0,i.toDisplayString)(e.content),1)):(0,i.createCommentVNode)('v-if',!0),'emoji'==e.imgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'space_emoji',style:(0,i.normalizeStyle)(`background-Image:url('${e.url}')`)},null,4)):(0,i.createCommentVNode)('v-if',!0)],64))),256)),(0,i.createElementVNode)('div',hn,[(0,i.createElementVNode)('div',gn,[l[2]||(l[2]=(0,i.createElementVNode)('svg',{class:'icon',viewBox:'0 0 1024 1024',width:'13',height:'13'},[(0,i.createElementVNode)('path',{d:'M773.6 912.7h-1.2c-37.2-0.4-74.5-0.4-111.8-0.4h-56.9c-38 0-76 0-114.1-0.5-21.1-0.6-41.9-5-61.5-13-33.3-13-52.3-42-52.2-79.7l0.1-141.4c0-78.3 0-156.7 0.7-235 0.1-21.3 13.8-41.3 25.5-51.8 45.3-41.4 94.5-93 115.1-162.6 5.7-19.4 7.9-40.8 10.2-63.4 4.6-45 33.8-74.3 72.8-74.3 15.3 0 30.6 4.6 45.6 13.5 30.1 18.1 50.2 46.5 61.3 87 17.8 64.3 8.7 126.7-1.3 180.2v0.2c-2.3 12.5 7.1 24.1 19.9 24.1h130c22.4 0 54.5 2.8 74.3 26.8 14.4 17.5 18.5 41.1 12.4 72.3-18.6 95.9-41.4 192.6-63.2 282.7-6.8 28.1-18.1 54.1-29 79.3l-4.7 10.8c-12.4 29.2-38 45.2-72 45.2zM216.1 903.3h-11.9c-43 0-78.2-35.2-78.2-78.2V476.6c0-43 35.2-78.2 78.2-78.2h11.9c43 0 78.2 35.2 78.2 78.2V825c0.1 43.1-35.1 78.3-78.2 78.3z',fill:'#000000','p-id':'34839'})],-1)),(0,i.createElementVNode)('span',Cn,(0,i.toDisplayString)(n.post.like)+'人已赞',1)]),(0,i.createElementVNode)('div',fn,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(n.post.comment,e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',vn,[(0,i.createElementVNode)('span',bn,(0,i.toDisplayString)(e.sender),1),(0,i.createElementVNode)('span',xn,'：'+(0,i.toDisplayString)(e.content),1)]))),256))])]),(0,i.createElementVNode)('div',yn,[(0,i.createElementVNode)('div',Bn,[l[3]||(l[3]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'16',height:'16'},[(0,i.createElementVNode)('path',{d:'M512 416a96 96 0 1 1-96 96 96 96 0 0 1 96-96m0-64a160 160 0 1 0 160 160 160 160 0 0 0-160-160z',fill:'#a1a1a1'}),(0,i.createElementVNode)('path',{d:'M512 298.88c188.64 0 288 113.92 366.72 213.12C800 611.36 700.64 725.12 512 725.12S224 611.36 145.28 512C224 412.64 323.36 298.88 512 298.88m0-64C264.64 234.88 147.52 406.56 64 512c83.52 105.44 200.64 277.12 448 277.12S876.48 617.44 960 512c-83.52-105.44-200.64-277.12-448-277.12z',fill:'#a1a1a1'})],-1)),(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(n.post.see),1)]),l[5]||(l[5]=(0,i.createElementVNode)('div',{style:{display:'flex','align-items':'center',gap:'3px',cursor:'pointer'}},[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'16',height:'16'},[(0,i.createElementVNode)('path',{d:'M190.193 471.412c14.446 0 26.14-11.72 26.14-26.139 0-14.445-11.693-26.165-26.14-26.165-0.271 0-0.49 0.15-0.737 0.15l-62.496 0.146c-1.425-0.195-2.9-0.296-4.374-0.296-19.677 0-35.621 16.142-35.621 36.115L86.622 888.55c0 19.95 15.968 35.598 35.67 35.598 1.917 0 3.809 0.293 5.65 0l61.023 0.023c0.1 0 0.148 0.048 0.248 0.048 0.097 0 0.146-0.048 0.244-0.048l0.737 0 0-0.148c13.413-0.54 24.175-11.422 24.175-24.96 0-13.56-10.76-24.442-24.175-24.982l0-0.394-50.95 0 1.45-402.276L190.193 471.41z',fill:'#666'}),(0,i.createElementVNode)('path',{d:'M926.522 433.948c-19.283-31.445-47.34-44.172-81.29-45.546-1.77-0.247-3.536-0.393-5.38-0.393l-205.447-0.689c13.463-39.06 22.699-85.59 22.699-129.317 0-28.35-3.194-55.963-9.042-82.543l-0.49 0.05c-10.638-46.58-51.736-81.315-100.967-81.315-57.264 0-95.466 48.15-95.466 106.126 0 3.242-0.295 6.387 0 9.532-2.996 108.387-91.24 195.549-196.236 207.513l0 54.882-0.786 222.227 0 229.745 10.71 0 500.025 0.222 8.746-0.244c19.357 0.05 30.24-4.818 47.804-16.116 16.683-10.76 29.237-25.5 37.49-42.156 2.26-3.34 4.03-7.075 5.107-11.201l77.018-344.324c1.056-4.053 1.349-8.181 1.056-12.16-2.287-32.535-7.149-55.037-19.408-75.033z',fill:'#666'})]),(0,i.createElementVNode)('span',null,'点赞')],-1)),(0,i.createElementVNode)('div',{style:{display:'flex','align-items':'center',gap:'3px',cursor:'pointer'},onClick:s},[...l[4]||(l[4]=[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'16',height:'16'},[(0,i.createElementVNode)('path',{d:'M871.04 89.77L120.064 380.16a51.2 51.2 0 0 0-1.792 94.763l303.36 130.56 131.072 303.957a51.2 51.2 0 0 0 94.805-1.877l289.792-751.573a51.2 51.2 0 0 0-66.261-66.133z m-41.13 107.392l-231.98 601.643-97.962-227.115-3.584-7.339a85.333 85.333 0 0 0-41.045-37.248l-226.56-97.536 601.173-232.405z',fill:'#666'})],-1),(0,i.createElementVNode)('span',null,'评论',-1)])])]),(0,i.createElementVNode)('div',wn,[l[7]||(l[7]=(0,i.createElementVNode)('div',{class:'user_avatar',style:{width:'30px','min-width':'30px',height:'30px','border-radius':'50%'}},null,-1)),(0,i.createElementVNode)('div',kn,[(0,i.withDirectives)((0,i.createElementVNode)('input',{ref_key:'commentInput',ref:r,'onUpdate:modelValue':l[0]||(l[0]=e=>o.value=e),type:'text',placeholder:'说点什么吧...',style:{height:'30px',width:'100%','margin-left':'5px !important','border-radius':'4px !important','background-color':'#f5f5f5 !important',padding:'6px',border:'none !important'}},null,512),[[i.vModelText,o.value]]),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{viewBox:'0 0 1024 1024',width:'20',height:'20',class:'moment_comment',onClick:d},[...l[6]||(l[6]=[(0,i.createElementVNode)('path',{d:'M871.04 89.770667L120.064 380.16a51.2 51.2 0 0 0-1.792 94.762667l303.36 130.56 131.072 303.957333a51.2 51.2 0 0 0 94.805333-1.877333l289.792-751.573334a51.2 51.2 0 0 0-66.261333-66.133333z m-41.130667 107.392l-231.978666 601.642666-97.962667-227.114666-3.584-7.338667a85.333333 85.333333 0 0 0-41.045333-37.248l-226.56-97.536 601.173333-232.405333z',fill:'#a1a1a1','p-id':'18561'},null,-1)])]))])]),l[8]||(l[8]=(0,i.createElementVNode)('div',{style:{width:'110%',height:'8px','background-color':'#e9e9e9','margin-left':'-7px','margin-top':'10px','margin-bottom':'10px'}},null,-1))]))}};a(8136);const Sn=En,Nn={id:'QQ_home_page'},Qn={style:{display:'flex','align-items':'center',gap:'5px',width:'100%','box-sizing':'border-box'}},Vn={style:{display:'flex','align-items':'start','justify-content':'center','flex-direction':'column','margin-left':'3px',gap:'3px'}},_n={id:'QQ_home_UserName',style:{'font-size':'14px',color:'black !important'}},zn={viewBox:'0 0 1024 1024',width:'13',height:'13',style:{'margin-right':'2px'}},Tn={viewBox:'0 0 1024 1024',width:'10',height:'10',style:{'margin-top':'1px'}},Mn={id:'QQ_home_chars'},Fn={id:'QQ_home_chars_div'},Dn={key:0,style:{'text-align':'center'}},In={key:1,style:{'text-align':'center','margin-top':'4px'}},jn={id:'QQ_space_page',style:{height:'100%'}},Un={style:{display:'flex'}},$n={viewBox:'0 0 1024 1024',width:'20',height:'20',style:{'margin-left':'auto'}},Hn={viewBox:'0 0 1065 1024',width:'20',height:'20',style:{'margin-right':'10px','margin-left':'15px'}},Yn={id:'space_contents',class:'space_contents',style:{'overflow-y':'auto',width:'100%',height:'100%'}},Wn={class:'QQ_bottom_nav'},Pn={id:'QQ_people_svg',viewBox:'0 0 1024 1024',style:{fill:'#000000'},width:'20',height:'20'},On={id:'QQ_chat_list',style:{width:'100%',height:'100%','padding-top':'0px'}},Ln={class:'chat-setting-popup'},qn={class:'chat-setting-header'},Rn={class:'chat-setting-content',style:{'padding-top':'5px','overflow-x':'hidden'}},Xn={style:{border:'1px solid',padding:'5px 10px 10px',width:'100%',display:'flex',gap:'15px','flex-direction':'column'}},Zn={class:'setting-item'},Gn={style:{flex:'1'}},Jn={class:'setting-item'},Kn={style:{flex:'1'}},et={style:{border:'1px solid',padding:'5px 10px 10px',width:'100%',display:'flex','flex-direction':'column',gap:'15px'}},nt={style:{display:'flex',width:'100%','align-items':'center',gap:'5px'}},tt={class:'setting-item'},at={style:{flex:'1'}},it={style:{border:'1px dashed #e0e0e0',padding:'8px','border-radius':'8px'}},ot={style:{flex:'1'}},rt=['onUpdate:modelValue','placeholder'],st=['onClick'],lt={class:'setting-item'},ct={style:{flex:'1'}},dt={class:'setting-item'},pt={style:{flex:'1'}},mt={style:{border:'1px solid',padding:'5px 10px 10px',width:'100%'}},ut={style:{display:'flex','align-items':'center',gap:'5px'}},At={style:{display:'flex','align-items':'center','margin-top':'5px',gap:'5px'}},ht={style:{border:'1px solid',padding:'5px 10px 10px',width:'100%'}},gt={style:{display:'flex','align-items':'start'}},Ct={style:{display:'flex','align-items':'start','margin-top':'5px'}},ft={class:'chat-setting-footer'},vt={class:'popup-overlay'},bt={class:'QQ_chars-panel'},xt={style:{display:'flex','align-items':'center','margin-bottom':'10px'}},yt={class:'QQ_chars-role-list',style:{'margin-bottom':'20px'}},Bt={key:0,class:'QQ_chars-empty-state'},wt={style:{margin:'auto'},width:'40',height:'40',viewBox:'0 0 24 24',fill:'none',xmlns:'http://www.w3.org/2000/svg'},kt={class:'QQ_chars-role-info'},Et=['title'],St=['onClick'],Nt={class:'QQ_chars-add-role-form'},Qt={class:'QQ_chars-form-row'},Vt={style:{flex:'1 1 0%'}},_t={class:'QQ_chars-form-row'},zt={style:{flex:'1 1 0%'}},Tt={__name:'QQ',setup(e){(0,i.onMounted)(()=>{l.phone.panel=!1});const n=(0,i.computed)(()=>{const e=[],n=l.QQ.charini.getAllSections();for(const t in l.QQ.chars){const a={};a.id=t,a.name=l.QQ.chars[t].name;const i=n.includes(t);if(i){const e=l.QQ.charini.readValue(t,'类型');'群聊'==e?(a.chartype='Group',a.showtype='群聊',a.class='QQ_chars-type-group'):'npc'==e.toLowerCase()?(a.chartype='npc',a.showtype='npc',a.class='QQ_chars-type-npc'):(a.chartype='friend',a.showtype='好友',a.class='QQ_chars-type-friend')}else{const e=l.QQ.chars[t];a.chartype=e.chartype||'friend','Group'==a.chartype?(a.showtype='群聊(临时)',a.class='QQ_chars-type-group-temp'):'npc'==a.chartype?(a.showtype='NPC(临时)',a.class='QQ_chars-type-npc-temp'):(a.showtype='好友(临时)',a.class='QQ_chars-type-friend-temp')}a.inConfig=i,e.push(a)}return e}),t=(0,i.ref)({name:'',type:'friend'});let a=JSON.parse(JSON.stringify(l.phone.colorSettings)),o=l.phone.wallpaper||'',r=JSON.parse(JSON.stringify(l.phone.icons));const c=(0,i.ref)({background:l.phone.colorSettings.background,border:l.phone.colorSettings.border,button:l.phone.colorSettings.button,autoShow:l.phone.autoShow,autoHide:l.phone.autoHide,userBubble:l.QQ.default.bubble,userText:l.QQ.default.text,sendModel:l.phone.sendModel,wallpaper:l.phone.wallpaper,icons:JSON.parse(JSON.stringify(l.phone.icons))});function d(){if(!t.value.name)return;let e=t.value.name;if('Group'==t.value.type){const n=l.QQ.charini.getAllSections();for(;;){e='';for(let n=0;n<6;n++)e+=Math.floor(10*Math.random());if(!n.includes(e))break}}'Group'==t.value.type||'npc'==t.value.type?(l.QQ.charini.writeValue(e,'类型','Group'==t.value.type?'群聊':'npc'),'Group'==t.value.type&&l.QQ.charini.writeValue(e,'群名',t.value.name)):l.QQ.charini.writeValue(e,'类型','好友'),l.QQ.chars[e]={name:t.value.name,chartype:t.value.type,head:'',background:'',bubble:'',text:''},t.value.name='',l.QQ.saveChars()}async function m(e){if(l.phone.panel=!1,!e)return l.phone.colorSettings=JSON.parse(JSON.stringify(a)),c.value.autoHide=l.phone.autoHide,c.value.autoShow=l.phone.autoShow,c.value.userBubble=l.QQ.default.bubble,c.value.userText=l.QQ.default.text,c.value.sendModel=l.phone.sendModel,l.phone.wallpaper=o,c.value.wallpaper=o,l.phone.icons=JSON.parse(JSON.stringify(r)),void(c.value.icons=JSON.parse(JSON.stringify(r)));l.phone.autoHide=c.value.autoHide,l.phone.autoShow=c.value.autoShow,l.QQ.default.bubble=c.value.userBubble,l.QQ.default.text=c.value.userText,l.phone.sendModel=c.value.sendModel,l.phone.wallpaper=(c.value.wallpaper||'').trim(),l.phone.icons=JSON.parse(JSON.stringify(c.value.icons||{}));try{const e=l.ST.getEntry(['手机-基本设置'],!0);if(!e)return void alert('手机-基本设置条目不存在');const n=new s;n.loadText(e.content),n.writeValue('基本设置','外框颜色',l.phone.colorSettings.border),n.writeValue('基本设置','内框颜色',l.phone.colorSettings.background),n.writeValue('基本设置','侧边按钮',l.phone.colorSettings.button),n.writeValue('基本设置','主屏壁纸',l.phone.wallpaper),n.writeValue('基本设置','图标-QQ',l.phone.icons.QQ||''),n.writeValue('基本设置','图标-RedNote',l.phone.icons.RedNote||''),n.writeValue('基本设置','图标-Douyin',l.phone.icons.Douyin||''),n.writeValue('基本设置','图标-Tinder',l.phone.icons.Tinder||''),n.writeValue('基本设置','图标-Instagram',l.phone.icons.Instagram||''),n.writeValue('基本设置','自动显示',l.phone.autoShow),n.writeValue('基本设置','自动隐藏',l.phone.autoHide),n.writeValue('基本设置','气泡颜色',l.QQ.default.bubble),n.writeValue('基本设置','字体颜色',l.QQ.default.text),n.writeValue('基本设置','发送模式',l.phone.sendModel),n.writeValue('基本设置','导航按键',l.phone.navButton),console.log(`${n.getAllText()}`),await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}])}catch(e){console.error(`基本设置保存到世界书失败!${e}`)}p.setData('width',l.phone.width.now),p.setData('height',l.phone.height.now),p.setData('navButton',l.phone.navButton)}function u(e,n){const t=l.phone.width.min,a=l.phone.width.max,i=l.phone.height.min,o=l.phone.height.max;'width'==e?l.phone.width.now+n<t?l.phone.width.now=t:l.phone.width.now+n>a?l.phone.width.now=a:l.phone.width.now+=n:'height'==e&&(l.phone.height.now+n<i?l.phone.height.now=i:l.phone.height.now+n>o?l.phone.height.now=o:l.phone.height.now+=n)}return(0,i.watch)(()=>l.phone.panel,e=>{e&&(a=JSON.parse(JSON.stringify(l.phone.colorSettings)),o=l.phone.wallpaper||'',r=JSON.parse(JSON.stringify(l.phone.icons)),c.value.background=l.phone.colorSettings.background,c.value.border=l.phone.colorSettings.border,c.value.button=l.phone.colorSettings.button,c.value.autoShow=l.phone.autoShow,c.value.autoHide=l.phone.autoHide,c.value.userBubble=l.QQ.default.bubble,c.value.userText=l.QQ.default.text,c.value.sendModel=l.phone.sendModel,c.value.wallpaper=l.phone.wallpaper,c.value.icons=JSON.parse(JSON.stringify(l.phone.icons)))}),(0,i.watch)(()=>c.value.wallpaper,e=>{l.phone.wallpaper=(e||'').trim()}),(e,a)=>(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('div',{id:'App_QQ',class:'QQ',style:(0,i.normalizeStyle)([{width:'100%',height:'100%','box-sizing':'border-box',position:'relative'},{'background-color':1==(0,i.unref)(l).QQ.activePage?'#eff3ff':'#FFFFFF'}])},[(0,i.withDirectives)((0,i.createElementVNode)('div',Nn,[a[34]||(a[34]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'30px'}},null,-1)),(0,i.createElementVNode)('div',Qn,[(0,i.createElementVNode)('div',{class:'user_avatar',style:{width:'35px',height:'35px','border-radius':'50%','margin-left':'10px',cursor:'pointer'},onClick:a[0]||(a[0]=e=>(0,i.unref)(l).phone.activeApp='home')}),(0,i.createElementVNode)('div',Vn,[(0,i.createElementVNode)('span',_n,[(0,i.createElementVNode)('strong',null,(0,i.toDisplayString)((0,i.unref)(l).ST.userName),1)]),(0,i.createElementVNode)('div',{style:{display:'flex','align-items':'center',height:'10px',cursor:'pointer'},onClick:a[1]||(a[1]=e=>(0,i.unref)(l).phone.panel=!0)},[((0,i.openBlock)(),(0,i.createElementBlock)('svg',zn,[...a[29]||(a[29]=[(0,i.createElementVNode)('path',{d:'M957.539 464.339c-26.14-245.993-246.771-424.08-492.787-397.772C218.735 92.873 40.474 313.62 66.635 559.634 92.774 805.631 313.406 983.717 559.443 957.41c245.997-26.306 424.258-247.075 398.096-493.071z m-298.25-135.757c39.341 0 71.233 31.921 71.233 71.301 0 39.379-31.891 71.3-71.233 71.3-39.338 0-71.229-31.921-71.229-71.3 0-39.38 31.892-71.301 71.229-71.301z m-294.447 0c39.34 0 71.23 31.921 71.23 71.301 0 39.379-31.89 71.3-71.23 71.3s-71.228-31.921-71.228-71.3c0-39.38 31.887-71.301 71.228-71.301z m366.815 304.963c-21.735 96.663-119.97 163.563-219.591 163.563-103.222 0-200.969-68.713-220.487-167.453 0-26.686 20.351-36.26 32.887-36.26h370.156c9.115 0.017 43.978 3.176 37.035 40.15z',fill:'#fbba13','p-id':'5845'},null,-1)])])),a[31]||(a[31]=(0,i.createElementVNode)('span',{style:{'font-size':'11px'}},'Q我吧',-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',Tn,[...a[30]||(a[30]=[(0,i.createElementVNode)('path',{d:'M342.528 916.48c19.456 0 38.4-7.168 53.248-21.504l338.944-327.68c14.848-14.336 23.552-34.304 23.552-55.296s-8.192-40.96-23.552-55.296l-338.944-327.68c-30.72-29.696-79.36-28.672-108.544 2.048-29.696 30.72-28.672 79.36 2.048 108.544l281.6 272.384-281.6 272.384c-30.72 29.696-31.232 78.336-2.048 108.544 15.36 15.872 35.328 23.552 55.296 23.552z',fill:'#000000','p-id':'7578'},null,-1)])]))])]),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{viewBox:'0 0 1024 1024',version:'1.1',width:'17',height:'17',style:{'margin-left':'auto','margin-right':'10px'},onClick:a[2]||(a[2]=e=>(0,i.unref)(l).QQ.panel=!(0,i.unref)(l).QQ.panel)},[...a[32]||(a[32]=[(0,i.createElementVNode)('path',{d:'M512 0a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666h426.666666a42.666667 42.666667 0 0 1 0 85.333334H554.666667v426.666666a42.666667 42.666667 0 0 1-85.333334 0V554.666667H42.666667a42.666667 42.666667 0 0 1 0-85.333334h426.666666V42.666667a42.666667 42.666667 0 0 1 42.666667-42.666667z',fill:'#191919','p-id':'4261'},null,-1)])]))]),a[35]||(a[35]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'10px'}},null,-1)),(0,i.createElementVNode)('div',Mn,[a[33]||(a[33]=(0,i.createStaticVNode)('<div style="width:100%;height:30px;background-color:#eff3ff;margin-top:5px;border-radius:5px;display:flex;align-items:center;justify-content:center;gap:2px;" data-v-6dc786c1><svg viewBox="0 0 1024 1024" width="16" height="16" data-v-6dc786c1><path d="M446.112323 177.545051c137.567677 0.219798 252.612525 104.59798 266.162424 241.493333 13.562828 136.895354-78.778182 261.818182-213.617777 289.008485-134.852525 27.203232-268.386263-52.156768-308.945455-183.608889s25.018182-272.252121 151.738182-325.779394A267.235556 267.235556 0 0 1 446.112323 177.545051m0-62.060607c-182.794343 0-330.989899 148.195556-330.989899 330.989899s148.195556 330.989899 330.989899 330.989899 330.989899-148.195556 330.989899-330.989899-148.195556-330.989899-330.989899-330.989899z m431.321212 793.341415a30.849293 30.849293 0 0 1-21.94101-9.102223l-157.220202-157.220202c-11.752727-12.179394-11.584646-31.534545 0.37495-43.50707 11.972525-11.972525 31.327677-12.140606 43.494141-0.37495l157.220202 157.220202a31.036768 31.036768 0 0 1 6.723232 33.810101 31.004444 31.004444 0 0 1-28.651313 19.174142z m0 0" fill="#919095" data-v-6dc786c1></path></svg><span style="color:#919095;" data-v-6dc786c1>搜索</span></div><div style="width:100%;height:13px;" data-v-6dc786c1></div>',2)),(0,i.createElementVNode)('div',Fn,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).QQ.chars,(e,n)=>((0,i.openBlock)(),(0,i.createBlock)(an,{key:n,value:e,name:n},null,8,['value','name']))),128))]),0==Object.keys((0,i.unref)(l).QQ.chars).length?((0,i.openBlock)(),(0,i.createElementBlock)('div',Dn,'点击右上角+添加角色')):(0,i.createCommentVNode)('v-if',!0),0==Object.keys((0,i.unref)(l).QQ.chars).length?((0,i.openBlock)(),(0,i.createElementBlock)('div',In,' 点击左上角头像修改手机颜色 ')):(0,i.createCommentVNode)('v-if',!0)])],512),[[i.vShow,!(0,i.unref)(l).QQ.activeChatId&&1==(0,i.unref)(l).QQ.activePage]]),(0,i.withDirectives)((0,i.createElementVNode)('div',jn,[a[40]||(a[40]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'35px'}},null,-1)),(0,i.createElementVNode)('div',Un,[a[38]||(a[38]=(0,i.createElementVNode)('span',{style:{'font-size':'16px','margin-left':'10px',color:'black !important'}},'动态',-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',$n,[...a[36]||(a[36]=[(0,i.createElementVNode)('path',{d:'M593.420488 922.099512c24.553022 0 44.456585 19.903563 44.456585 44.456586v11.988292c0 24.553022-19.903563 44.456585-44.456585 44.456586h-159.843903c-24.553022 0-44.456585-19.903563-44.456585-44.456586v-11.988292c0-24.553022 19.903563-44.456585 44.456585-44.456586h159.843903zM515.996098 0c24.276293 0 43.957073 19.68078 43.957073 43.957073l0.002997 54.191079C735.392843 121.808047 870.649756 272.137241 870.649756 454.056585V740.277073h102.4c24.553022 0 44.456585 19.903563 44.456585 44.456586v11.988292c0 24.553022-19.903563 44.456585-44.456585 44.456586H870.649756v1.998048H152.35122v-1.998048H52.948293C28.39527 841.178537 8.491707 821.274974 8.491707 796.721951v-11.988292C8.491707 760.180636 28.39527 740.277073 52.948293 740.277073H152.35122V454.056585c0-181.229019 134.231914-331.106654 308.696538-355.632702L461.049756 43.957073c0-24.276293 19.68078-43.957073 43.957073-43.957073h10.989269z m25.620979 197.047571h-60.233178c-126.178779 0-228.706654 101.264109-230.744664 226.958361l-0.029971 3.816273-0.000999 312.454868h521.783446V427.822205c0-127.454533-103.3211-230.774634-230.774634-230.774634z',fill:'#000000','p-id':'3355'},null,-1)])])),((0,i.openBlock)(),(0,i.createElementBlock)('svg',Hn,[...a[37]||(a[37]=[(0,i.createElementVNode)('path',{d:'M1002.234305 330.02867V693.97133c0 53.148789-28.346021 101.741967-73.902125 128.063272l-315.349481 182.224419c-46.062284 26.321305-102.248146 26.321305-148.31043 0l-315.349481-182.224419c-46.062284-26.321305-73.902126-75.420662-73.902126-128.063272V330.02867c0-53.148789 28.346021-101.741967 73.902126-128.063272l315.349481-182.224419c46.062284-26.321305 102.248146-26.321305 148.31043 0l315.349481 182.224419c45.556105 26.321305 73.902126 74.914483 73.902125 128.063272z m-76.939199 0c0-25.308947-13.666831-49.099357-35.432526-61.753831l-315.349481-182.224419c-22.271873-12.654474-49.099357-12.654474-71.37123 0l-315.349481 182.224419c-22.271873 12.654474-35.432526 36.444884-35.432526 61.753831V693.97133c0 25.308947 13.666831 49.099357 35.432526 61.753831l315.349481 182.224419c22.271873 12.654474 49.099357 12.654474 71.37123 0l315.349481-182.224419c22.271873-12.654474 35.432526-36.444884 35.432526-61.753831V330.02867zM362.424123 508.709837C362.424123 410.004943 442.400395 329.522491 541.611468 329.522491s179.187346 80.482452 179.187346 179.187346-80.482452 179.187346-179.187346 179.187345-179.187346-79.470094-179.187345-179.187345z m76.939199 0c0 56.692042 46.062284 102.248146 102.248146 102.248146s102.248146-46.062284 102.248146-102.248146-46.062284-102.248146-102.248146-102.248146-102.248146 46.568463-102.248146 102.248146z',fill:'#000000','p-id':'13806'},null,-1)])]))]),a[41]||(a[41]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'#e6e6e6','margin-bottom':'10px','margin-top':'10px'}},null,-1)),(0,i.createElementVNode)('div',Yn,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).QQ.post,e=>((0,i.openBlock)(),(0,i.createBlock)(Sn,{key:e.id||Math.random(),post:e},null,8,['post']))),128)),a[39]||(a[39]=(0,i.createElementVNode)('div',{style:{'margin-bottom':'150px'}},null,-1))])],512),[[i.vShow,!(0,i.unref)(l).QQ.activeChatId&&3==(0,i.unref)(l).QQ.activePage]]),(0,i.createElementVNode)('div',Wn,[(0,i.createElementVNode)('div',{id:'QQ_message_nav',style:{display:'flex','align-items':'center','justify-content':'center','flex-direction':'column',gap:'1px'},onClick:a[3]||(a[3]=e=>(0,i.unref)(l).QQ.activePage=1)},[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{id:'QQ_message_svg',class:'icon',viewBox:'0 0 1024 1024',width:'20',height:'20',style:(0,i.normalizeStyle)([{transform:'scale(1.15)','transform-origin':'center'},{fill:1==(0,i.unref)(l).QQ.activePage?'#019aff':'#000000'}])},[...a[42]||(a[42]=[(0,i.createElementVNode)('path',{d:'M822.016 61.44H196.864A155.88352 155.88352 0 0 0 40.96 216.94976v426.2144a155.88352 155.88352 0 0 0 155.904 155.50976h9.6256a1.97632 1.97632 0 0 1 1.96608 1.9456l0.97792 84.992A72.832 72.832 0 0 0 322.72896 945.152l211.37408-141.09184a31.9744 31.9744 0 0 1 17.80736-5.39648h270.1056A155.88352 155.88352 0 0 0 977.92 643.16416V216.94976A155.88352 155.88352 0 0 0 822.016 61.44z m85.06368 581.72416a85.05344 85.05344 0 0 1-85.06368 84.84864H551.936a102.69184 102.69184 0 0 0-57.21088 17.33632l-211.39456 141.09184a1.9712 1.9712 0 0 1-3.072-1.6128l-0.97792-85.02272A72.97024 72.97024 0 0 0 206.4896 728.0128h-9.6256a85.05344 85.05344 0 0 1-85.06368-84.84864V216.94976A85.05344 85.05344 0 0 1 196.864 132.096h625.152a85.05344 85.05344 0 0 1 85.06368 84.84864v426.2144z'},null,-1),(0,i.createElementVNode)('path',{d:'M311.08608 381.76768a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z m207.80032 0a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z m212.52096 0a54.17472 54.17472 0 1 0 54.31296 54.17472 54.24128 54.24128 0 0 0-54.31296-54.17472z'},null,-1)])],4)),a[43]||(a[43]=(0,i.createElementVNode)('span',null,'消息',-1))]),(0,i.createElementVNode)('div',{id:'QQ_people_nav',style:{display:'flex','align-items':'center','justify-content':'center','flex-direction':'column',gap:'1px'},onClick:a[4]||(a[4]=e=>(0,i.unref)(l).phone.activeApp='RedNote')},[((0,i.openBlock)(),(0,i.createElementBlock)('svg',Pn,[...a[44]||(a[44]=[(0,i.createElementVNode)('path',{d:'M620.744191 538.879184c82.736353-40.523949 140.308583-124.785028 140.308583-222.936465 0-137.367601-111.714338-249.080915-249.02668-249.080915-137.367601 0-249.080915 111.713314-249.080915 249.080915 0 98.151437 57.57223 182.412516 140.363841 222.936465C235.330238 586.429153 111.796714 740.736565 111.796714 923.694503c0 18.464537 15.032368 33.443693 33.496905 33.443693 18.464537 0 33.497928-14.979156 33.497928-33.443693 0-183.774537 149.46001-333.343017 333.234547-333.343017 183.77556 0 333.234547 149.568481 333.234547 333.343017 0 18.464537 14.978133 33.443693 33.443693 33.443693 18.519796 0 33.496905-14.979156 33.496905-33.443693C912.20124 740.736565 788.668739 586.429153 620.744191 538.879184zM329.886801 315.942719c0-100.438527 81.70179-182.194552 182.140317-182.194552 100.384291 0 182.086082 81.756025 182.086082 182.194552 0 100.384291-81.702813 182.086082-182.086082 182.086082C411.587568 498.0288 329.886801 416.32701 329.886801 315.942719z'},null,-1)])])),a[45]||(a[45]=(0,i.createElementVNode)('span',null,'联系人',-1))]),(0,i.createElementVNode)('div',{id:'QQ_moment_nav',style:{display:'flex','align-items':'center','justify-content':'center','flex-direction':'column',gap:'1px',position:'relative'},onClick:a[5]||(a[5]=e=>{(0,i.unref)(l).QQ.activePage=3,(0,i.unref)(l).QQ.post.forEach(e=>e.read=!0)})},[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{id:'QQ_moment_svg',viewBox:'0 0 1059 1024',width:'20',height:'20',style:(0,i.normalizeStyle)({fill:3==(0,i.unref)(l).QQ.activePage?'#019aff':'#000000'})},[...a[46]||(a[46]=[(0,i.createElementVNode)('path',{d:'M206.566465 1008.20002c11.278404 7.517627 30.080982 15.035253 45.117545 15.035254 11.281023 0 26.324133-3.75554 37.605156-7.517627l240.646548-127.777391 240.646547 127.777391c11.278404 7.517627 22.558118 7.517627 37.602537 7.517627 15.037872 0 30.075744-3.75554 45.118854-15.035254 22.559427-15.030015 37.598609-45.097903 30.082292-71.402393l-45.124092-278.110282L1037.545084 459.503632c18.799959-18.790793 26.321514-48.85868 18.799959-75.163172-7.516317-26.311038-33.839141-45.103141-60.156726-48.85868L714.181074 290.382568 593.854527 42.338864C582.577432 16.027826 556.254609 0.99912 526.177555 0.99912c-30.080982 0-56.403806 15.028706-67.684829 41.339744l-120.32 248.043704L63.679182 331.723621c-26.316276 3.756849-52.640409 22.548951-60.161965 48.853443-7.516317 26.309729-3.758159 56.376307 18.801269 75.169719l199.285852 199.183713-45.120164 278.106353c-3.758159 30.065269 7.521555 60.133156 30.082291 75.163171zM63.679182 406.886793l274.492235-41.339744 48.878322-7.518936 22.559427-45.097903 116.568389-248.042394 120.318691 248.043703 22.562046 45.097903 48.88225 7.516317 274.485688 41.339744L789.383529 606.074435l-33.845688 33.822117 7.522865 45.103141 45.124092 278.103734-240.651785-127.777391-41.356767-26.311039-45.124093 22.555499-240.646547 131.532931 45.120164-278.103734 7.521555-45.103141-30.082292-33.823427L63.679182 406.888102z','p-id':'37579'},null,-1),(0,i.createElementVNode)('path',{d:'M526.176246 692.509463c-131.604951 0-176.725115-127.777391-176.725116-131.53424-3.763396-15.035253 3.758159-30.065269 18.796031-33.828665 15.044419-3.75554 30.080982 3.763396 33.845688 18.793411 0 3.762087 33.839141 93.953964 124.084706 93.953965 90.239018 0 124.078159-93.953964 124.078159-93.953965 3.763396-15.030015 18.801269-22.548951 33.845688-18.793411 15.036563 3.763396 22.558118 22.555499 18.79603 33.828665 0 3.756849-45.120164 131.53555-176.721186 131.535549z','p-id':'37580'},null,-1)])],4)),a[47]||(a[47]=(0,i.createElementVNode)('span',null,'动态',-1)),(0,i.withDirectives)((0,i.createElementVNode)('div',{class:'new_tips',style:{position:'absolute',right:'-8px',top:'-8px','background-color':'red',color:'white',width:'15px',height:'15px','border-radius':'50%','justify-content':'center','align-items':'center','font-size':'12px',display:'flex'}},(0,i.toDisplayString)((0,i.unref)(l).QQ.postUnread),513),[[i.vShow,(0,i.unref)(l).QQ.postUnread>0]])])]),a[82]||(a[82]=(0,i.createElementVNode)('div',{id:'QQ_friend_info',style:{display:'none','background-color':'white',height:'100%',width:'100%','padding-top':'50px','padding-left':'10px'}},[(0,i.createElementVNode)('span',null,'自定义名称:'),(0,i.createElementVNode)('input',{id:'setcharname',type:'text',name:'',placeholder:'这里输入名称'}),(0,i.createElementVNode)('br'),(0,i.createElementVNode)('br'),(0,i.createElementVNode)('span',null,'自定义头像:'),(0,i.createElementVNode)('input',{id:'QQ_head_input',type:'file'}),(0,i.createElementVNode)('br'),(0,i.createElementVNode)('br'),(0,i.createElementVNode)('br'),(0,i.createElementVNode)('button',{onclick:'Setfriendinfo(false)'},'取消'),(0,i.createElementVNode)('button',{onclick:'Setfriendinfo(true)'},'确定')],-1)),(0,i.createElementVNode)('div',On,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).QQ.chars,(e,n)=>(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createBlock)(Ze,{key:n,'data-name':n,value:e,name:n},null,8,['data-name','value','name'])),[[i.vShow,(0,i.unref)(l).QQ.activeChatId===n]])),128))]),(0,i.createVNode)(i.Transition,{name:'popup',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',Ln,[(0,i.createElementVNode)('div',qn,[a[49]||(a[49]=(0,i.createElementVNode)('span',null,'手机设置',-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{class:'close-setting-btn',viewBox:'0 0 1024 1024',width:'20',height:'20',onClick:a[6]||(a[6]=e=>m(!1))},[...a[48]||(a[48]=[(0,i.createElementVNode)('path',{d:'M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z',fill:'#666666'},null,-1)])]))]),(0,i.createElementVNode)('div',Rn,[(0,i.createElementVNode)('fieldset',Xn,[a[52]||(a[52]=(0,i.createElementVNode)('legend',null,'颜色设置:',-1)),(0,i.createElementVNode)('div',Zn,[a[50]||(a[50]=(0,i.createElementVNode)('span',null,'user气泡',-1)),(0,i.createElementVNode)('div',Gn,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'text-color-input','onUpdate:modelValue':a[7]||(a[7]=e=>c.value.userBubble=e),style:{width:'100%'},type:'text',placeholder:'颜色值'},null,512),[[i.vModelText,c.value.userBubble]])]),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[8]||(a[8]=e=>c.value.userBubble=e),type:'color',class:'color-picker'},null,512),[[i.vModelText,c.value.userBubble]])]),(0,i.createElementVNode)('div',Jn,[a[51]||(a[51]=(0,i.createElementVNode)('span',null,'user字体',-1)),(0,i.createElementVNode)('div',Kn,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'text-color-input','onUpdate:modelValue':a[9]||(a[9]=e=>c.value.userText=e),style:{width:'100%'},type:'text',placeholder:'颜色值'},null,512),[[i.vModelText,c.value.userText]])]),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[10]||(a[10]=e=>c.value.userText=e),type:'color',class:'color-picker'},null,512),[[i.vModelText,c.value.userText]])]),a[53]||(a[53]=(0,i.createElementVNode)('div',{style:{'font-size':'14px','text-align':'center'}},'右边的框点一下可以选颜色',-1))]),(0,i.createElementVNode)('fieldset',et,[a[64]||(a[64]=(0,i.createElementVNode)('legend',null,'手机设置:',-1)),(0,i.createElementVNode)('div',nt,[a[55]||(a[55]=(0,i.createElementVNode)('span',null,'导航按键',-1)),(0,i.withDirectives)((0,i.createElementVNode)('select',{'onUpdate:modelValue':a[11]||(a[11]=e=>(0,i.unref)(l).phone.navButton=e),class:'QQ_chars-form-select',style:{flex:'1'}},[...a[54]||(a[54]=[(0,i.createElementVNode)('option',{value:!1},'不显示',-1),(0,i.createElementVNode)('option',{value:!0},'显示',-1)])],512),[[i.vModelSelect,(0,i.unref)(l).phone.navButton]])]),(0,i.createElementVNode)('div',tt,[a[56]||(a[56]=(0,i.createElementVNode)('span',null,'主屏壁纸',-1)),(0,i.createElementVNode)('div',at,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[12]||(a[12]=e=>c.value.wallpaper=e),style:{width:'100%'},type:'text',placeholder:'输入图片链接，留空恢复默认'},null,512),[[i.vModelText,c.value.wallpaper]])]),(0,i.createElementVNode)('button',{type:'button',class:'color-picker',style:{'min-width':'64px'},onClick:a[13]||(a[13]=e=>c.value.wallpaper='')},' 清除 ')]),(0,i.createElementVNode)('fieldset',it,[a[57]||(a[57]=(0,i.createElementVNode)('legend',{style:{padding:'0 6px'}},'主屏图标',-1)),((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(['QQ','RedNote','Douyin','Tinder','Instagram'],e=>(0,i.createElementVNode)('div',{class:'setting-item',key:e},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(e),1),(0,i.createElementVNode)('div',ot,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n=>c.value.icons[e]=n,style:{width:'100%'},type:'text',placeholder:`输入${e}图标链接，留空用默认`},null,8,rt),[[i.vModelText,c.value.icons[e]]])]),(0,i.createElementVNode)('button',{type:'button',class:'color-picker',style:{'min-width':'64px'},onClick:n=>c.value.icons[e]=''},' 重置 ',8,st)])),64))]),(0,i.createElementVNode)('div',lt,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{style:{width:'1.5rem',height:'1.5rem'},viewBox:'0 0 1024 1024',onClick:a[14]||(a[14]=e=>u('width',-10))},[...a[58]||(a[58]=[(0,i.createElementVNode)('path',{d:'M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z','p-id':'3334'},null,-1),(0,i.createElementVNode)('path',{d:'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z','p-id':'3335'},null,-1)])])),a[60]||(a[60]=(0,i.createElementVNode)('span',null,'手机宽度',-1)),(0,i.createElementVNode)('div',ct,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[15]||(a[15]=e=>(0,i.unref)(l).phone.width.now=e),style:{width:'100%'},type:'number'},null,512),[[i.vModelText,(0,i.unref)(l).phone.width.now]])]),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{style:{width:'1.5rem',height:'1.5rem',transform:'rotate(180deg)'},viewBox:'0 0 1024 1024',onClick:a[16]||(a[16]=e=>u('width',10))},[...a[59]||(a[59]=[(0,i.createElementVNode)('path',{d:'M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z','p-id':'3334'},null,-1),(0,i.createElementVNode)('path',{d:'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z','p-id':'3335'},null,-1)])]))]),(0,i.createElementVNode)('div',dt,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{style:{width:'1.5rem',height:'1.5rem'},viewBox:'0 0 1024 1024',onClick:a[17]||(a[17]=e=>u('height',-10))},[...a[61]||(a[61]=[(0,i.createElementVNode)('path',{d:'M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z','p-id':'3334'},null,-1),(0,i.createElementVNode)('path',{d:'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z','p-id':'3335'},null,-1)])])),a[63]||(a[63]=(0,i.createElementVNode)('span',null,'手机高度',-1)),(0,i.createElementVNode)('div',pt,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[18]||(a[18]=e=>(0,i.unref)(l).phone.height.now=e),style:{width:'100%'},type:'number'},null,512),[[i.vModelText,(0,i.unref)(l).phone.height.now]])]),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{style:{width:'1.5rem',height:'1.5rem',transform:'rotate(180deg)'},viewBox:'0 0 1024 1024',onClick:a[19]||(a[19]=e=>u('height',10))},[...a[62]||(a[62]=[(0,i.createElementVNode)('path',{d:'M603.3 327.5l-246 178c-4.4 3.2-4.4 9.7 0 12.9l246 178c5.3 3.8 12.7 0 12.7-6.5V643c0-10.2-4.9-19.9-13.2-25.9L457.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5z','p-id':'3334'},null,-1),(0,i.createElementVNode)('path',{d:'M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z','p-id':'3335'},null,-1)])]))])]),(0,i.createElementVNode)('fieldset',mt,[a[67]||(a[67]=(0,i.createElementVNode)('legend',null,'有新消息时:',-1)),(0,i.createElementVNode)('div',ut,[a[65]||(a[65]=(0,i.createElementVNode)('span',null,'有格式自动弹出',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[20]||(a[20]=e=>c.value.autoShow=e),checked:'',type:'checkbox',style:{width:'1rem',height:'1rem'}},null,512),[[i.vModelCheckbox,c.value.autoShow]])]),(0,i.createElementVNode)('div',At,[a[66]||(a[66]=(0,i.createElementVNode)('span',null,'无格式自动隐藏',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[21]||(a[21]=e=>c.value.autoHide=e),checked:'',type:'checkbox',style:{width:'1rem',height:'1rem'}},null,512),[[i.vModelCheckbox,c.value.autoHide]])]),a[68]||(a[68]=(0,i.createElementVNode)('div',{style:{'font-size':'12px',color:'gray','margin-top':'10px'}},'由于改了格式所以此项无效',-1))]),(0,i.createElementVNode)('fieldset',ht,[a[71]||(a[71]=(0,i.createElementVNode)('legend',null,'点击发送按钮时:',-1)),(0,i.createElementVNode)('div',gt,[a[69]||(a[69]=(0,i.createElementVNode)('span',null,'直接发送消息',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[22]||(a[22]=e=>c.value.sendModel=e),type:'radio',value:'normal'},null,512),[[i.vModelRadio,c.value.sendModel]])]),(0,i.createElementVNode)('div',Ct,[a[70]||(a[70]=(0,i.createElementVNode)('span',null,'把消息添加到酒馆输入框',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':a[23]||(a[23]=e=>c.value.sendModel=e),type:'radio',value:'尾附'},null,512),[[i.vModelRadio,c.value.sendModel]])])])]),(0,i.createElementVNode)('div',ft,[(0,i.createElementVNode)('button',{id:'save-setting-btn',onClick:a[24]||(a[24]=e=>m(!0))},'保存'),(0,i.createElementVNode)('button',{id:'cancel-setting-btn',onClick:a[25]||(a[25]=e=>m(!1))},'取消')])],512),[[i.vShow,(0,i.unref)(l).phone.panel]])]),_:1}),(0,i.createVNode)(i.Transition,{name:'fade',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',vt,null,512),[[i.vShow,(0,i.unref)(l).QQ.panel||(0,i.unref)(l).phone.panel]])]),_:1}),(0,i.createVNode)(i.Transition,{name:'popup',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',bt,[(0,i.createElementVNode)('div',xt,[a[73]||(a[73]=(0,i.createElementVNode)('div',{style:{'text-align':'center','font-size':'24px'}},'角色管理面板',-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{style:{'margin-left':'auto'},class:'close-setting-btn',viewBox:'0 0 1024 1024',width:'24',height:'24',onClick:a[26]||(a[26]=e=>(0,i.unref)(l).QQ.panel=!1)},[...a[72]||(a[72]=[(0,i.createElementVNode)('path',{d:'M512 421.490332 331.092592 240.582924C307.952518 217.442849 270.568889 217.442849 247.428814 240.582924 224.288739 263.722999 224.288739 301.106628 247.428814 324.246702L428.336222 505.154112 247.428814 686.061521C224.288739 709.201596 224.288739 746.585225 247.428814 769.7253 270.568889 792.865374 307.952518 792.865374 331.092592 769.7253L512 588.817891 692.907408 769.7253C716.047482 792.865374 753.431111 792.865374 776.571186 769.7253 799.711261 746.585225 799.711261 709.201596 776.571186 686.061521L595.663778 505.154112 776.571186 324.246702C799.711261 301.106628 799.711261 263.722999 776.571186 240.582924 753.431111 217.442849 716.047482 217.442849 692.907408 240.582924L512 421.490332Z',fill:'#666666'},null,-1)])]))]),(0,i.createElementVNode)('div',yt,[0==n.value.length?((0,i.openBlock)(),(0,i.createElementBlock)('div',Bt,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',wt,[...a[74]||(a[74]=[(0,i.createElementVNode)('path',{d:'M12 4.35418C12.7329 3.52375 13.8053 3 15 3C17.2091 3 19 4.79086 19 7C19 9.20914 17.2091 11 15 11C13.8053 11 12.7329 10.4762 12 9.64582M15 21H3V20C3 16.6863 5.68629 14 9 14C12.3137 14 15 16.6863 15 20V21ZM15 21H21V20C21 16.6863 18.3137 14 15 14C13.9071 14 12.8826 14.2922 12 14.8027',stroke:'#888','stroke-width':'2','stroke-linecap':'round','stroke-linejoin':'round'},null,-1)])])),a[75]||(a[75]=(0,i.createElementVNode)('p',{class:'QQ_chars-empty-text'},'暂无角色，请添加新角色',-1))])):(0,i.createCommentVNode)('v-if',!0),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(n.value,e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'QQ_chars-role-item'},[(0,i.createElementVNode)('div',kt,[(0,i.createElementVNode)('div',{class:'QQ_chars-role-name',title:e.name},(0,i.toDisplayString)(e.name),9,Et),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(`QQ_chars-role-type ${e.class}`)},(0,i.toDisplayString)(e.showtype),3)]),(0,i.createElementVNode)('button',{class:'QQ_chars-delete-btn',onClick:n=>{return t=e,void(confirm(`确定要删除角色：${t.name}吗？`)&&(console.log(`删除角色:${t.id}`),t.inConfig&&l.QQ.charini.removeSection(t.id),t.id in l.QQ.chars&&delete l.QQ.chars[t.id],t.id in l.QQ.chathistory&&delete l.QQ.chathistory[t.id],l.QQ.saveChars()));var t}},'删除',8,St)]))),128))]),(0,i.createElementVNode)('div',Nt,[a[79]||(a[79]=(0,i.createElementVNode)('h3',{class:'QQ_chars-form-title'},'添加新角色',-1)),(0,i.createElementVNode)('div',Qt,[a[76]||(a[76]=(0,i.createElementVNode)('label',{class:'QQ_chars-form-label',for:'roleName'},'角色名称:',-1)),(0,i.createElementVNode)('div',Vt,[(0,i.withDirectives)((0,i.createElementVNode)('input',{id:'roleName','onUpdate:modelValue':a[27]||(a[27]=e=>t.value.name=e),class:'QQ_chars-form-input',type:'text',placeholder:'输入角色名称'},null,512),[[i.vModelText,t.value.name]])])]),(0,i.createElementVNode)('div',_t,[a[78]||(a[78]=(0,i.createElementVNode)('label',{class:'QQ_chars-form-label',for:'roleType'},'角色类型:',-1)),(0,i.createElementVNode)('div',zt,[(0,i.withDirectives)((0,i.createElementVNode)('select',{'onUpdate:modelValue':a[28]||(a[28]=e=>t.value.type=e),class:'QQ_chars-form-select'},[...a[77]||(a[77]=[(0,i.createElementVNode)('option',{value:'friend'},'好友',-1),(0,i.createElementVNode)('option',{value:'Group'},'群聊',-1),(0,i.createElementVNode)('option',{value:'npc'},'NPC',-1)])],512),[[i.vModelSelect,t.value.type]])])]),(0,i.createElementVNode)('button',{id:'addRoleBtn',class:'QQ_chars-submit-btn',onClick:d},'添加角色')]),a[80]||(a[80]=(0,i.createElementVNode)('div',{style:{'font-size':'12px',color:'gray','margin-top':'10px'}},'修改角色后退出聊天重进,让手机重新加载',-1)),a[81]||(a[81]=(0,i.createElementVNode)('div',{style:{'font-size':'12px',color:'gray','margin-top':'3px'}},'角色其他信息点进聊天框右上角修改',-1))],512),[[i.vShow,(0,i.unref)(l).QQ.panel]])]),_:1})],4)),[[i.vShow,'QQ'==(0,i.unref)(l).phone.activeApp]])}};a(9875);var Mt=a(6270),Ft=a.n(Mt),Dt=a(8007),It=a.n(Dt),jt=a(2669),Ut=a.n(jt),$t=a(3566),Ht=a.n($t),Yt=a(6106),Wt=a.n(Yt),Pt=a(2527),Ot=a.n(Pt),Lt=a(2235),qt={};qt.styleTagTransform=Ot(),qt.setAttributes=Ht(),qt.insert=Ut().bind(null,'head'),qt.domAPI=It(),qt.insertStyleElement=Wt();Ft()(Lt.A,qt);Lt.A&&Lt.A.locals&&Lt.A.locals;a(9976);const Rt=(0,Xe.A)(Tt,[['__scopeId','data-v-6dc786c1']]),Xt={class:'rednote-homepage-post'},Zt={class:'rednote-homepage-post-info'},Gt={class:'rednote-homepage-post-title'},Jt={class:'rednote-homepage-post-author'},Kt={style:{color:'rgb(100, 100, 100)','font-size':'14px',flex:'1','text-overflow':'ellipsis',overflow:'hidden','white-space':'nowrap'}},ea={style:{color:'#646464','font-size':'12px'}},na={__name:'card',props:['cardContent'],setup(e){const n=e;return(e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',Xt,[(0,i.createElementVNode)('div',{class:'rednote-homepage-post-img',style:(0,i.normalizeStyle)(`background-color:${n.cardContent.imgColor};color:${n.cardContent.textColor};`)},(0,i.toDisplayString)(n.cardContent.img),5),(0,i.createElementVNode)('div',Zt,[(0,i.createElementVNode)('div',Gt,(0,i.toDisplayString)(n.cardContent.title),1),(0,i.createElementVNode)('div',Jt,[(0,i.createElementVNode)('div',{style:(0,i.normalizeStyle)(`background-image: url('${n.cardContent.head}');\n                  width: 25px;\n                  height: 25px;\n                  border-radius: 50%;\n                  background-size: cover;\n                  background-position: top center;\n                  background-repeat: no-repeat;\n                  background-color: black;\n                  aspect-ratio: 1;\n                  min-width: 25px;`)},null,4),(0,i.createElementVNode)('div',Kt,(0,i.toDisplayString)(n.cardContent.sender),1),t[0]||(t[0]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'20',height:'20'},[(0,i.createElementVNode)('path',{d:'M171.712 571.648l0.352 0.32 287.904 252.8a64 64 0 0 0 82.912 1.344l296.832-244.544a215.584 215.584 0 1 0-301.824-300.576L512 316.672l-25.888-35.616a215.584 215.584 0 1 0-314.4 290.624zM32 407.584a279.584 279.584 0 0 1 480-194.944 279.584 279.584 0 0 1 480 194.944 278.144 278.144 0 0 1-113.024 224.512l-295.36 243.392a128 128 0 0 1-165.888-2.592L129.984 620.16A278.976 278.976 0 0 1 32 407.584z',fill:'#646464','p-id':'4875'})],-1)),(0,i.createElementVNode)('div',ea,(0,i.toDisplayString)(n.cardContent.like),1)])])]))}},ta={class:'rednote-postpage'},aa={class:'rednote-postpage-top'},ia={style:{'font-size':'16px',color:'#1d1d1d !important'}},oa={class:'rednote-postpage-content'},ra={style:{padding:'20px 8px 15px',width:'100%'}},sa={class:'rednote-postpage-posttitle',style:{'font-size':'18px',color:'#1d1d1d !important'}},la=['innerHTML'],ca={style:{'margin-top':'10px',color:'#8c8c8c !important','font-size':'12px'}},da={style:{display:'flex','flex-direction':'column',gap:'25px',width:'100%'}},pa={class:'rednote-postpage-comment'},ma={style:{'margin-top':'-4px',width:'100%'}},ua={style:{color:'#919191','text-overflow':'ellipsis',overflow:'hidden',flex:'1','font-size':'13px'}},Aa={style:{'margin-top':'5px',color:'#1d1d1d !important','font-size':'14px'}},ha={style:{display:'flex','align-items':'center','margin-top':'5px'}},ga={style:{color:'#8c8c8c','font-size':'12px'}},Ca=['onClick'],fa={style:{'margin-left':'auto'},viewBox:'0 0 1024 1024',width:'20',height:'20'},va={style:{color:'#6a6a6a','margin-left':'5px','font-size':'13px'}},ba={class:'rednote-postpage-bottom'},xa={style:{flex:'1',display:'flex','flex-direction':'column',gap:'5px'}},ya={key:0,style:{display:'flex','align-items':'center','justify-content':'space-between',padding:'5px 10px','background-color':'#f0f0f0','border-radius':'15px','font-size':'12px'}},Ba={style:{color:'#666'}},wa={style:{color:'#ea3e4a'}},ka=['placeholder'],Ea={style:{display:'flex','align-items':'center',gap:'5px'}},Sa={style:{'white-space':'nowrap','max-width':'2.5rem',color:'#393939','text-overflow':'clip',overflow:'hidden','font-size':'12px'}},Na={style:{display:'flex','align-items':'center',gap:'5px'}},Qa={style:{'white-space':'nowrap','max-width':'2.5rem',color:'#393939','text-overflow':'clip',overflow:'hidden','font-size':'12px'}},Va={style:{display:'flex','align-items':'center',gap:'5px'}},_a={style:{'white-space':'nowrap','max-width':'2.5rem',color:'#393939','text-overflow':'clip',overflow:'hidden','font-size':'12px'}},za={__name:'post',props:['postContent'],setup(e){const n=e,t=(0,i.ref)(''),a=(0,i.ref)(null);function o(){if(l.generate||!t.value.match(/\S/))return;let e=l.QQ.cacheMsg.join('\n').trim();if(a.value?e+=`\n在${n.postContent.sender}发的小红书帖子${n.postContent.id}中回复${a.value.sender}的评论:${t.value}`:e+=`\n在${n.postContent.sender}发的小红书帖子${n.postContent.id}中评论:${t.value}`,'尾附'==l.phone.sendModel){const n=$('#send_textarea').val().trim()+e;return $('#send_textarea').val(n.trim()||'')[0].dispatchEvent(new Event('input',{bubbles:!0})),t.value='',a.value=null,void(l.QQ.cacheMsg=[])}triggerSlash(`/send ${e.trim()}|/trigger`),t.value='',a.value=null,l.QQ.cacheMsg=[]}function r(){a.value=null}return(e,s)=>((0,i.openBlock)(),(0,i.createBlock)(i.Transition,{name:'slide-fade',persisted:''},{default:(0,i.withCtx)(()=>{return[(0,i.withDirectives)((0,i.createElementVNode)('div',ta,[(0,i.createElementVNode)('div',aa,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{viewBox:'0 0 1024 1024',width:'15',height:'15',onClick:s[0]||(s[0]=e=>(0,i.unref)(l).RedNote.activePost='')},[...s[2]||(s[2]=[(0,i.createElementVNode)('path',{d:'M771.988 947.44l-403.54-405.135c-15.95-15.95-15.95-43.065 0-60.61l406.73-406.73c17.545-15.95 19.14-43.065 3.19-60.61C770.393 4.785 759.228 0 746.468 0s-23.926 4.785-31.901 14.355l-9.57 9.57-457.77 459.365c-15.95 15.95-15.95 43.065 0 60.61l467.34 467.34c7.975 7.975 17.545 12.76 28.71 12.76 23.925 0 43.066-19.14 43.066-41.47 1.595-14.356-4.785-27.116-14.355-35.09z',fill:'#333333','p-id':'4540'},null,-1)])])),(0,i.createElementVNode)('div',{style:(0,i.normalizeStyle)(`background-image: url('${n.postContent.head}');\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            background-size: cover;\n            background-position: top center;\n            background-repeat: no-repeat;\n            background-color: black;\n            aspect-ratio: 1;\n            min-width: 30px;`)},null,4),(0,i.createElementVNode)('div',ia,(0,i.toDisplayString)(n.postContent.sender),1),s[3]||(s[3]=(0,i.createElementVNode)('div',{style:{'margin-left':'auto',display:'flex','align-items':'center',gap:'10px'}},[(0,i.createElementVNode)('div',{style:{'margin-left':'auto','border-radius':'150px',border:'1px solid #c8b9bc',color:'#ce3d4a',padding:'2px 20px','font-size':'14px'}},' 关注 '),(0,i.createElementVNode)('svg',{viewBox:'0 0 1252 1024',width:'22',height:'22'},[(0,i.createElementVNode)('path',{d:'M789.325694 92.701516L1164.112805 483.412814c19.905234 20.758315 24.739362 31.279653-2.559244 59.715701L788.472612 936.114697V767.773294a71.09012 71.09012 0 0 0-71.09012-71.09012h-39.810467c-125.971692 0-424.550195 23.88628-597.157006 210.711115 32.132734-183.412509 120.568843-351.185192 252.512106-457.251651a615.640437 615.640437 0 0 1 356.019319-126.824773l32.417095-1.706163a71.09012 71.09012 0 0 0 67.109073-71.37448V92.701516M773.970228 0c-28.436048 0-56.872096 22.748838-56.872096 69.952678V250.237222l-32.132734 1.706162a682.46515 682.46515 0 0 0-398.104671 142.18024C142.689964 511.848862 27.239609 708.626314 0.509724 961.991501A54.881572 54.881572 0 0 0 46.860483 1023.697725a22.748838 22.748838 0 0 0 7.393372 0 48.056921 48.056921 0 0 0 43.507153-25.308083C236.244562 799.337307 532.26382 767.773294 677.572025 767.773294h39.810467v193.080765A59.715701 59.715701 0 0 0 776.529472 1023.697725a65.11855 65.11855 0 0 0 46.350758-20.758315l389.858217-412.038334c50.047444-52.037968 52.606689-106.066459 2.559244-158.104427L815.202497 17.91471A56.872096 56.872096 0 0 0 773.970228 0z','p-id':'7405',fill:'#333333'})])],-1))]),(0,i.createElementVNode)('div',oa,[(0,i.createElementVNode)('div',{class:'rednote-homepage-post-img',style:(0,i.normalizeStyle)(`padding: 5rem 3rem;background-color:${n.postContent.imgColor};color:${n.postContent.textColor};`)},(0,i.toDisplayString)(n.postContent.img),5),(0,i.createElementVNode)('div',ra,[(0,i.createElementVNode)('div',sa,(0,i.toDisplayString)(n.postContent.title),1),(0,i.createElementVNode)('div',{style:{'font-size':'15px','margin-top':'10px',color:'#1d1d1d !important','letter-spacing':'1.5px','line-height':'1.6'},innerHTML:(e=n.postContent.content,e?e=(e=e.replace(/\\n/g,'<br>')).replace(/\[(img|vedio|bqb)/g,'<br>[$1'):'')},null,8,la),(0,i.createElementVNode)('div',ca,(0,i.toDisplayString)(n.postContent.time),1),s[5]||(s[5]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'#f7f7f7','margin-top':'15px','margin-bottom':'20px'}},null,-1)),(0,i.createElementVNode)('div',da,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(n.postContent.comments||[],e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',pa,[(0,i.createElementVNode)('div',{style:(0,i.normalizeStyle)(`background-image: url('${e.head}');\n                width: 30px;\n                height: 30px;\n                border-radius: 50%;\n                background-size: cover;\n                background-position: center top;\n                background-repeat: no-repeat;\n                background-color: black;\n                aspect-ratio: 1 / 1;\n                min-width: 30px;`)},null,4),(0,i.createElementVNode)('div',ma,[(0,i.createElementVNode)('div',ua,(0,i.toDisplayString)(e.sender),1),(0,i.createElementVNode)('div',Aa,(0,i.toDisplayString)(e.content),1),(0,i.createElementVNode)('div',ha,[(0,i.createElementVNode)('div',ga,(0,i.toDisplayString)(e?.time||'未知时间'),1),(0,i.createElementVNode)('div',{style:{color:'#636363','margin-left':'5px','font-size':'13px',cursor:'pointer'},onClick:n=>function(e){a.value=e,t.value='',setTimeout(()=>{document.querySelector('.rednote-postpage-bottom input').focus()},100)}(e)},' 回复 ',8,Ca),((0,i.openBlock)(),(0,i.createElementBlock)('svg',fa,[...s[4]||(s[4]=[(0,i.createElementVNode)('path',{d:'M171.712 571.648l0.352 0.32 287.904 252.8a64 64 0 0 0 82.912 1.344l296.832-244.544a215.584 215.584 0 1 0-301.824-300.576L512 316.672l-25.888-35.616a215.584 215.584 0 1 0-314.4 290.624zM32 407.584a279.584 279.584 0 0 1 480-194.944 279.584 279.584 0 0 1 480 194.944 278.144 278.144 0 0 1-113.024 224.512l-295.36 243.392a128 128 0 0 1-165.888-2.592L129.984 620.16A278.976 278.976 0 0 1 32 407.584z',fill:'#646464','p-id':'4875'},null,-1)])])),(0,i.createElementVNode)('div',va,(0,i.toDisplayString)(e.like),1)])])]))),256))])])]),(0,i.createElementVNode)('div',ba,[(0,i.createElementVNode)('div',xa,[(0,i.createCommentVNode)(' 回复提示条 '),(0,i.unref)(a)?((0,i.openBlock)(),(0,i.createElementBlock)('div',ya,[(0,i.createElementVNode)('span',Ba,[s[6]||(s[6]=(0,i.createTextVNode)('回复 ',-1)),(0,i.createElementVNode)('span',wa,'@'+(0,i.toDisplayString)((0,i.unref)(a).sender),1)]),((0,i.openBlock)(),(0,i.createElementBlock)('svg',{viewBox:'0 0 1024 1024',width:'14',height:'14',style:{cursor:'pointer'},onClick:r},[...s[7]||(s[7]=[(0,i.createElementVNode)('path',{d:'M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512 467.904 246.72 203.968c-12.544-12.48-32.704-12.448-45.248 0.128-12.48 12.544-12.416 32.768 0.128 45.248l265.216 263.904L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248 6.24 6.272 14.464 9.44 22.688 9.44 8.16 0 16.32-3.104 22.56-9.312L512 558.592l265.28 263.584c6.272 6.208 14.432 9.312 22.592 9.312 8.224 0 16.448-3.168 22.688-9.44 12.48-12.544 12.416-32.768-0.128-45.248L557.312 513.248z',fill:'#999'},null,-1)])]))])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' 输入框 '),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':s[1]||(s[1]=e=>(0,i.isRef)(t)?t.value=e:null),type:'text',placeholder:(0,i.unref)(a)?`回复 @${(0,i.unref)(a).sender}...`:'说点什么...',style:{width:'100% !important','background-color':'#f5f5f5 !important','border-radius':'30px !important',padding:'5px 10px !important',border:'none !important','font-size':'13px !important',color:'black !important'},onKeyup:(0,i.withKeys)(o,['enter'])},null,40,ka),[[i.vModelText,(0,i.unref)(t)]])]),(0,i.createElementVNode)('div',Ea,[s[8]||(s[8]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'22',height:'22'},[(0,i.createElementVNode)('path',{d:'M171.712 571.648l0.352 0.32 287.904 252.8a64 64 0 0 0 82.912 1.344l296.832-244.544a215.584 215.584 0 1 0-301.824-300.576L512 316.672l-25.888-35.616a215.584 215.584 0 1 0-314.4 290.624zM32 407.584a279.584 279.584 0 0 1 480-194.944 279.584 279.584 0 0 1 480 194.944 278.144 278.144 0 0 1-113.024 224.512l-295.36 243.392a128 128 0 0 1-165.888-2.592L129.984 620.16A278.976 278.976 0 0 1 32 407.584z',fill:'#393939','p-id':'4875'})],-1)),(0,i.createElementVNode)('div',Sa,(0,i.toDisplayString)(n.postContent.like),1)]),(0,i.createElementVNode)('div',Na,[s[9]||(s[9]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1025 1024',width:'20',height:'20'},[(0,i.createElementVNode)('path',{d:'M512.118374 131.072L603.766374 317.44c20.48 41.472 59.392 70.144 104.96 76.8l205.824 30.208-148.992 145.92c-32.768 32.256-47.616 78.336-39.936 123.392l35.328 205.824-183.296-96.768c-19.968-10.752-42.496-16.384-65.024-16.384-22.528 0-45.056 5.632-65.024 16.384l-183.296 96.768 35.328-205.824c7.68-45.056-7.168-91.136-39.936-123.392L109.686374 424.448 314.998374 394.24c45.568-6.656 84.992-35.328 104.96-76.8l92.16-186.368m0-112.64c-20.48 0-41.472 10.752-51.712 32.256L346.742374 281.6c-8.192 16.896-24.576 29.184-43.52 31.744L49.270374 350.208C2.166374 357.376-16.777626 415.232 17.526374 449.024l183.808 180.224c13.312 13.312 19.968 32.256 16.384 51.2l-43.52 253.952c-6.144 37.376 23.552 67.584 56.832 67.584 8.704 0 17.92-2.048 27.136-6.656L484.982374 875.52c8.192-4.608 17.92-6.656 27.136-6.656 9.216 0 18.432 2.048 27.136 6.656l226.816 119.808c8.704 4.608 17.92 6.656 27.136 6.656 33.792 0 63.488-30.208 56.832-67.584l-43.52-253.952c-3.072-18.944 3.072-37.888 16.384-51.2l183.808-180.224c34.304-33.28 15.36-91.648-32.256-98.304l-253.952-36.864c-18.944-2.56-35.328-14.848-43.52-31.744L563.830374 50.688c-10.752-21.504-31.232-32.256-51.712-32.256z','p-id':'8508',fill:'#393939'})],-1)),(0,i.createElementVNode)('div',Qa,(0,i.toDisplayString)(n.postContent.star),1)]),(0,i.createElementVNode)('div',Va,[s[10]||(s[10]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'20',height:'20'},[(0,i.createElementVNode)('path',{d:'M405.97 530.4m-40.81 0a40.81 40.81 0 1 0 81.62 0 40.81 40.81 0 1 0-81.62 0Z','p-id':'10557'}),(0,i.createElementVNode)('path',{d:'M618.04 530.4m-40.81 0a40.81 40.81 0 1 0 81.62 0 40.81 40.81 0 1 0-81.62 0Z','p-id':'10558'}),(0,i.createElementVNode)('path',{d:'M512.01 959.33c-70.48 0-140.41-16.79-202.89-48.62H93.23V669.25c-18.96-50.4-28.56-103.26-28.56-157.26 0-246.66 200.68-447.32 447.34-447.32s447.32 200.66 447.32 447.32-200.66 447.34-447.32 447.34zM166.85 837.09h160.56l8.16 4.39c53.89 28.94 114.89 44.23 176.43 44.23 206.06 0 373.7-167.65 373.7-373.72 0-206.06-167.65-373.7-373.7-373.7-206.07 0-373.72 167.65-373.72 373.7 0 47.09 8.75 93.16 25.99 136.91l2.57 6.51v181.68z','p-id':'10559'})],-1)),(0,i.createElementVNode)('div',_a,(0,i.toDisplayString)(n.postContent.comment),1)])])],512),[[i.vShow,(0,i.unref)(l).RedNote.activePost==n.postContent.id]])];var e}),_:1}))}},Ta=za,Ma={class:'rednote-homepage'},Fa={class:'rednote-homepage-top'},Da={style:{width:'35px',height:'35px','border-radius':'50%','aspect-ratio':'1','min-width':'35px',display:'flex','align-items':'center','justify-content':'center'}},Ia={viewBox:'0 0 1024 1024',width:'20',height:'20',style:{'margin-top':'-5px'}},ja={class:'rednote-homepage-content'},Ua={style:{display:'flex','flex-direction':'column',width:'100%'}},$a={style:{display:'flex','flex-direction':'column',width:'100%'}},Ha={class:'rednote-homepage-bottom'},Ya={class:'rednote-postpage-list',style:{width:'100%',height:'100%'}},Wa={style:{position:'fixed',top:'0',left:'0',width:'100%',height:'100%','background-color':'white','z-index':'1000','padding-top':'35px',display:'flex','flex-direction':'column'}},Pa={style:{display:'flex','align-items':'center','justify-content':'space-between',padding:'10px 15px','border-bottom':'1px solid #e4e4e4'}},Oa={style:{flex:'1','overflow-y':'auto',padding:'15px'}},La={style:{'margin-bottom':'15px'}},qa={style:{'margin-bottom':'15px'}},Ra={style:{'margin-bottom':'15px'}},Xa={__name:'RedNote',setup(e){const n=(0,i.ref)(!1),t=(0,i.ref)({title1:'',title2:'',content:''});function a(){if(!t.value.title1.trim()||!t.value.title2.trim()||!t.value.content.trim())return void alert('请填写完整的标题和内容');let e='{{user}}发布了小红书帖子，请按照规范格式输出该帖子及3-5条评论：\n\n';e+=`帖子ID: ${function(){const e='abcdefghijklmnopqrstuvwxyz0123456789';let n='';for(let t=0;t<6;t++)n+=e.charAt(Math.floor(36*Math.random()));return n}()}\n`,e+=`一级标题: ${t.value.title1}\n`,e+=`二级标题: ${t.value.title2}\n`,e+=`帖子内容: ${t.value.content}`;const a=$('#send_textarea').val().trim(),i=a?a+'\n\n'+e:e;$('#send_textarea').val(i)[0].dispatchEvent(new Event('input',{bubbles:!0})),t.value={title1:'',title2:'',content:''},n.value=!1}return(e,o)=>((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.withDirectives)((0,i.createElementVNode)('div',Ma,[(0,i.createElementVNode)('div',Fa,[(0,i.createElementVNode)('div',{class:'user_avatar',style:{width:'35px',height:'35px','border-radius':'50%','background-size':'cover','background-position':'top center','background-repeat':'no-repeat','background-color':'black','aspect-ratio':'1','min-width':'35px'},onClick:o[0]||(o[0]=e=>(0,i.unref)(l).phone.activeApp='home')}),o[7]||(o[7]=(0,i.createStaticVNode)('<div style="display:flex;margin-bottom:-5px;flex:1;justify-content:space-evenly;"><div style="font-size:16px;color:rgb(100, 100, 100) !important;white-space:nowrap !important;">关注</div><div style="display:flex;flex-direction:column;gap:5px;align-items:center;color:black !important;white-space:nowrap !important;"><div>发现</div><div style="width:3rem;height:4px;background-color:#e73f4c;border-radius:10px;"></div></div><div style="font-size:16px;color:rgb(100, 100, 100) !important;white-space:nowrap !important;">同城</div></div>',1)),(0,i.createElementVNode)('div',Da,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',Ia,[...o[6]||(o[6]=[(0,i.createElementVNode)('path',{d:'M704.448 648.768L956.48 900.736l-55.744 55.68L648.64 704.384a393.856 393.856 0 1 1 55.808-55.68z m-82.24-26.56a315.072 315.072 0 1 0-437.76-453.248 315.072 315.072 0 0 0 437.76 453.248z','p-id':'16026',fill:'#303030'},null,-1)])]))])]),(0,i.createElementVNode)('div',ja,[(0,i.createElementVNode)('div',Ua,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).RedNote.post.filter((_,e)=>e%2==0),e=>((0,i.openBlock)(),(0,i.createBlock)(na,{'card-content':e,onClick:n=>{(0,i.unref)(l).RedNote.activePost=e.id,console.log(e.id)}},null,8,['card-content','onClick']))),256))]),(0,i.createElementVNode)('div',$a,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).RedNote.post.filter((_,e)=>e%2==1),e=>((0,i.openBlock)(),(0,i.createBlock)(na,{'card-content':e,onClick:n=>{(0,i.unref)(l).RedNote.activePost=e.id,console.log(e.id)}},null,8,['card-content','onClick']))),256))])]),(0,i.createElementVNode)('div',Ha,[o[9]||(o[9]=(0,i.createElementVNode)('div',{class:'rednote-homepage-bottom-button',style:{color:'black','font-size':'18px'}},'首页',-1)),o[10]||(o[10]=(0,i.createElementVNode)('div',{class:'rednote-homepage-bottom-button'},'市集',-1)),(0,i.createElementVNode)('div',{style:{width:'3rem',height:'40px','background-color':'#ea3e4a','border-radius':'9px',position:'relative'},onClick:o[1]||(o[1]=e=>n.value=!0)},[...o[8]||(o[8]=[(0,i.createElementVNode)('div',{style:{width:'50%','background-color':'white',height:'4px',position:'absolute','border-radius':'5px',top:'50%',left:'50%',transform:'translate(-50%, -50%)'}},null,-1),(0,i.createElementVNode)('div',{style:{width:'50%','background-color':'white',height:'4px',position:'absolute','border-radius':'5px',top:'50%',left:'50%',transform:'translate(-50%, -50%) rotate(90deg)'}},null,-1)])]),o[11]||(o[11]=(0,i.createElementVNode)('div',{class:'rednote-homepage-bottom-button'},'消息',-1)),o[12]||(o[12]=(0,i.createElementVNode)('div',{class:'rednote-homepage-bottom-button'},'我的',-1))])],512),[[i.vShow,!(0,i.unref)(l).RedNote.activePost||0==(0,i.unref)(l).RedNote.post.length]]),(0,i.createCommentVNode)(' 帖子详情页 '),(0,i.createVNode)(i.Transition,{name:'slide-fade',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',Ya,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).RedNote.post,e=>((0,i.openBlock)(),(0,i.createBlock)(Ta,{'post-content':e},null,8,['post-content']))),256))],512),[[i.vShow,(0,i.unref)(l).RedNote.activePost]])]),_:1}),(0,i.createCommentVNode)(' 发布弹窗 '),(0,i.createVNode)(i.Transition,{name:'slide-fade',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',Wa,[(0,i.createCommentVNode)(' 顶部栏 '),(0,i.createElementVNode)('div',Pa,[(0,i.createElementVNode)('div',{style:{color:'#666','font-size':'16px'},onClick:o[2]||(o[2]=e=>n.value=!1)},'取消'),o[13]||(o[13]=(0,i.createElementVNode)('div',{style:{'font-size':'16px','font-weight':'bold'}},'发布笔记',-1)),(0,i.createElementVNode)('div',{style:{color:'#ea3e4a','font-size':'16px'},onClick:a},'发布')]),(0,i.createCommentVNode)(' 表单内容 '),(0,i.createElementVNode)('div',Oa,[(0,i.createCommentVNode)(' 一级标题 '),(0,i.createElementVNode)('div',La,[o[14]||(o[14]=(0,i.createElementVNode)('div',{style:{color:'#666','font-size':'14px','margin-bottom':'8px'}},'一级标题（震撼效果）',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':o[3]||(o[3]=e=>t.value.title1=e),type:'text',placeholder:'例如：震惊！上班族10分钟做出米其林级别早餐',style:{width:'100%',padding:'10px',border:'1px solid #e4e4e4','border-radius':'5px','font-size':'14px'}},null,512),[[i.vModelText,t.value.title1]])]),(0,i.createCommentVNode)(' 二级标题 '),(0,i.createElementVNode)('div',qa,[o[15]||(o[15]=(0,i.createElementVNode)('div',{style:{color:'#666','font-size':'14px','margin-bottom':'8px'}},'二级标题（温馨实用）',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':o[4]||(o[4]=e=>t.value.title2=e),type:'text',placeholder:'例如：懒人必学：营养美味的快手早餐',style:{width:'100%',padding:'10px',border:'1px solid #e4e4e4','border-radius':'5px','font-size':'14px'}},null,512),[[i.vModelText,t.value.title2]])]),(0,i.createCommentVNode)(' 帖子内容 '),(0,i.createElementVNode)('div',Ra,[o[16]||(o[16]=(0,i.createElementVNode)('div',{style:{color:'#666','font-size':'14px','margin-bottom':'8px'}},'帖子内容',-1)),(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':o[5]||(o[5]=e=>t.value.content=e),placeholder:'分享你的生活，记录美好瞬间...\n\n提示：可以用 [img-图片描述] 来表示配图',style:{width:'100%','min-height':'200px',padding:'10px',border:'1px solid #e4e4e4','border-radius':'5px','font-size':'14px',resize:'vertical'}},null,512),[[i.vModelText,t.value.content]])]),(0,i.createCommentVNode)(' 提示信息 '),o[17]||(o[17]=(0,i.createElementVNode)('div',{style:{'background-color':'#fff7e6',padding:'10px','border-radius':'5px','font-size':'12px',color:'#ff8800'}},[(0,i.createElementVNode)('div',{style:{'margin-bottom':'5px'}},'📝 发布提示：'),(0,i.createElementVNode)('div',null,'• 一级标题要有震撼效果'),(0,i.createElementVNode)('div',null,'• 二级标题要温馨实用'),(0,i.createElementVNode)('div',null,'• 内容中可用 [img-描述] 表示图片')],-1))])],512),[[i.vShow,n.value]])]),_:1})],64))}};a(1234);const Za=Xa,Ga={class:'message-content'},Ja={key:0,class:'bubble text-bubble'},Ka={class:'bubble img-bubble'},ei={key:0,class:'img-wrapper'},ni=['src'],ti={key:1,class:'bubble text-bubble fake-img-bubble'},ai=['innerHTML'],ii={key:2,class:'additional-text'},oi={class:'bubble emoji-bubble'},ri={class:'img-wrapper'},si=['src'],li={style:{display:'flex','align-items':'center',gap:'10px',width:'100%'}},ci={key:0,class:'voice-icon'},di={viewBox:'0 0 1024 1024',width:'20',height:'20',fill:'currentColor',style:{transform:'rotate(90deg)'}},pi={class:'voice-duration'},mi={key:1,class:'voice-icon'},ui={viewBox:'0 0 1024 1024',width:'20',height:'20',fill:'currentColor',style:{transform:'rotate(-90deg)'}},Ai={key:0,class:'voice-text'},hi={class:'system-msg'},gi={class:'bubble text-bubble'},Ci={__name:'bubble',props:{bubble:{type:Object},isGroup:{type:String},senderinfo:{type:Object},isDouyin:{type:Boolean}},setup(e){const n=e,t=(0,i.computed)(()=>'user'===n.bubble.sender),a=(0,i.computed)(()=>{const e=n.bubble.sender;return t.value?l.Douyin.userHead||l.ST.userHead:n.senderinfo?.douyinHead?n.senderinfo.douyinHead:l.QQ.chars[e]?.douyinHead?l.QQ.chars[e].douyinHead:n.senderinfo?.head?n.senderinfo.head:l.QQ.chars[e]?.head?l.QQ.chars[e].head:''});t.value||!n.bubble.sender||n.bubble.sender in l.QQ.chars||c(n.bubble.sender);const o=e=>{e.target.style.display='none'},r=(0,i.ref)(!1),s=()=>{r.value=!r.value};function d(e){return e?e.replace(/\n/g,'<br>'):''}return(e,l)=>{return(0,i.openBlock)(),(0,i.createElementBlock)('div',{class:(0,i.normalizeClass)(['douyin-bubble-container',{'my-message':t.value}])},[(0,i.createCommentVNode)(' 对方头像 '),t.value?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'chat-avatar',style:(0,i.normalizeStyle)(`background-image: url('${a.value}')`)},null,4)),(0,i.createCommentVNode)(' 消息内容 '),(0,i.createElementVNode)('div',Ga,[(0,i.createCommentVNode)(' 文本消息 '),'text'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ja,(0,i.toDisplayString)(n.bubble.content),1)):'img'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[(0,i.createCommentVNode)(' 图片消息 '),(0,i.createElementVNode)('div',Ka,[(0,i.createCommentVNode)(' 如果是 URL 则显示图片，否则显示文本框 '),(c=n.bubble.content,/^http/.test(c)?((0,i.openBlock)(),(0,i.createElementBlock)('div',ei,[(0,i.createElementVNode)('img',{src:n.bubble.content,onError:o},null,40,ni)])):((0,i.openBlock)(),(0,i.createElementBlock)('div',ti,[l[0]||(l[0]=(0,i.createElementVNode)('div',{style:{'text-align':'center',color:'#aaa','font-size':'13px','margin-bottom':'5px'}},'[图片]',-1)),(0,i.createElementVNode)('div',{innerHTML:d(n.bubble.content)},null,8,ai)]))),n.bubble.additionalText?((0,i.openBlock)(),(0,i.createElementBlock)('div',ii,(0,i.toDisplayString)(n.bubble.additionalText),1)):(0,i.createCommentVNode)('v-if',!0)])],2112)):'emoji'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:2},[(0,i.createCommentVNode)(' 表情包 '),(0,i.createElementVNode)('div',oi,[(0,i.createElementVNode)('div',ri,[(0,i.createElementVNode)('img',{src:n.bubble.emoji,onError:o},null,40,si)])])],2112)):'voice'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:3},[(0,i.createCommentVNode)(' 语音消息 '),(0,i.createElementVNode)('div',{class:'bubble voice-bubble',onClick:s},[(0,i.createElementVNode)('div',li,[(0,i.createCommentVNode)(' 对方发的语音图标 '),t.value?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('span',ci,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',di,[...l[1]||(l[1]=[(0,i.createElementVNode)('path',{d:'M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z','p-id':'38915'},null,-1)])]))])),(0,i.createElementVNode)('span',pi,(0,i.toDisplayString)(n.bubble.voicetime||2)+'"',1),(0,i.createCommentVNode)(' 我方发的语音图标 '),t.value?((0,i.openBlock)(),(0,i.createElementBlock)('span',mi,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',ui,[...l[2]||(l[2]=[(0,i.createElementVNode)('path',{d:'M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z','p-id':'38915'},null,-1)])]))])):(0,i.createCommentVNode)('v-if',!0)]),r.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ai,(0,i.toDisplayString)(n.bubble.content),1)):(0,i.createCommentVNode)('v-if',!0)])],2112)):'music'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:4},[(0,i.createCommentVNode)(' music类型 '),(0,i.createVNode)(B,{class:(0,i.normalizeClass)('douyin-music'),song:n.bubble.song,singer:n.bubble.singer},null,8,['song','singer'])],2112)):'system'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:5},[(0,i.createCommentVNode)(' system类型 '),(0,i.createElementVNode)('div',hi,(0,i.toDisplayString)(n.bubble?.content),1)],2112)):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:6},[(0,i.createCommentVNode)(' 其他类型 '),(0,i.createElementVNode)('div',gi,(0,i.toDisplayString)(n.bubble.content),1)],2112))]),(0,i.createCommentVNode)(' 我方头像 '),t.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'chat-avatar',style:(0,i.normalizeStyle)(`background-image: url('${a.value}')`)},null,4)):(0,i.createCommentVNode)('v-if',!0)],2);var c}}};a(142);const fi=(0,Xe.A)(Ci,[['__scopeId','data-v-8444c00e']]),vi={class:'douyin-chat-detail'},bi={class:'chat-header'},xi={class:'chat-title'},yi={key:0,class:'time-stamp'},Bi={class:'chat-input-area'},wi={class:'input-wrapper'},ki=['fill'],Ei=(0,i.defineComponent)({__name:'chat_detail',props:{chatId:{}},emits:['back'],setup(e,{expose:n,emit:t}){const a=e,o=(0,i.ref)(''),r=(0,i.ref)(null),s=(0,i.computed)(()=>{if(l.QQ.chars[a.chatId])return l.QQ.chars[a.chatId];const e=Object.values(l.QQ.chars).find(e=>e.name===a.chatId);return e||{}}),c=(0,i.computed)(()=>{const e=s.value;if(e.douyinName)return e.douyinName;if('Group'===e.chartype)return e.name||a.chatId;const n=Object.keys(l.QQ.chars).find(n=>l.QQ.chars[n]===e);return n||a.chatId}),d=(0,i.computed)(()=>l.Douyin.chathistory[a.chatId]?.msgs||[]),p=()=>{(0,i.nextTick)(()=>{r.value&&(r.value.scrollTop=r.value.scrollHeight)})};(0,i.onMounted)(()=>{p(),l.Douyin.chathistory[a.chatId]&&(l.Douyin.chathistory[a.chatId].unread=0)}),(0,i.watch)(d,()=>{p()},{deep:!0});const m=()=>{const e=o.value.trim();if(!e)return;const n=(new Date).toLocaleTimeString('en-US',{hour12:!1,hour:'2-digit',minute:'2-digit'});l.Douyin.addMsg(a.chatId,{msgtype:'text',content:e,sender:'user',time:n});const t=`\n<douyin_msg>{{user}}|${a.chatId}|${e}|${n}</douyin_msg>`,i=`\n{{user}}给${a.chatId}发送抖音私信：${e}${t}`,r=$('#send_textarea').val(),s=('string'==typeof r?r:'').trim()+i;$('#send_textarea').val(s)[0].dispatchEvent(new Event('input',{bubbles:!0})),toastr.success('已生成私信指令，请点击发送'),o.value=''};return n({scrollToBottom:p}),(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',vi,[(0,i.createElementVNode)('div',bi,[(0,i.createElementVNode)('div',{class:'back-btn',onClick:n[0]||(n[0]=n=>e.$emit('back'))},[...n[2]||(n[2]=[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'24',height:'24',fill:'#ffffff'},[(0,i.createElementVNode)('path',{d:'M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z'})],-1)])]),(0,i.createElementVNode)('div',xi,(0,i.toDisplayString)(c.value),1),n[3]||(n[3]=(0,i.createElementVNode)('div',{class:'chat-actions'},[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'24',height:'24',fill:'#ffffff'},[(0,i.createElementVNode)('path',{d:'M512 256a64 64 0 1 0 0-128 64 64 0 0 0 0 128z m0 320a64 64 0 1 0 0-128 64 64 0 0 0 0 128z m0 320a64 64 0 1 0 0-128 64 64 0 0 0 0 128z'})])],-1))]),(0,i.createElementVNode)('div',{ref_key:'msgContainer',ref:r,class:'chat-messages'},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(d.value,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'message-wrapper'},['system'===e.msgtype||'time'===e.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',yi,(0,i.toDisplayString)(e.content),1)):((0,i.openBlock)(),(0,i.createBlock)(fi,{key:1,bubble:e,senderinfo:(0,i.unref)(l).QQ.chars[e.sender],isDouyin:!0},null,8,['bubble','senderinfo']))]))),128))],512),(0,i.createElementVNode)('div',Bi,[(0,i.createElementVNode)('div',wi,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[1]||(n[1]=e=>o.value=e),placeholder:'发送消息...',type:'text',onKeyup:(0,i.withKeys)(m,['enter'])},null,544),[[i.vModelText,o.value]]),n[4]||(n[4]=(0,i.createElementVNode)('div',{class:'emoji-btn'},'☺',-1))]),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['send-btn',{active:!!o.value.trim()}]),onClick:m},[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{viewBox:'0 0 1024 1024',width:'24',height:'24',fill:o.value.trim()?'#fe2c55':'#666'},[...n[5]||(n[5]=[(0,i.createElementVNode)('path',{d:'M925.3376 484.096L143.6672 96.256c-17.5616-8.704-38.656-5.12-52.48 8.8064-13.824 13.9264-17.152 35.2256-8.192 52.6336l113.1008 219.8016c4.608 8.96 13.2608 15.2064 23.1424 16.6912l320.6144 48.0256c17.5616 2.6112 17.5616 27.6992 0 30.3104l-320.6144 48.0256c-9.8816 1.4848-18.5344 7.7312-23.1424 16.6912L82.9952 757.0944c-8.96 17.408-5.632 38.7072 8.192 52.6336 8.704 8.7552 20.3264 13.2608 31.9488 13.2608 7.0656 0 14.1312-1.7408 20.5312-5.12l781.6704-387.84c17.2032-8.5504 28.0064-26.2144 28.0064-45.3632s-10.8032-36.8128-28.0064-45.3632z'},null,-1)])],8,ki))],2)])]))}});a(6679);const Si=(0,Xe.A)(Ei,[['__scopeId','data-v-09f996fe']]),Ni={class:'douyin-container'},Qi={class:'home-content'},Vi={key:0,class:'video-placeholder'},_i=['innerHTML'],zi={key:1,style:{'font-size':'20px',color:'#fff'}},Ti={key:1,class:'video-overlay-text'},Mi=['innerHTML'],Fi={class:'sidebar-right'},Di=['onClick'],Ii={key:0,class:'follow-icon'},ji=['onClick'],Ui=['fill'],$i={class:'count'},Hi=['onClick'],Yi={class:'count'},Wi={class:'sidebar-item'},Pi={class:'count'},Oi={class:'sidebar-item'},Li={class:'count'},qi={class:'sidebar-item record-container'},Ri={class:'record-bg'},Xi={class:'bottom-info'},Zi={class:'username'},Gi=['innerHTML'],Ji={class:'music-info'},Ki={class:'music-text-container'},eo={class:'music-text'},no={key:0,class:'me-page'},to={class:'me-header'},ao={class:'me-info'},io={key:0,class:'me-name'},oo={key:1,class:'me-name-edit'},ro={class:'me-douyin-id'},so={class:'me-stats'},lo={class:'stat-item'},co={class:'me-tabs'},po={class:'me-tab active'},mo={class:'me-content'},uo={class:'works-grid'},Ao=['onClick'],ho={key:0,class:'work-title-preview'},go={class:'work-likes'},Co={key:0,class:'empty-state'},fo={key:1,class:'post-dialog'},vo={class:'post-header'},bo={class:'post-content'},xo={class:'input-group'},yo={class:'input-group'},Bo={class:'input-group'},wo={key:2,class:'friends-page'},ko={class:'friends-list'},Eo=['onClick'],So={class:'friend-info'},No={class:'friend-name-row'},Qo={class:'friend-name'},Vo={key:0,class:'friend-douyin-id'},_o={key:1,class:'friend-douyin-id'},zo={key:3,class:'message-page'},To={class:'message-list'},Mo=['onClick'],Fo={key:0,class:'unread-badge'},Do={class:'message-info'},Io={class:'message-name-row'},jo={class:'message-name'},Uo={class:'message-time'},$o={class:'message-content-preview'},Ho={key:0,class:'empty-state'},Yo={key:4,class:'input-dialog'},Wo={class:'dialog-content'},Po={class:'dialog-buttons'},Oo={key:5,class:'input-dialog'},Lo={class:'dialog-content'},qo={class:'dialog-buttons'},Ro={key:6,class:'profile-page'},Xo={class:'me-header'},Zo={class:'me-info'},Go={key:0,class:'me-name'},Jo={key:1,class:'me-name-edit'},Ko={class:'me-douyin-id'},er={class:'me-stats'},nr={class:'stat-item'},tr={class:'profile-actions'},ar={class:'me-tabs'},ir={class:'me-tab active'},or={class:'me-content'},rr={class:'works-grid'},sr=['onClick'],lr={key:0,class:'work-title-preview'},cr={class:'work-likes'},dr={key:0,class:'empty-state'},pr={class:'bottom-tabbar'},mr={class:'comment-header'},ur={class:'comment-title'},Ar={class:'comment-list'},hr=['onClick'],gr={class:'comment-content-container'},Cr={class:'comment-user'},fr={class:'comment-text'},vr={key:0,class:'reply-to'},br={class:'comment-meta'},xr={class:'comment-time'},yr={class:'comment-like'},Br={key:0,class:'empty-comments'},wr={class:'comment-input-wrapper'},kr={key:0,class:'replying-banner'},Er={class:'comment-input-area'},Sr=['placeholder'],Nr=(0,i.defineComponent)({__name:'Douyin',setup(e){const n=(0,i.ref)('home');function t(e){return e?e=(e=e.replace(/\\n/g,'<br>')).replace(/\[(img|vedio|bqb)/g,'<br>[$1'):''}const a=(0,i.ref)(!1),o=(0,i.ref)(''),r=(0,i.ref)(''),s=(0,i.ref)(''),c=(0,i.ref)(!1),d=(0,i.ref)(''),p=(0,i.ref)(null),m=(0,i.ref)(!1),u=(0,i.ref)(''),A=(0,i.ref)(null),h=(0,i.ref)(!1),g=(0,i.ref)(''),C=(0,i.ref)(!1),f=(0,i.ref)({}),v=(0,i.ref)(!1),b=(0,i.ref)(''),x=(0,i.ref)(null),y=(0,i.ref)(!1),B=(0,i.ref)(''),w=(0,i.ref)(null),k=((0,i.ref)(!1),(0,i.ref)(''),(0,i.ref)(!1)),E=(0,i.ref)([]),S=(0,i.ref)(''),N=(0,i.ref)(null),Q=()=>{N.value=null},V=()=>{if(!S.value.trim())return;const e=l.Douyin.videos[l.Douyin.activeVideoIndex];if(!e)return;const n=S.value.trim(),t=e.id,a=l.Douyin.userName||l.ST.userName,i=new Date,o=`${(i.getMonth()+1).toString().padStart(2,'0')}-${i.getDate().toString().padStart(2,'0')} ${i.getHours().toString().padStart(2,'0')}:${i.getMinutes().toString().padStart(2,'0')}`;let r='';r=N.value?`{{user}}在抖音回复了评论：\n<douyin>${t}|${a}|${n}|${o}|0|@${N.value.sender}</douyin>`:`{{user}}在抖音发表了评论：\n<douyin>${t}|${a}|${n}|${o}|0</douyin>`;const s=$('#send_textarea').val(),c=('string'==typeof s?s:'').trim(),d=c?c+'\n\n'+r:r;$('#send_textarea').val(d)[0].dispatchEvent(new Event('input',{bubbles:!0})),S.value='',N.value=null,toastr.success('已生成评论指令，请点击发送')},T=(0,i.ref)(!1),M=(0,i.ref)(''),F=(0,i.ref)(''),D=(0,i.ref)(''),I=e=>{M.value=e,F.value='user';const n=l.Douyin[e]||0;l.Douyin['base'+e.charAt(0).toUpperCase()+e.slice(1)];D.value=String(n),T.value=!0},j=e=>{M.value=e,F.value='friend';const n='douyin'+e.charAt(0).toUpperCase()+e.slice(1),t=(e.charAt(0).toUpperCase(),e.slice(1),f.value[n]||0);D.value=String(t),T.value=!0},U=()=>{const e=parseInt(D.value);if(isNaN(e))T.value=!1;else{if('user'===F.value){const n=M.value,t='base'+n.charAt(0).toUpperCase()+n.slice(1),a=(l.Douyin[n]||0)-(l.Douyin[t]||0);l.Douyin[t]=e-a,l.Douyin[n]=e,l.Douyin.saveSettings()}else{const n=M.value,t='douyin'+n.charAt(0).toUpperCase()+n.slice(1),a='douyinBase'+n.charAt(0).toUpperCase()+n.slice(1),i=(f.value[t]||0)-(f.value[a]||0);f.value[a]=e-i,f.value[t]=e;Object.keys(l.QQ.chars).find(e=>l.QQ.chars[e]===f.value)&&l.QQ.saveChars()}T.value=!1}},H=(0,i.ref)(!1),Y=(0,i.ref)(''),W=e=>{Y.value=e,H.value=!0},P=()=>{H.value=!1,Y.value=''},O=e=>{const n=l.QQ.chars[e];return n?.douyinHead||n?.head||''},L=e=>{const n=l.QQ.chars[e];return n?n.douyinName?n.douyinName:'friend'===n.chartype?e:n.name||e:e},q=(0,i.ref)(0);let R=0,X=0,Z=!1;const G=(0,i.ref)(null),J=(0,i.ref)(850);(0,i.onMounted)(()=>{K(),window.addEventListener('resize',K)}),(0,i.onBeforeUnmount)(()=>{window.removeEventListener('resize',K)}),(0,i.watch)(()=>l.phone.activeApp,e=>{'Douyin'===e&&(0,i.nextTick)(()=>{K()})});const K=()=>{if(G.value&&G.value.clientHeight>0)J.value=G.value.clientHeight;else{const e=document.querySelector('.douyin-container');e&&e.clientHeight>0&&(J.value=e.clientHeight)}l.Douyin&&(q.value=l.Douyin.activeVideoIndex*J.value)},ee=e=>{'home'===n.value&&(R=e.touches[0].clientY,X=R,Z=!0)},ne=e=>{if(!Z||'home'!==n.value)return;const t=e.touches[0].clientY;X=t},te=e=>{if('home'!==n.value)return;Z=!1;const t=e.changedTouches[0].clientY,a=R-t;Math.abs(a)>50&&(a>0?l.Douyin.activeVideoIndex<l.Douyin.videos.length-1&&l.Douyin.activeVideoIndex++:l.Douyin.activeVideoIndex>0&&l.Douyin.activeVideoIndex--),q.value=l.Douyin.activeVideoIndex*J.value},ae=()=>{k.value=!1},ie=async()=>{if(!o.value.trim()&&!r.value.trim())return;let e='{{user}}发布了抖音视频，请按照规范格式输出该视频及3-5条评论：\n\n';e+=`视频ID: ${Math.random().toString(36).substring(2,8)}\n`,e+=`标题: ${r.value||o.value.substring(0,20)}\n`,e+=`内容描述: ${o.value}\n`,e+=`BGM: ${s.value||'原声'}`;const t=$('#send_textarea').val(),i=('string'==typeof t?t:'').trim(),l=i?i+'\n\n'+e:e;$('#send_textarea').val(l)[0].dispatchEvent(new Event('input',{bubbles:!0})),a.value=!1,o.value='',r.value='',s.value='',n.value='home',toastr.success('已生成发布指令，请点击发送')},oe=()=>{d.value=l.Douyin.userName||l.ST.userName,c.value=!0,(0,i.nextTick)(()=>{p.value?.focus()})},re=()=>{const e=d.value.trim(),n=l.Douyin.userName||l.ST.userName,t=e||l.ST.userName;n!==t&&l.Douyin.videos.forEach(e=>{e.sender===n&&(e.sender=t)}),l.Douyin.userName=e,l.Douyin.saveSettings(),c.value=!1},se=()=>{u.value=l.Douyin.userDouyinId||'88888888',m.value=!0,(0,i.nextTick)(()=>{A.value?.focus()})},le=()=>{l.Douyin.userDouyinId=u.value.trim(),l.Douyin.saveSettings(),m.value=!1},ce=()=>{g.value=l.Douyin.userHead||l.ST.userHead,h.value=!0},de=e=>{f.value=e,C.value=!0,v.value=!1,y.value=!1},pe=()=>{b.value=f.value.douyinId||'',v.value=!0,(0,i.nextTick)(()=>{x.value?.focus()})},me=()=>{if(b.value.trim()){f.value.douyinId=b.value.trim();Object.keys(l.QQ.chars).find(e=>l.QQ.chars[e]===f.value)&&l.QQ.saveChars()}v.value=!1},ue=()=>{B.value=f.value.douyinName||f.value.name,y.value=!0,(0,i.nextTick)(()=>{w.value?.focus()})},Ae=()=>{const e=B.value.trim(),n=f.value.douyinName||f.value.name;if(e&&e!==n){f.value.douyinName=e;Object.keys(l.QQ.chars).find(e=>l.QQ.chars[e]===f.value)&&(l.QQ.saveChars(),l.Douyin.videos.forEach(t=>{t.sender===n&&(t.sender=e)}))}y.value=!1},he=()=>{g.value=f.value.douyinHead||f.value.head,h.value='friend'},ge=()=>{if('friend'===h.value){const e=g.value.trim();if(e){f.value.douyinHead=e;Object.keys(l.QQ.chars).find(e=>l.QQ.chars[e]===f.value)&&(l.QQ.saveChars(),l.Douyin.videos.forEach(n=>{n.sender!==f.value.name&&n.sender!==f.value.douyinName||(n.head=e)}))}h.value=!1}else(()=>{const e=g.value.trim(),n=l.Douyin.userName||l.ST.userName,t=e||l.ST.userHead;l.Douyin.videos.forEach(e=>{e.sender===n&&(e.head=t)}),l.Douyin.userHead=e,l.Douyin.saveSettings(),h.value=!1})()},Ce=e=>{const t=l.Douyin.videos.findIndex(n=>n.id===e.id);-1!==t&&(l.Douyin.activeVideoIndex=t,n.value='home',K()),C.value=!1};return(e,M)=>(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('div',Ni,[(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('svg',{class:'back-icon-fixed',viewBox:'0 0 1024 1024',width:'28',height:'28',fill:'#ffffff',onClick:M[0]||(M[0]=e=>(0,i.unref)(l).phone.activeApp='home')},[...M[28]||(M[28]=[(0,i.createElementVNode)('path',{d:'M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z'},null,-1)])],512)),[[i.vShow,'home'===n.value&&!C.value&&!H.value&&!a.value]]),(0,i.withDirectives)((0,i.createElementVNode)('div',Qi,[(0,i.createElementVNode)('div',{ref_key:'videoContainerRef',ref:G,class:'video-container',style:(0,i.normalizeStyle)({transform:`translateY(-${q.value}px)`}),onTouchstart:ee,onTouchmove:ne,onTouchend:te},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).Douyin.videos,e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'video-item'},[(0,i.createElementVNode)('div',{class:'video-background',style:(0,i.normalizeStyle)(e.video?`background-image: url(${e.video})`:'background-color: #000')},[e.video?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ti,[e.content||e.textContent?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'text-video-content-overlay',innerHTML:t(e.content||e.textContent)},null,8,Mi)):(0,i.createCommentVNode)('v-if',!0)])):((0,i.openBlock)(),(0,i.createElementBlock)('div',Vi,[e.content||e.textContent||e.title?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'text-video-content',innerHTML:t(e.content||e.textContent||e.title)},null,8,_i)):((0,i.openBlock)(),(0,i.createElementBlock)('span',zi,'视频加载中...'))]))],4),(0,i.createElementVNode)('div',Fi,[(0,i.createElementVNode)('div',{class:'sidebar-item avatar-container',onClick:(0,i.withModifiers)(t=>(e=>{const t=e.sender,a=l.Douyin.userName||l.ST.userName;if(t===a)n.value='me';else{const n=Object.values(l.QQ.chars).find(e=>(e.name===t||e.douyinName===t)&&'friend'===e.chartype);if(n)de(n);else{const n={name:t,head:e.head,douyinId:'',likes:e.like||'0',friends:'0',following:'0',followers:'0'};de(n)}}})(e),['stop'])},[(0,i.createElementVNode)('div',{class:'avatar',style:(0,i.normalizeStyle)(`background-image: url('${e.head}')`)},null,4),e.sender!==((0,i.unref)(l).Douyin.userName||(0,i.unref)(l).ST.userName)?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ii,' + ')):(0,i.createCommentVNode)('v-if',!0)],8,Di),(0,i.createElementVNode)('div',{class:'sidebar-item',onClick:n=>(e=>{if(e.isLike=!e.isLike,e.isLike){const n=parseFloat(e.like);isNaN(n)}})(e)},[((0,i.openBlock)(),(0,i.createElementBlock)('svg',{viewBox:'0 0 1024 1024',width:'35',height:'35',fill:e.isLike?'#fe2c55':'#ffffff'},[...M[29]||(M[29]=[(0,i.createElementVNode)('path',{d:'M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z'},null,-1)])],8,Ui)),(0,i.createElementVNode)('span',$i,(0,i.toDisplayString)(e.like),1)],8,ji),(0,i.createElementVNode)('div',{class:'sidebar-item',onClick:n=>(e=>{console.log('Show comments for video:',e.id),E.value=e.comments||[],k.value=!0})(e)},[M[30]||(M[30]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'35',height:'35',fill:'#ffffff'},[(0,i.createElementVNode)('path',{d:'M904 512c0 238-192 432-428 432a454.4 454.4 0 0 1-137.6-21.2L120 976l62.4-180.8A397.6 397.6 0 0 1 80 512C80 274 272 80 508 80s428 194 396 432z',opacity:'0.9'})],-1)),(0,i.createElementVNode)('span',Yi,(0,i.toDisplayString)(e.comment),1)],8,Hi),(0,i.createElementVNode)('div',Wi,[M[31]||(M[31]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'35',height:'35',fill:'#ffffff'},[(0,i.createElementVNode)('path',{d:'M512 85.333333C276.352 85.333333 85.333333 276.352 85.333333 512s191.018667 426.666667 426.666667 426.666667 426.666667-191.018667 426.666667-426.666667S747.648 85.333333 512 85.333333z m0 768c-188.16 0-341.333333-153.173333-341.333333-341.333333s153.173333-341.333333 341.333333-341.333333 341.333333 153.173333 341.333333 341.333333-153.173333 341.333333-341.333333 341.333333z',opacity:'0.9'}),(0,i.createElementVNode)('path',{d:'M512 256l-170.666667 298.666667h128v213.333333h85.333334v-213.333333h128z',fill:'#ffffff'})],-1)),(0,i.createElementVNode)('span',Pi,(0,i.toDisplayString)(e.collect),1)]),(0,i.createElementVNode)('div',Oi,[M[32]||(M[32]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'35',height:'35',fill:'#ffffff'},[(0,i.createElementVNode)('path',{d:'M741.12 650.24c-53.76 0-101.76 23.04-135.68 59.52l-235.52-136.96c6.4-18.56 10.24-38.4 10.24-59.52 0-19.2-3.2-37.76-8.96-55.04l238.08-142.72C643.2 353.28 690.56 378.88 741.12 378.88c94.08 0 170.24-76.16 170.24-170.24S835.2 38.4 741.12 38.4 570.88 114.56 570.88 208.64c0 21.12 4.48 40.96 11.52 59.52l-234.88 140.8c-33.92-38.4-83.2-63.36-138.24-63.36C115.2 345.6 38.4 422.4 38.4 517.12s76.8 171.52 170.88 171.52c53.12 0 100.48-23.04 133.76-58.88l238.08 138.24c-5.76 16.64-8.96 34.56-8.96 53.12 0 94.08 76.16 170.24 170.24 170.24 94.08 0 170.24-76.16 170.24-170.24s-77.44-170.88-171.52-170.88z',opacity:'0.9'})],-1)),(0,i.createElementVNode)('span',Li,(0,i.toDisplayString)(e.share),1)]),(0,i.createElementVNode)('div',qi,[(0,i.createElementVNode)('div',Ri,[(0,i.createElementVNode)('div',{class:'record-img',style:(0,i.normalizeStyle)(`background-image: url('${e.head}')`)},null,4)])])]),(0,i.createElementVNode)('div',Xi,[(0,i.createElementVNode)('div',Zi,'@'+(0,i.toDisplayString)(e.sender),1),(0,i.createElementVNode)('div',{class:'description',innerHTML:t(e.content||e.textContent||e.title)},null,8,Gi),(0,i.createElementVNode)('div',Ji,[M[33]||(M[33]=(0,i.createElementVNode)('div',{class:'music-icon'},'🎵',-1)),(0,i.createElementVNode)('div',Ki,[(0,i.createElementVNode)('div',eo,(0,i.toDisplayString)(e.music),1)])])])]))),128))],36),M[34]||(M[34]=(0,i.createStaticVNode)('<div class="top-nav" data-v-8ace24c2><div class="nav-item" data-v-8ace24c2>直播</div><div class="nav-item" data-v-8ace24c2>北京</div><div class="nav-item active" data-v-8ace24c2>推荐</div><div class="nav-item" data-v-8ace24c2>关注</div><svg class="search-icon" viewBox="0 0 1024 1024" width="20" height="20" fill="#ffffff" data-v-8ace24c2><path d="M448 768A320 320 0 1 0 448 128a320 320 0 0 0 0 640z m297.344-76.992l214.592 214.592-54.336 54.336-214.592-214.592a384 384 0 1 1 54.336-54.336z" data-v-8ace24c2></path></svg></div>',1))],512),[[i.vShow,'home'===n.value]]),'me'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',no,[(0,i.createElementVNode)('div',to,[M[36]||(M[36]=(0,i.createElementVNode)('div',{class:'me-bg'},null,-1)),(0,i.createElementVNode)('div',{class:'me-avatar',style:(0,i.normalizeStyle)(`background-image: url('${(0,i.unref)(l).Douyin.userHead||(0,i.unref)(l).ST.userHead}')`)},[(0,i.createElementVNode)('div',{class:'edit-avatar-hint',onClick:ce},'📷')],4),(0,i.createElementVNode)('div',ao,[c.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',oo,[(0,i.withDirectives)((0,i.createElementVNode)('input',{ref_key:'nameInputRef',ref:p,'onUpdate:modelValue':M[1]||(M[1]=e=>d.value=e),class:'name-input',placeholder:'输入昵称',onBlur:re,onKeyup:(0,i.withKeys)(re,['enter'])},null,544),[[i.vModelText,d.value]])])):((0,i.openBlock)(),(0,i.createElementBlock)('div',io,[(0,i.createTextVNode)((0,i.toDisplayString)((0,i.unref)(l).Douyin.userName||(0,i.unref)(l).ST.userName)+' ',1),(0,i.createElementVNode)('span',{class:'edit-icon',onClick:oe},'✎')])),(0,i.createElementVNode)('div',ro,[M[35]||(M[35]=(0,i.createTextVNode)(' 抖音号： ',-1)),m.value?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('input',{key:1,ref_key:'userDouyinIdInputRef',ref:A,'onUpdate:modelValue':M[2]||(M[2]=e=>u.value=e),class:'douyin-id-input',onBlur:le,onKeyup:(0,i.withKeys)(le,['enter'])},null,544)),[[i.vModelText,u.value]]):((0,i.openBlock)(),(0,i.createElementBlock)('span',{key:0,onClick:se},(0,i.toDisplayString)((0,i.unref)(l).Douyin.userDouyinId||'88888888')+' ✎',1))])])]),(0,i.createElementVNode)('div',so,[(0,i.createElementVNode)('div',lo,[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)((0,i.unref)(l).Douyin.getUserVideos((0,i.unref)(l).Douyin.userName||(0,i.unref)(l).ST.userName).reduce((e,n)=>e+(parseInt(n.like)||0),0)),1),M[37]||(M[37]=(0,i.createTextVNode)(' 获赞 ',-1))]),(0,i.createElementVNode)('div',{class:'stat-item',onClick:M[3]||(M[3]=e=>I('friends'))},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)((0,i.unref)(l).Douyin.friends||0),1),M[38]||(M[38]=(0,i.createTextVNode)(' 朋友 ',-1))]),(0,i.createElementVNode)('div',{class:'stat-item',onClick:M[4]||(M[4]=e=>I('following'))},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)((0,i.unref)(l).Douyin.following||0),1),M[39]||(M[39]=(0,i.createTextVNode)(' 关注 ',-1))]),(0,i.createElementVNode)('div',{class:'stat-item',onClick:M[5]||(M[5]=e=>I('followers'))},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)((0,i.unref)(l).Douyin.followers||0),1),M[40]||(M[40]=(0,i.createTextVNode)(' 粉丝 ',-1))])]),(0,i.createElementVNode)('div',co,[(0,i.createElementVNode)('div',po,' 作品 '+(0,i.toDisplayString)((0,i.unref)(l).Douyin.getUserVideos((0,i.unref)(l).Douyin.userName||(0,i.unref)(l).ST.userName).length),1),M[41]||(M[41]=(0,i.createElementVNode)('div',{class:'me-tab'},'私密',-1)),M[42]||(M[42]=(0,i.createElementVNode)('div',{class:'me-tab'},'推荐',-1)),M[43]||(M[43]=(0,i.createElementVNode)('div',{class:'me-tab'},'收藏',-1)),M[44]||(M[44]=(0,i.createElementVNode)('div',{class:'me-tab'},'喜欢',-1))]),(0,i.createElementVNode)('div',mo,[(0,i.createElementVNode)('div',uo,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).Douyin.getUserVideos((0,i.unref)(l).Douyin.userName||(0,i.unref)(l).ST.userName),e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'work-item',onClick:n=>Ce(e)},[(0,i.createElementVNode)('div',{class:'work-cover',style:(0,i.normalizeStyle)(e.video?`background-image: url(${e.video})`:'background-color: #333')},[e.video?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('div',ho,(0,i.toDisplayString)(e.title),1))],4),(0,i.createElementVNode)('div',go,[M[45]||(M[45]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'12',height:'12',fill:'#fff'},[(0,i.createElementVNode)('path',{d:'M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z'})],-1)),(0,i.createTextVNode)(' '+(0,i.toDisplayString)(e.like),1)])],8,Ao))),128))]),0===(0,i.unref)(l).Douyin.getUserVideos((0,i.unref)(l).Douyin.userName||(0,i.unref)(l).ST.userName).length?((0,i.openBlock)(),(0,i.createElementBlock)('div',Co,' 暂无作品 ')):(0,i.createCommentVNode)('v-if',!0)])])):(0,i.createCommentVNode)('v-if',!0),a.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',fo,[(0,i.createElementVNode)('div',vo,[(0,i.createElementVNode)('div',{onClick:M[6]||(M[6]=e=>a.value=!1)},'取消'),M[46]||(M[46]=(0,i.createElementVNode)('div',{class:'post-title'},'发布作品',-1)),(0,i.createElementVNode)('div',{class:'post-submit',onClick:ie},'发布')]),(0,i.createElementVNode)('div',bo,[(0,i.createElementVNode)('div',xo,[M[47]||(M[47]=(0,i.createElementVNode)('label',null,'标题',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':M[7]||(M[7]=e=>r.value=e),type:'text',placeholder:'输入标题 (可选)'},null,512),[[i.vModelText,r.value]])]),(0,i.createElementVNode)('div',yo,[M[48]||(M[48]=(0,i.createElementVNode)('label',null,'内容',-1)),(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':M[8]||(M[8]=e=>o.value=e),placeholder:'添加作品描述...'},null,512),[[i.vModelText,o.value]])]),(0,i.createElementVNode)('div',Bo,[M[49]||(M[49]=(0,i.createElementVNode)('label',null,'BGM 名字',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':M[9]||(M[9]=e=>s.value=e),type:'text',placeholder:'输入背景音乐名称 (可选)'},null,512),[[i.vModelText,s.value]])])])])):(0,i.createCommentVNode)('v-if',!0),'friends'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',wo,[M[50]||(M[50]=(0,i.createStaticVNode)('<div class="friends-header" data-v-8ace24c2><div class="friends-title" data-v-8ace24c2>朋友</div><div class="friends-add-icon" data-v-8ace24c2><svg viewBox="0 0 1024 1024" width="20" height="20" fill="#ffffff" data-v-8ace24c2><path d="M512 832a32 32 0 0 1-32-32v-256H224a32 32 0 0 1 0-64h256V224a32 32 0 0 1 64 0v256h256a32 32 0 0 1 0 64H544v256a32 32 0 0 1-32 32z" data-v-8ace24c2></path></svg></div></div>',1)),(0,i.createElementVNode)('div',ko,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(Object.entries((0,i.unref)(l).QQ.chars).filter(([e,n])=>'friend'===n.chartype),([e,n])=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e,class:'friend-item',onClick:e=>de(n)},[(0,i.createElementVNode)('div',{class:'friend-avatar',style:(0,i.normalizeStyle)(`background-image: url('${n.douyinHead||n.head||''}')`)},null,4),(0,i.createElementVNode)('div',So,[(0,i.createElementVNode)('div',No,[(0,i.createElementVNode)('div',Qo,(0,i.toDisplayString)(n.douyinName||e),1)]),n.douyinId?((0,i.openBlock)(),(0,i.createElementBlock)('div',Vo,'抖音号: '+(0,i.toDisplayString)(n.douyinId),1)):((0,i.openBlock)(),(0,i.createElementBlock)('div',_o,'未设置抖音号'))])],8,Eo))),128))])])):(0,i.createCommentVNode)('v-if',!0),'message'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',zo,[M[52]||(M[52]=(0,i.createElementVNode)('div',{class:'message-header'},[(0,i.createElementVNode)('div',{class:'message-title'},'消息'),(0,i.createElementVNode)('div',{class:'message-actions'})],-1)),(0,i.createElementVNode)('div',To,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).Douyin.chathistory,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'message-item',onClick:e=>W(String(n))},[(0,i.createElementVNode)('div',{class:'message-avatar',style:(0,i.normalizeStyle)(`background-image: url('${O(String(n))}')`)},[e.unread?((0,i.openBlock)(),(0,i.createElementBlock)('div',Fo,(0,i.toDisplayString)(e.unread),1)):(0,i.createCommentVNode)('v-if',!0)],4),(0,i.createElementVNode)('div',Do,[(0,i.createElementVNode)('div',Io,[(0,i.createElementVNode)('span',jo,(0,i.toDisplayString)(L(String(n))),1),(0,i.createElementVNode)('span',Uo,(0,i.toDisplayString)(e.time||''),1)]),(0,i.createElementVNode)('div',$o,(0,i.toDisplayString)(e.lastMsg||'暂无消息'),1)])],8,Mo))),128)),0===Object.keys((0,i.unref)(l).Douyin.chathistory).length?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ho,[...M[51]||(M[51]=[(0,i.createElementVNode)('div',{style:{'font-size':'40px','margin-bottom':'20px'}},'💬',-1),(0,i.createTextVNode)(' 暂无消息 ',-1)])])):(0,i.createCommentVNode)('v-if',!0)])])):(0,i.createCommentVNode)('v-if',!0),h.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Yo,[(0,i.createElementVNode)('div',Wo,[M[53]||(M[53]=(0,i.createElementVNode)('div',{class:'dialog-title'},'设置头像链接',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':M[10]||(M[10]=e=>g.value=e),placeholder:'输入图片链接',class:'dialog-input'},null,512),[[i.vModelText,g.value]]),(0,i.createElementVNode)('div',Po,[(0,i.createElementVNode)('button',{onClick:M[11]||(M[11]=e=>h.value=!1)},'取消'),(0,i.createElementVNode)('button',{class:'confirm',onClick:ge},'确定')])])])):(0,i.createCommentVNode)('v-if',!0),T.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Oo,[(0,i.createElementVNode)('div',Lo,[M[54]||(M[54]=(0,i.createElementVNode)('div',{class:'dialog-title'},'设置数值',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':M[12]||(M[12]=e=>D.value=e),type:'number',placeholder:'输入数值',class:'dialog-input',onKeyup:(0,i.withKeys)(U,['enter'])},null,544),[[i.vModelText,D.value]]),(0,i.createElementVNode)('div',qo,[(0,i.createElementVNode)('button',{onClick:M[13]||(M[13]=e=>T.value=!1)},'取消'),(0,i.createElementVNode)('button',{class:'confirm',onClick:U},'确定')])])])):(0,i.createCommentVNode)('v-if',!0),C.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ro,[(0,i.createElementVNode)('div',{class:'back-btn',onClick:M[14]||(M[14]=e=>C.value=!1)},[...M[55]||(M[55]=[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'24',height:'24',fill:'#ffffff'},[(0,i.createElementVNode)('path',{d:'M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z'})],-1)])]),(0,i.createElementVNode)('div',Xo,[M[57]||(M[57]=(0,i.createElementVNode)('div',{class:'me-bg'},null,-1)),(0,i.createElementVNode)('div',{class:'me-avatar',style:(0,i.normalizeStyle)(`background-image: url('${f.value.douyinHead||f.value.head}')`)},[(0,i.createElementVNode)('div',{class:'edit-avatar-hint',onClick:he},'📷')],4),(0,i.createElementVNode)('div',Zo,[y.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Jo,[(0,i.withDirectives)((0,i.createElementVNode)('input',{ref_key:'friendNameInputRef',ref:w,'onUpdate:modelValue':M[15]||(M[15]=e=>B.value=e),class:'name-input',placeholder:'输入昵称',onBlur:Ae,onKeyup:(0,i.withKeys)(Ae,['enter'])},null,544),[[i.vModelText,B.value]])])):((0,i.openBlock)(),(0,i.createElementBlock)('div',Go,[(0,i.createTextVNode)((0,i.toDisplayString)(f.value.douyinName||f.value.name)+' ',1),(0,i.createElementVNode)('span',{class:'edit-icon',onClick:ue},'✎')])),(0,i.createElementVNode)('div',Ko,[M[56]||(M[56]=(0,i.createTextVNode)(' 抖音号： ',-1)),v.value?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('input',{key:0,ref_key:'douyinIdInput',ref:x,'onUpdate:modelValue':M[16]||(M[16]=e=>b.value=e),class:'douyin-id-input',onBlur:me,onKeyup:(0,i.withKeys)(me,['enter'])},null,544)),[[i.vModelText,b.value]]):((0,i.openBlock)(),(0,i.createElementBlock)('span',{key:1,onClick:pe},(0,i.toDisplayString)(f.value.douyinId||'点击设置')+' ✎',1))])])]),(0,i.createElementVNode)('div',er,[(0,i.createElementVNode)('div',nr,[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)((0,i.unref)(l).Douyin.getUserVideos(f.value.douyinName||f.value.name).reduce((e,n)=>e+(parseInt(n.like)||0),0)),1),M[58]||(M[58]=(0,i.createTextVNode)(' 获赞 ',-1))]),(0,i.createElementVNode)('div',{class:'stat-item',onClick:M[17]||(M[17]=e=>j('friends'))},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(f.value.douyinFriends||f.value.friends||0),1),M[59]||(M[59]=(0,i.createTextVNode)(' 朋友 ',-1))]),(0,i.createElementVNode)('div',{class:'stat-item',onClick:M[18]||(M[18]=e=>j('following'))},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(f.value.douyinFollowing||f.value.following||0),1),M[60]||(M[60]=(0,i.createTextVNode)(' 关注 ',-1))]),(0,i.createElementVNode)('div',{class:'stat-item',onClick:M[19]||(M[19]=e=>j('followers'))},[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(f.value.douyinFollowers||f.value.followers||0),1),M[61]||(M[61]=(0,i.createTextVNode)(' 粉丝 ',-1))])]),(0,i.createElementVNode)('div',tr,[(0,i.createElementVNode)('div',{class:'action-btn message-btn',onClick:M[20]||(M[20]=e=>{return W((n=f.value,Object.keys(l.QQ.chars).find(e=>l.QQ.chars[e]===n)||n.name));var n})},'发私信')]),(0,i.createElementVNode)('div',ar,[(0,i.createElementVNode)('div',ir,' 作品 '+(0,i.toDisplayString)((0,i.unref)(l).Douyin.getUserVideos(f.value.douyinName||f.value.name).length),1),M[62]||(M[62]=(0,i.createElementVNode)('div',{class:'me-tab'},'喜欢',-1))]),(0,i.createElementVNode)('div',or,[(0,i.createElementVNode)('div',rr,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).Douyin.getUserVideos(f.value.douyinName||f.value.name),e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'work-item',onClick:n=>Ce(e)},[(0,i.createElementVNode)('div',{class:'work-cover',style:(0,i.normalizeStyle)(e.video?`background-image: url(${e.video})`:'background-color: #333')},[e.video?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('div',lr,(0,i.toDisplayString)(e.title),1))],4),(0,i.createElementVNode)('div',cr,[M[63]||(M[63]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'12',height:'12',fill:'#fff'},[(0,i.createElementVNode)('path',{d:'M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z'})],-1)),(0,i.createTextVNode)(' '+(0,i.toDisplayString)(e.like),1)])],8,sr))),128))]),0===(0,i.unref)(l).Douyin.getUserVideos(f.value.douyinName||f.value.name).length?((0,i.openBlock)(),(0,i.createElementBlock)('div',dr,' 暂无作品 ')):(0,i.createCommentVNode)('v-if',!0)])])):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('div',pr,[(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['tab-item',{active:'home'===n.value}]),onClick:M[21]||(M[21]=e=>n.value='home')},'首页',2),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['tab-item',{active:'friends'===n.value}]),onClick:M[22]||(M[22]=e=>n.value='friends')},'朋友',2),(0,i.createElementVNode)('div',{class:'add-btn',onClick:M[23]||(M[23]=e=>a.value=!0)},[...M[64]||(M[64]=[(0,i.createElementVNode)('div',{class:'add-icon'},'+',-1)])]),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['tab-item',{active:'message'===n.value}]),onClick:M[24]||(M[24]=e=>n.value='message')},'消息',2),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['tab-item',{active:'me'===n.value}]),onClick:M[25]||(M[25]=e=>n.value='me')},'我',2)]),H.value?((0,i.openBlock)(),(0,i.createBlock)(Si,{key:7,chatId:Y.value,onBack:P},null,8,['chatId'])):(0,i.createCommentVNode)('v-if',!0),k.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:8,class:'comment-drawer-mask',onClick:ae},[(0,i.createElementVNode)('div',{class:'comment-drawer',onClick:M[27]||(M[27]=(0,i.withModifiers)(()=>{},['stop']))},[(0,i.createElementVNode)('div',mr,[(0,i.createElementVNode)('div',ur,'评论 ('+(0,i.toDisplayString)(E.value.length)+')',1),(0,i.createElementVNode)('div',{class:'comment-close',onClick:ae},'×')]),(0,i.createElementVNode)('div',Ar,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(E.value,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'comment-item',onClick:n=>(e=>{N.value=e,S.value=''})(e)},[(0,i.createElementVNode)('div',{class:'comment-avatar',style:(0,i.normalizeStyle)(`background-image: url('${e.head}')`)},null,4),(0,i.createElementVNode)('div',gr,[(0,i.createElementVNode)('div',Cr,(0,i.toDisplayString)(e.sender),1),(0,i.createElementVNode)('div',fr,[e.replyTo?((0,i.openBlock)(),(0,i.createElementBlock)('span',vr,'回复 '+(0,i.toDisplayString)(e.replyTo)+': ',1)):(0,i.createCommentVNode)('v-if',!0),(0,i.createTextVNode)(' '+(0,i.toDisplayString)(e.content),1)]),(0,i.createElementVNode)('div',br,[(0,i.createElementVNode)('span',xr,(0,i.toDisplayString)(e.time),1),M[65]||(M[65]=(0,i.createElementVNode)('span',{class:'comment-reply'},'回复',-1))])]),(0,i.createElementVNode)('div',yr,[M[66]||(M[66]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'20',height:'20',fill:'#999'},[(0,i.createElementVNode)('path',{d:'M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z'})],-1)),(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(e.like),1)])],8,hr))),128)),0===E.value.length?((0,i.openBlock)(),(0,i.createElementBlock)('div',Br,'暂无评论，快来抢沙发')):(0,i.createCommentVNode)('v-if',!0)]),(0,i.createElementVNode)('div',wr,[N.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',kr,[(0,i.createElementVNode)('span',null,'回复 @'+(0,i.toDisplayString)(N.value.sender)+':',1),(0,i.createElementVNode)('span',{class:'cancel-reply',onClick:Q},'×')])):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('div',Er,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':M[26]||(M[26]=e=>S.value=e),type:'text',placeholder:N.value?`回复 @${N.value.sender}:`:'善语结善缘，恶语伤人心',onKeyup:(0,i.withKeys)(V,['enter'])},null,40,Sr),[[i.vModelText,S.value]]),(0,i.createElementVNode)('div',{class:'emoji-icon',onClick:V},'↑')])])])])):(0,i.createCommentVNode)('v-if',!0)],512)),[[i.vShow,'Douyin'==(0,i.unref)(l).phone.activeApp]])}});a(2193);const Qr=(0,Xe.A)(Nr,[['__scopeId','data-v-8ace24c2']]),Vr=toastr;var _r=a.n(Vr);const zr=['data-name'],Tr={class:'Tinder_content_wrapper'},Mr={key:0,class:'Tinder_chat_name'},Fr=['innerHTML'],Dr={class:'Tinder_img_container'},Ir={key:0},jr=['src'],Ur={key:1,class:'Tinder_fake_img'},$r=['innerHTML'],Hr={key:2,class:'Tinder_additional_text'},Yr={class:'Tinder_voice_main'},Wr={key:0,class:'Tinder_voice_icon'},Pr={viewBox:'0 0 1024 1024',width:'20',height:'20',fill:'currentColor',style:{transform:'rotate(90deg)'}},Or={class:'Tinder_voice_duration'},Lr={key:1,class:'Tinder_voice_icon'},qr={viewBox:'0 0 1024 1024',width:'20',height:'20',fill:'currentColor',style:{transform:'rotate(-90deg)'}},Rr={key:0,class:'Tinder_voice_text'},Xr=(0,i.defineComponent)({__name:'bubble',props:{bubble:{},senderinfo:{}},setup(e){(0,i.useCssVars)(e=>({v76d025d9:d.value}));const n=e,t=e=>{if('user'===e)return l.Tinder.userName||l.ST.userName;let t=l.QQ.chars[e];if(!t){const n=e.toLowerCase();t=Object.values(l.QQ.chars).find(e=>e.name&&e.name.toLowerCase()===n)}if(t&&t.tinderName)return t.tinderName;if(n.senderinfo&&n.senderinfo.tinderName)return n.senderinfo.tinderName;const a=l.Tinder.matches.find(n=>n.name===e||n.id===e);if(a)return a.name;return Object.values(l.QQ.chars).find(n=>n.tinderName===e)?e:n.bubble.displayName?n.bubble.displayName:n.senderinfo&&n.senderinfo.name?n.senderinfo.name:t?t.name:e},a=e=>{let t='';if('user'===e)t=l.Tinder.userHead||l.ST.userHead;else{if(n.senderinfo&&(t=n.senderinfo.tinderHead||n.senderinfo.head),!t){let n=l.QQ.chars[e];if(!n){const t=e.toLowerCase();n=Object.values(l.QQ.chars).find(e=>e.name&&e.name.toLowerCase()===t)}n&&(t=n.tinderHead||n.head)}if(!t){const n=Object.values(l.QQ.chars).find(n=>n.tinderName===e);n&&(t=n.tinderHead||n.head)}if(!t){const n=l.Tinder.matches.find(n=>n.name===e||n.id===e);n&&(t=n.head)}}return t||'https://sharkpan.xyz/f/k7eU6/ComfyUI_00033_.png'},o=e=>e?e.replace(/\n/g,'<br>'):'',r=(0,i.ref)(!1),s=()=>{r.value=!r.value},c=(0,i.computed)(()=>l.ST.isMobile?'32px':'40px'),d=(0,i.computed)(()=>l.ST.isMobile?'14px':'15px');return(e,l)=>{return(0,i.openBlock)(),(0,i.createElementBlock)('div',{class:(0,i.normalizeClass)(['Tinder_chat_container','user'==n.bubble.sender?'Tinder_chat_mymsg':'Tinder_chat_charmsg'])},[(0,i.createCommentVNode)(' Avatar (Left) '),(0,i.createElementVNode)('div',{'data-name':n.bubble.sender,class:'Tinder_chat_head',style:(0,i.normalizeStyle)({backgroundImage:`url('${a(n.bubble.sender)}')`,width:c.value,height:c.value,minWidth:c.value,minHeight:c.value})},null,12,zr),(0,i.createCommentVNode)(' Content Wrapper '),(0,i.createElementVNode)('div',Tr,[(0,i.createCommentVNode)(' Name (Group/Context) '),'user'==n.bubble.sender||'Group'!=n.bubble.chartype&&!n.bubble.displayName?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('span',Mr,(0,i.toDisplayString)(t(n.bubble.sender)),1)),(0,i.createCommentVNode)(' Message Bubble '),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['Tinder_chat_msgdiv','user'==n.bubble.sender?'Tinder_user_bubble':'Tinder_other_bubble'])},[(0,i.createCommentVNode)(' Text '),(0,i.createCommentVNode)(' Fix: User messages might be missing msgtype initially, default to text if content exists '),'text'==n.bubble.msgtype||!n.bubble.msgtype&&n.bubble.content?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,innerHTML:o(n.bubble.content)},null,8,Fr)):'img'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[(0,i.createCommentVNode)(' Image '),(0,i.createElementVNode)('div',Dr,[(d=n.bubble.content,/^http/.test(d)?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ir,[(0,i.createElementVNode)('img',{src:n.bubble.content,class:'Tinder_chat_img'},null,8,jr)])):((0,i.openBlock)(),(0,i.createElementBlock)('div',Ur,[l[0]||(l[0]=(0,i.createElementVNode)('div',{style:{'text-align':'center',opacity:'0.6','font-size':'12px','margin-bottom':'5px'}},'[图片]',-1)),(0,i.createElementVNode)('div',{innerHTML:o(n.bubble.content)},null,8,$r)]))),n.bubble.additionalText?((0,i.openBlock)(),(0,i.createElementBlock)('div',Hr,(0,i.toDisplayString)(n.bubble.additionalText),1)):(0,i.createCommentVNode)('v-if',!0)])],2112)):'voice'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:2},[(0,i.createCommentVNode)(' Voice '),(0,i.createElementVNode)('div',{class:'Tinder_voice_container',onClick:s},[(0,i.createElementVNode)('div',Yr,[(0,i.createCommentVNode)(' Received Voice Icon '),'user'!=n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('span',Wr,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',Pr,[...l[1]||(l[1]=[(0,i.createElementVNode)('path',{d:'M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z','p-id':'38915'},null,-1)])]))])):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('span',Or,(0,i.toDisplayString)(n.bubble.voicetime||2)+'"',1),(0,i.createCommentVNode)(' Sent Voice Icon '),'user'==n.bubble.sender?((0,i.openBlock)(),(0,i.createElementBlock)('span',Lr,[((0,i.openBlock)(),(0,i.createElementBlock)('svg',qr,[...l[2]||(l[2]=[(0,i.createElementVNode)('path',{d:'M99.931429 457.782857c8.137143 8.137143 20.132571 7.716571 27.849142-0.420571 101.156571-107.574857 234.861714-164.150857 384.438858-164.150857 150.418286 0 284.562286 56.996571 385.28 164.571428 7.277714 7.296 18.870857 7.296 26.569142-0.859428l57.014858-56.996572c6.838857-7.277714 6.838857-16.713143 1.28-23.570286-96.859429-119.149714-279.003429-206.994286-470.144-206.994285S138.934857 257.206857 42.057143 376.356571c-5.997714 6.857143-5.577143 16.274286 1.28 23.588572z m171.428571 171.867429c8.576 8.996571 19.712 8.137143 27.849143-1.28 49.718857-55.296 130.285714-95.158857 213.010286-94.299429 83.565714-0.859429 163.712 40.283429 213.851428 95.579429 8.137143 8.557714 18.852571 8.557714 27.008-0.438857l63.853714-62.994286c6.857143-6.857143 7.716571-15.853714 1.28-23.149714-62.134857-76.708571-177.426286-133.284571-305.993142-133.284572-128.585143 0-243.858286 56.996571-306.011429 133.302857-6.418286 7.277714-5.558857 15.835429 1.28 23.131429z m240.859429 224.987428c8.996571 0 17.133714-4.717714 32.987428-20.132571l100.297143-96.438857c6.418286-5.997714 7.716571-15.414857 2.139429-22.710857-27.008-34.706286-77.568-64.713143-135.424-64.713143-59.154286 0-110.573714 31.286857-137.142858 67.291428-3.858286 5.997714-2.56 14.134857 3.84 20.132572l100.297143 96.438857c15.853714 15.414857 24.009143 20.132571 33.005715 20.132571z','p-id':'38915'},null,-1)])]))])):(0,i.createCommentVNode)('v-if',!0)]),r.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Rr,(0,i.toDisplayString)(n.bubble.content),1)):(0,i.createCommentVNode)('v-if',!0)])],2112)):(0,i.createCommentVNode)('v-if',!0)],2)])],2);var d}}});a(1980);const Zr=Xr,Gr={class:'tinder-container'},Jr={class:'header'},Kr={class:'nav-icons'},es={key:0,class:'explore-tab'},ns={key:0,class:'card-container'},ts={class:'card-info'},as={class:'card-name'},is={class:'card-bio'},os={key:1,class:'no-profiles'},rs={key:0},ss={key:1,class:'matches-tab'},ls={class:'matches-list-horizontal'},cs=['onClick'],ds={class:'match-name-small'},ps={key:0,class:'no-matches-hint'},ms={class:'messages-list'},us=['onClick'],As={class:'msg-content'},hs={class:'msg-name'},gs={class:'msg-preview'},Cs={key:0,class:'unread-dot'},fs={key:2,class:'profile-tab'},vs={class:'profile-content'},bs={class:'profile-card-refined'},xs={class:'avatar-wrapper'},ys={class:'profile-fields'},Bs={class:'field-group'},ws={class:'album-section'},ks={class:'section-header'},Es={class:'counter'},Ss={class:'album-grid'},Ns={class:'album-text-content-centered'},Qs=['onClick'],Vs={class:'modal-content'},_s={class:'input-group'},zs={class:'modal-buttons'},Ts={class:'modal-content'},Ms={class:'input-group'},Fs={class:'modal-buttons'},Ds={class:'modal-content'},Is={class:'input-group'},js={class:'modal-buttons'},Us={key:6,class:'chat-detail'},$s={class:'chat-header'},Hs={class:'chat-input-area'},Ys={key:7,class:'other-profile-overlay'},Ws={class:'other-profile-content'},Ps={key:0},Os={class:'other-info'},Ls={class:'other-name'},qs={class:'other-bio'},Rs={key:1,class:'other-info'},Xs={class:'input-group'},Zs={class:'input-group'},Gs={class:'input-group'},Js={class:'album-section'},Ks={class:'album-grid'},el={class:'album-text-content-centered'},nl=['onClick'],tl={class:'modal-buttons'},al={key:2,class:'album-section'},il={class:'album-grid'},ol={class:'album-text-content-centered'},rl={class:'other-actions'},sl='https://sharkpan.xyz/f/k7eU6/ComfyUI_00033_.png',ll=(0,i.defineComponent)({__name:'Tinder',setup(n){const t=(0,i.ref)('explore'),a=(0,i.ref)(l.Tinder.userBio||''),o=(0,i.ref)(l.Tinder.userName||l.ST.userName),r=(0,i.ref)(l.Tinder.userAlbum||[]),s=(0,i.ref)(!1),c=(0,i.ref)('user'),d=(0,i.ref)(!1),p=(0,i.ref)(!1),m=(0,i.ref)(''),u=(0,i.ref)(''),A=(0,i.ref)(''),h=(0,i.ref)(null),g=(0,i.ref)(!1),C=(0,i.ref)(''),f=(0,i.ref)(''),v=(0,i.ref)(''),b=()=>`hsl(${Math.floor(360*Math.random())}, 70%, 90%)`,x=()=>{l.phone.activeApp='home'},y=(0,i.ref)([]),B=(0,i.ref)(0),w=(0,i.computed)(()=>y.value[B.value]||null),k=(0,i.ref)(!1),E=(0,i.ref)(0),S=(0,i.ref)(0),N=(0,i.ref)(!1),Q=async()=>{if(!w.value)return;const n=document.querySelector('.tinder-card');if(n)try{_r().info('Saving card...');const t=await e(n,{useCORS:!0,scale:2,backgroundColor:null}),a=document.createElement('a');a.download=`tinder-${w.value.name}.png`,a.href=t.toDataURL('image/png'),document.body.appendChild(a),a.click(),document.body.removeChild(a),_r().success('Card saved!')}catch(e){console.error(e),_r().error('Failed to save card')}};(0,i.onMounted)(()=>{l.Tinder.chathistory||(l.Tinder.chathistory={}),l.Tinder.matches||(l.Tinder.matches=[]),l.Tinder.noped||(l.Tinder.noped=[]),l.Tinder.generatedStrangers||(l.Tinder.generatedStrangers=[]),T()});const V=async()=>{if(!N.value){N.value=!0,_r().info('Scanning for new people...');try{const e='生成10个Tinder人物资料。\n    格式必须是纯JSON数组，包含 name, age, bio。\n    范例：[{"name":"Momo","age":23,"bio":"简介..."}]\n    不要Markdown，不要解释。';let n='';try{console.log('开始生成数据'),n=await generate({user_input:e,max_chat_history:0})}catch(e){console.warn('Network warning (ignorable):',e)}if(!n)return void(N.value=!1);console.log('AI Raw Output:',n);let t='';const a=n.replace(/<thinking>[\s\S]*?<\/thinking>/gi,''),i=a.match(/\[\s*\{/);let o=[];if(i&&void 0!==i.index){const e=i.index,n=[];for(let t=a.length-1;t>e;t--)']'===a[t]&&n.push(t);let r=!1;for(const i of n){const n=a.substring(e,i+1);try{const e=JSON.parse(n);if(Array.isArray(e)){o=e,t=n,r=!0;break}}catch(e){try{const e=n.replace(/,(\s*\])/g,'$1'),a=JSON.parse(e);if(Array.isArray(a)){o=a,t=e,r=!0;break}}catch(e){}}}r||console.warn('Failed to parse any JSON candidate')}else console.warn('No JSON start pattern found.');if(Array.isArray(o)&&o.length>0){let e=0;for(const n of o){if(!n.name)continue;const t={id:Math.random().toString(36).substring(2),name:n.name,age:n.age||20+Math.floor(10*Math.random()),bio:n.bio||'这个人很懒，什么都没写',head:l.RedNote?.getRandomHead()?l.RedNote.getRandomHead():sl,album:[],isGenerated:!0};l.Tinder.addGeneratedStranger(t),e++}l.Tinder.saveSettings(),T(),_r().success(`Found ${e} new people!`)}else t&&_r().warning('Format incorrect, try again.')}catch(e){console.error('General Error:',e),e.message?.includes('disconnected port')||_r().error('Error generating profiles')}finally{N.value=!1}}},T=()=>{const e=[];for(const[n,t]of Object.entries(l.QQ.chars)){const a=t,i=a.name===l.ST.userName,o='Group'===a.chartype,r='friend'===a.chartype||'npc'===a.chartype;i||o||!r||e.push({id:n,name:a.tinderName||a.name,head:a.tinderHead||a.head||a.douyinHead||sl,bio:a.tinderBio||(a.douyinId?`Douyin: ${a.douyinId}`:'npc'===a.chartype?'NPC Profile':'Friend Profile'),age:20+Math.floor(10*Math.random()),album:(a.tinderAlbum||[]).map(e=>({...e,bg:e.bg||b()}))})}l.Tinder.generatedStrangers&&e.push(...l.Tinder.generatedStrangers.map(e=>({...e,head:e.head||sl,bio:e.bio||'',album:e.album||[]}))),0===e.length&&(e.push({id:'dummy1',name:'Alice',head:sl,bio:'Love hiking and coffee.',age:24,album:[]}),e.push({id:'dummy2',name:'Bob',head:sl,bio:'Tech enthusiast.',age:27,album:[]})),y.value=e.filter(e=>{const n=l.Tinder.matches.find(n=>n.id&&e.id?n.id===e.id:n.name===e.name),t=l.Tinder.noped&&l.Tinder.noped.includes(e.id||e.name);return!n&&!t})},M=e=>{k.value=!0,S.value='touches'in e?e.touches[0].clientX:e.clientX},F=e=>{if(!k.value)return;const n='touches'in e?e.touches[0].clientX:e.clientX;E.value=n-S.value},D=()=>{if(!k.value)return;k.value=!1;E.value>80?j():E.value<-80?I():E.value=0},I=()=>{E.value=-500;const e=w.value;if(e){const n=e.id||e.name;l.Tinder.addNope(n),l.Tinder.saveSettings()}setTimeout(H,300)},j=()=>{E.value=500;const e=w.value;e&&(l.Tinder.addMatch(e),l.Tinder.saveSettings(),ne(e),t.value='matches'),setTimeout(H,300)},U=()=>{j()},H=()=>{E.value=0,B.value++,B.value>=y.value.length&&(B.value=y.value.length)},Y=()=>{l.Tinder.userName=o.value,l.Tinder.userBio=a.value,l.Tinder.userAlbum=r.value,l.Tinder.saveSettings()},W=()=>{u.value=l.Tinder.userHead||l.ST.userHead||'',d.value=!0},P=()=>{u.value&&(l.Tinder.userHead=u.value,Y(),d.value=!1)},O=()=>{p.value=!0},L=()=>{l.Tinder.accountStatus='deleted',l.Tinder.deletionReason=A.value,l.Tinder.matches=[],l.Tinder.chathistory={},l.Tinder.noped=[],l.Tinder.userAlbum=[],l.Tinder.userName='',l.Tinder.userBio='',l.Tinder.userHead='',o.value='',a.value='',r.value=[],l.Tinder.saveSettings(),p.value=!1,_r().info('Account deleted successfully.'),x()},q=e=>{c.value=e,s.value=!0},R=()=>{if(m.value){const e={img:'',text:m.value,bg:b()};'user'===c.value?(r.value.push(e),Y()):'other'===c.value&&h.value&&(h.value.album||(h.value.album=[]),h.value.album.push(e)),m.value='',s.value=!1}},X=()=>{l.Tinder.matches=[],l.Tinder.noped=[],l.Tinder.chathistory={},B.value=0,T(),_r().info('Matches & History reset.')},Z=e=>!!e&&l.Tinder.matches.some(n=>n.id&&e.id?n.id===e.id:n.name===e.name),G=(0,i.ref)(null),J=(0,i.ref)(''),K=(0,i.ref)(null),ee=(0,i.computed)(()=>{if(!G.value)return[];const e=G.value.id;return l.Tinder.chathistory[e]?.msgs||[]}),ne=e=>{G.value=e,l.Tinder.chathistory[e.id]&&(l.Tinder.chathistory[e.id].unread=0),(0,i.nextTick)(me)},te=e=>{const n=l.Tinder.matches.find(n=>n.id===e);if(n)return n.name;let t=l.QQ.chars[e];if(!t){const n=e.toLowerCase();t=Object.values(l.QQ.chars).find(e=>e.name&&e.name.toLowerCase()===n||e.tinderName&&e.tinderName.toLowerCase()===n)}if(t)return t.tinderName||t.name;const a=l.Tinder.matches.find(n=>n.name&&n.name.toLowerCase()===e.toLowerCase());return a?a.name:e},ae=e=>{if(!e.album||0===e.album.length){const n=['Loving life!','Coffee addict ☕','Adventure awaits','Just vibing','Music is my life','Hello world'],t=3+Math.floor(4*Math.random()),a=[];for(let e=0;e<t;e++)a.push({text:n[Math.floor(Math.random()*n.length)],bg:b()});e.album=a}h.value=e,g.value=!1},ie=()=>{if(G.value){const e=G.value.id;let n=l.Tinder.matches.find(n=>n.id===e);if(n||(n=l.Tinder.matches.find(n=>n.name===e)),!n){const t=l.QQ.chars[e];n=t?{id:e,name:t.tinderName||t.name,head:t.tinderHead||t.head||sl,bio:t.tinderBio||(t.douyinId?`Douyin: ${t.douyinId}`:'No bio available'),age:25,album:(t.tinderAlbum||[]).map(e=>({...e,bg:e.bg||b()}))}:{id:e,name:e,head:sl,bio:'No bio available',age:25,album:[]}}ae(n)}},oe=()=>{h.value=null,g.value=!1},re=()=>{if(h.value){const e=h.value;ne(e),oe(),t.value='matches'}},se=()=>{h.value&&(C.value=h.value.name,f.value=h.value.bio,v.value=h.value.head,g.value=!0)},le=async()=>{if(h.value){const e=h.value.name,n=C.value,t=h.value.id;h.value.name=n,h.value.bio=f.value,h.value.head=v.value;let a=l.QQ.chars[t];if(!a){const e=Object.keys(l.QQ.chars).find(e=>l.QQ.chars[e].name===t);e&&(a=l.QQ.chars[e])}a&&(a.tinderName=n,a.tinderBio=f.value,a.tinderHead=v.value,a.tinderAlbum=h.value.album.map(e=>{const{bg:n,...t}=e;return t}),console.log(`Saving Tinder profile for ${a.name} (ID: ${t}) to worldbook...`),await l.QQ.saveChars());const i=l.Tinder.matches.findIndex(n=>n.id&&t?n.id===t:n.name===e);-1!==i&&(l.Tinder.matches[i]={...h.value},e!==n&&l.Tinder.chathistory[e]&&(l.Tinder.chathistory[n]=l.Tinder.chathistory[e],delete l.Tinder.chathistory[e]),await l.Tinder.saveSettings()),g.value=!1,_r().success('Profile updated')}},ce=()=>{G.value=null},de=e=>{const n=l.Tinder.matches.find(n=>n.id===e);if(n)return n.head;let t=l.QQ.chars[e];if(!t){const n=e.toLowerCase();t=Object.values(l.QQ.chars).find(e=>e.name&&e.name.toLowerCase()===n||e.tinderName&&e.tinderName.toLowerCase()===n)}if(t)return t.tinderHead||t.head;const a=l.Tinder.matches.find(n=>n.name&&n.name.toLowerCase()===e.toLowerCase());if(a)return a.head;if(e.includes(' & ')){const n=e.split(' & ')[0].toLowerCase(),t=Object.values(l.QQ.chars).find(e=>e.name&&e.name.toLowerCase()===n||e.tinderName&&e.tinderName.toLowerCase()===n);if(t)return t.tinderHead||t.head}return sl},pe=()=>{if(!J.value.trim()||!G.value)return;const e=J.value.trim(),n=G.value.id,t=(te(n),(new Date).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})),a={sender:'user',content:e,time:t};l.Tinder.addMsg(n,a);const o=`\n{{user}}在Tinder向${n}发送了消息: ${e}${`\n<tinder>{{user}}|${n}|${e}|${t}</tinder>`}`,r=$('#send_textarea').val(),s=('string'==typeof r?r:'').trim(),c=s?s+'\n\n'+o:o;$('#send_textarea').val(c)[0].dispatchEvent(new Event('input',{bubbles:!0})),J.value='',(0,i.nextTick)(me)},me=()=>{K.value&&(K.value.scrollTop=K.value.scrollHeight)};return(0,i.watch)(ee,()=>{G.value&&(0,i.nextTick)(me)},{deep:!0}),(e,n)=>(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)('div',Gr,[(0,i.createElementVNode)('div',Jr,[(0,i.createElementVNode)('div',{class:'logo',onClick:x},'🔥 Tinder'),(0,i.createElementVNode)('div',Kr,[(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['nav-icon',{active:'explore'===t.value}]),onClick:n[0]||(n[0]=e=>t.value='explore')},'🔍',2),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['nav-icon',{active:'matches'===t.value}]),onClick:n[1]||(n[1]=e=>t.value='matches')},'💬',2),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['nav-icon',{active:'profile'===t.value}]),onClick:n[2]||(n[2]=e=>t.value='profile')},'👤',2)])]),'explore'===t.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',es,[w.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',ns,[(0,i.createElementVNode)('div',{class:'tinder-card',style:(0,i.normalizeStyle)({transform:`translateX(${E.value}px) rotate(${.05*E.value}deg)`,transition:k.value?'none':'transform 0.3s ease'}),onMousedown:M,onTouchstart:M,onMousemove:F,onTouchmove:F,onMouseup:D,onTouchend:D,onMouseleave:D},[(0,i.createElementVNode)('div',{class:'card-image',style:(0,i.normalizeStyle)(`background-image: url('${w.value.head||sl}')`)},null,4),(0,i.createElementVNode)('div',ts,[(0,i.createElementVNode)('div',as,(0,i.toDisplayString)(w.value.name),1),(0,i.createElementVNode)('div',is,(0,i.toDisplayString)(w.value.bio||'No bio yet.'),1)]),(0,i.createElementVNode)('div',{class:'view-profile-btn',onClick:n[3]||(n[3]=(0,i.withModifiers)(e=>ae(w.value),['stop']))},'Info ⓘ'),(0,i.createElementVNode)('div',{class:'overlay nope',style:(0,i.normalizeStyle)({opacity:E.value<0?Math.min(Math.abs(E.value)/100,1):0})},'NOPE',4),(0,i.createElementVNode)('div',{class:'overlay like',style:(0,i.normalizeStyle)({opacity:E.value>0?Math.min(Math.abs(E.value)/100,1):0})},'YES',4)],36)])):((0,i.openBlock)(),(0,i.createElementBlock)('div',os,[(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['radar',{pulsing:N.value}]),onClick:V},null,2),N.value?((0,i.openBlock)(),(0,i.createElementBlock)('p',rs,'Searching for new people...')):((0,i.openBlock)(),(0,i.createElementBlock)('p',{key:1,style:{cursor:'pointer','text-decoration':'underline'},onClick:V},' Tap radar to find more people '))])),(0,i.createElementVNode)('div',{class:'action-buttons'},[(0,i.createElementVNode)('div',{class:'btn-nope',onClick:I},'✖'),(0,i.createElementVNode)('div',{class:'btn-superlike',onClick:U},'⭐'),(0,i.createElementVNode)('div',{class:'btn-like',onClick:j},'♥'),(0,i.createElementVNode)('div',{class:'btn-search',title:'Find New People',onClick:V},'🔍'),(0,i.createElementVNode)('div',{class:'btn-save',title:'Save Card',onClick:Q},'💾')])])):(0,i.createCommentVNode)('v-if',!0),'matches'===t.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',ss,[n[23]||(n[23]=(0,i.createElementVNode)('div',{class:'matches-header'},'New Matches',-1)),(0,i.createElementVNode)('div',ls,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).Tinder.matches,e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'match-avatar-item',onClick:n=>ae(e)},[(0,i.createElementVNode)('div',{class:'match-avatar',style:(0,i.normalizeStyle)(`background-image: url('${e.head||sl}')`)},null,4),(0,i.createElementVNode)('div',ds,(0,i.toDisplayString)(e.name),1)],8,cs))),128)),0===(0,i.unref)(l).Tinder.matches.length?((0,i.openBlock)(),(0,i.createElementBlock)('div',ps,'No matches yet')):(0,i.createCommentVNode)('v-if',!0)]),n[24]||(n[24]=(0,i.createElementVNode)('div',{class:'messages-header'},'Messages',-1)),(0,i.createElementVNode)('div',ms,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).Tinder.chathistory,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'message-item',onClick:e=>ne({id:n})},[(0,i.createElementVNode)('div',{class:'msg-avatar',style:(0,i.normalizeStyle)(`background-image: url('${de(String(n))}')`)},null,4),(0,i.createElementVNode)('div',As,[(0,i.createElementVNode)('div',hs,(0,i.toDisplayString)(te(String(n))),1),(0,i.createElementVNode)('div',gs,(0,i.toDisplayString)(e.lastMsg),1)]),e.unread?((0,i.openBlock)(),(0,i.createElementBlock)('div',Cs)):(0,i.createCommentVNode)('v-if',!0)],8,us))),128))])])):(0,i.createCommentVNode)('v-if',!0),'profile'===t.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',fs,[n[31]||(n[31]=(0,i.createElementVNode)('div',{class:'profile-header-bg'},null,-1)),(0,i.createElementVNode)('div',vs,[(0,i.createElementVNode)('div',bs,[(0,i.createElementVNode)('div',xs,[(0,i.createElementVNode)('div',{class:'my-avatar-large',style:(0,i.normalizeStyle)(`background-image: url('${(0,i.unref)(l).Tinder.userHead||(0,i.unref)(l).ST.userHead||sl}')`),onClick:W},[...n[25]||(n[25]=[(0,i.createElementVNode)('div',{class:'edit-avatar-hint'},'Edit',-1)])],4)]),(0,i.createElementVNode)('div',ys,[(0,i.createElementVNode)('div',Bs,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[4]||(n[4]=e=>o.value=e),type:'text',placeholder:'Your Name',class:'refined-input name-input',onChange:Y},null,544),[[i.vModelText,o.value]]),(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':n[5]||(n[5]=e=>a.value=e),placeholder:'Write something about yourself...',class:'refined-textarea bio-input',onChange:Y},null,544),[[i.vModelText,a.value]])]),(0,i.createElementVNode)('div',ws,[(0,i.createElementVNode)('div',ks,[n[26]||(n[26]=(0,i.createElementVNode)('span',{class:'section-title'},'My Text-Moments',-1)),(0,i.createElementVNode)('span',Es,(0,i.toDisplayString)(r.value.length),1)]),(0,i.createElementVNode)('div',Ss,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r.value,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'album-item text-album',style:(0,i.normalizeStyle)({background:e.bg||'#eee'})},[(0,i.createElementVNode)('div',Ns,[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(e.text),1)]),(0,i.createElementVNode)('div',{class:'album-remove',onClick:(0,i.withModifiers)(e=>(e=>{r.value.splice(e,1),Y()})(n),['stop'])},'✖',8,Qs)],4))),128)),(0,i.createElementVNode)('div',{class:'album-add',onClick:n[6]||(n[6]=e=>q('user'))},[...n[27]||(n[27]=[(0,i.createElementVNode)('div',{class:'add-icon'},'+',-1)])])])])])]),(0,i.createElementVNode)('div',{class:'settings-section refined'},[n[30]||(n[30]=(0,i.createElementVNode)('h3',null,'Settings',-1)),(0,i.createElementVNode)('div',{class:'settings-item',onClick:X},[...n[28]||(n[28]=[(0,i.createElementVNode)('div',{class:'icon-box'},'↺',-1),(0,i.createElementVNode)('div',{class:'setting-text'},[(0,i.createElementVNode)('span',null,'Reset Matches'),(0,i.createElementVNode)('small',null,'Start over with everyone')],-1)])]),(0,i.createElementVNode)('div',{class:'settings-item',onClick:O},[...n[29]||(n[29]=[(0,i.createElementVNode)('div',{class:'icon-box',style:{color:'#ff3b30',background:'#fff0f0'}},'✖',-1),(0,i.createElementVNode)('div',{class:'setting-text'},[(0,i.createElementVNode)('span',{style:{color:'#ff3b30'}},'Delete Account'),(0,i.createElementVNode)('small',null,'Permanently delete your account')],-1)])])])])])):(0,i.createCommentVNode)('v-if',!0),s.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:3,class:'modal-overlay',onClick:n[9]||(n[9]=(0,i.withModifiers)(e=>s.value=!1,['self']))},[(0,i.createElementVNode)('div',Vs,[n[33]||(n[33]=(0,i.createElementVNode)('h3',null,'Add to Album',-1)),(0,i.createElementVNode)('div',_s,[n[32]||(n[32]=(0,i.createElementVNode)('label',null,'Text / Caption',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[7]||(n[7]=e=>m.value=e),placeholder:'Say something...',class:'modal-input'},null,512),[[i.vModelText,m.value]])]),(0,i.createElementVNode)('div',zs,[(0,i.createElementVNode)('button',{class:'cancel-btn',onClick:n[8]||(n[8]=e=>s.value=!1)},'Cancel'),(0,i.createElementVNode)('button',{class:'confirm-btn',onClick:R},'Add')])])])):(0,i.createCommentVNode)('v-if',!0),d.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:4,class:'modal-overlay',onClick:n[12]||(n[12]=(0,i.withModifiers)(e=>d.value=!1,['self']))},[(0,i.createElementVNode)('div',Ts,[n[35]||(n[35]=(0,i.createElementVNode)('h3',null,'Edit Profile Picture',-1)),(0,i.createElementVNode)('div',Ms,[n[34]||(n[34]=(0,i.createElementVNode)('label',null,'Image URL',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[10]||(n[10]=e=>u.value=e),placeholder:'https://...',class:'modal-input'},null,512),[[i.vModelText,u.value]])]),(0,i.createElementVNode)('div',Fs,[(0,i.createElementVNode)('button',{class:'cancel-btn',onClick:n[11]||(n[11]=e=>d.value=!1)},'Cancel'),(0,i.createElementVNode)('button',{class:'confirm-btn',onClick:P},'Save')])])])):(0,i.createCommentVNode)('v-if',!0),p.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:5,class:'modal-overlay',onClick:n[15]||(n[15]=(0,i.withModifiers)(e=>p.value=!1,['self']))},[(0,i.createElementVNode)('div',Ds,[n[37]||(n[37]=(0,i.createElementVNode)('h3',null,'Delete Account',-1)),n[38]||(n[38]=(0,i.createElementVNode)('p',{style:{'font-size':'13px',color:'#666','margin-bottom':'15px'}},'Are you sure? This cannot be undone.',-1)),(0,i.createElementVNode)('div',Is,[n[36]||(n[36]=(0,i.createElementVNode)('label',null,'Reason for leaving (Optional)',-1)),(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':n[13]||(n[13]=e=>A.value=e),placeholder:'I found someone...',class:'modal-input',style:{height:'60px',resize:'none'}},null,512),[[i.vModelText,A.value]])]),(0,i.createElementVNode)('div',js,[(0,i.createElementVNode)('button',{class:'cancel-btn',onClick:n[14]||(n[14]=e=>p.value=!1)},'Cancel'),(0,i.createElementVNode)('button',{class:'confirm-btn',style:{background:'#ff3b30'},onClick:L},'Delete')])])])):(0,i.createCommentVNode)('v-if',!0),G.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Us,[(0,i.createElementVNode)('div',$s,[(0,i.createElementVNode)('div',{class:'back-btn',onClick:ce},'←'),(0,i.createElementVNode)('div',{class:'chat-avatar',style:(0,i.normalizeStyle)(`background-image: url('${de(G.value.id)}')`),onClick:ie},null,4),(0,i.createElementVNode)('div',{class:'chat-name',onClick:ie},(0,i.toDisplayString)(te(G.value.id)),1)]),(0,i.createElementVNode)('div',{ref_key:'chatContainer',ref:K,class:'chat-messages'},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(ee.value,(e,n)=>((0,i.openBlock)(),(0,i.createBlock)(Zr,{key:n,bubble:e,'is-group':'Private',senderinfo:G.value},null,8,['bubble','senderinfo']))),128))],512),(0,i.createElementVNode)('div',Hs,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[16]||(n[16]=e=>J.value=e),placeholder:'Type a message...',onKeyup:(0,i.withKeys)(pe,['enter'])},null,544),[[i.vModelText,J.value]]),(0,i.createElementVNode)('div',{class:'send-btn',onClick:pe},'Send')])])):(0,i.createCommentVNode)('v-if',!0),h.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ys,[(0,i.createElementVNode)('div',Ws,[(0,i.createElementVNode)('div',{class:'other-profile-close',onClick:oe},'✖'),g.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Rs,[(0,i.createElementVNode)('div',Xs,[n[39]||(n[39]=(0,i.createElementVNode)('label',null,'Avatar URL',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[17]||(n[17]=e=>v.value=e),class:'modal-input'},null,512),[[i.vModelText,v.value]])]),(0,i.createElementVNode)('div',Zs,[n[40]||(n[40]=(0,i.createElementVNode)('label',null,'Name',-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[18]||(n[18]=e=>C.value=e),class:'modal-input'},null,512),[[i.vModelText,C.value]])]),(0,i.createElementVNode)('div',Gs,[n[41]||(n[41]=(0,i.createElementVNode)('label',null,'Bio',-1)),(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':n[19]||(n[19]=e=>f.value=e),class:'modal-input',style:{height:'60px'}},null,512),[[i.vModelText,f.value]])]),(0,i.createElementVNode)('div',Js,[n[43]||(n[43]=(0,i.createElementVNode)('div',{class:'section-header'},[(0,i.createElementVNode)('span',{class:'section-title'},'Moments')],-1)),(0,i.createElementVNode)('div',Ks,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(h.value.album,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'album-item text-album',style:(0,i.normalizeStyle)({background:e.bg||'#eee'})},[(0,i.createElementVNode)('div',el,[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(e.text),1)]),(0,i.createElementVNode)('div',{class:'album-remove',onClick:(0,i.withModifiers)(e=>(e=>{h.value&&h.value.album&&h.value.album.splice(Number(e),1)})(n),['stop'])},'✖',8,nl)],4))),128)),(0,i.createElementVNode)('div',{class:'album-add',onClick:n[20]||(n[20]=e=>q('other'))},[...n[42]||(n[42]=[(0,i.createElementVNode)('div',{class:'add-icon'},'+',-1)])])])]),(0,i.createElementVNode)('div',tl,[(0,i.createElementVNode)('button',{class:'cancel-btn',onClick:n[21]||(n[21]=e=>g.value=!1)},'Cancel'),(0,i.createElementVNode)('button',{class:'confirm-btn',onClick:le},'Save')])])):((0,i.openBlock)(),(0,i.createElementBlock)('div',Ps,[(0,i.createElementVNode)('div',{class:'other-avatar',style:(0,i.normalizeStyle)(`background-image: url('${h.value.head}')`)},null,4),(0,i.createElementVNode)('div',Os,[(0,i.createElementVNode)('div',Ls,[(0,i.createTextVNode)((0,i.toDisplayString)(h.value.name)+' ',1),(0,i.createElementVNode)('span',{class:'edit-icon',onClick:se},'✎')]),(0,i.createElementVNode)('div',qs,(0,i.toDisplayString)(h.value.bio),1)])])),g.value?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('div',al,[n[44]||(n[44]=(0,i.createElementVNode)('div',{class:'section-header'},[(0,i.createElementVNode)('span',{class:'section-title'},'Moments')],-1)),(0,i.createElementVNode)('div',il,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(h.value.album,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'album-item text-album',style:(0,i.normalizeStyle)({background:e.bg||'#eee'})},[(0,i.createElementVNode)('div',ol,[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(e.text),1)])],4))),128))])])),(0,i.createElementVNode)('div',rl,[!Z(h.value)&&w.value&&w.value.name===h.value.name?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'btn-like-small',onClick:n[22]||(n[22]=()=>{j(),oe()})},' LIKE ')):Z(h.value)?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'btn-message-small',onClick:re},'MESSAGE')):(0,i.createCommentVNode)('v-if',!0)])])])):(0,i.createCommentVNode)('v-if',!0)],512)),[[i.vShow,'Tinder'==(0,i.unref)(l).phone.activeApp]])}});a(4069);const cl=(0,Xe.A)(ll,[['__scopeId','data-v-7cc11f32']]),dl={class:'ig-chat-detail'},pl={class:'ig-header'},ml={class:'ig-header-center-chat'},ul={class:'ig-chat-name-header'},Al={class:'ig-username-header'},hl={class:'ig-header-right'},gl={'aria-label':'Video Call',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24',style:{'margin-left':'20px'}},Cl=['src'],fl={key:0,class:'ig-message-img'},vl=['src'],bl={key:1,class:'ig-fake-img'},xl=['onClick'],yl={key:0,class:'ig-voice-content'},Bl={class:'ig-voice-time'},wl={key:1,class:'ig-voice-text-display'},kl={key:2,class:'ig-message-text'},El={class:'ig-chat-input-area'},Sl={class:'ig-input-bar'},Nl={key:1,class:'ig-actions'},Ql={key:0,class:'ig-emoji-panel'},Vl=['src','onClick'],_l={key:1,class:'ig-special-input-panel'},zl={class:'ig-special-header'},Tl={key:0},Ml={key:1},Fl=['placeholder'],Dl=(0,i.defineComponent)({__name:'ChatDetail',props:{chatId:{type:String,required:!0}},emits:['back'],setup(e,{emit:n}){const t=e,a=(0,i.ref)(''),o=(0,i.ref)(null),r=(0,i.ref)({show:!1,type:''}),s=(0,i.ref)(''),c=(0,i.computed)(()=>l.Instagram.chathistory[t.chatId]?.msgs||[]);function p(e){if('user'===e)return l.Instagram.userHead||l.ST.userHead;return d(e,'Instagram').head||'https://via.placeholder.com/56'}function m(e){if('user'===e)return l.Instagram.userName||l.ST.userName;return d(e,'Instagram').name||e}function u(e){e.target.style.display='none'}function A(){(0,i.nextTick)(()=>{o.value&&(o.value.scrollTop=o.value.scrollHeight)})}function h(e){r.value.show&&r.value.type===e?(r.value.show=!1,r.value.type=''):(r.value.show=!0,r.value.type=e,s.value=''),setTimeout(A,300)}function g(){if(!s.value.trim())return;const e=s.value.trim(),n=r.value.type,a=(new Date).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:!1});let i='image'===n?'img':'voice';'image'===n&&(i='img');const o={sender:'user',msgtype:i,content:e,time:a};'voice'===i&&(o.voicetime=Math.floor(10*Math.random())+2+'"'),l.Instagram.addMsg(t.chatId,o);const c=`[${'voice'===n?'yy':'img'}-${e}]`,d=`\n<instagram_msg>user|${t.chatId}|${c}|${a}</instagram_msg>`;f(`\n{{user}}发送了Instagram私信给${m(t.chatId)}：${c}${d}`),r.value.show=!1,s.value=''}function C(){if(!a.value.trim())return;const e=a.value.trim(),n=(new Date).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:!1});l.Instagram.addMsg(t.chatId,{sender:'user',msgtype:'text',content:e,time:n});const i=`\n<instagram_msg>user|${t.chatId}|${e}|${n}</instagram_msg>`;f(`\n{{user}}发送了Instagram私信给${m(t.chatId)}：${e}${i}`),a.value=''}function f(e){const n=$('#send_textarea').val(),t=('string'==typeof n?n:'').trim()+e;$('#send_textarea').val(t)[0].dispatchEvent(new Event('input',{bubbles:!0})),toastr.success('已生成私信指令，请点击发送')}return(0,i.watch)(()=>c.value.length,A),(0,i.onMounted)(A),(n,d)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',dl,[(0,i.createCommentVNode)(' Header '),(0,i.createElementVNode)('header',pl,[(0,i.createElementVNode)('div',{class:'ig-header-left',onClick:d[0]||(d[0]=e=>n.$emit('back'))},[...d[7]||(d[7]=[(0,i.createElementVNode)('svg',{'aria-label':'Back',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'21',x2:'3',y1:'12',y2:'12'}),(0,i.createElementVNode)('polyline',{fill:'none',points:'9 6 3 12 9 18',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})],-1)])]),(0,i.createElementVNode)('div',ml,[(0,i.createElementVNode)('div',{class:'ig-chat-avatar-header',style:(0,i.normalizeStyle)({backgroundImage:`url(${p(e.chatId)})`})},null,4),(0,i.createElementVNode)('div',ul,[(0,i.createElementVNode)('span',Al,(0,i.toDisplayString)(m(e.chatId)),1),d[8]||(d[8]=(0,i.createElementVNode)('span',{class:'ig-status-header'},'Active now',-1))])]),(0,i.createElementVNode)('div',hl,[d[10]||(d[10]=(0,i.createElementVNode)('svg',{'aria-label':'Audio Call',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M18.237 18.283a5.5 5.5 0 0 1-5.546.223 17.587 17.587 0 0 1-6.75-6.75 5.5 5.5 0 0 1 .222-5.546l1.222-1.921a2.227 2.227 0 0 1 3.51-.302l1.328 1.328a2.227 2.227 0 0 1 .15 2.858l-.66 1.049a.667.667 0 0 0 .193.855l3.203 2.136a.668.668 0 0 0 .855-.192l1.049-.66a2.228 2.228 0 0 1 2.859.15l1.327 1.327a2.227 2.227 0 0 1-.3 3.51l-1.923 1.222Z',fill:'none',stroke:'currentColor','stroke-linejoin':'round','stroke-width':'2'})],-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',gl,[...d[9]||(d[9]=[(0,i.createElementVNode)('path',{d:'M23 7.828a.999.999 0 0 0-1.161-.908l-3.385.677A2.997 2.997 0 0 0 16 5H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h11a3 3 0 0 0 2.454-2.597l3.385.677A.999.999 0 0 0 23 16.172V7.828Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'},null,-1)])]))])]),(0,i.createElementVNode)('div',{ref_key:'messagesContainer',ref:o,class:'ig-chat-messages'},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(c.value,(n,t)=>{return(0,i.openBlock)(),(0,i.createElementBlock)('div',{key:t,class:(0,i.normalizeClass)(['ig-message-row',{mine:'user'===n.sender}])},['user'!==n.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'ig-message-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${p(e.chatId)})`})},null,4)):(0,i.createCommentVNode)('v-if',!0),'user'===n.sender?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'ig-message-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${p('user')})`})},null,4)):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' Emoji Message (No Bubble) '),'emoji'===n.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:2,class:(0,i.normalizeClass)(['ig-message-emoji-container',{mine:'user'===n.sender}])},[(0,i.createElementVNode)('img',{src:n.emoji,class:'ig-emoji-large'},null,8,Cl)],2)):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:3},[(0,i.createCommentVNode)(' Normal Message Bubble '),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['ig-message-bubble',{mine:'user'===n.sender,'img-bubble':'img'===n.msgtype,'voice-bubble':'voice'===n.msgtype}])},['img'===n.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',fl,[(a=n.content,a&&(a.startsWith('http')||a.startsWith('data:'))?((0,i.openBlock)(),(0,i.createElementBlock)('img',{key:0,src:n.content,onError:u},null,40,vl)):((0,i.openBlock)(),(0,i.createElementBlock)('div',bl,[d[11]||(d[11]=(0,i.createElementVNode)('div',{class:'ig-fake-icon'},[(0,i.createElementVNode)('svg',{'aria-label':'Image',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('rect',{fill:'none',height:'18',rx:'3',ry:'3',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',width:'18',x:'3',y:'3'}),(0,i.createElementVNode)('path',{d:'m8.5 14.5 2.5 2.5 5-5 4.5 4.5',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('path',{d:'M8.5 10a1.5 1.5 0 1 1-1.5-1.5 1.5 1.5 0 0 1 1.5 1.5Z',fill:'currentColor'})])],-1)),(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(n.content),1)])))])):'voice'===n.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'ig-message-voice',onClick:e=>function(e){void 0===e.showText?e.showText=!0:e.showText=!e.showText}(n)},[n.showText?((0,i.openBlock)(),(0,i.createElementBlock)('div',wl,[(0,i.createElementVNode)('span',null,'[语音] '+(0,i.toDisplayString)(n.content),1)])):((0,i.openBlock)(),(0,i.createElementBlock)('div',yl,[d[12]||(d[12]=(0,i.createElementVNode)('div',{class:'ig-voice-control'},[(0,i.createElementVNode)('svg',{fill:'currentColor',height:'20',role:'img',viewBox:'0 0 24 24',width:'20'},[(0,i.createElementVNode)('path',{d:'M8 5v14l11-7z'})])],-1)),d[13]||(d[13]=(0,i.createStaticVNode)('<div class="ig-voice-wave" data-v-7eef9c62><div class="bar" data-v-7eef9c62></div><div class="bar" data-v-7eef9c62></div><div class="bar" data-v-7eef9c62></div><div class="bar" data-v-7eef9c62></div></div>',1)),(0,i.createElementVNode)('span',Bl,(0,i.toDisplayString)(n.voicetime||'2"'),1)]))],8,xl)):((0,i.openBlock)(),(0,i.createElementBlock)('div',kl,(0,i.toDisplayString)(n.content),1))],2)],2112))],2);var a}),128))],512),(0,i.createElementVNode)('div',El,[(0,i.createElementVNode)('div',Sl,[d[17]||(d[17]=(0,i.createElementVNode)('div',{class:'ig-cam-btn'},[(0,i.createElementVNode)('svg',{'aria-label':'Camera',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M12 10.751a3.25 3.25 0 1 0 3.25 3.25A3.254 3.254 0 0 0 12 10.751Zm0 8.5a5.25 5.25 0 1 1 5.25-5.25A5.256 5.256 0 0 1 12 19.251Zm8.385-11.236h-2.128a1.57 1.57 0 0 1-1.396-.867L16.2 5.867a3.57 3.57 0 0 0-3.17-1.866h-2.06a3.57 3.57 0 0 0-3.17 1.866l-.66 1.282a1.57 1.57 0 0 1-1.396.867H3.615A2.618 2.618 0 0 0 1 10.634v8.733A2.618 2.618 0 0 0 3.615 22h16.77A2.618 2.618 0 0 0 23 19.367v-8.733a2.618 2.618 0 0 0-2.615-2.617Z',fill:'currentColor'})])],-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':d[1]||(d[1]=e=>a.value=e),class:'ig-chat-input',placeholder:'发消息...',onKeyup:(0,i.withKeys)(C,['enter'])},null,544),[[i.vModelText,a.value]]),a.value.trim()?((0,i.openBlock)(),(0,i.createElementBlock)('button',{key:0,class:'ig-send-btn',onClick:C},'发送')):((0,i.openBlock)(),(0,i.createElementBlock)('div',Nl,[(0,i.createElementVNode)('div',{class:'ig-action-btn',onClick:d[2]||(d[2]=e=>h('voice'))},[...d[14]||(d[14]=[(0,i.createElementVNode)('svg',{'aria-label':'Voice Clip',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M19.5 10.5a7.5 7.5 0 0 1-15 0v-5a7.5 7.5 0 0 1 15 0v5Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'12',x2:'12',y1:'19',y2:'22'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'8.7',x2:'15.3',y1:'22',y2:'22'})],-1)])]),(0,i.createElementVNode)('div',{class:'ig-action-btn',onClick:d[3]||(d[3]=e=>h('image'))},[...d[15]||(d[15]=[(0,i.createElementVNode)('svg',{'aria-label':'Image',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('rect',{fill:'none',height:'18',rx:'3',ry:'3',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',width:'18',x:'3',y:'3'}),(0,i.createElementVNode)('path',{d:'m8.5 14.5 2.5 2.5 5-5 4.5 4.5',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('path',{d:'M8.5 10a1.5 1.5 0 1 1-1.5-1.5 1.5 1.5 0 0 1 1.5 1.5Z',fill:'currentColor'})],-1)])]),(0,i.createElementVNode)('div',{class:'ig-action-btn',onClick:d[4]||(d[4]=e=>h('emoji'))},[...d[16]||(d[16]=[(0,i.createElementVNode)('svg',{'aria-label':'Sticker',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M21.5 12a9.5 9.5 0 1 1-9.5-9.5 9.51 9.51 0 0 1 9.5 9.5Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('path',{d:'M15.518 7.027a1.455 1.455 0 1 0 0 2.91 1.455 1.455 0 0 0 0-2.91Zm-7.036 0a1.455 1.455 0 1 0 0 2.91 1.455 1.455 0 0 0 0-2.91Zm-1.896 9.53a5.504 5.504 0 0 0 10.828 0',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})],-1)])])]))]),(0,i.createCommentVNode)(' Drawer '),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['ig-drawer',{open:r.value.show}])},[(0,i.createCommentVNode)(' Emoji Panel '),'emoji'===r.value.type?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ql,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).emoji,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('img',{key:n,src:e,class:'ig-emoji-item',onClick:a=>function(e,n){const a=(new Date).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:!1});l.Instagram.addMsg(t.chatId,{sender:'user',msgtype:'emoji',emoji:e,content:n,time:a});const i=`[bqb-${n}]`,o=`\n<instagram_msg>user|${t.chatId}|${i}|${a}</instagram_msg>`;f(`\n{{user}}发送了Instagram私信给${m(t.chatId)}：${i}${o}`),r.value.show=!1}(e,n)},null,8,Vl))),128))])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' Input for Special (Voice/Image description) '),['image','voice'].includes(r.value.type)?((0,i.openBlock)(),(0,i.createElementBlock)('div',_l,[(0,i.createElementVNode)('div',zl,['image'===r.value.type?((0,i.openBlock)(),(0,i.createElementBlock)('span',Tl,'图片描述')):((0,i.openBlock)(),(0,i.createElementBlock)('span',Ml,'语音内容')),(0,i.createElementVNode)('span',{class:'ig-back-btn',onClick:d[5]||(d[5]=e=>r.value.show=!1)},'收起')]),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':d[6]||(d[6]=e=>s.value=e),class:'ig-special-input',placeholder:'image'===r.value.type?'描述图片内容...':'输入语音内容...'},null,8,Fl),[[i.vModelText,s.value]]),(0,i.createElementVNode)('button',{class:'ig-special-confirm',onClick:g},'发送')])):(0,i.createCommentVNode)('v-if',!0)],2)])]))}});a(2869);const Il=(0,Xe.A)(Dl,[['__scopeId','data-v-7eef9c62']]),jl={class:'ig-dm-list'},Ul={class:'ig-header'},$l={class:'ig-header-center'},Hl={class:'ig-username'},Yl={class:'ig-dm-list-content'},Wl={class:'ig-dm-scroll'},Pl=['onClick'],Ol={class:'ig-dm-info'},Ll={class:'ig-dm-name'},ql={class:'ig-dm-preview'},Rl={key:0,class:'ig-dm-time'},Xl={key:0,class:'ig-dm-unread-dot'},Zl=(0,i.defineComponent)({__name:'DMList',emits:['back','open-chat'],setup(e){const n=(0,i.computed)(()=>{const e=[],n=new Set(Object.keys(l.Instagram.chathistory));for(const t of n){const n=l.QQ.chars[t];n&&'group'===n.chartype?.toLowerCase()||e.push({id:t,...l.Instagram.chathistory[t]})}for(const[t,a]of Object.entries(l.QQ.chars))'system'!==a.chartype&&'group'!==a.chartype?.toLowerCase()&&(n.has(t)||e.push({id:t,unread:0,lastMsg:'点击发消息',time:''}));return e});function t(e){if('user'===e)return l.Instagram.userHead||l.ST.userHead;return d(e,'Instagram').head||'https://via.placeholder.com/56'}function a(e){if('user'===e)return l.Instagram.userName||l.ST.userName;return d(e,'Instagram').name||e}return(e,o)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',jl,[(0,i.createCommentVNode)(' Header '),(0,i.createElementVNode)('header',Ul,[(0,i.createElementVNode)('div',{class:'ig-header-left',onClick:o[0]||(o[0]=n=>e.$emit('back'))},[...o[1]||(o[1]=[(0,i.createElementVNode)('svg',{'aria-label':'Back',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'21',x2:'3',y1:'12',y2:'12'}),(0,i.createElementVNode)('polyline',{fill:'none',points:'9 6 3 12 9 18',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})],-1)])]),(0,i.createElementVNode)('div',$l,[(0,i.createElementVNode)('span',Hl,(0,i.toDisplayString)((0,i.unref)(l).Instagram.userName||(0,i.unref)(l).ST.userName),1),o[2]||(o[2]=(0,i.createElementVNode)('svg',{'aria-label':'Down Chevron',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'12',role:'img',viewBox:'0 0 24 24',width:'12'},[(0,i.createElementVNode)('path',{d:'M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z',transform:'rotate(180 12 12)'})],-1))]),o[3]||(o[3]=(0,i.createElementVNode)('div',{class:'ig-header-right'},[(0,i.createElementVNode)('svg',{'aria-label':'New Message',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M12.209 10.556a.925.925 0 0 0-.254-.158l-1.922-.76a.917.917 0 0 0-.67.001l-1.933.76a.92.92 0 0 0-.253.158L2.553 15.18a.5.5 0 0 0 .694.72l4.625-4.467 1.932-.76a.92.92 0 0 1 .669 0l1.922.76 4.625 4.467a.5.5 0 0 0 .694-.72l-4.625-4.467v-.158Zm9.238-8.498a1.503 1.503 0 0 0-1.428-.023l-18 7.228a1.502 1.502 0 0 0-.67 2.458l5.592 5.592.002.002 1.924 6.643a1.503 1.503 0 0 0 2.508.76l3.37-3.238 2.822 2.725a1.5 1.5 0 0 0 2.404-.847l2.972-19.476a1.503 1.503 0 0 0-1.5-1.826ZM17.95 20.218l-3.18-3.072a.5.5 0 0 0-.348-.144h-.002a.5.5 0 0 0-.346.142L9.2 21.85l-1.572-5.429 11.758-11.33-1.436 15.127Z'})])],-1))]),(0,i.createElementVNode)('div',Yl,[o[5]||(o[5]=(0,i.createElementVNode)('div',{class:'ig-dm-search'},[(0,i.createElementVNode)('div',{class:'ig-search-box'},[(0,i.createElementVNode)('svg',{'aria-label':'Search',class:'x1lliihq x1n2onr6 x5n08af',fill:'#8e8e8e',height:'16',role:'img',viewBox:'0 0 24 24',width:'16'},[(0,i.createElementVNode)('path',{d:'M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('line',{fill:'none',x1:'16.511',x2:'22',y1:'16.511',y2:'22',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})]),(0,i.createElementVNode)('span',null,'搜索')])],-1)),(0,i.createElementVNode)('div',Wl,[o[4]||(o[4]=(0,i.createElementVNode)('div',{class:'ig-dm-section-title'},'消息',-1)),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(n.value,n=>{return(0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n.id,class:'ig-dm-item',onClick:t=>e.$emit('open-chat',n.id)},[(0,i.createElementVNode)('div',{class:'ig-dm-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${t(n.id)})`})},null,4),(0,i.createElementVNode)('div',Ol,[(0,i.createElementVNode)('div',Ll,(0,i.toDisplayString)(a(n.id)),1),(0,i.createElementVNode)('div',ql,[(0,i.createElementVNode)('span',{class:(0,i.normalizeClass)(['ig-dm-msg',{unread:n.unread>0}])},(0,i.toDisplayString)(n.lastMsg||'Sent a message'),3),n.time?((0,i.openBlock)(),(0,i.createElementBlock)('span',Rl,'· '+(0,i.toDisplayString)((o=n.time,o?(o.includes(':'),o):'')),1)):(0,i.createCommentVNode)('v-if',!0)])]),n.unread?((0,i.openBlock)(),(0,i.createElementBlock)('div',Xl)):(0,i.createCommentVNode)('v-if',!0)],8,Pl);var o}),128))])])]))}});a(1540);const Gl=(0,Xe.A)(Zl,[['__scopeId','data-v-189511ab']]),Jl={class:'ig-post-header'},Kl={class:'ig-post-header-left'},ec={class:'ig-post-user-info'},nc={class:'ig-post-username'},tc={class:'ig-post-meta'},ac={key:0,class:'ig-post-location'},ic={key:1,class:'ig-post-music'},oc={key:0},rc={'aria-label':'Music',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'10',role:'img',viewBox:'0 0 24 24',width:'10',style:{'margin-right':'2px','vertical-align':'middle'}},sc={class:'ig-post-image'},lc={key:0,class:'ig-image-counter'},cc={key:0,class:'ig-tagged-indicator'},dc={key:1,class:'ig-slide-description-overlay'},pc={class:'ig-text-post-bg'},mc={key:1,class:'ig-slide-dots'},uc={class:'ig-post-actions'},Ac={class:'ig-post-actions-left'},hc={key:0,'aria-label':'Unlike',class:'x1lliihq x1n2onr6 x5n08af',fill:'#ed4956',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},gc={key:1,'aria-label':'Like',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},Cc={class:'ig-post-actions-right'},fc={key:0,'aria-label':'Remove',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},vc={key:1,'aria-label':'Save',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},bc={class:'ig-post-likes'},xc={key:0,class:'ig-post-caption'},yc={class:'ig-post-username-caption'},Bc={class:'ig-caption-text'},wc={class:'ig-post-comments'},kc={key:0,class:'ig-view-comments'},Ec={class:'ig-comment-row-content'},Sc={class:'ig-comment-user'},Nc={class:'ig-comment-text'},Qc={class:'ig-post-time'},Vc=(0,i.defineComponent)({__name:'Post',props:{postContent:{},isInside:{type:Boolean}},emits:['comment'],setup(e,{emit:n}){const t=e,a=n,o=(0,i.ref)(null),r=(0,i.ref)(0),s=(0,i.ref)(!1),l=(0,i.ref)(0),c=(0,i.ref)(0),p=(0,i.computed)(()=>{const e=t.postContent.imgs||[],n=[],a=e=>{const n=e.match(/\[img-(.+?)\]/);return n?n[1]:e};if(e.length>0)e.forEach(e=>{if('image'===e.type)n.push({type:'image',url:e.url||e.content,description:''});else if('text'===e.type)if(t=e.content,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i.test(t)||/\[img-(.+?)\]/.test(t))n.push({type:'image',url:a(e.content),description:''});else{const t=n[n.length-1];t&&'image'===t.type?t.description=(t.description?t.description+'\n':'')+e.content:n.push({type:'text',content:e.content})}var t});else{const e=t.postContent.content||'',a=function(e){const n=e.match(/\[img-(.+?)\]/);if(n)return n[1];const t=/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i;if(e.match(t))return e;return null}(e);if(a){const t=v(e);n.push({type:'image',url:a,description:t})}else n.push({type:'text',content:e})}return n}),m=(0,i.computed)(()=>p.value.length>1);function u(){if(!o.value)return;const e=o.value.offsetWidth,n=o.value.scrollLeft;r.value=Math.round(n/e)}function A(e){o.value&&(s.value=!0,l.value=e.pageX-o.value.offsetLeft,c.value=o.value.scrollLeft,o.value.style.cursor='grabbing',o.value.style.scrollSnapType='none')}function h(e){if(!s.value||!o.value)return;e.preventDefault();const n=1.5*(e.pageX-o.value.offsetLeft-l.value);o.value.scrollLeft=c.value-n}function g(){if(!s.value||!o.value)return;s.value=!1,o.value.style.cursor='grab',o.value.style.scrollSnapType='x mandatory';const e=o.value.offsetWidth,n=o.value.scrollLeft,t=Math.round(n/e);o.value.scrollTo({left:t*e,behavior:'smooth'})}function C(){s.value&&g()}function f(){if(t.postContent.head)return t.postContent.head;return d(t.postContent.sender,'Instagram').head}function v(e){return e.replace(/\[img-(.+?)\]/g,'').trim()}function b(){t.postContent.liked?(t.postContent.liked=!1,t.postContent.likes=(parseInt(t.postContent.likes||0)-1).toString()):(t.postContent.liked=!0,t.postContent.likes=(parseInt(t.postContent.likes||0)+1).toString())}function x(){t.postContent.saved=!t.postContent.saved}return(n,t)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{class:(0,i.normalizeClass)(['ig-post',{inside:e.isInside}])},[(0,i.createCommentVNode)(' Header '),(0,i.createElementVNode)('div',Jl,[(0,i.createElementVNode)('div',Kl,[(0,i.createElementVNode)('div',{class:'ig-post-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${f()})`})},null,4),(0,i.createElementVNode)('div',ec,[(0,i.createElementVNode)('span',nc,(0,i.toDisplayString)(e.postContent.sender||'Unknown'),1),(0,i.createElementVNode)('div',tc,[e.postContent.location?((0,i.openBlock)(),(0,i.createElementBlock)('span',ac,(0,i.toDisplayString)(e.postContent.location),1)):(0,i.createCommentVNode)('v-if',!0),e.postContent.music?((0,i.openBlock)(),(0,i.createElementBlock)('span',ic,[e.postContent.location?((0,i.openBlock)(),(0,i.createElementBlock)('span',oc,' • ')):(0,i.createCommentVNode)('v-if',!0),((0,i.openBlock)(),(0,i.createElementBlock)('svg',rc,[...t[1]||(t[1]=[(0,i.createElementVNode)('path',{d:'M9 18a3 3 0 1 1 3-3 3 3 0 0 1-3 3Zm0-4a1 1 0 1 0 1 1 1 1 0 0 0-1-1Zm8 2a3 3 0 1 1 3-3 3 3 0 0 1-3 3Zm0-4a1 1 0 1 0 1 1 1 1 0 0 0-1-1Zm3-5h-9a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1Z'},null,-1)])])),(0,i.createTextVNode)(' '+(0,i.toDisplayString)(e.postContent.music),1)])):(0,i.createCommentVNode)('v-if',!0)])])]),t[2]||(t[2]=(0,i.createElementVNode)('div',{class:'ig-post-more'},[(0,i.createElementVNode)('svg',{'aria-label':'More',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('circle',{cx:'12',cy:'12',r:'1.5'}),(0,i.createElementVNode)('circle',{cx:'6',cy:'12',r:'1.5'}),(0,i.createElementVNode)('circle',{cx:'18',cy:'12',r:'1.5'})])],-1))]),(0,i.createCommentVNode)(' Image/Carousel '),(0,i.createElementVNode)('div',sc,[(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['ig-carousel-container',{'with-dots':m.value}])},[(0,i.createCommentVNode)(' Image Counter '),m.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',lc,(0,i.toDisplayString)(r.value+1)+'/'+(0,i.toDisplayString)(p.value.length),1)):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('div',{class:'ig-carousel',ref_key:'carouselRef',ref:o,onScroll:u,onMousedown:A,onMousemove:h,onMouseup:g,onMouseleave:C},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(p.value,(n,a)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:a,class:'ig-slide'},[(0,i.createCommentVNode)(' Image Slide '),'image'===n.type?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'ig-image-container',style:(0,i.normalizeStyle)({backgroundImage:`url(${n.url})`})},[(0,i.createCommentVNode)(' Tagged Users Overlay (Only on first slide if applicable, or logic to be improved) '),0===a&&e.postContent.taggedUsers&&e.postContent.taggedUsers.length>0?((0,i.openBlock)(),(0,i.createElementBlock)('div',cc,[...t[3]||(t[3]=[(0,i.createElementVNode)('svg',{'aria-label':'Tags',class:'x1lliihq x1n2onr6 x5n08af',fill:'#ffffff',height:'12',role:'img',viewBox:'0 0 24 24',width:'12'},[(0,i.createElementVNode)('path',{d:'M21.334 23H2.666a1 1 0 0 1-1-1v-1.354a6.279 6.279 0 0 1 6.272-6.272h8.124a6.279 6.279 0 0 1 6.271 6.271V22a1 1 0 0 1-1 1ZM12 13.269a6 6 0 1 1 6-6 6.007 6.007 0 0 1-6 6Z'})],-1)])])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' Description Overlay '),n.description?((0,i.openBlock)(),(0,i.createElementBlock)('div',dc,(0,i.toDisplayString)(n.description),1)):(0,i.createCommentVNode)('v-if',!0)],4)):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[(0,i.createCommentVNode)(' Text Slide '),(0,i.createElementVNode)('div',pc,[(0,i.createElementVNode)('p',null,(0,i.toDisplayString)(n.content),1)])],2112))]))),128))],544),(0,i.createCommentVNode)(' Dots Indicator '),m.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',mc,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(p.value,(_,e)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e,class:(0,i.normalizeClass)(['ig-dot',{active:e===r.value}])},null,2))),128))])):(0,i.createCommentVNode)('v-if',!0)],2)]),(0,i.createCommentVNode)(' Actions '),(0,i.createElementVNode)('div',uc,[(0,i.createElementVNode)('div',Ac,[(0,i.createElementVNode)('div',{class:'ig-action-btn',onClick:b},[e.postContent.liked?((0,i.openBlock)(),(0,i.createElementBlock)('svg',hc,[...t[4]||(t[4]=[(0,i.createElementVNode)('path',{d:'m17.5 4.75a7.49 7.49 0 0 0-5.25 2.22 7.48 7.48 0 0 0-5.25-2.22A7.73 7.73 0 0 0 2 12.5c0 7.22 9 10.72 10 10.72s10-3.5 10-10.72a7.74 7.74 0 0 0-5-7.75Z'},null,-1)])])):((0,i.openBlock)(),(0,i.createElementBlock)('svg',gc,[...t[5]||(t[5]=[(0,i.createElementVNode)('path',{d:'M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z'},null,-1)])]))]),(0,i.createElementVNode)('div',{class:'ig-action-btn',onClick:t[0]||(t[0]=e=>a('comment'))},[...t[6]||(t[6]=[(0,i.createElementVNode)('svg',{'aria-label':'Comment',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z',fill:'none',stroke:'currentColor','stroke-linejoin':'round','stroke-width':'2'})],-1)])]),t[7]||(t[7]=(0,i.createElementVNode)('div',{class:'ig-action-btn'},[(0,i.createElementVNode)('svg',{'aria-label':'Share',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linejoin':'round','stroke-width':'2',x1:'22',x2:'9.218',y1:'3',y2:'10.083'}),(0,i.createElementVNode)('polygon',{fill:'none',points:'11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334',stroke:'currentColor','stroke-linejoin':'round','stroke-width':'2'})])],-1))]),(0,i.createElementVNode)('div',Cc,[(0,i.createElementVNode)('div',{class:'ig-action-btn',onClick:x},[e.postContent.saved?((0,i.openBlock)(),(0,i.createElementBlock)('svg',fc,[...t[8]||(t[8]=[(0,i.createElementVNode)('path',{d:'M20 22a.999.999 0 0 1-.685-.273L12 14.815l-7.315 6.912A1 1 0 0 1 3 21V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1Z'},null,-1)])])):((0,i.openBlock)(),(0,i.createElementBlock)('svg',vc,[...t[9]||(t[9]=[(0,i.createElementVNode)('polygon',{fill:'none',points:'20 21 12 13.44 4 21 4 3 20 3 20 21',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'},null,-1)])]))])])]),(0,i.createCommentVNode)(' Likes '),(0,i.createElementVNode)('div',bc,[(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(e.postContent.likes||0)+' 次赞',1)]),(0,i.createCommentVNode)(' Caption '),v(e.postContent.content)?((0,i.openBlock)(),(0,i.createElementBlock)('div',xc,[(0,i.createElementVNode)('span',yc,(0,i.toDisplayString)(e.postContent.sender),1),(0,i.createElementVNode)('span',Bc,(0,i.toDisplayString)(v(e.postContent.content)),1)])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' Comments '),(0,i.createElementVNode)('div',wc,[e.postContent.comments&&e.postContent.comments.length>0?((0,i.openBlock)(),(0,i.createElementBlock)('div',kc,' 查看全部 '+(0,i.toDisplayString)(e.postContent.comments.length)+' 条评论 ',1)):(0,i.createCommentVNode)('v-if',!0),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((e.postContent.comments||[]).slice(0,2),(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{class:'ig-comment-row',key:n},[(0,i.createElementVNode)('div',Ec,[e.head?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'ig-comment-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${e.head})`})},null,4)):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('span',Sc,(0,i.toDisplayString)(e.sender),1),(0,i.createElementVNode)('span',Nc,(0,i.toDisplayString)(e.content),1)])]))),128))]),(0,i.createCommentVNode)(' Time '),(0,i.createElementVNode)('div',Qc,(0,i.toDisplayString)(e.postContent.time||'刚刚'),1)],2))}});a(1392);const _c=(0,Xe.A)(Vc,[['__scopeId','data-v-9067e0d6']]),zc={class:'ig-user-profile'},Tc={class:'ig-profile-header'},Mc={class:'ig-header-left'},Fc={class:'ig-username'},Dc={class:'ig-header-right'},Ic={key:0,class:'ig-profile-content'},jc={class:'ig-profile-info'},Uc={class:'ig-profile-avatar-row'},$c={key:0,class:'ig-plus-badge'},Hc={class:'ig-profile-stats'},Yc={class:'ig-stat-item'},Wc={class:'ig-stat-num'},Pc={class:'ig-stat-num'},Oc={class:'ig-stat-num'},Lc={class:'ig-profile-bio'},qc={class:'ig-bio-name'},Rc={class:'ig-bio-desc'},Xc={key:1,class:'ig-bio-edit'},Zc={class:'ig-profile-actions'},Gc={key:1,class:'ig-action-button'},Jc={key:3,class:'ig-action-button'},Kc={class:'ig-profile-grid'},ed=['onClick'],nd=(0,i.defineComponent)({__name:'UserProfile',props:{userId:{type:String,default:'user'}},emits:['back','view-post','message'],setup(e,{emit:n}){const t=e,a=n,o=(0,i.ref)(!1),r=(0,i.computed)(()=>{if('user'===t.userId)return{id:'user',name:l.Instagram.userName||l.ST.userName,bio:l.Instagram.userBio||'',head:l.Instagram.userHead||l.ST.userHead,posts:l.Instagram.posts.filter(e=>'user'===e.sender||e.sender===l.Instagram.userName||e.sender===l.ST.userName),followers:l.Instagram.followers,following:l.Instagram.following,isSelf:!0};{const e=l.QQ.chars[t.userId];return e?{id:t.userId,name:e.instagramName||e.name,bio:e.instagramBio||'这里空空如也',head:e.instagramHead||e.head,posts:l.Instagram.posts.filter(n=>n.sender===t.userId||n.sender===e.name||n.sender===e.instagramName||n.sender===e.instagramId),followers:e.instagramFollowers||'100',following:e.instagramFollowing||'50',isSelf:!1}:null}}),s=(0,i.ref)({name:'',bio:''});function c(e){if(e.imgs&&e.imgs.length>0)return e.imgs[0].content||e.imgs[0].url;const n=e.content.match(/\[img-(.+?)\]/);return n?n[1]:''}function d(){if('user'===t.userId)l.Instagram.userName=s.value.name,l.Instagram.userBio=s.value.bio,l.Instagram.saveSettings();else{const e=l.QQ.chars[t.userId];e&&(e.instagramName=s.value.name,e.instagramBio=s.value.bio,l.QQ.saveChars())}o.value=!1}function p(){o.value=!1}function m(){const e=r.value?.head||'',n=prompt('请输入新的头像链接:',e);if(n)if('user'===t.userId)l.Instagram.userHead=n,l.Instagram.saveSettings();else{const e=l.QQ.chars[t.userId];e&&(e.instagramHead=n,l.QQ.saveChars())}}function u(e){const n=r.value?.[e]||'0',a=prompt(`修改 ${e}:`,n);if(null!==a)if('user'===t.userId)l.Instagram[e]=a,l.Instagram.saveSettings();else{const n=l.QQ.chars[t.userId];n&&('followers'===e&&(n.instagramFollowers=a),'following'===e&&(n.instagramFollowing=a),l.QQ.saveChars())}}return(0,i.watch)(()=>[r.value,o.value],()=>{r.value&&(s.value.name=r.value.name,s.value.bio=r.value.bio)},{immediate:!0}),(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',zc,[(0,i.createCommentVNode)(' Header '),(0,i.createElementVNode)('header',Tc,[(0,i.createElementVNode)('div',Mc,[(0,i.createElementVNode)('h1',Fc,(0,i.toDisplayString)(r.value?.name),1),n[8]||(n[8]=(0,i.createElementVNode)('svg',{'aria-label':'Down Chevron',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'12',role:'img',viewBox:'0 0 24 24',width:'12'},[(0,i.createElementVNode)('path',{d:'M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z',transform:'rotate(180 12 12)'})],-1))]),(0,i.createElementVNode)('div',Dc,[(0,i.createElementVNode)('div',{class:'ig-icon-btn',onClick:n[0]||(n[0]=e=>(0,i.unref)(l).phone.activeApp='home')},[(0,i.createCommentVNode)(' Close/Back Icon '),n[9]||(n[9]=(0,i.createElementVNode)('svg',{'aria-label':'Back',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'21',x2:'3',y1:'12',y2:'12'}),(0,i.createElementVNode)('polyline',{fill:'none',points:'9 6 3 12 9 18',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})],-1))]),n[10]||(n[10]=(0,i.createElementVNode)('div',{class:'ig-icon-btn'},[(0,i.createElementVNode)('svg',{'aria-label':'Options',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'3',x2:'21',y1:'4',y2:'4'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'3',x2:'21',y1:'12',y2:'12'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'3',x2:'21',y1:'20',y2:'20'})])],-1))])]),r.value?((0,i.openBlock)(),(0,i.createElementBlock)('main',Ic,[(0,i.createCommentVNode)(' Profile Info '),(0,i.createElementVNode)('div',jc,[(0,i.createElementVNode)('div',Uc,[(0,i.createElementVNode)('div',{class:'ig-profile-avatar-container',onClick:m},[(0,i.createElementVNode)('div',{class:'ig-profile-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url('${r.value.head}')`})},null,4),r.value.isSelf?((0,i.openBlock)(),(0,i.createElementBlock)('div',$c,[...n[11]||(n[11]=[(0,i.createElementVNode)('svg',{'aria-label':'Plus',class:'x1lliihq x1n2onr6 x5n08af',fill:'#ffffff',height:'12',role:'img',viewBox:'0 0 24 24',width:'12'},[(0,i.createElementVNode)('path',{d:'M21 11.3h-8.2V3c0-.4-.3-.8-.8-.8s-.8.4-.8.8v8.3H3c-.4 0-.8.3-.8.8s.3.8.8.8h8.2V21c0 .4.3.8.8.8s.8-.3.8-.8v-8.2H21c.4 0 .8-.3.8-.8s-.3-.8-.8-.8z'})],-1)])])):(0,i.createCommentVNode)('v-if',!0)]),(0,i.createElementVNode)('div',Hc,[(0,i.createElementVNode)('div',Yc,[(0,i.createElementVNode)('span',Wc,(0,i.toDisplayString)(r.value.posts.length),1),n[12]||(n[12]=(0,i.createElementVNode)('span',{class:'ig-stat-label'},'帖子',-1))]),(0,i.createElementVNode)('div',{class:'ig-stat-item',onClick:n[1]||(n[1]=e=>u('followers'))},[(0,i.createElementVNode)('span',Pc,(0,i.toDisplayString)(r.value.followers||'0'),1),n[13]||(n[13]=(0,i.createElementVNode)('span',{class:'ig-stat-label'},'粉丝',-1))]),(0,i.createElementVNode)('div',{class:'ig-stat-item',onClick:n[2]||(n[2]=e=>u('following'))},[(0,i.createElementVNode)('span',Oc,(0,i.toDisplayString)(r.value.following||'0'),1),n[14]||(n[14]=(0,i.createElementVNode)('span',{class:'ig-stat-label'},'关注',-1))])])]),(0,i.createElementVNode)('div',Lc,[o.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Xc,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':n[4]||(n[4]=e=>s.value.name=e),placeholder:'Name',class:'ig-edit-input'},null,512),[[i.vModelText,s.value.name]]),(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':n[5]||(n[5]=e=>s.value.bio=e),placeholder:'Bio',class:'ig-edit-textarea'},null,512),[[i.vModelText,s.value.bio]]),(0,i.createElementVNode)('div',{class:'ig-edit-actions'},[(0,i.createElementVNode)('button',{class:'ig-btn-secondary',onClick:p},'取消'),(0,i.createElementVNode)('button',{class:'ig-btn-primary',onClick:d},'保存')])])):((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'ig-bio-text-display',onClick:n[3]||(n[3]=e=>o.value=!0)},[(0,i.createElementVNode)('span',qc,(0,i.toDisplayString)(r.value.name),1),(0,i.createElementVNode)('p',Rc,(0,i.toDisplayString)(r.value.bio||'点击编辑简介'),1)]))]),(0,i.createElementVNode)('div',Zc,[r.value.isSelf?((0,i.openBlock)(),(0,i.createElementBlock)('button',{key:0,class:'ig-action-button',onClick:n[6]||(n[6]=e=>o.value=!0)},'编辑主页')):(0,i.createCommentVNode)('v-if',!0),r.value.isSelf?((0,i.openBlock)(),(0,i.createElementBlock)('button',Gc,'分享主页')):(0,i.createCommentVNode)('v-if',!0),r.value.isSelf?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('button',{key:2,class:'ig-action-button',style:{'background-color':'#0095f6',color:'white'},onClick:n[7]||(n[7]=e=>a('message',r.value.id))},' 发消息 ')),r.value.isSelf?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('button',Jc,'关注'))])]),(0,i.createCommentVNode)(' Highlights (Placeholder) '),n[15]||(n[15]=(0,i.createElementVNode)('div',{class:'ig-highlights'},[(0,i.createElementVNode)('div',{class:'ig-highlight-item'},[(0,i.createElementVNode)('div',{class:'ig-highlight-ring'},[(0,i.createElementVNode)('svg',{'aria-label':'Plus',class:'x1lliihq x1n2onr6 x5n08af',fill:'#262626',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M21 11.3h-8.2V3c0-.4-.3-.8-.8-.8s-.8.4-.8.8v8.3H3c-.4 0-.8.3-.8.8s.3.8.8.8h8.2V21c0 .4.3.8.8.8s.8-.3.8-.8v-8.2H21c.4 0 .8-.3.8-.8s-.3-.8-.8-.8z'})])]),(0,i.createElementVNode)('span',{class:'ig-highlight-text'},'新建')])],-1)),(0,i.createCommentVNode)(' Tabs '),n[16]||(n[16]=(0,i.createElementVNode)('div',{class:'ig-profile-tabs'},[(0,i.createElementVNode)('div',{class:'ig-tab active'},[(0,i.createElementVNode)('svg',{'aria-label':'Posts',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('rect',{fill:'none',height:'18',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',width:'18',x:'3',y:'3'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'9.015',x2:'9.015',y1:'3',y2:'21'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'14.985',x2:'14.985',y1:'3',y2:'21'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'21',x2:'3',y1:'9.015',y2:'9.015'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'21',x2:'3',y1:'14.985',y2:'14.985'})])]),(0,i.createElementVNode)('div',{class:'ig-tab'},[(0,i.createElementVNode)('svg',{'aria-label':'Reels',class:'x1lliihq x1n2onr6 x5n08af',fill:'#8e8e8e',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linejoin':'round','stroke-width':'2',x1:'2.049',x2:'21.95',y1:'7.002',y2:'7.002'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'13.504',x2:'16.362',y1:'2.001',y2:'7.002'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'7.207',x2:'10.002',y1:'2.11',y2:'7.002'}),(0,i.createElementVNode)('path',{d:'M2 12.001v3.449c0 2.849.698 4.006 1.606 4.945.94.908 2.098 1.607 4.946 1.607h6.896c2.848 0 4.006-.699 4.946-1.607.908-.939 1.606-2.096 1.606-4.945V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('path',{d:'M9.763 17.664a.908.908 0 0 1-.454-.787V11.63a.909.909 0 0 1 1.364-.788l4.545 2.624a.909.909 0 0 1 0 1.575l-4.545 2.624a.91.91 0 0 1-.91 0Z','fill-rule':'evenodd'})])]),(0,i.createElementVNode)('div',{class:'ig-tab'},[(0,i.createElementVNode)('svg',{'aria-label':'Tagged',class:'x1lliihq x1n2onr6 x5n08af',fill:'#8e8e8e',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M10.201 3.797 12 1.997l1.799 1.8a1.59 1.59 0 0 0 1.124.465h5.259A1.818 1.818 0 0 1 22 6.08v14.104a1.818 1.818 0 0 1-1.818 1.818H3.818A1.818 1.818 0 0 1 2 20.184V6.08a1.818 1.818 0 0 1 1.818-1.818h5.26a1.59 1.59 0 0 0 1.123-.465Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('path',{d:'M18.598 22.002V21.4a3.949 3.949 0 0 0-3.948-3.949H9.495A3.949 3.949 0 0 0 5.547 21.4v.602',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('circle',{cx:'12.072',cy:'11.075',fill:'none',r:'3.556',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})])])],-1)),(0,i.createCommentVNode)(' Grid '),(0,i.createElementVNode)('div',Kc,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r.value.posts,e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'ig-grid-item',style:(0,i.normalizeStyle)({backgroundImage:`url(${c(e)})`}),onClick:n=>a('view-post',e)},null,12,ed))),128))])])):(0,i.createCommentVNode)('v-if',!0)]))}});a(9254);const td=(0,Xe.A)(nd,[['__scopeId','data-v-70b58da6']]),ad={class:'instagram-container'},id={key:0,class:'ig-header'},od={class:'ig-header-right'},rd={key:1,class:'ig-content'},sd={class:'ig-stories'},ld={class:'ig-story-ring your-story'},cd=['onClick'],dd={class:'ig-story-ring'},pd={class:'ig-story-username'},md={class:'ig-feed'},ud={key:0,class:'ig-empty-state'},Ad={key:2,class:'ig-content'},hd={class:'ig-search-bar-container'},gd={class:'ig-search-box'},Cd={class:'ig-explore-grid'},fd={key:0,class:'ig-loading-state'},vd={key:3,class:'ig-content'},bd={key:4,class:'ig-content'},xd={class:'ig-header',style:{'justify-content':'flex-start',gap:'16px'}},yd={class:'ig-feed'},Bd={key:5,class:'ig-content',style:{height:'100%'}},wd={key:6,class:'ig-content',style:{height:'100%'}},kd={key:7,class:'ig-bottom-nav'},Ed={key:0,class:'ig-publish-modal'},Sd={class:'ig-publish-content'},Nd={class:'ig-publish-header'},Qd={class:'ig-publish-body'},Vd={class:'ig-publish-row'},_d={class:'ig-image-scroller'},zd={key:0,style:{'font-size':'10px',overflow:'hidden','text-overflow':'ellipsis',display:'-webkit-box','-webkit-line-clamp':'3','-webkit-box-orient':'vertical'}},Td=['onClick'],Md={class:'ig-action-right'},Fd={key:0,class:'ig-action-value'},Dd={class:'ig-action-right'},Id={key:0,class:'ig-action-value'},jd={class:'ig-action-right'},Ud={key:0,class:'ig-action-value'},$d={key:0,class:'ig-publish-modal',style:{'z-index':'101'}},Hd={class:'ig-publish-content'},Yd={class:'ig-publish-header'},Wd={class:'ig-tag-list'},Pd=['onClick'],Od={class:'ig-tag-user-info'},Ld={class:'ig-tag-username'},qd={key:0,'aria-label':'Check',class:'x1lliihq x1n2onr6 x5n08af',fill:'#fff',height:'12',role:'img',viewBox:'0 0 24 24',width:'12'},Rd={key:0,class:'ig-comment-overlay'},Xd={class:'ig-comment-box'},Zd={class:'ig-comment-input-area'},Gd={class:'ig-input-wrapper'},Jd=['disabled'],Kd=(0,i.defineComponent)({__name:'Instagram',setup(e){const n=(0,i.ref)('home'),t=(0,i.ref)('user'),a=(0,i.ref)(null),r=(0,i.ref)(''),s=(0,i.ref)(!1),c=(0,i.ref)(!1),p=(0,i.ref)(!1),m=(0,i.ref)(''),u=(0,i.ref)(null),A=(0,i.ref)(!1),h=(0,i.ref)(''),g=(0,i.ref)({content:'',images:[],location:'',taggedUsers:[],music:''}),C=(0,i.computed)(()=>Object.entries(l.QQ.chars).filter(([_,e])=>{const n=e.chartype?.toLowerCase();return'friend'===n||'npc'===n}).map(([e,n])=>({id:e,name:n.instagramName||n.name,head:n.instagramHead||n.head||'https://via.placeholder.com/60'})));function f(e){t.value=e,n.value='profile'}function v(e){a.value=e,n.value='post_detail'}function b(e){r.value=e,n.value='chat_detail'}function x(){l.phone.activeApp='home'}function y(){g.value={content:'',images:[],location:'',taggedUsers:[],music:''},s.value=!0}function B(){const e=prompt('请输入图片URL或描述:');e&&g.value.images.push(e)}function w(){const e=prompt('请输入地点:');null!==e&&(g.value.location=e)}function k(){const e=prompt('请输入音乐名称:');null!==e&&(g.value.music=e)}function E(e){u.value=e,m.value='',p.value=!0}function S(){if(!m.value.trim()||!u.value)return;const e=m.value.trim(),n=u.value.id||'unknown',t=l.Instagram.userName||l.ST.userName||'user',a=new Date,i=`${(a.getMonth()+1).toString().padStart(2,'0')}-${a.getDate().toString().padStart(2,'0')} ${a.getHours().toString().padStart(2,'0')}:${a.getMinutes().toString().padStart(2,'0')}`;u.value.comments||(u.value.comments=[]),u.value.comments.push({sender:t,content:e,time:i,like:'0',head:l.Instagram.userHead||l.ST.userHead});const o=`\n{{user}}评论了Instagram帖子(ID: ${n})：${e}${`\n<instagram>${n}|${t}|${e}|${i}|0</instagram>`}`,r=$('#send_textarea').val(),s=('string'==typeof r?r:'').trim(),c=s?s+'\n\n'+o:o;$('#send_textarea').val(c)[0].dispatchEvent(new Event('input',{bubbles:!0})),toastr.success('已生成评论指令，请点击发送'),p.value=!1,m.value=''}function N(){if(!g.value.content.trim()&&0===g.value.images.length)return void toastr.error('请至少填写内容或添加图片');let e='{{user}}发布了Instagram帖子，请按照规范格式输出该帖子及评论：\n';e+=`帖子ID: ${Math.random().toString(36).substring(2,9)}\n`,g.value.content&&(e+=`配文：${g.value.content}\n`),g.value.images.length>0&&(e+=`图片/视频：${JSON.stringify(g.value.images)}\n`),g.value.location&&(e+=`地点：${g.value.location}\n`),g.value.music&&(e+=`音乐：${g.value.music}\n`),g.value.taggedUsers.length>0&&(e+=`提到：${JSON.stringify(g.value.taggedUsers)}\n`),e=e.trim();const n=$('#send_textarea').val(),t=('string'==typeof n?n:'').trim(),a=t?t+'\n\n'+e:e;$('#send_textarea').val(a)[0].dispatchEvent(new Event('input',{bubbles:!0})),toastr.success('已生成发布指令，请点击发送'),g.value={content:'',images:[],location:'',taggedUsers:[],music:''},s.value=!1}const Q=async()=>{if(!A.value){A.value=!0,toastr.info('正在探索新内容...');try{const e=h.value.trim(),t=`生成3个Instagram帖子数据。\n    ${e?`主题/关键词：${e}`:'主题随机，可以是生活、旅行、美食等。'}\n    可以是已知角色(遵循人设)或陌生人发布。\n    格式必须是纯JSON数组，包含:\n    - sender (发布者名字)\n    - head (发布者头像URL，如果是陌生人请随机)\n    - content (帖子文案)\n    - images (图片描述数组)\n    - likes (点赞数，数字)\n    - location (地点，可选)\n    - comments (评论数组，每个评论包含 sender, content, time)\n\n    范例:\n    <InstagramPost>\n    [\n      {\n        "sender": "Alice",\n        "head": "http...",\n        "content": "Beautiful day!",\n        "images": ["http..."],\n        "likes": 120,\n        "location": "Paris",\n        "comments": [{"sender": "Bob", "content": "Nice!", "time": "10:00"}]\n      }\n    ]\n    </InstagramPost>\n    不要Markdown，不要解释，只返回JSON,json包裹在<InstagramPost>标签对中。`;let a=[];if(!1)a=JSON.parse('[\n  {\n    "sender": "Sasha_Official",\n    "head": "https://files.catbox.moe/k36v45.jpg",\n    "content": "Tonight is gonna be wild! 🥂✨ 谁在曼城？出来喝酒呀！",\n    "images": ["一张在昏暗酒吧里的自拍，妆容精致，穿着低胸吊带，背景是模糊的舞池灯光"],\n    "likes": 89,\n    "location": "Impossible Manchester",\n    "comments": [{"sender": "Justin_Qiu", "content": "注意安全。", "time": "15m ago"}, {"sender": "Felix_Zhou", "content": "位置发我。", "time": "5m ago"}]\n  },\n  {\n    "sender": "Oliver_Mods",\n    "head": "https://files.catbox.moe/zyywos.jpg",\n    "content": "New toy in the garage. This beauty needs some serious work but she\'s worth it. 🛠️",\n    "images": ["一张拆卸了一半的汽车引擎照片，满是油污的手套放在旁边"],\n    "likes": 42,\n    "location": "The MOTley Crew",\n    "comments": [{"sender": "Hugooooo", "content": "留给我试试？", "time": "1h ago"}]\n  },\n  {\n    "sender": "MCR_Foodie",\n    "head": "https://files.catbox.moe/4ghjod.jpg",\n    "content": "Hidden gem in Northern Quarter! Best ramen in town. 🍜",\n    "images": ["一碗热气腾腾的拉面特写，汤色浓郁，配料丰富"],\n    "likes": 215,\n    "location": "Northern Quarter",\n    "comments": []\n  }\n]');else{let e='';try{console.log('开始生成数据'),e=await generate({user_input:t})}catch(e){console.warn('Network warning:',e)}if(!e)return void(A.value=!1);console.log('AI Raw Output:',e),e=e.replace(/<think[ing]*?>[\s\S]+(<\/think[ing]*?>)/i,'');const n=e.match(/<InstagramPost>([\S\s]+?)<\/*InstagramPost>/i);if(!n)return;try{console.log(`取到的结果：\n${n[1].trim()}`),a=JSON.parse(n[1].trim())}catch{return console.error('解析json错误!'),void console.log(n[1])}}if(Array.isArray(a)&&a.length>0){let e=0;for(const n of a){if(!(n.content||n.images&&0!==n.images.length))continue;const t=n.sender||'Unknown';let a=n.head,i=null;const o=l.QQ.chars;let r='';for(const[e,n]of Object.entries(o)){const a=(n.name||'').toLowerCase(),i=(t||'').toLowerCase();if(a&&i.includes(a)){r=e;break}if(a&&a.includes(i)){r=e;break}}if(r){const e=o[r];i=r,t!==e.instagramName&&(console.log(`Capturing Instagram ID for ${e.name}: ${t}`),e.instagramName=t,e.instagramId=t,e.instagramHead||!a||a.includes('randomuser')||(e.instagramHead=a)),a=e.instagramHead||e.head||a,l.QQ.saveChars()}let s=n.images||[];'string'==typeof s&&(s=[s]),Array.isArray(s)||(s=[]);const c=/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i,p=e=>{if(e&&'object'==typeof e){if('text'===e.type)return{type:'text',content:e.content||''};if('image'===e.type)return{type:'image',url:e.url||e.content||''};if(e.url)return{type:'image',url:e.url};if(e.content)return c.test(e.content)?{type:'image',url:e.content}:{type:'text',content:e.content}}const n='string'==typeof e?e:'';return c.test(n)?{type:'image',url:n}:{type:'text',content:n}},m=s.map(p).filter(e=>'image'===e.type?Boolean(e.url):Boolean(e.content));0===m.length&&(n.content?m.push({type:'text',content:n.content}):m.push({type:'image',url:l.RedNote?.getRandomHead()||'https://via.placeholder.com/400'}));const u={id:Math.random().toString(36).substring(2),sender:t,head:a||'https://via.placeholder.com/40',content:n.content||'',imgs:m,images:s,location:n.location||'',likes:n.likes||Math.floor(500*Math.random()),liked:!1,saved:!1,time:(new Date).toLocaleDateString(),comments:(n.comments||[]).map(e=>({sender:e.sender||'User',content:e.content||'',time:e.time||'刚刚',like:0,head:d(e.sender,'Instagram').head}))};console.log(`开始添加到帖子列表:\n${JSON.stringify(u)}`),l.Instagram.addPost(u),e++}console.log(`帖子总列表:\n${JSON.stringify(l.Instagram.posts)}`),await l.Instagram.saveSettings(),toastr.success(`已捕获 ${e} 条动态`),n.value='home',h.value=''}else console.warn('No valid posts parsed from:',o.result),toastr.warning('未能识别有效内容，请重试')}catch(e){console.error('Generate Error:',e),toastr.error('生成失败')}finally{A.value=!1}}};return(e,o)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',ad,[(0,i.createCommentVNode)(' Header '),'home'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('header',id,[(0,i.createElementVNode)('div',{class:'ig-header-left',onClick:x},[...o[17]||(o[17]=[(0,i.createElementVNode)('h1',{class:'ig-logo'},'Instagram',-1)])]),(0,i.createElementVNode)('div',od,[o[19]||(o[19]=(0,i.createElementVNode)('div',{class:'ig-icon-btn'},[(0,i.createElementVNode)('svg',{'aria-label':'Like',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z'})])],-1)),(0,i.createElementVNode)('div',{class:'ig-icon-btn',onClick:o[0]||(o[0]=e=>n.value='dm_list')},[...o[18]||(o[18]=[(0,i.createElementVNode)('svg',{'aria-label':'Messenger',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M12.003 2.001a9.705 9.705 0 1 1-9.705 9.705 9.696 9.696 0 0 1 9.705-9.705Zm0 17.602a7.9 7.9 0 0 0 4.163-1.18l2.647.747a.5.5 0 0 0 .61-.61l-.747-2.647a7.897 7.897 0 1 0-6.673 3.69Z'}),(0,i.createElementVNode)('path',{d:'M15.42 8.784a1.237 1.237 0 0 0-1.373-.327l-3.327 1.332-1.727-1.727a1.237 1.237 0 0 0-1.92 1.573l3.22 4.293a1.237 1.237 0 0 0 2.227-.373l.973-3.6 2.333-2.333a.467.467 0 0 0 .147-.327.48.48 0 0 0-.553-.513Z'})],-1)])])])])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' Main Content (Feed) '),'home'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('main',rd,[(0,i.createCommentVNode)(' Stories (Horizontal Scroll) '),(0,i.createElementVNode)('div',sd,[(0,i.createElementVNode)('div',{class:'ig-story-item',onClick:o[1]||(o[1]=e=>f('user'))},[(0,i.createElementVNode)('div',ld,[(0,i.createElementVNode)('div',{class:'ig-story-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url('${(0,i.unref)(l).Instagram.userHead}')`})},null,4),o[20]||(o[20]=(0,i.createElementVNode)('div',{class:'ig-story-add-icon'},[(0,i.createElementVNode)('svg',{'aria-label':'Plus icon',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'12',role:'img',viewBox:'0 0 24 24',width:'12'},[(0,i.createElementVNode)('path',{d:'M12.001.504a1.5 1.5 0 0 1 1.5 1.5v8.496h8.496a1.5 1.5 0 0 1 0 3h-8.496v8.496a1.5 1.5 0 0 1-3 0v-8.496H2.005a1.5 1.5 0 0 1 0-3h8.496V2.004a1.5 1.5 0 0 1 1.5-1.5Z'})])],-1))]),o[21]||(o[21]=(0,i.createElementVNode)('span',{class:'ig-story-username'},'你的快拍',-1))]),(0,i.createCommentVNode)(' Friends Stories '),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(C.value,e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'ig-story-item',onClick:n=>f(e.id)},[(0,i.createElementVNode)('div',dd,[(0,i.createElementVNode)('div',{class:'ig-story-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${e.head})`})},null,4)]),(0,i.createElementVNode)('span',pd,(0,i.toDisplayString)(e.name),1)],8,cd))),128))]),(0,i.createCommentVNode)(' Feed Posts '),(0,i.createElementVNode)('div',md,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(l).Instagram.posts,e=>((0,i.openBlock)(),(0,i.createBlock)(_c,{key:e.id,'post-content':e,onComment:n=>E(e)},null,8,['post-content','onComment']))),128)),(0,i.createCommentVNode)(' Spacer for bottom nav '),o[23]||(o[23]=(0,i.createElementVNode)('div',{style:{height:'60px'}},null,-1)),(0,i.createCommentVNode)(' Empty State '),0===(0,i.unref)(l).Instagram.posts.length?((0,i.openBlock)(),(0,i.createElementBlock)('div',ud,[...o[22]||(o[22]=[(0,i.createElementVNode)('div',{class:'ig-empty-icon'},[(0,i.createElementVNode)('svg',{'aria-label':'Camera',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'60',role:'img',viewBox:'0 0 24 24',width:'60'},[(0,i.createElementVNode)('path',{d:'M12 10.751a3.25 3.25 0 1 0 3.25 3.25A3.254 3.254 0 0 0 12 10.751Zm0 8.5a5.25 5.25 0 1 1 5.25-5.25A5.256 5.256 0 0 1 12 19.251Zm8.385-11.236h-2.128a1.57 1.57 0 0 1-1.396-.867L16.2 5.867a3.57 3.57 0 0 0-3.17-1.866h-2.06a3.57 3.57 0 0 0-3.17 1.866l-.66 1.282a1.57 1.57 0 0 1-1.396.867H3.615A2.618 2.618 0 0 0 1 10.634v8.733A2.618 2.618 0 0 0 3.615 22h16.77A2.618 2.618 0 0 0 23 19.367v-8.733a2.618 2.618 0 0 0-2.615-2.617Z'})])],-1),(0,i.createElementVNode)('p',null,'暂无帖子',-1),(0,i.createElementVNode)('p',{class:'ig-empty-sub'},'关注朋友或发布你的第一条动态',-1)])])):(0,i.createCommentVNode)('v-if',!0)])])):'explore'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('main',Ad,[(0,i.createElementVNode)('div',hd,[(0,i.createElementVNode)('div',gd,[o[24]||(o[24]=(0,i.createElementVNode)('svg',{'aria-label':'Search',class:'ig-search-icon',fill:'#8e8e8e',height:'16',role:'img',viewBox:'0 0 24 24',width:'16'},[(0,i.createElementVNode)('path',{d:'M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('line',{fill:'none',x1:'16.511',x2:'22',y1:'16.511',y2:'22',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})],-1)),(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':o[2]||(o[2]=e=>h.value=e),placeholder:'搜索...',class:'ig-search-input',onKeyup:(0,i.withKeys)(Q,['enter'])},null,544),[[i.vModelText,h.value]])])]),(0,i.createElementVNode)('div',Cd,[A.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',fd,[...o[25]||(o[25]=[(0,i.createElementVNode)('div',{class:'ig-spinner'},null,-1),(0,i.createElementVNode)('p',null,'正在生成内容...',-1)])])):((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'ig-explore-cta',onClick:Q},[...o[26]||(o[26]=[(0,i.createElementVNode)('div',{class:'ig-explore-icon'},'✨',-1),(0,i.createElementVNode)('p',null,'点击生成随机帖子',-1),(0,i.createElementVNode)('p',{class:'ig-sub-text'},'或输入关键词搜索特定内容',-1)])]))])])):'profile'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('main',vd,[(0,i.createVNode)(td,{'user-id':t.value,onBack:o[3]||(o[3]=e=>n.value='home'),onViewPost:v,onMessage:b},null,8,['user-id'])])):'post_detail'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('main',bd,[(0,i.createElementVNode)('header',xd,[(0,i.createElementVNode)('div',{class:'ig-icon-btn',onClick:o[4]||(o[4]=e=>n.value='profile')},[...o[27]||(o[27]=[(0,i.createElementVNode)('svg',{'aria-label':'Back',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'21',x2:'3',y1:'12',y2:'12'}),(0,i.createElementVNode)('polyline',{fill:'none',points:'9 6 3 12 9 18',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})],-1)])]),o[28]||(o[28]=(0,i.createElementVNode)('span',{style:{'font-weight':'600','font-size':'16px'}},'帖子',-1))]),(0,i.createElementVNode)('div',yd,[a.value?((0,i.openBlock)(),(0,i.createBlock)(_c,{key:0,'post-content':a.value,onComment:o[5]||(o[5]=e=>E(a.value))},null,8,['post-content'])):(0,i.createCommentVNode)('v-if',!0)])])):'dm_list'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('main',Bd,[(0,i.createVNode)(Gl,{onBack:o[6]||(o[6]=e=>n.value='home'),onOpenChat:b})])):'chat_detail'===n.value?((0,i.openBlock)(),(0,i.createElementBlock)('main',wd,[(0,i.createVNode)(Il,{'chat-id':r.value,onBack:o[7]||(o[7]=e=>n.value='dm_list')},null,8,['chat-id'])])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' Bottom Navigation '),['home','profile','post_detail','explore'].includes(n.value)?((0,i.openBlock)(),(0,i.createElementBlock)('nav',kd,[(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['ig-nav-item',{active:'home'===n.value}]),onClick:o[8]||(o[8]=e=>n.value='home')},[...o[29]||(o[29]=[(0,i.createElementVNode)('svg',{'aria-label':'Home',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M22 23h-6.001a1 1 0 0 1-1-1v-5.455a2.997 2.997 0 1 0-5.993 0V22a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V11.543a1.002 1.002 0 0 1 .31-.724l10-9.543a1.001 1.001 0 0 1 1.38 0l10 9.543a1.002 1.002 0 0 1 .31.724V22a1 1 0 0 1-1 1Z'})],-1)])],2),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['ig-nav-item',{active:'explore'===n.value}]),onClick:o[9]||(o[9]=e=>n.value='explore')},[...o[30]||(o[30]=[(0,i.createElementVNode)('svg',{'aria-label':'Search',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('line',{fill:'none',x1:'16.511',x2:'22',y1:'16.511',y2:'22',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'})],-1)])],2),(0,i.createElementVNode)('div',{class:'ig-nav-item',onClick:y},[...o[31]||(o[31]=[(0,i.createElementVNode)('svg',{'aria-label':'New Post',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('path',{d:'M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'6.545',x2:'17.455',y1:'12.001',y2:'12.001'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'12.003',x2:'12.003',y1:'6.545',y2:'17.455'})],-1)])]),o[32]||(o[32]=(0,i.createElementVNode)('div',{class:'ig-nav-item'},[(0,i.createElementVNode)('svg',{'aria-label':'Reels',class:'x1lliihq x1n2onr6 x5n08af',fill:'currentColor',height:'24',role:'img',viewBox:'0 0 24 24',width:'24'},[(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linejoin':'round','stroke-width':'2',x1:'2.049',x2:'21.95',y1:'7.002',y2:'7.002'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'13.504',x2:'16.362',y1:'2.001',y2:'7.002'}),(0,i.createElementVNode)('line',{fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',x1:'7.207',x2:'10.002',y1:'2.11',y2:'7.002'}),(0,i.createElementVNode)('path',{d:'M2 12.001v3.449c0 2.849.698 4.006 1.606 4.945.94.908 2.098 1.607 4.946 1.607h6.896c2.848 0 4.006-.699 4.946-1.607.908-.939 1.606-2.096 1.606-4.945V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z',fill:'none',stroke:'currentColor','stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2'}),(0,i.createElementVNode)('path',{d:'M9.763 17.664a.908.908 0 0 1-.454-.787V11.63a.909.909 0 0 1 1.364-.788l4.545 2.624a.909.909 0 0 1 0 1.575l-4.545 2.624a.91.91 0 0 1-.91 0Z','fill-rule':'evenodd'})])],-1)),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['ig-nav-item',{active:'profile'===n.value&&'user'===t.value}]),onClick:o[10]||(o[10]=e=>f('user'))},[(0,i.createElementVNode)('div',{class:'ig-nav-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url('${(0,i.unref)(l).Instagram.userHead}')`})},null,4)],2)])):(0,i.createCommentVNode)('v-if',!0),(0,i.createCommentVNode)(' Publish Dialog (Full Screen) '),(0,i.createVNode)(i.Transition,{name:'slide-up'},{default:(0,i.withCtx)(()=>[s.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Ed,[(0,i.createElementVNode)('div',Sd,[(0,i.createCommentVNode)(' Top Bar '),(0,i.createElementVNode)('div',Nd,[(0,i.createElementVNode)('button',{class:'ig-text-btn cancel',onClick:o[11]||(o[11]=e=>s.value=!1)},'取消'),o[33]||(o[33]=(0,i.createElementVNode)('span',{class:'ig-publish-title'},'新建帖子',-1)),(0,i.createElementVNode)('button',{class:'ig-text-btn submit',onClick:N},'分享')]),(0,i.createElementVNode)('div',Qd,[(0,i.createCommentVNode)(' Caption Area '),(0,i.createElementVNode)('div',Vd,[(0,i.createElementVNode)('div',{class:'ig-publish-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${(0,i.unref)(l).Instagram.userHead||'https://via.placeholder.com/30'})`})},null,4),(0,i.withDirectives)((0,i.createElementVNode)('textarea',{'onUpdate:modelValue':o[12]||(o[12]=e=>g.value.content=e),placeholder:'填写标题...',class:'ig-publish-input'},null,512),[[i.vModelText,g.value.content]]),g.value.images.length>0?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'ig-thumbnail-preview',style:(0,i.normalizeStyle)({backgroundImage:`url(${g.value.images[0]})`})},null,4)):(0,i.createCommentVNode)('v-if',!0)]),o[41]||(o[41]=(0,i.createElementVNode)('div',{class:'ig-divider'},null,-1)),(0,i.createCommentVNode)(' Image Management '),o[42]||(o[42]=(0,i.createElementVNode)('div',{class:'ig-section-title'},'添加照片/视频',-1)),(0,i.createElementVNode)('div',_d,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(g.value.images,(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:n,class:'ig-scroller-item',style:(0,i.normalizeStyle)(e.startsWith('http')?{backgroundImage:`url(${e})`}:{backgroundColor:'#f0f0f0',display:'flex',alignItems:'center',justifyContent:'center',padding:'5px'})},[e.startsWith('http')?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('span',zd,(0,i.toDisplayString)(e),1)),(0,i.createElementVNode)('div',{class:'ig-remove-badge',onClick:e=>function(e){g.value.images.splice(e,1)}(n)},'×',8,Td)],4))),128)),(0,i.createElementVNode)('div',{class:'ig-add-card',onClick:B},[...o[34]||(o[34]=[(0,i.createElementVNode)('span',{class:'ig-plus'},'+',-1),(0,i.createElementVNode)('span',{class:'ig-add-text'},'添加图片',-1)])])]),o[43]||(o[43]=(0,i.createElementVNode)('div',{class:'ig-divider'},null,-1)),(0,i.createCommentVNode)(' Options '),(0,i.createElementVNode)('div',{class:'ig-action-row',onClick:o[13]||(o[13]=e=>c.value=!0)},[o[36]||(o[36]=(0,i.createElementVNode)('span',{class:'ig-action-label'},'标记用户',-1)),(0,i.createElementVNode)('div',Md,[g.value.taggedUsers.length>0?((0,i.openBlock)(),(0,i.createElementBlock)('span',Fd,(0,i.toDisplayString)(g.value.taggedUsers.join(', ')),1)):(0,i.createCommentVNode)('v-if',!0),o[35]||(o[35]=(0,i.createElementVNode)('span',{class:'ig-chevron'},'›',-1))])]),o[44]||(o[44]=(0,i.createElementVNode)('div',{class:'ig-divider'},null,-1)),(0,i.createElementVNode)('div',{class:'ig-action-row',onClick:w},[o[38]||(o[38]=(0,i.createElementVNode)('span',{class:'ig-action-label'},'添加地点',-1)),(0,i.createElementVNode)('div',Dd,[g.value.location?((0,i.openBlock)(),(0,i.createElementBlock)('span',Id,(0,i.toDisplayString)(g.value.location),1)):(0,i.createCommentVNode)('v-if',!0),o[37]||(o[37]=(0,i.createElementVNode)('span',{class:'ig-chevron'},'›',-1))])]),o[45]||(o[45]=(0,i.createElementVNode)('div',{class:'ig-divider'},null,-1)),(0,i.createElementVNode)('div',{class:'ig-action-row',onClick:k},[o[40]||(o[40]=(0,i.createElementVNode)('span',{class:'ig-action-label'},'添加音乐',-1)),(0,i.createElementVNode)('div',jd,[g.value.music?((0,i.openBlock)(),(0,i.createElementBlock)('span',Ud,(0,i.toDisplayString)(g.value.music),1)):(0,i.createCommentVNode)('v-if',!0),o[39]||(o[39]=(0,i.createElementVNode)('span',{class:'ig-chevron'},'›',-1))])])])])])):(0,i.createCommentVNode)('v-if',!0)]),_:1}),(0,i.createCommentVNode)(' Tag Users Modal '),(0,i.createVNode)(i.Transition,{name:'slide-up'},{default:(0,i.withCtx)(()=>[c.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',$d,[(0,i.createElementVNode)('div',Hd,[(0,i.createElementVNode)('div',Yd,[(0,i.createElementVNode)('button',{class:'ig-text-btn cancel',onClick:o[14]||(o[14]=e=>c.value=!1)},'完成'),o[46]||(o[46]=(0,i.createElementVNode)('span',{class:'ig-publish-title'},'标记用户',-1)),o[47]||(o[47]=(0,i.createElementVNode)('div',{style:{width:'32px'}},null,-1))]),(0,i.createElementVNode)('div',Wd,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(C.value,e=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:e.id,class:'ig-tag-item',onClick:n=>function(e){const n=g.value.taggedUsers.indexOf(e);n>-1?g.value.taggedUsers.splice(n,1):g.value.taggedUsers.push(e)}(e.name)},[(0,i.createElementVNode)('div',Od,[(0,i.createElementVNode)('div',{class:'ig-tag-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${e.head})`})},null,4),(0,i.createElementVNode)('span',Ld,(0,i.toDisplayString)(e.name),1)]),(0,i.createElementVNode)('div',{class:(0,i.normalizeClass)(['ig-checkbox',{checked:g.value.taggedUsers.includes(e.name)}])},[g.value.taggedUsers.includes(e.name)?((0,i.openBlock)(),(0,i.createElementBlock)('svg',qd,[...o[48]||(o[48]=[(0,i.createElementVNode)('path',{d:'M21.928 2.378a1.5 1.5 0 0 0-2.268-.088l-10.82 11.968-4.996-4.577a1.5 1.5 0 0 0-2.022 2.207l6.238 5.717a1.5 1.5 0 0 0 2.23-.217l11.727-12.972a1.5 1.5 0 0 0-.089-2.038Z'},null,-1)])])):(0,i.createCommentVNode)('v-if',!0)],2)],8,Pd))),128))])])])):(0,i.createCommentVNode)('v-if',!0)]),_:1}),(0,i.createCommentVNode)(' Comment Input Dialog '),(0,i.createVNode)(i.Transition,{name:'fade'},{default:(0,i.withCtx)(()=>[p.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',Rd,[(0,i.createElementVNode)('div',{class:'ig-comment-backdrop',onClick:o[15]||(o[15]=e=>p.value=!1)}),(0,i.createElementVNode)('div',Xd,[o[49]||(o[49]=(0,i.createElementVNode)('div',{class:'ig-comment-header-bar'},[(0,i.createElementVNode)('div',{class:'ig-comment-handle'})],-1)),o[50]||(o[50]=(0,i.createElementVNode)('div',{class:'ig-comment-title-row'},[(0,i.createElementVNode)('span',null,'评论')],-1)),(0,i.createElementVNode)('div',Zd,[(0,i.createElementVNode)('div',{class:'ig-comment-my-avatar',style:(0,i.normalizeStyle)({backgroundImage:`url(${(0,i.unref)(l).Instagram.userHead||'https://via.placeholder.com/30'})`})},null,4),(0,i.createElementVNode)('div',Gd,[(0,i.withDirectives)((0,i.createElementVNode)('input',{'onUpdate:modelValue':o[16]||(o[16]=e=>m.value=e),class:'ig-comment-input',placeholder:'添加评论...',autofocus:'',onKeyup:(0,i.withKeys)(S,['enter'])},null,544),[[i.vModelText,m.value]]),(0,i.createElementVNode)('button',{class:'ig-comment-send',disabled:!m.value.trim(),onClick:S},'发布',8,Jd)])])])])):(0,i.createCommentVNode)('v-if',!0)]),_:1})]))}});a(9088);const ep=(0,Xe.A)(Kd,[['__scopeId','data-v-06daa26e']]),np={class:'home-status'},tp={class:'home-status__top'},ap={class:'home-status__time'},ip={class:'home-status__date'},op={class:'home-apps'},rp={class:'apps-grid'},sp={class:'app-item__icon-box'},lp=['src'],cp={key:1,class:'app-item__svg',viewBox:'0 0 1024 1024','aria-hidden':'true'},dp={class:'app-item__icon-box'},pp=['src'],mp={key:1,class:'app-item__svg',viewBox:'0 0 1024 1024','aria-hidden':'true'},up={class:'app-item__icon-box'},Ap=['src'],hp={key:1,class:'app-item__svg',viewBox:'0 0 1024 1024','aria-hidden':'true'},gp={class:'app-item__icon-box'},Cp=['src'],fp={key:1,class:'app-item__svg',viewBox:'0 0 1024 1024','aria-hidden':'true'},vp={class:'app-item__icon-box app-item__icon-box--ig'},bp=['src'],xp=(0,i.defineComponent)({__name:'Home',setup(e){const n=(0,i.ref)(s());let t;(0,i.onMounted)(()=>{t=window.setInterval(()=>{n.value=s()},6e4)}),(0,i.onBeforeUnmount)(()=>{t&&clearInterval(t)});const a=e=>{l.phone.activeApp=e},o=(0,i.computed)(()=>{const e=(l.phone.wallpaper||'').trim();return e?{backgroundImage:`url('${e}')`,backgroundSize:'cover',backgroundPosition:'center',backgroundRepeat:'no-repeat'}:{}}),r=(0,i.computed)(()=>({QQ:(l.phone.icons.QQ||'').trim(),RedNote:(l.phone.icons.RedNote||'').trim(),Douyin:(l.phone.icons.Douyin||'').trim(),Tinder:(l.phone.icons.Tinder||'').trim(),Instagram:(l.phone.icons.Instagram||'').trim()}));function s(){const e=new Date;return`${e.getMonth()+1}月${e.getDate()}日  ${['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'][e.getDay()]}`}return(e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{class:'home-page',style:(0,i.normalizeStyle)(o.value)},[(0,i.createCommentVNode)(' 顶部状态栏 '),(0,i.createElementVNode)('div',np,[(0,i.createElementVNode)('div',tp,[(0,i.createElementVNode)('div',ap,(0,i.toDisplayString)((0,i.unref)(l).phone.time),1)]),(0,i.createElementVNode)('div',ip,(0,i.toDisplayString)(n.value),1)]),(0,i.createCommentVNode)(' 应用图标区域 - 2x2 网格布局 '),(0,i.createElementVNode)('div',op,[(0,i.createElementVNode)('div',rp,[(0,i.createCommentVNode)(' QQ '),(0,i.createElementVNode)('button',{class:'app-item app-item--qq',type:'button',onClick:t[0]||(t[0]=e=>a('QQ'))},[(0,i.createElementVNode)('div',sp,[r.value.QQ?((0,i.openBlock)(),(0,i.createElementBlock)('img',{key:0,class:'app-item__img',src:r.value.QQ,alt:'QQ'},null,8,lp)):((0,i.openBlock)(),(0,i.createElementBlock)('svg',cp,[...t[5]||(t[5]=[(0,i.createElementVNode)('path',{d:'M666.122449 909.061224c-10.44898 0-21.420408-1.044898-31.869388-2.612244-39.183673-4.702041-74.710204-23.510204-100.832653-53.289796-13.583673 5.22449-28.212245 5.22449-41.795918 0-21.420408 28.212245-61.64898 48.065306-108.669388 53.289796-66.35102 7.314286-138.44898-11.493878-144.718367-55.379592-5.22449-34.481633 37.093878-61.126531 81.502041-75.755102-25.6-28.212245-43.363265-63.738776-51.2-101.355102l-0.522449 0.522449c-25.077551 31.346939-41.795918 50.155102-61.126531 50.155102-2.089796 0-4.179592-0.522449-6.269388-1.044898-7.314286-2.612245-13.061224-8.881633-17.240816-18.808164-16.195918-34.481633-9.404082-100.310204 15.15102-150.465306 0 0 0-0.522449 0.522449-0.522449 12.538776-22.465306 27.689796-43.363265 45.453061-62.171428-6.269388-11.493878-10.44898-24.032653-12.016326-37.093878v-3.134694c0.522449-19.330612 10.44898-37.093878 26.644898-47.542857-10.971429-73.142857 9.926531-147.330612 58.514286-203.232653 49.110204-56.946939 120.163265-88.816327 194.873469-86.204081h4.702041c65.306122 0 129.567347 26.122449 177.110204 72.097959 49.110204 47.542857 76.8 112.326531 77.844898 180.767347v7.314285c0.522449 9.926531 0 19.330612-1.044898 29.257143 14.106122 8.881633 21.420408 20.37551 21.420408 48.065306 0 13.583673-1.044898 27.689796-9.926531 36.04898 13.061224 17.763265 28.734694 42.840816 41.27347 62.693877l2.612245 4.179592c20.37551 32.391837 23.510204 74.187755 22.987755 96.130613 0 17.240816-2.089796 58.514286-18.285714 70.530612-3.657143 2.612245-7.314286 3.657143-12.016327 3.657143h-4.179592c-26.122449 0-41.273469-23.510204-57.991837-48.587755l-1.567347-2.089796c-8.881633 36.571429-26.122449 71.053061-50.677551 99.265306 27.167347 9.404082 83.069388 31.346939 75.755103 73.142857-5.746939 35.526531-55.902041 62.171429-114.416327 62.171428z m-388.702041-63.738775z m250.253061-11.493878z m276.375511-140.016326z m-47.020409-235.102041z',fill:'currentColor'},null,-1)])]))]),t[6]||(t[6]=(0,i.createElementVNode)('span',{class:'app-item__name'},'QQ',-1))]),(0,i.createCommentVNode)(' RedNote '),(0,i.createElementVNode)('button',{class:'app-item app-item--rednote',type:'button',onClick:t[1]||(t[1]=e=>a('RedNote'))},[(0,i.createElementVNode)('div',dp,[r.value.RedNote?((0,i.openBlock)(),(0,i.createElementBlock)('img',{key:0,class:'app-item__img',src:r.value.RedNote,alt:'RedNote'},null,8,pp)):((0,i.openBlock)(),(0,i.createElementBlock)('svg',mp,[...t[7]||(t[7]=[(0,i.createElementVNode)('path',{d:'M95.83746 426.890159H25.742222c6.095238 91.550476-16.253968 160.954921-16.253968 160.95492l37.587302 68.957461c49.777778-21.333333 48.761905-229.912381 48.761904-229.912381zM323.433651 426.890159h-70.135873s-1.015873 208.579048 48.802539 229.912381l37.587302-68.957461s-22.349206-69.404444-16.253968-160.95492zM140.048254 636.647619h-44.210794c0 51.728254 43.68254 56.279365 43.68254 56.279365h22.349206c44.860952 0 46.730159-51.36254 46.730159-51.36254v-306.265396h-68.551111v301.348571zM375.893333 489.955556h45.673651l-34.824127 71.233015s-20.31746 40.025397 12.190476 41.36635h75.865397l30.313651-55.100953h-37.871746c-4.835556 0-7.964444-5.12-5.770159-9.427301l56.685714-111.136508h-65.706666l-3.900953 7.964444h-4.347936c-4.835556 0-7.964444-5.12-5.770159-9.427301l47.217778-90.128254h-65.706667l-56.23873 113.290158s-20.31746 40.025397 12.190476 41.36635zM385.889524 624.782222s-8.370794 0.772063-13.978413-4.835555l-34.011428 65.625396s5.566984 7.639365 17.026031 7.639366h84.317461l36.043174-68.429207h-89.396825z',fill:'currentColor'},null,-1),(0,i.createElementVNode)('path',{d:'M640.75581 426.890159h43.312761v-69.892064h-155.103492v69.892064h44.048254v200.086349h-65.015873l-32.711111 65.950476h231.172064v-65.950476h-65.702603z',fill:'currentColor'},null,-1),(0,i.createElementVNode)('path',{d:'M840.553651 425.142857h24.096508a10.40254 10.40254 0 0 1 10.402539 10.443175v42.829206h-34.499047v-53.272381z m110.896762 53.272381h-7.964445v-45.186032c0-42.300952-34.255238-76.596825-76.515555-76.596825h-26.412699v-21.333333h-67.047619v21.333333h-42.097778v68.510476h42.097778v53.272381h-67.047619v68.510476h67.047619v146.00127h67.047619v-146.00127h92.281905a16.457143 16.457143 0 0 1 16.416508 16.457143v71.964445h-63.959365c0 31.817143 25.76254 57.579683 57.539048 57.579682h17.310476c31.776508 0 57.539048-25.76254 57.539047-57.579682v-90.615873c-0.004063-36.612063-29.663492-66.31619-66.23492-66.316191z',fill:'currentColor'},null,-1),(0,i.createElementVNode)('path',{d:'M1016.665397 390.23746c0-18.326349-14.872381-33.239365-33.19873-33.239365s-33.19873 14.913016-33.19873 33.239365v33.239365h33.19873c18.326349 0 33.19873-14.872381 33.19873-33.239365z',fill:'currentColor'},null,-1)])]))]),t[8]||(t[8]=(0,i.createElementVNode)('span',{class:'app-item__name'},'RedNote',-1))]),(0,i.createCommentVNode)(' TikTok '),(0,i.createElementVNode)('button',{class:'app-item app-item--douyin',type:'button',onClick:t[2]||(t[2]=e=>a('Douyin'))},[(0,i.createElementVNode)('div',up,[r.value.Douyin?((0,i.openBlock)(),(0,i.createElementBlock)('img',{key:0,class:'app-item__img',src:r.value.Douyin,alt:'TikTok'},null,8,Ap)):((0,i.openBlock)(),(0,i.createElementBlock)('svg',hp,[...t[9]||(t[9]=[(0,i.createElementVNode)('path',{d:'M937.4 423.9c-84 0-165.7-27.3-232.9-77.8v352.3c0 179.9-138.6 325.6-309.6 325.6S85.3 878.3 85.3 698.4c0-179.9 138.6-325.6 309.6-325.6 17.1 0 33.7 1.5 49.9 4.3v186.6c-15.5-6.1-32-9.2-48.6-9.2-76.3 0-138.2 65-138.2 145.3 0 80.2 61.9 145.3 138.2 145.3 76.2 0 138.1-65.1 138.1-145.3V0H707c0 134.5 103.7 243.5 231.6 243.5v180.3l-1.2 0.1',fill:'currentColor'},null,-1)])]))]),t[10]||(t[10]=(0,i.createElementVNode)('span',{class:'app-item__name'},'TikTok',-1))]),(0,i.createCommentVNode)(' Tinder '),(0,i.createElementVNode)('button',{class:'app-item app-item--tinder',type:'button',onClick:t[3]||(t[3]=e=>a('Tinder'))},[(0,i.createElementVNode)('div',gp,[r.value.Tinder?((0,i.openBlock)(),(0,i.createElementBlock)('img',{key:0,class:'app-item__img',src:r.value.Tinder,alt:'Tinder'},null,8,Cp)):((0,i.openBlock)(),(0,i.createElementBlock)('svg',fp,[...t[11]||(t[11]=[(0,i.createElementVNode)('path',{d:'M397.551701 403.31715a10.622543 10.622543 0 0 0 15.805832 2.687631l0.639912-0.51193c16.637718-13.854099 31.611663-28.156137 45.689732-43.386048C596.596394 213.519188 516.639364 31.112212 515.999451 29.384449a21.277081 21.277081 0 0 1 6.399122-25.340524c8.318859-5.75921 18.557454-5.119298 26.236401 1.407807 463.936354 431.460809 341.073209 760.119721 332.114438 782.260684-37.114908 133.997617-184.934629 230.976313-360.23858 235.903637-5.887192 0.351952-10.334582 0.351952-15.485875 0.351951-206.979605 0-382.955463-127.502508-382.955463-290.392161v-2.559649c0-225.984998 204.547939-448.866421 213.698683-458.337122a18.685437 18.685437 0 0 1 22.396927-4.479386c7.678947 3.231557 12.670262 10.878508 12.414297 19.229362-1.82375 44.185938 7.135021 82.548675 26.908309 115.184198v0.639913l0.095986 0.031995z',fill:'currentColor'},null,-1)])]))]),t[12]||(t[12]=(0,i.createElementVNode)('span',{class:'app-item__name'},'Tinder',-1))]),(0,i.createElementVNode)('button',{class:'app-item app-item--instagram',type:'button',onClick:t[4]||(t[4]=e=>a('Instagram'))},[(0,i.createElementVNode)('div',vp,[r.value.Instagram?((0,i.openBlock)(),(0,i.createElementBlock)('img',{key:0,class:'app-item__img',src:r.value.Instagram,alt:'Instagram'},null,8,bp)):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[(0,i.createCommentVNode)(' 替换后的 SVG '),t[13]||(t[13]=(0,i.createElementVNode)('svg',{class:'app-item__svg',viewBox:'0 0 1024 1024','aria-hidden':'true'},[(0,i.createCommentVNode)(' 路径1：外轮廓与基本结构 '),(0,i.createElementVNode)('path',{d:'M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9z m0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zM725.5 250.7c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9c-0.1-26.6-21.4-47.9-47.9-47.9z',fill:'currentColor'}),(0,i.createCommentVNode)(' 路径2：复杂的相机纹理细节 '),(0,i.createElementVNode)('path',{d:'M911.8 512c0-55.2 0.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-0.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-0.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9 0.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165z m-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z',fill:'currentColor'})],-1))],2112))]),t[14]||(t[14]=(0,i.createElementVNode)('span',{class:'app-item__name'},'Instagram',-1))])])]),(0,i.createCommentVNode)(' 底部 Dock '),t[15]||(t[15]=(0,i.createElementVNode)('div',{class:'home-dock'},[(0,i.createCommentVNode)(' 移除无关图标 '),(0,i.createElementVNode)('div',{class:'home-dock__indicator'})],-1))],4))}});a(1821);const yp=(0,Xe.A)(xp,[['__scopeId','data-v-78125f6c']]),Bp={class:'dinbu'},wp={id:'time',style:{'font-size':'12px'}},kp={style:{display:'flex','align-items':'center','justify-self':'end',gap:'2px'}},Ep={viewBox:'0 0 1024 1024',width:'15',height:'15',style:{'justify-self':'end'}},Sp={class:'card-int',style:{'background-color':'white'}},Np={id:'Home_page'},Qp={id:'App_Page',style:{height:'100%'}},Vp={class:'twitter',id:'App_twitter',style:{display:'none'}},_p={class:'mimictwitter'},zp={style:{'margin-right':'8px','margin-top':'10px'}},Tp={style:{display:'grid','grid-template-columns':'1fr 1fr 1fr','align-items':'center'}},Mp={viewBox:'0 0 24 24',style:{width:'24.73px',height:'54px','justify-self':'center'}},Fp={style:{'margin-left':'auto',width:'24px',height:'24px'},viewBox:'0 0 1024 1024','aria-hidden':'true'},Dp={id:'QQ_div',style:{'background-color':'#eff3ff',width:'100%',height:'100%','box-sizing':'border-box',position:'relative'}},Ip={id:'RedNote_div',style:{'background-color':'#eff3ff',width:'100%',height:'100%'}},jp={id:'Douyin_div',style:{width:'100%',height:'100%','background-color':'#000'}},Up={id:'Tinder_div',style:{width:'100%',height:'100%','background-color':'#fff'}},$p={id:'Instagram_div',style:{width:'100%',height:'100%','background-color':'#fff'}},Hp={class:'discord',id:'App_discord',style:{display:'none',width:'100%',height:'100%'}},Yp={class:'discord-homepage',style:{width:'100%',height:'100%'}},Wp={class:'discord-top'},Pp={'aria-hidden':'true',width:'20',height:'20',fill:'none',viewBox:'0 0 24 24',style:{'margin-left':'15px','margin-right':'10px'}},Op={class:'page_button',style:{'background-color':'none'},id:'page_button'},Lp={t:'1735485675807',class:'icon',viewBox:'0 0 1024 1024',version:'1.1',xmlns:'http://www.w3.org/2000/svg','p-id':'9713',width:'16',height:'16',style:{display:'none'}},qp={__name:'index',setup(e){(0,i.useCssVars)(e=>({v57dc8ddc:(0,i.unref)(f),v7f4e989e:(0,i.unref)(x),e9aadc08:(0,i.unref)(b),v3e90f9cc:(0,i.unref)(v),fd2f8a70:(0,i.unref)(n)})),console.log(`index.vue取到的user头像:${l.ST.userHead}`);const n=(0,i.computed)(()=>`url('${l.ST.userHead}')`),t=(0,i.ref)(null),a=(0,i.ref)(null);let o=!1,r=0,s=0,c=0,d=0,p=!1,m=!1,u=0;const A=e=>{e.target!=t.value&&e.target!=a.value||t.value&&(e.preventDefault(),console.log('开始拖动'),o=!0,m=!1,p='touchstart'===e.type,p&&e.touches.length>0?(r=e.touches[0].clientX,s=e.touches[0].clientY):(r=e.clientX,s=e.clientY),c=t.value.offsetLeft,d=t.value.offsetTop,p?$('body').on('touchmove',h):($('body').on('mousemove',h),$('body').on('mouseup',g)),e.preventDefault())},h=e=>{if(console.log('鼠标/触屏拖动中'),!o)return;let n,a;p&&e.touches.length>0?(n=e.touches[0].clientX,a=e.touches[0].clientY):(n=e.clientX,a=e.clientY);const i=n-r,l=a-s;(Math.abs(i)>5||Math.abs(l)>5)&&(m=!0,t.value.style.left=`${c+i}px`,t.value.style.top=`${d+l}px`),e.preventDefault()},g=()=>{console.log('停止拖动 (鼠标)'),o=!1,m=!1,$('body').off('mousemove',h),$('body').off('mouseup',g)},C=(e,n=!1)=>{if(console.log(`触屏结束,${n}`),o=!1,$('body').off('touchmove',h),!m){const t=(new Date).getTime(),a=t-u;a<300&&a>0&&n&&(l.phone.show=!l.phone.show,e.preventDefault()),u=t}m=!1},f=((0,i.computed)(()=>l.phone.colorSettings.background||'#1b1717'),(0,i.computed)(()=>`4px solid ${l.phone.colorSettings.border||'#dcdcdc'}`)),v=(0,i.computed)(()=>l.phone.colorSettings.button||'#ce1212'),b=(0,i.computed)(()=>l.phone.width.now&&Number(l.phone.width.now)?l.phone.width.now>l.phone.width.max?`${l.phone.width.max}px`:l.phone.width.now<l.phone.width.min?`${l.phone.width.min}px`:`${l.phone.width.now}px`:'200px'),x=(0,i.computed)(()=>l.phone.height.now&&Number(l.phone.height.now)?l.phone.height.now>l.phone.height.max?`${l.phone.height.max}px`:l.phone.height.now<l.phone.height.min?`${l.phone.height.min}px`:`${l.phone.height.now}px`:`${l.phone.height.min}px`);function y(){console.log(`点击了returnPage:${l.phone.activeApp}`),console.log(`Chatid:${l.QQ.activeChatId}`),'QQ'==l.phone.activeApp?l.QQ.activeChatId&&''!=l.QQ.activeChatId?l.QQ.activeChatId=null:(console.log('切换APP'),l.phone.activeApp='RedNote'):'RedNote'==l.phone.activeApp&&(l.RedNote.activePost&&''!=l.RedNote.activePost?l.RedNote.activePost=null:l.phone.activeApp='QQ')}function B(){'QQ'==l.phone.activeApp?l.phone.activeApp='RedNote':l.phone.activeApp='QQ'}return(e,n)=>((0,i.openBlock)(),(0,i.createBlock)(i.Transition,{name:'popup',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',{class:(0,i.normalizeClass)('card'+((0,i.unref)(l).ST.isMobile?'':' card-pc')),id:'baibai_phone',ref_key:'cardRef',ref:t,onMousedown:A,onTouchstart:A,onTouchend:n[3]||(n[3]=e=>C(e,!1))},[n[30]||(n[30]=(0,i.createElementVNode)('div',{class:'btn1'},null,-1)),n[31]||(n[31]=(0,i.createElementVNode)('div',{class:'btn2'},null,-1)),n[32]||(n[32]=(0,i.createElementVNode)('div',{class:'btn3'},null,-1)),n[33]||(n[33]=(0,i.createElementVNode)('div',{class:'btn4'},null,-1)),(0,i.createElementVNode)('div',Bp,[(0,i.createElementVNode)('span',wp,(0,i.toDisplayString)((0,i.unref)(l).phone.time),1),(0,i.createElementVNode)('div',kp,[n[5]||(n[5]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'16',height:'15'},[(0,i.createElementVNode)('path',{d:'M926.634667 294.912a32 32 0 1 1-39.936 50.005333C780.512 260.128 649.824 213.333333 512.053333 213.333333c-137.813333 0-268.544 46.826667-374.752 131.669334a32 32 0 1 1-39.936-50.005334C214.784 201.194667 359.562667 149.333333 512.053333 149.333333c152.437333 0 297.173333 51.818667 414.581334 145.578667z m-235.413334 298.133333a32 32 0 0 1-38.442666 51.178667A233.418667 233.418667 0 0 0 512.021333 597.333333c-51.541333 0-100.48 16.629333-140.8 46.912a32 32 0 1 1-38.442666-51.157333A297.408 297.408 0 0 1 512.021333 533.333333c65.504 0 127.893333 21.184 179.2 59.722667z m128-149.344a32 32 0 0 1-38.442666 51.168C703.829333 437.066667 610.378667 405.333333 512.032 405.333333c-98.368 0-191.850667 31.754667-268.8 89.578667a32 32 0 1 1-38.453333-51.157333C292.736 377.664 399.669333 341.333333 512.032 341.333333c112.32 0 219.242667 36.309333 307.189333 102.368zM512 853.333333a64 64 0 1 1 0-128 64 64 0 0 1 0 128z',fill:'currentColor'})],-1)),n[6]||(n[6]=(0,i.createElementVNode)('span',{style:{'font-size':'12px'}},'78%',-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',Ep,[...n[4]||(n[4]=[(0,i.createElementVNode)('path',{d:'M984.2 434.8c-5-2.9-8.2-8.2-8.2-13.9v-99.3c0-53.6-43.9-97.5-97.5-97.5h-781C43.9 224 0 267.9 0 321.5v380.9C0 756.1 43.9 800 97.5 800h780.9c53.6 0 97.5-43.9 97.5-97.5v-99.3c0-5.8 3.2-11 8.2-13.9 23.8-13.9 39.8-39.7 39.8-69.2v-16c0.1-29.6-15.9-55.5-39.7-69.3zM912 702.5c0 12-6.2 19.9-9.9 23.6-3.7 3.7-11.7 9.9-23.6 9.9h-781c-11.9 0-19.9-6.2-23.6-9.9-3.7-3.7-9.9-11.7-9.9-23.6v-381c0-11.9 6.2-19.9 9.9-23.6 3.7-3.7 11.7-9.9 23.6-9.9h780.9c11.9 0 19.9 6.2 23.6 9.9 3.7 3.7 9.9 11.7 9.9 23.6v381z','p-id':'4287',fill:'currentColor'},null,-1),(0,i.createElementVNode)('path',{d:'M736 344v336c0 8.8-7.2 16-16 16H112c-8.8 0-16-7.2-16-16V344c0-8.8 7.2-16 16-16h608c8.8 0 16 7.2 16 16z','p-id':'4288',fill:'currentColor'},null,-1)])]))])]),(0,i.createElementVNode)('div',Sp,[(0,i.withDirectives)((0,i.createElementVNode)('div',Np,[(0,i.createVNode)(yp)],512),[[i.vShow,'home'==(0,i.unref)(l).phone.activeApp]]),(0,i.withDirectives)((0,i.createElementVNode)('div',Qp,[(0,i.createElementVNode)('div',Vp,[(0,i.createElementVNode)('div',_p,[(0,i.createElementVNode)('div',zp,[(0,i.createElementVNode)('div',Tp,[n[9]||(n[9]=(0,i.createElementVNode)('div',{style:{'border-radius':'50%',width:'32px',height:'32px','margin-left':'7px'},class:'twitter-close-btn user_avatar'},null,-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',Mp,[...n[7]||(n[7]=[(0,i.createElementVNode)('g',null,[(0,i.createElementVNode)('path',{d:'M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z'})],-1)])])),((0,i.openBlock)(),(0,i.createElementBlock)('svg',Fp,[...n[8]||(n[8]=[(0,i.createElementVNode)('g',null,[(0,i.createElementVNode)('path',{d:'M596.992 512q0 34.016-24 59.008-12 12-27.488 18.496T512.992 596q-34.016 0-59.008-24.992-4.992-4.992-8.51199999-10.016t-6.49600001-11.008-4.992-12.512-3.48799999-12.992-1.50400001-12.512q0-35.00800001 24.992-59.488t59.488-24.512 59.488 24q7.008 8 12.992 17.504t8.512 20.512T596.96 512z m0 332q0 35.00800001-24 59.008-8 8-17.504 13.504t-20.512 8.512-22.016 3.008q-34.016 0-59.008-24.992-6.016-4.992-10.496-12t-7.488-14.496-4.992-16-2.016-16.512q0-35.00800001 24.992-59.488t59.488-24.51199999 59.488 24.99199999q11.008 11.008 17.504 27.008t6.496 32z m0-664.992q0 35.00800001-24 59.008-8 8-17.504 13.504t-20.512 8.512-22.016 3.00800001q-34.016 0-59.008-24.51200001T428.96 179.04000001t24.992-59.00800001q12-12 27.488-18.496t31.488-6.496q35.00800001 0 60 24.992 11.008 11.008 17.504 27.008t6.496 32z',fill:'#000000','p-id':'1477'})],-1)])]))]),n[10]||(n[10]=(0,i.createElementVNode)('div',{style:{'margin-top':'13px'}},null,-1)),n[11]||(n[11]=(0,i.createElementVNode)('div',{style:{display:'grid','grid-template-columns':'1fr 1fr','align-items':'center','justify-items':'center'}},[(0,i.createElementVNode)('span',{style:{color:'rgb(95, 111, 123)'}},'为你推荐'),(0,i.createElementVNode)('span',null,[(0,i.createElementVNode)('strong',null,'正在关注')])],-1)),n[12]||(n[12]=(0,i.createElementVNode)('div',{style:{'margin-top':'8px',display:'grid','grid-template-columns':'1fr 1fr','align-items':'center','justify-items':'center'}},[(0,i.createElementVNode)('div'),(0,i.createElementVNode)('div',{style:{'background-color':'rgb(29, 155, 240)',width:'100%',height:'4px','border-radius':'50px'}})],-1)),n[13]||(n[13]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'rgb(240, 244, 245)','margin-top':'2px'}},null,-1))]),n[14]||(n[14]=(0,i.createElementVNode)('div',{class:'twitter-content'},[(0,i.createElementVNode)('hr')],-1))])]),(0,i.createVNode)(i.Transition,{name:'slide-fade',persisted:''},{default:(0,i.withCtx)(()=>[(0,i.withDirectives)((0,i.createElementVNode)('div',Dp,[(0,i.createVNode)(Rt)],512),[[i.vShow,'QQ'==(0,i.unref)(l).phone.activeApp]])]),_:1}),(0,i.withDirectives)((0,i.createElementVNode)('div',Ip,[(0,i.createVNode)(Za)],512),[[i.vShow,'RedNote'==(0,i.unref)(l).phone.activeApp]]),(0,i.withDirectives)((0,i.createElementVNode)('div',jp,[(0,i.createVNode)(Qr)],512),[[i.vShow,'Douyin'==(0,i.unref)(l).phone.activeApp]]),(0,i.withDirectives)((0,i.createElementVNode)('div',Up,[(0,i.createVNode)(cl)],512),[[i.vShow,'Tinder'==(0,i.unref)(l).phone.activeApp]]),(0,i.withDirectives)((0,i.createElementVNode)('div',$p,[(0,i.createVNode)(ep)],512),[[i.vShow,'Instagram'==(0,i.unref)(l).phone.activeApp]]),(0,i.createElementVNode)('div',Hp,[(0,i.createElementVNode)('div',Yp,[(0,i.createElementVNode)('div',Wp,[n[16]||(n[16]=(0,i.createElementVNode)('svg',{t:'1744127791511',class:'discord-top-return',viewBox:'0 0 1024 1024',version:'1.1',xmlns:'http://www.w3.org/2000/svg','p-id':'3402',width:'28',height:'28'},[(0,i.createElementVNode)('path',{d:'M440.070244 831.562927c11.813463 0 23.601951-4.49561 32.593171-13.486829a45.980098 45.980098 0 0 0 0-65.161366l-198.730927-198.730927 589.674146 0.499512c24.001561 0 43.507512-19.431024 43.40761-43.40761 0-24.101463-19.480976-43.63239-43.507512-43.63239l-592.221659-0.574439 201.378342-201.378341a45.980098 45.980098 0 0 0 0-65.161366 45.980098 45.980098 0 0 0-65.186342 0L131.29678 476.734439a45.955122 45.955122 0 0 0-13.53678 33.16761v0.574439c0 13.361951 5.994146 25.300293 15.409951 33.292488l274.307122 274.332097c8.99122 8.966244 20.804683 13.461854 32.593171 13.461854z','p-id':'3403',fill:'#505058'})],-1)),((0,i.openBlock)(),(0,i.createElementBlock)('svg',Pp,[...n[15]||(n[15]=[(0,i.createElementVNode)('path',{fill:'#313237','fill-rule':'evenodd',d:'M18.09 1.63c.4-.7 1.43-.7 1.82 0l3.96 6.9c.38.66-.12 1.47-.91 1.47h-7.92c-.79 0-1.3-.81-.91-1.48l3.96-6.9Zm.46 1.87h.9c.3 0 .52.26.5.55l-.22 2.02c-.01.16-.17.26-.33.23a1.92 1.92 0 0 0-.8 0c-.16.03-.32-.07-.33-.23l-.21-2.02a.5.5 0 0 1 .5-.55ZM19 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z','clip-rule':'evenodd',class:''},null,-1),(0,i.createElementVNode)('path',{fill:'#313237',d:'M14.8 3.34a.48.48 0 0 0-.24-.69A9.94 9.94 0 0 0 11 2c-4.97 0-9 3.58-9 8 0 1.5.47 2.91 1.28 4.11.14.21.12.49-.06.67l-1.51 1.51A1 1 0 0 0 2.4 18h5.1a.5.5 0 0 0 .49-.5c0-2.86 1.62-5.3 3.97-6.56.28-.15.38-.51.25-.8a2.86 2.86 0 0 1 .18-2.61l2.4-4.19ZM18.91 12.98a5.45 5.45 0 0 1 2.18 6.2c-.1.33-.09.68.1.96l.83 1.32a1 1 0 0 1-.84 1.54h-5.5A5.6 5.6 0 0 1 10 17.5a5.6 5.6 0 0 1 5.68-5.5c1.2 0 2.32.36 3.23.98Z',class:''},null,-1)])])),n[17]||(n[17]=(0,i.createElementVNode)('div',{class:'discord-top-title'},[(0,i.createElementVNode)('strong',null,'类脑ΟΔΥΣΣΕΙΑ')],-1)),n[18]||(n[18]=(0,i.createElementVNode)('div',{style:{display:'flex','align-items':'center','justify-content':'center','background-color':'#ebebeb','border-radius':'50%',height:'32px',width:'32px','margin-left':'auto','margin-right':'10px'}},[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'16',height:'16'},[(0,i.createElementVNode)('path',{d:'M991.418182 972.8L791.272727 772.654545c79.127273-83.781818 130.327273-195.490909 130.327273-316.50909 0-251.345455-200.145455-451.490909-446.836364-451.49091C232.727273 0 32.581818 204.8 32.581818 451.490909s200.145455 451.490909 446.836364 451.490909c97.745455 0 190.836364-32.581818 265.309091-88.436363l200.145454 204.8 46.545455-46.545455zM102.4 451.490909c0-209.454545 167.563636-381.672727 377.018182-381.672727s377.018182 172.218182 377.018182 381.672727-172.218182 386.327273-381.672728 386.327273c-204.8 0-372.363636-172.218182-372.363636-386.327273z',fill:'#55565c','p-id':'12001'})])],-1))]),n[19]||(n[19]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'#dcdcdc'}},null,-1)),n[20]||(n[20]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'#d8d9db'}},null,-1)),n[21]||(n[21]=(0,i.createElementVNode)('div',{class:'discord-top-button'},[(0,i.createElementVNode)('div',{class:'sortbutton'},[(0,i.createElementVNode)('svg',{'aria-hidden':'true',role:'img',xmlns:'http://www.w3.org/2000/svg',width:'16',height:'16',fill:'none',viewBox:'0 0 24 24'},[(0,i.createElementVNode)('path',{fill:'#515256',d:'M16.3 21.7a1 1 0 0 0 1.4 0l4-4a1 1 0 0 0-1.4-1.4L18 18.58V3a1 1 0 1 0-2 0v15.59l-2.3-2.3a1 1 0 0 0-1.4 1.42l4 4ZM6.3 2.3a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L8 5.42V21a1 1 0 1 1-2 0V5.41l-2.3 2.3a1 1 0 0 1-1.4-1.42l4-4Z',class:''})]),(0,i.createElementVNode)('div',{style:{'font-size':'14px',color:'#515256'}},'排序 & 查看'),(0,i.createElementVNode)('svg',{'aria-hidden':'true',role:'img',xmlns:'http://www.w3.org/2000/svg',width:'20',fill:'none',viewBox:'0 0 24 24'},[(0,i.createElementVNode)('path',{fill:'#515256',d:'M5.3 9.3a1 1 0 0 1 1.4 0l5.3 5.29 5.3-5.3a1 1 0 1 1 1.4 1.42l-6 6a1 1 0 0 1-1.4 0l-6-6a1 1 0 0 1 0-1.42Z',class:''})])]),(0,i.createElementVNode)('div',{class:'tagbutton'},[(0,i.createElementVNode)('div',{style:{'font-size':'14px',color:'#515256'}},'标签'),(0,i.createElementVNode)('svg',{'aria-hidden':'true',role:'img',xmlns:'http://www.w3.org/2000/svg',width:'20',fill:'none',viewBox:'0 0 24 24'},[(0,i.createElementVNode)('path',{fill:'#515256',d:'M5.3 9.3a1 1 0 0 1 1.4 0l5.3 5.29 5.3-5.3a1 1 0 1 1 1.4 1.42l-6 6a1 1 0 0 1-1.4 0l-6-6a1 1 0 0 1 0-1.42Z',class:''})])])],-1)),n[22]||(n[22]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'#dcdcdc'}},null,-1)),n[23]||(n[23]=(0,i.createElementVNode)('div',{style:{width:'100%',height:'1px','background-color':'#d8d9db'}},null,-1)),n[24]||(n[24]=(0,i.createElementVNode)('div',{class:'discord-cardlist'},[(0,i.createElementVNode)('div',{class:'discord-cardget'},[(0,i.createElementVNode)('span',null,'查看帖子')])],-1))]),n[25]||(n[25]=(0,i.createElementVNode)('div',{class:'discord-thread-list',style:{width:'100%',height:'100%',display:'none'}},null,-1))])],512),[[i.vShow,(0,i.unref)(l).phone.activeApp&&'home'!=(0,i.unref)(l).phone.activeApp]]),(0,i.withDirectives)((0,i.createElementVNode)('div',Op,[n[28]||(n[28]=(0,i.createElementVNode)('div',{style:{width:'45px',display:'flex','justify-content':'center',height:'20px'}},[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'20',height:'20'},[(0,i.createElementVNode)('path',{d:'M810.666667 213.333333a42.666667 42.666667 0 0 1 42.368 37.674667L853.333333 256v274.304c0 79.274667-50.944 147.498667-120.490666 152.106667L725.333333 682.666667H273.706667l97.792 97.834666a42.666667 42.666667 0 0 1-56.32 63.872l-4.010667-3.541333-170.666667-170.666667a42.666667 42.666667 0 0 1 0-60.330666l170.666667-170.666667a42.666667 42.666667 0 0 1 63.872 56.32l-3.541333 4.010667L273.706667 597.333333H725.333333c19.584 0 39.936-24.618667 42.410667-59.861333l0.256-7.168V256a42.666667 42.666667 0 0 1 42.666667-42.666667z',fill:'#000000','p-id':'13502'})])],-1)),(0,i.createElementVNode)('div',{onClick:B,style:{width:'45px',display:'flex','justify-content':'center'}},[...n[26]||(n[26]=[(0,i.createElementVNode)('svg',{t:'1736242335450',class:'icon',viewBox:'0 0 1024 1024',version:'1.1',xmlns:'http://www.w3.org/2000/svg','p-id':'8709',width:'20',height:'20'},[(0,i.createElementVNode)('path',{d:'M762.3 565.3c0-19 15.7-34.1 34.7-34.1 19 0 34.2 15.1 34.2 34.1v336.3c0 19-15.2 34.4-34.2 34.4H229.6c-19.1 0-34.7-15.4-34.7-34.4V565.3c0-19 15.7-34.1 34.7-34.1 18.6 0 34.2 15.1 34.2 34.1v301.9h498.5V565.3z m-638.2 9.3l388.8-387.8 389.3 387.8c13.2 13.2 35.2 13.2 48.4 0 13.4-13.2 13.4-35.1 0-48.3L538 114.1l-0.7-0.5c-13.4-13.2-35.2-13.2-48.6 0l-413 412.6c-13.6 13.2-13.6 35.1 0 48.3 13.2 13.2 35.2 13.2 48.4 0.1z',fill:'#231815','p-id':'8710'})],-1)])]),(0,i.createElementVNode)('div',{onClick:y,style:{width:'45px',display:'flex','justify-content':'center'}},[...n[27]||(n[27]=[(0,i.createElementVNode)('svg',{t:'1736242697753',class:'icon',viewBox:'0 0 1024 1024',version:'1.1',xmlns:'http://www.w3.org/2000/svg','p-id':'9742',width:'20',height:'20'},[(0,i.createElementVNode)('path',{d:'M622.650611 284.901749 447.745069 284.901749 447.745069 142.823869 63.980685 334.705038l383.76336 191.882192L447.744046 384.834762l189.391465 0c149.914358 0 224.855164 62.789045 224.855164 188.368158 0 129.928165-77.435627 194.876386-232.338602 194.876386L187.952184 768.079306l0 99.93199L634.146433 868.011296c211.184817 0 316.777737-95.104031 316.777737-285.311071C950.924169 384.178823 841.510224 284.901749 622.650611 284.901749z',fill:'#272636','p-id':'9743'})],-1)])])],512),[[i.vShow,(0,i.unref)(l).phone.navButton]])]),(0,i.createElementVNode)('div',{onDblclick:n[0]||(n[0]=e=>(0,i.unref)(l).phone.show=!(0,i.unref)(l).phone.show),onMousedown:A,onTouchstart:A,onTouchend:n[1]||(n[1]=e=>C(e,!0)),onClick:n[2]||(n[2]=e=>console.log(JSON.stringify((0,i.unref)(l).QQ.chars))),class:'top',ref_key:'topRef',ref:a,style:{display:'flex','align-items':'center','justify-content':'center'}},[((0,i.openBlock)(),(0,i.createElementBlock)('svg',Lp,[...n[29]||(n[29]=[(0,i.createElementVNode)('path',{d:'M716.8 805.823147 716.8 384.709973c0-95.68256-77.544107-173.2608-173.216427-173.2608L56.664747 211.449173c-3.754667 0-6.795947 3.024213-6.795947 6.741333L49.8688 805.819733c0 3.71712 3.04128 6.72768 6.795947 6.72768l130.061653 0c3.754667 0 6.792533-3.027627 6.792533-6.765227L193.518933 344.562347c0-3.744427 3.04128-6.782293 6.795947-6.782293l279.68512 0c52.52096 0 95.112533 42.571093 95.112533 95.09888l0 372.8896c0 3.741013 3.037867 6.761813 6.772053 6.761813l128.146773 0c3.72736 0 6.772053-3.017387 6.772053-6.72768M454.15424 805.778773c0 3.744427-3.01056 6.76864-6.76864 6.76864L317.354667 812.547413c-3.754667 0-6.795947-3.027627-6.795947-6.76864L310.55872 452.348587c0-3.741013 3.04128-6.77888 6.795947-6.77888l130.030933 0c3.75808 0 6.76864 3.037867 6.76864 6.77888l0 353.447253L454.15424 805.778773zM974.134613 805.778773c0 3.744427-3.044693 6.76864-6.79936 6.76864l-130.000213 0c-3.764907 0-6.826667-3.027627-6.826667-6.76864L830.508373 218.251947c0-3.75808 3.06176-6.792533 6.826667-6.792533l130.000213 0c3.75808 0 6.79936 3.034453 6.79936 6.792533L974.134613 805.778773z',fill:'#ffffff','p-id':'9714'},null,-1)])]))],544),n[34]||(n[34]=(0,i.createElementVNode)('div',{id:'baibai_regexBubble_cache',style:{width:'0',height:'0',position:'absolute',display:'none'}},null,-1))],34),[[i.vShow,(0,i.unref)(l).phone.show]])]),_:1}))}};a(4948),a(1798);const Rp=(0,Xe.A)(qp,[['__scopeId','data-v-0d279e8b']]),Xp='[????]\r\n?????=1111\r\n????=\r\n??-QQ=\r\n??-RedNote=\r\n??-Douyin=\r\n??-Tinder=\r\n??-Instagram=\r\n',Zp='#在此存放表情包列表,加载一次界面后会自动修改格式世界书里的内容,请按示例格式存放\r\n此世界书同样需要一起绑定导出,否则无法使用表情包功能\r\n\r\n你敢顶嘴--http://sharkpan.xyz/f/vVBtL/mmexport1737057690899.png\r\n免礼,平身--http://sharkpan.xyz/f/pO6uQ/mmexport1737057701883.png\r\n你走吧--http://sharkpan.xyz/f/1vAc2/mmexport1737057678306.png\r\n我很满意--http://sharkpan.xyz/f/e8KUw/mmexport1737057664689.png\r\n揍你哦--http://sharkpan.xyz/f/oJ1i4/mmexport1737057862640.gif\r\n你是坏蛋--http://sharkpan.xyz/f/8r2Sj/mmexport1737057726579.png\r\n关心你--http://sharkpan.xyz/f/Gvmil/mmexport1737057801285.gif\r\n撞飞你--http://sharkpan.xyz/f/zMZu5/mmexport1737057848709.gif\r\n送你一个剪纸爱心--http://sharkpan.xyz/f/53nhj/345FFC998474F46C1A40B1567335DA03_0.gif\r\n飞奔过来--http://sharkpan.xyz/f/kDOi6/0A231BF0BFAB3C2B243F9749B64F7444_0.gif\r\n流口水--http://sharkpan.xyz/f/j36f6/3010464DF8BD77B4A99AB23730F2EE57_0.gif\r\n跟着音乐开心跳舞--http://sharkpan.xyz/f/aVwtY/0CBEE9105C7A98E0E6162A79CCD09EFA_0.gif\r\n开心扭动--http://sharkpan.xyz/f/rOpu6/9277120A65282CFEAB9E191B34474729_0.gif\r\n擦地板--http://sharkpan.xyz/f/DnJHK/F12BF133675BA34684A60CF38E17D328_0.gif\r\n打招呼，你好呀！--http://sharkpan.xyz/f/LgwT7/AC229A80203166B292155ADA057DE423_0.gif\r\n乖巧主动带上项圈--http://sharkpan.xyz/f/qJJI3/E7B02761D317A00B912F328AA9F02565_0.gif\r\n可怜兮兮--http://sharkpan.xyz/f/XgmcW/817B66DAB2414E1FC8D717570A602193_0.gif\r\n送你礼物--http://sharkpan.xyz/f/2aACQ/A491786010A6E595A84B9F4D4EE58B27_0.gif\r\n委屈哭泣--http://sharkpan.xyz/f/gVySw/D90D0B53802301FCDB1F0718DEB08C79_0.gif\r\n欢呼雀跃--http://sharkpan.xyz/f/JXeig/68FD6090F0D187FC88794909AA4E4C30_0.gif\r\n脏兮兮的狼狈样子--http://sharkpan.xyz/f/O6msy/897713F074EF610881EFD9A4D993B7DA_0.gif\r\n趴在枕头上休息一下--http://sharkpan.xyz/f/6Mzua/7AF42F3AE5EA01AEDBA5A3C7437339FA_0.gif\r\n开心吃面包--http://sharkpan.xyz/f/nX5sl/Camera_1040g34o313t1veosi60g4almcsqnoumhanf8f98.jpg\r\n害羞地跳舞--http://sharkpan.xyz/f/mqdcW/Camera_1040g34o313t1verti60g4almcsqnoumhepqc530.jpg\r\n认真看菜谱--http://sharkpan.xyz/f/BODsa/Camera_1040g0k0313t1vf2k1e004almcsqnoumhblfs9o0.jpg\r\n害羞想要表达喜欢--http://sharkpan.xyz/f/4Mdfj/IMG_20250131_212918.jpg\r\n激动亲亲--http://sharkpan.xyz/f/NOVuv/Camera_XHS_17383302852781040g2sg31a0ceua57idg4a11eo5c0eoqn8udogg.jpg\r\n水汪汪的大眼睛--http://sharkpan.xyz/f/VXnTY/Camera_XHS_17383302891351040g2sg31a0ceua57icg4a11eo5c0eoq7j77fu0.jpg\r\n嫁给我，最爱你--http://sharkpan.xyz/f/xkmFX/Camera_XHS_17383302941971040g2sg31a0ceua57ia04a11eo5c0eoql8q50vg.jpg\r\n乖巧站立--http://sharkpan.xyz/f/dlyH8/Camera_XHS_17383303028511040g00831aqhfp8fna405pf08cqh97tb5qhsf6o.jpg\r\n剪刀手比耶--http://sharkpan.xyz/f/lrNCx/Camera_XHS_17383303062101040g00831aqhfp8fna4g5pf08cqh97tbcoki8f8.jpg\r\n真棒！竖大拇指--http://sharkpan.xyz/f/K2Oto/Camera_XHS_17383303090201040g00831aqhfp8fna505pf08cqh97tbo91bmno.jpg\r\n小猫献上一盘鱼赔罪--http://sharkpan.xyz/f/Qm1H6/Camera_XHS_17383303303421040g2sg3189ite3a3ujg5ofl7bm417a4rcgd0bg.jpg\r\n小猫害羞捂嘴--http://sharkpan.xyz/f/ZOmuW/Camera_XHS_17383303329411040g2sg3189ite3a3uj05ofl7bm417a4kppd5v8.jpg\r\n小猫哭泣等待投喂--http://sharkpan.xyz/f/W2BfW/Camera_XHS_17383303352131040g2sg3189ite3a3uhg5ofl7bm417a4psbct30.jpg\r\n请多指教--http://sharkpan.xyz/f/0MjhX/Camera_XHS_17383303606011040g00831bogh2040u104ag8aht6f2mpkhq67r0.jpg\r\n保持联络哦--http://sharkpan.xyz/f/yk4HN/Camera_XHS_17383303659031040g00831bogh2040u2g4ag8aht6f2mpeus4ul8.jpg\r\n不要忘记哦--http://sharkpan.xyz/f/vBDIL/Camera_XHS_17383303686641040g00831bogh2040u304ag8aht6f2mppr4gni0.jpg\r\n开心！开心！--http://sharkpan.xyz/f/pg1IQ/Camera_XHS_17383303710381040g00831bogh2040u3g4ag8aht6f2mpf2epg78.jpg\r\n耶！--http://sharkpan.xyz/f/1MjS2/Camera_XHS_17383303739941040g00831bogh2040u4g4ag8aht6f2mpik7q0ag.jpg\r\n没关系，不要紧--http://sharkpan.xyz/f/erOSw/Camera_XHS_17383303793581040g00831bogh2040u604ag8aht6f2mpo9j26l0.jpg\r\n小老鼠喝饮料--http://sharkpan.xyz/f/8Mgij/Camera_XHS_17383305816431040g00831bv6at85gm6g5n6lbcu5s4aorps5mr8.jpg\r\n委屈地嘟起嘴--http://sharkpan.xyz/f/713sj/307F8B36E1F2A49573E6562193AA71BF_0.gif\r\n垂死梦中惊坐起--http://sharkpan.xyz/f/ADwCZ/04A8CC14F4C317F5E0DA84AD2A8BE1FF_0.gif\r\n小猫快速奔跑--http://sharkpan.xyz/f/wqghq/B8578FD25ED069B8AF1B0AC35F20770B_0.gif\r\n尴尬的动了动耳朵--http://sharkpan.xyz/f/M4OUa/DA8F0F3F2B2C1F567258724B9EA59623_0.gif\r\n激动地摇摆--http://sharkpan.xyz/f/30lHe/1507DB48EFC13593A4766C51F33BFC1C_0.gif\r\n双手叉腰--http://sharkpan.xyz/f/5xnSj/9B6915837A055D7EF9CE0DD18BC0E60F_0.jpg\r\n小猫偷看你--http://sharkpan.xyz/f/kXOI6/C0FC1927068E1F87D38FA09B7F51F830_0.gif\r\n小猫开心的跳跃起来--http://sharkpan.xyz/f/jq6H6/413DB04EE36F940E3381C99402CE2E44_0.gif\r\n开心的双手舞动--http://sharkpan.xyz/f/aJwtY/11BB0DE666912CED03486468EA5DB258_0.gif\r\n无理取闹，原地打滚--http://sharkpan.xyz/f/rmpI6/7D87F6F45B1AEDAABC0EF119E977732F_0.gif\r\n害怕地哭泣打滚--http://sharkpan.xyz/f/DXJcK/E419CF47415150B8CBADD767F09017C9_0.gif\r\n努力工作--http://sharkpan.xyz/f/LBwS7/6251D891E0E3FB87FCDC50BECCCD4559_0.gif\r\n加油！--http://sharkpan.xyz/f/qnJt3/19650FABB205847C0D505FF2B361B194_0.gif\r\n得意的跳舞--http://sharkpan.xyz/f/XmmcW/B7973C500D9E981A083A5F3E75CF198A_0.gif\r\n我准备好啦！--http://sharkpan.xyz/f/2ZAFQ/F0A74F31B23E7C20AB50B4A960344056_0.gif\r\n再坚持一下--http://sharkpan.xyz/f/g4yCw/CF6BE01FF89BB72BE179A537104984A5_0.gif\r\n尖叫--http://sharkpan.xyz/f/JneTg/3ED8B290F429F8FCC5D533CCC0568086_0.gif\r\n惊吓得一抖--http://sharkpan.xyz/f/OLmCy/AB70AB259C3BD064624A1349779B072C_0.gif\r\n失去所有力气和手段--http://sharkpan.xyz/f/6Azsa/3BEBF677C8FD51DFF757BB62DA22C0A8_0.jpg\r\n大吃一口美食--http://sharkpan.xyz/f/nJ5Ul/5E4285F661C54F06BEFB881AD07BC3FB_0.jpg\r\n不喜欢我，你真的没品--http://sharkpan.xyz/f/mgduW/4F3224BCDAF9298F644572715BDA7EB9_0.jpg\r\n一觉睡到自然死--http://sharkpan.xyz/f/BLDsa/EC0D48BDAAB071654E0112599A6FA57B_0.jpg\r\n红温了--http://sharkpan.xyz/f/4YdFj/C13A42E1CB05564DF9060B2D93617086_0.jpg\r\n扭屁股--http://sharkpan.xyz/f/NDVhv/EE91A0C1472A9D3D3F01DAD6E6BF6B3B_0.gif\r\n失败了 遗憾离场--http://sharkpan.xyz/f/V6niY/19CC4600A7EAE5CC33257376EA8E11E7_0.gif\r\n害羞脸红--http://sharkpan.xyz/f/xXmSX/8664EF605A192AC3B392E3FDE8DCB695_0.gif\r\n大声尖叫--http://sharkpan.xyz/f/dnyt8/A95DD11A432A74CAD0CF9E3B97DA96A2_0.gif\r\n我是厚脸皮--http://sharkpan.xyz/f/l2Nux/0C0EA6213E96C0992356DFC48500EE08_0.jpg\r\n你少看扁我--http://sharkpan.xyz/f/JnJIg/4344AAD53418BAE9569B06CEF9CFDDED_0.jpg\r\n得意地唱歌--http://sharkpan.xyz/f/OLjSy/AA21937C7A115FCF4B87DC646E13C572_0.jpg\r\n高兴地被喂饭--\r\nhttps://files.catbox.moe/8uz920.jpg\r\n高兴地转圈--\r\nhttps://files.catbox.moe/26rwpc.jpg\r\n开心--\r\nhttps://files.catbox.moe/9242jm.jpg\r\n大大的爱--\r\nhttps://files.catbox.moe/wabm2j.jpg\r\n喜欢--\r\nhttps://files.catbox.moe/l7j4vy.jpg\r\n幸福地看手机--\r\nhttps://files.catbox.moe/e2eqzc.jpg\r\n哦耶--\r\nhttps://files.catbox.moe/nff4qi.jpg\r\n给你爱心--\r\nhttps://files.catbox.moe/o3boww.jpg\r\n紧紧抱住--\r\nhttps://files.catbox.moe/2hon5k.jpg\r\n乖乖跟着--\r\nhttps://files.catbox.moe/ydtn6e.jpg\r\n亲亲--\r\nhttps://files.catbox.moe/l14x54.jpg\r\n宠爱地亲--\r\nhttps://files.catbox.moe/wqn5ki.jpg\r\n搂住你--\r\nhttps://files.catbox.moe/pxn8x6.jpg\r\n谄媚吻手--\r\nhttps://files.catbox.moe/cxdhkh.jpg\r\n恳求脸--\r\nhttps://files.catbox.moe/i5etcm.jpg\r\n舔一口--\r\nhttps://files.catbox.moe/p0vdxk.jpg\r\n抱抱--\r\nhttps://files.catbox.moe/qt4qzg.jpg\r\n扑过来--\r\nhttps://files.catbox.moe/czdmyn.jpg\r\n小狗飞扑--\r\nhttps://files.catbox.moe/9yz8nz.jpg\r\n满脸骄傲--\r\nhttps://files.catbox.moe/h1mf7j.jpg\r\n蹦蹦跳跳--\r\nhttps://files.catbox.moe/q6bahb.jpg\r\n泥里打滚--\r\nhttps://files.catbox.moe/ofy8ic.jpg\r\n蹑手蹑脚--\r\nhttps://files.catbox.moe/7mdkef.jpg\r\n等饭饭--\r\nhttps://files.catbox.moe/ppi7e4.jpg\r\n偷吃--\r\nhttps://files.catbox.moe/ur7vh9.jpg\r\n蹭裤腿--\r\nhttps://files.catbox.moe/dzoxjx.jpg\r\n打劫--\r\nhttps://files.catbox.moe/cz3umm.jpg\r\n用枪指着你--\r\nhttps://files.catbox.moe/zvm5n2.jpg\r\n咬咬咬咬--\r\nhttps://files.catbox.moe/ogs4t5.jpg\r\n无意义的吼叫--\r\nhttps://files.catbox.moe/0vetoe.jpg\r\n辣眼睛--\r\nhttps://files.catbox.moe/91c91h.jpg\r\n冷汗心虚笑--\r\nhttps://files.catbox.moe/nj0i5e.png\r\n犯错后心虚--\r\nhttps://files.catbox.moe/rejhsf.jpg\r\n装无辜--\r\nhttps://files.catbox.moe/pdjeef.jpg\r\n小心翼翼--\r\nhttps://files.catbox.moe/1mm5y1.jpg\r\n害羞--\r\nhttps://files.catbox.moe/rqtdfm.jpg\r\n要掉眼泪了--\r\nhttps://files.catbox.moe/cdaxhk.jpg\r\n委屈--\r\nhttps://files.catbox.moe/r89k3c.jpg\r\n眼含泪光--\r\nhttps://files.catbox.moe/yqwu7e.jpg\r\n哭哭--\r\nhttps://files.catbox.moe/a1518p.jpg\r\n急哭了--\r\nhttps://files.catbox.moe/wok7sq.jpg\r\n气哭了--\r\nhttps://files.catbox.moe/qfljha.jpg\r\n碗里没有饭--\r\nhttps://files.catbox.moe/i9682x.jpg\r\n老婆你回来吧--\r\nhttps://files.catbox.moe/ge0bjd.jpg\r\n害怕--\r\nhttps://files.catbox.moe/k8mfa6.jpg\r\n震惊猫猫--\r\nhttps://files.catbox.moe/bhytrl.jpg\r\n惊吓到模糊--\r\nhttps://files.catbox.moe/qdzxst.jpg\r\n期待--\r\nhttps://files.catbox.moe/mii353.jpg\r\n皱眉--\r\nhttps://files.catbox.moe/785has.jpg\r\n生气瞪你--\r\nhttps://files.catbox.moe/mzoekx.jpg\r\n有点生气--\r\nhttps://files.catbox.moe/evzdkv.jpg\r\n大脑空白--\r\nhttps://files.catbox.moe/jqnaxs.jpg\r\n大脑CPU烧了--\r\nhttps://files.catbox.moe/mrzvy0.gif\r\n探头探脑--\r\nhttps://files.catbox.moe/6p8w3k.gif\r\n已老实--\r\nhttps://files.catbox.moe/rv76c1.jpg\r\n平静地死了--\r\nhttps://files.catbox.moe/dcm5f9.jpg\r\n被打死惹--\r\nhttps://files.catbox.moe/qqibg1.jpg\r\n睡大觉--\r\nhttps://files.catbox.moe/pvbfg6.jpg\r\n土下座道歉--\r\nhttps://files.catbox.moe/qjnck3.jpg\r\n孤独低落狗--\r\nhttps://files.catbox.moe/z09102.jpg\r\n乖乖当狗--\r\nhttps://files.catbox.moe/bgid0b.jpg\r\n叼食盆小狗--\r\nhttps://files.catbox.moe/o196se.jpg\r\n战斗小狗--\r\nhttps://files.catbox.moe/c5ccwc.jpg\r\n汉堡小狗--\r\nhttps://files.catbox.moe/prowke.jpg',Gp='http://sharkpan.xyz/f/EJeUD/Image_1737026320652.jpg\r\nhttp://sharkpan.xyz/f/Y8pt1/Image_1737026296736.jpg\r\nhttp://sharkpan.xyz/f/QWWc6/Image_1737026308451.jpg\r\nhttp://sharkpan.xyz/f/Z8LIW/Image_1737026306601.jpg\r\nhttp://sharkpan.xyz/f/W8lhW/Image_1737026313246.jpg\r\nhttp://sharkpan.xyz/f/0rJtX/Image_1737026292787.jpg\r\nhttp://sharkpan.xyz/f/yVxsN/Image_1737026293840.jpg\r\nhttp://sharkpan.xyz/f/vaBCL/Image_1737026286979.jpg\r\nhttp://sharkpan.xyz/f/pZ6hQ/Image_1737026285632.jpg\r\nhttp://sharkpan.xyz/f/11AH2/Image_1737026284351.jpg\r\nhttp://sharkpan.xyz/f/eXKUw/Image_1737026281715.jpg\r\nhttp://sharkpan.xyz/f/o31F4/Image_1737026277201.jpg\r\nhttp://sharkpan.xyz/f/8E2uj/Image_1737026279242.jpg\r\nhttp://sharkpan.xyz/f/GLmIl/Image_1737026275069.jpg\r\nhttp://sharkpan.xyz/f/zWZT5/Image_1737026271769.jpg\r\nhttp://sharkpan.xyz/f/7Zrij/Image_1737026269532.jpg\r\nhttp://sharkpan.xyz/f/AqYsZ/Image_1737026266131.jpg\r\nhttp://sharkpan.xyz/f/w4lFq/2406563368.jpeg\r\nhttp://sharkpan.xyz/f/MQNua/2403629154.jpeg\r\nhttp://sharkpan.xyz/f/3YZhe/2405854911.jpeg\r\nhttp://sharkpan.xyz/f/5QKhj/2312445144.jpeg\r\nhttp://sharkpan.xyz/f/k6JT6/2408434848.jpeg\r\nhttp://sharkpan.xyz/f/j6Bf6/2386328773.jpeg\r\nhttp://sharkpan.xyz/f/a8LHY/2386327598.jpeg\r\nhttp://sharkpan.xyz/f/r08C6/2386327604.jpeg\r\nhttp://sharkpan.xyz/f/DgECK/2331678725.jpeg\r\nhttp://sharkpan.xyz/f/LJrC7/2371251634.jpeg\r\nhttp://sharkpan.xyz/f/q1LF3/2329660869.gif\r\nhttp://sharkpan.xyz/f/X84sW/2328035526.jpeg\r\nhttp://sharkpan.xyz/f/2eDfQ/2326662447.jpeg\r\nhttp://sharkpan.xyz/f/ggetw/2326683821.jpeg\r\nhttp://sharkpan.xyz/f/J21ig/2323432137.gif\r\nhttp://sharkpan.xyz/f/BZjSa/%E5%A4%B4%E5%83%8F%20%282%29.jpg\r\nhttp://sharkpan.xyz/f/4rXIj/%E5%A4%B4%E5%83%8F%20%283%29.jpg\r\nhttp://sharkpan.xyz/f/Ndyhv/%E5%A4%B4%E5%83%8F%20%281%29.jpg\r\nhttp://sharkpan.xyz/f/VyJTY/%E5%A4%B4%E5%83%8F%20%284%29.jpg\r\nhttp://sharkpan.xyz/f/xlAhX/%E5%A4%B4%E5%83%8F%20%2820%29.jpg\r\nhttp://sharkpan.xyz/f/dDMI8/%E5%A4%B4%E5%83%8F%20%285%29.jpg\r\nhttp://sharkpan.xyz/f/lm7hx/%E5%A4%B4%E5%83%8F%20%286%29.jpg\r\nhttp://sharkpan.xyz/f/KkeHo/%E5%A4%B4%E5%83%8F%20%287%29.jpg\r\nhttp://sharkpan.xyz/f/EeZSD/%E5%A4%B4%E5%83%8F%20%288%29.jpg\r\nhttp://sharkpan.xyz/f/YyAi1/%E5%A4%B4%E5%83%8F%20%289%29.jpg\r\nhttp://sharkpan.xyz/f/QdaU6/%E5%A4%B4%E5%83%8F%20%2810%29.jpg\r\nhttp://sharkpan.xyz/f/ZKBuW/%E5%A4%B4%E5%83%8F%20%2811%29.jpg\r\nhttp://sharkpan.xyz/f/01AUX/%E5%A4%B4%E5%83%8F%20%2814%29.jpg\r\nhttp://sharkpan.xyz/f/ylpsN/%E5%A4%B4%E5%83%8F%20%2813%29.jpg\r\nhttp://sharkpan.xyz/f/vNpiL/%E5%A4%B4%E5%83%8F%20%2815%29.jpg\r\nhttp://sharkpan.xyz/f/pLQhQ/%E5%A4%B4%E5%83%8F%20%2816%29.jpg\r\nhttp://sharkpan.xyz/f/1QZh2/%E5%A4%B4%E5%83%8F%20%2817%29.jpg\r\nhttp://sharkpan.xyz/f/eqBSw/%E5%A4%B4%E5%83%8F%20%2818%29.jpg\r\nhttp://sharkpan.xyz/f/oDQI4/%E5%A4%B4%E5%83%8F%20%2819%29.jpg\r\nhttp://sharkpan.xyz/f/L5xwI7/p560183288.webp\r\nhttp://sharkpan.xyz/f/q0aJF3/p561777545.webp\r\nhttp://sharkpan.xyz/f/XdomSW/p561777547.webp\r\nhttp://sharkpan.xyz/f/24zATQ/p561777549.webp',Jp='<手机聊天格式>\n## 消息聊天\n    在正文中涉及手机聊天消息时,应按照以下格式输出\n    <msg>发送人|接收人|消息内容|时间</msg>\n    其中时间为 xx月xx日 HH:MM\n\n    ## 特殊消息格式\n    表情包: 消息内容为"[bqb-表情包名称]"\n    转账: 消息内容为"[zz-金额元]"\n    语音: 消息内容为"[yy-语音内容]"\n    音乐: 消息内容为"[music-歌名$歌手]"\n    图片/视频: 消息内容为"[img-内容描述]"\n\n    特殊消息均为独立消息,不可多个特殊消息合并为一条,也不可附带文字消息内容\n\n    ## 接收人\n    若是发送在群里的消息,则接收人为\'群:群号\'\n    如\'群:688888\'\n\n## 抖音私信\n    可以发送抖音私信,按以下格式输出\n    <douyin_msg>发送人|接收人|消息内容|时间</douyin_msg>\n\n## 小红书帖子\n    可以发布小红书帖子来分享生活等,按以下格式输出\n    发帖格式: <rednote>帖子ID|发布者|一级标题|二级标题|帖子内容|时间MM-DD HH:MM|点赞数|收藏数|评论数</rednote>\n    评论格式: <rednote>帖子ID|评论人|评论内容|时间MM-DD HH:MM|该评论点赞数</rednote>\n    回复评论格式: <rednote>帖子ID|回复人|回复内容|时间MM-DD HH:MM|该回复点赞数|@被回复人</rednote>\n\n    参数解释:\n        帖子ID: 随机生成的六位英文数字，帖子的唯一标识，用于后续添加评论，ID唯一，多个帖子不可使用同一个ID\n        一级标题: 突出震撼效果\n        二级标题: 温馨实用\n        评论: 帖子发布需附带3到5个评论,若评论人非主要角色,则评论人都为\'momo\',即小红书的默认用户名,评论字数不少于20字\n        回复评论: 在评论下回复时，需要在最后一个参数标明被回复人，格式为\'@被回复人\'\n\n## Instagram\n    可以发布Instagram帖子,按以下格式输出\n    发帖格式: <instagram>帖子ID|发布者|图片JSON|内容|时间|点赞数|评论JSON|地点|Tag用户JSON|音乐|转发数</instagram>\n    评论格式: <instagram>帖子ID|评论人|评论内容|时间MM-DD HH:MM|该评论点赞数</instagram>\n    回复评论格式: <instagram>帖子ID|回复人|回复内容|时间MM-DD HH:MM|该回复点赞数|@被回复人</instagram>\n\n    私信格式:\n    <instagram_msg>发送人|接收人|消息内容|时间</instagram_msg>\n    (接收人默认为user,若省略接收人则格式为: <instagram_msg>发送人|消息内容|时间</instagram_msg>)\n\n    参数解释:\n        帖子ID: 随机生成的英文数字组合\n        图片JSON: 图片URL数组或图片描述数组,如 ["url1", "image description"]。如果内容不是url,则会自动作为图片描述显示。\n        评论JSON: 帖子发布时的初始评论数组,如 [{"sender":"user1","content":"wow"},{"sender":"user2","content":"nice"}]。可为空数组 []。\n        Tag用户JSON: 被标记的用户数组,如 ["user1", "user2"]\n        音乐: 背景音乐名称\n        转发数: 转发/分享的数量\n\n## Tinder\n    可以发送 Tinder 私信, 按以下格式输出\n    <tinder>发送人|接收人|消息内容|时间</tinder>\n    如果只有三部分，默认为:\n    <tinder>发送人|消息内容|时间</tinder> (接收人默认为user)\n\n    也可以更新个人资料或删除账户:\n    更新资料: <tinder>update_profile|姓名|签名|头像Url|相册Json</tinder>\n    删除账户: <tinder>delete_account|原因</tinder>\n\n## 抖音视频\n    可以发布抖音视频,按以下格式输出\n    发视频格式: <douyin>视频ID|发布者|标题|内容描述|视频画面描述|时间MM-DD HH:MM|点赞数|评论数|收藏数|分享数|BGM名字</douyin>\n    评论格式: <douyin>视频ID|评论人|评论内容|时间MM-DD HH:MM|该评论点赞数</douyin>\n    回复评论格式: <douyin>视频ID|回复人|回复内容|时间MM-DD HH:MM|该回复点赞数|@被回复人</douyin>\n\n    参数解释:\n        视频ID: 随机生成的六位英文数字，视频的唯一标识，用于后续添加评论，ID唯一\n        视频画面描述: 描述视频画面的内容,将用于生成视频封面或占位图\n        BGM名字: 视频的背景音乐名称\n        评论: 视频发布需附带3到5个评论\n示例:\n<msg>小红|{{user}}|早上好呀|05月07日 7:00</msg>\n<msg>小红|{{user}}|[zz-20元]|05月07日 7:00</msg>\n<msg>小红|{{user}}|请你吃早餐|05月07日 7:00</msg>\n<msg>小红|群:688888|大家早上好|05月07日 7:01</msg>\n<douyin_msg>小红|{{user}}|这是我在抖音发给你的私信|05月07日 8:00</douyin_msg>\n<tinder>Jessica|Alice|Hey Alice!|05月07日 9:05</tinder>\n<rednote>n9p4x7|小明|震惊！上班族10分钟做出米其林级别早餐|懒人必学：营养美味的快手早餐|作为一个经常赶时间的上班族，发现了这个超简单的早餐做法！只需要鸡蛋、吐司和芝士，10分钟就能做出营养丰富又卖相完美的早餐[img-精美早餐成品图]|10-18 18:42|234|67|32</rednote>\n<rednote>n9p4x7|小李|OMG！这个看起来好香啊，马上试试，感觉自己要变成大厨了！|10-18 18:45|12</rednote>\n<rednote>n9p4x7|小明|哈哈谢谢支持！真的超简单，你一定可以的～|10-18 18:50|5|@小李</rednote>\n\n## 注意\n   <user>发送的抖音视频或者小红书帖子，需要在正文再复述一遍。\n   其他<user>发送的消息禁止复述\n\n</手机聊天格式>\n',Kp={class:'douyin-chat-card'},em={class:'douyin-cover-container'},nm=['innerHTML'],tm={class:'douyin-info'},am=['innerHTML'],im={class:'douyin-meta'},om={class:'douyin-author'},rm={class:'douyin-name'},sm={class:'douyin-like'},lm={__name:'card',props:['cardContent'],setup(e){const n=e,t=(0,i.computed)(()=>n.cardContent.video?`background-image: url('${n.cardContent.video}'); background-size: cover; background-position: center;`:'background-color: #161823; display: flex; align-items: center; justify-content: center; text-align: center; color: white; padding: 10px; font-size: 14px;'),a=(0,i.computed)(()=>{const e=n.cardContent;let t=e.content||e.textContent||e.title||'';return t?(t=t.replace(/\\n/g,'<br>'),t=t.replace(/\n/g,'<br>'),t=t.replace(/\[(img|vedio|bqb)/g,'<br>[$1'),t):''});return(e,o)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',Kp,[(0,i.createElementVNode)('div',em,[(0,i.createElementVNode)('div',{class:'douyin-cover',style:(0,i.normalizeStyle)(t.value)},[n.cardContent.video?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'douyin-title-overlay',innerHTML:a.value},null,8,nm)),o[0]||(o[0]=(0,i.createElementVNode)('div',{class:'douyin-play-icon'},[(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'30',height:'30',fill:'rgba(255,255,255,0.8)'},[(0,i.createElementVNode)('path',{d:'M768 512L384 768V256z'})])],-1))],4)]),(0,i.createElementVNode)('div',tm,[(0,i.createElementVNode)('div',{class:'douyin-title',innerHTML:a.value},null,8,am),(0,i.createElementVNode)('div',im,[(0,i.createElementVNode)('div',om,[(0,i.createElementVNode)('div',{class:'douyin-avatar',style:(0,i.normalizeStyle)(`background-image: url('${n.cardContent.head}');`)},null,4),(0,i.createElementVNode)('div',rm,(0,i.toDisplayString)(n.cardContent.sender),1)]),(0,i.createElementVNode)('div',sm,[o[1]||(o[1]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'14',height:'14',fill:'#999'},[(0,i.createElementVNode)('path',{d:'M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z'})],-1)),(0,i.createElementVNode)('span',null,(0,i.toDisplayString)(n.cardContent.like),1)])])])]))}};a(8481);const cm=lm,dm={class:'comment-top'},pm={class:'info'},mm={class:'name'},um={class:'meta'},Am={class:'comment-content'},hm={key:0,class:'reply-to'},gm=['innerHTML'],Cm={class:'comment-bottom'},fm={key:0,class:'video-preview'},vm={class:'video-title'},bm={key:1,class:'likes'},xm=(0,i.defineComponent)({__name:'comment',props:['commentData','video'],emits:['click'],setup(e,{emit:n}){const t=e,a=n,o=(0,i.computed)(()=>{let e=t.commentData.content||'';return e?(e=e.replace(/\n/g,'<br>'),e=e.replace(/\n/g,'<br>'),e=e.replace(/\[(img|vedio|bqb)/g,'<br>[$1'),e):''}),r=(0,i.computed)(()=>t.video?.video?`background-image: url('${t.video.video}')`:'background-color: #333'),s=(0,i.computed)(()=>`background-image: url('${t.commentData.head||'https://sharkpan.xyz/f/rOpu6/9277120A65282CFEAB9E191B34474729_0.gif'}')`);return(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{class:'douyin-comment-card',onClick:n[0]||(n[0]=e=>a('click'))},[(0,i.createElementVNode)('div',dm,[(0,i.createElementVNode)('div',{class:'douyin-circle-avatar',style:(0,i.normalizeStyle)(s.value)},null,4),(0,i.createElementVNode)('div',pm,[(0,i.createElementVNode)('div',mm,(0,i.toDisplayString)(t.commentData.sender),1),(0,i.createElementVNode)('div',um,(0,i.toDisplayString)(t.commentData.time)+' · 评论了作品',1)])]),(0,i.createElementVNode)('div',Am,[t.commentData.replyTo?((0,i.openBlock)(),(0,i.createElementBlock)('span',hm,'回复 @'+(0,i.toDisplayString)(t.commentData.replyTo)+': ',1)):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('span',{innerHTML:o.value},null,8,gm)]),(0,i.createElementVNode)('div',Cm,[t.video?((0,i.openBlock)(),(0,i.createElementBlock)('div',fm,[(0,i.createElementVNode)('div',{class:'video-cover',style:(0,i.normalizeStyle)(r.value)},null,4),(0,i.createElementVNode)('div',vm,(0,i.toDisplayString)(t.video.title||'无标题'),1)])):(0,i.createCommentVNode)('v-if',!0),t.commentData.like&&'0'!==t.commentData.like?((0,i.openBlock)(),(0,i.createElementBlock)('div',bm,[n[1]||(n[1]=(0,i.createElementVNode)('svg',{viewBox:'0 0 1024 1024',width:'12',height:'12',fill:'#999'},[(0,i.createElementVNode)('path',{d:'M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z'})],-1)),(0,i.createTextVNode)(' '+(0,i.toDisplayString)(t.commentData.like),1)])):(0,i.createCommentVNode)('v-if',!0)])]))}});a(9828);const ym=(0,Xe.A)(xm,[['__scopeId','data-v-b43020c6']]),Bm={class:'message-content'},wm={key:0,class:'bubble text-bubble'},km={class:'bubble img-bubble'},Em={key:0,class:'img-wrapper'},Sm=['src'],Nm={key:1,class:'bubble text-bubble fake-img-bubble'},Qm=['innerHTML'],Vm={key:2,class:'additional-text'},_m={class:'bubble emoji-bubble'},zm={class:'img-wrapper'},Tm=['src'],Mm={style:{display:'flex','align-items':'center',gap:'10px',width:'100%'}},Fm={key:0,class:'voice-icon'},Dm={class:'voice-duration'},Im={key:1,class:'voice-icon'},jm={key:0,class:'voice-text'},Um={class:'system-msg'},$m={class:'bubble text-bubble'},Hm={__name:'bubble',props:{bubble:{type:Object},senderinfo:{type:Object}},setup(e){const n=e,t=(0,i.computed)(()=>'user'===n.bubble.sender),a=(0,i.computed)(()=>{const e=n.bubble.sender;return t.value?l.Instagram.userHead||l.ST.userHead:n.senderinfo?.instagramHead?n.senderinfo.instagramHead:l.QQ.chars[e]?.instagramHead?l.QQ.chars[e].instagramHead:n.senderinfo?.head?n.senderinfo.head:l.QQ.chars[e]?.head?l.QQ.chars[e].head:''});t.value||!n.bubble.sender||n.bubble.sender in l.QQ.chars||c(n.bubble.sender);const o=e=>{e.target.style.display='none'},r=(0,i.ref)(!1),s=()=>{r.value=!r.value};function d(e){return e?e.replace(/\n/g,'<br>'):''}return(e,l)=>{return(0,i.openBlock)(),(0,i.createElementBlock)('div',{class:(0,i.normalizeClass)(['instagram-bubble-container',{'my-message':t.value}])},[(0,i.createCommentVNode)(' 对方头像 '),t.value?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:0,class:'chat-avatar',style:(0,i.normalizeStyle)(`background-image: url('${a.value}')`)},null,4)),(0,i.createCommentVNode)(' 消息内容 '),(0,i.createElementVNode)('div',Bm,[(0,i.createCommentVNode)(' 文本消息 '),'text'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)('div',wm,(0,i.toDisplayString)(n.bubble.content),1)):'img'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[(0,i.createCommentVNode)(' 图片消息 '),(0,i.createElementVNode)('div',km,[(c=n.bubble.content,/^http/.test(c)?((0,i.openBlock)(),(0,i.createElementBlock)('div',Em,[(0,i.createElementVNode)('img',{src:n.bubble.content,onError:o},null,40,Sm)])):((0,i.openBlock)(),(0,i.createElementBlock)('div',Nm,[l[0]||(l[0]=(0,i.createElementVNode)('div',{style:{'text-align':'center',color:'#aaa','font-size':'13px','margin-bottom':'5px'}},'[图片]',-1)),(0,i.createElementVNode)('div',{innerHTML:d(n.bubble.content)},null,8,Qm)]))),n.bubble.additionalText?((0,i.openBlock)(),(0,i.createElementBlock)('div',Vm,(0,i.toDisplayString)(n.bubble.additionalText),1)):(0,i.createCommentVNode)('v-if',!0)])],2112)):'emoji'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:2},[(0,i.createCommentVNode)(' 表情包 '),(0,i.createElementVNode)('div',_m,[(0,i.createElementVNode)('div',zm,[(0,i.createElementVNode)('img',{src:n.bubble.emoji,onError:o},null,40,Tm)])])],2112)):'voice'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:3},[(0,i.createCommentVNode)(' 语音消息 '),(0,i.createElementVNode)('div',{class:'bubble voice-bubble',onClick:s},[(0,i.createElementVNode)('div',Mm,[t.value?(0,i.createCommentVNode)('v-if',!0):((0,i.openBlock)(),(0,i.createElementBlock)('span',Fm,[...l[1]||(l[1]=[(0,i.createElementVNode)('svg',{viewBox:'0 0 24 24',width:'20',height:'20',fill:'currentColor'},[(0,i.createElementVNode)('path',{d:'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z'})],-1)])])),(0,i.createElementVNode)('span',Dm,(0,i.toDisplayString)(n.bubble.voicetime||2)+'"',1),t.value?((0,i.openBlock)(),(0,i.createElementBlock)('span',Im,[...l[2]||(l[2]=[(0,i.createElementVNode)('svg',{viewBox:'0 0 24 24',width:'20',height:'20',fill:'currentColor'},[(0,i.createElementVNode)('path',{d:'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z'})],-1)])])):(0,i.createCommentVNode)('v-if',!0)]),r.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',jm,(0,i.toDisplayString)(n.bubble.content),1)):(0,i.createCommentVNode)('v-if',!0)])],2112)):'music'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:4},[(0,i.createCommentVNode)(' music类型 '),(0,i.createVNode)(B,{class:(0,i.normalizeClass)('instagram-music'),song:n.bubble.song,singer:n.bubble.singer},null,8,['song','singer'])],2112)):'system'==n.bubble.msgtype?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:5},[(0,i.createCommentVNode)(' system类型 '),(0,i.createElementVNode)('div',Um,(0,i.toDisplayString)(n.bubble?.content),1)],2112)):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:6},[(0,i.createCommentVNode)(' 其他类型 '),(0,i.createElementVNode)('div',$m,(0,i.toDisplayString)(n.bubble.content),1)],2112))]),(0,i.createCommentVNode)(' 我方头像 '),t.value?((0,i.openBlock)(),(0,i.createElementBlock)('div',{key:1,class:'chat-avatar',style:(0,i.normalizeStyle)(`background-image: url('${a.value}')`)},null,4)):(0,i.createCommentVNode)('v-if',!0)],2);var c}}};a(2916);const Ym=(0,Xe.A)(Hm,[['__scopeId','data-v-1593665e']]),Wm={class:'comment-top'},Pm={class:'info'},Om={class:'name'},Lm={class:'meta'},qm={class:'comment-content'},Rm={key:0,class:'reply-to'},Xm=['innerHTML'],Zm={class:'comment-bottom'},Gm={key:0,class:'post-preview'},Jm={class:'post-text'},Km={key:1,class:'likes'},eu=(0,i.defineComponent)({__name:'Comment',props:['commentData','post'],emits:['click'],setup(e,{emit:n}){const t=e,a=n,o=(0,i.computed)(()=>d(t.commentData.sender,'Instagram')),r=(0,i.computed)(()=>{let e=t.commentData.content||'';return e?(e=e.replace(/\n/g,'<br>'),e=e.replace(/\[(img|vedio|bqb)/g,'<br>[$1'),e):''}),s=(0,i.computed)(()=>{if(t.post?.imgs&&t.post.imgs.length>0){const e=t.post.imgs[0];if('image'===e.type)return`background-image: url('${e.url}')`}return'background-color: #efefef'}),l=(0,i.computed)(()=>t.post?.content||'帖子'),c=(0,i.computed)(()=>`background-image: url('${t.commentData.head||o.value.head||'https://via.placeholder.com/32'}')`);return(e,n)=>((0,i.openBlock)(),(0,i.createElementBlock)('div',{class:'ig-comment-card',onClick:n[0]||(n[0]=e=>a('click'))},[(0,i.createElementVNode)('div',Wm,[(0,i.createElementVNode)('div',{class:'ig-circle-avatar',style:(0,i.normalizeStyle)(c.value)},null,4),(0,i.createElementVNode)('div',Pm,[(0,i.createElementVNode)('div',Om,(0,i.toDisplayString)(o.value.name),1),(0,i.createElementVNode)('div',Lm,(0,i.toDisplayString)(t.commentData.time)+' · 评论了帖子',1)])]),(0,i.createElementVNode)('div',qm,[t.commentData.replyTo?((0,i.openBlock)(),(0,i.createElementBlock)('span',Rm,'回复 @'+(0,i.toDisplayString)(t.commentData.replyTo)+': ',1)):(0,i.createCommentVNode)('v-if',!0),(0,i.createElementVNode)('span',{innerHTML:r.value},null,8,Xm)]),(0,i.createElementVNode)('div',Zm,[t.post?((0,i.openBlock)(),(0,i.createElementBlock)('div',Gm,[(0,i.createElementVNode)('div',{class:'post-cover',style:(0,i.normalizeStyle)(s.value)},null,4),(0,i.createElementVNode)('div',Jm,(0,i.toDisplayString)(l.value),1)])):(0,i.createCommentVNode)('v-if',!0),t.commentData.like&&'0'!==t.commentData.like?((0,i.openBlock)(),(0,i.createElementBlock)('div',Km,[n[1]||(n[1]=(0,i.createElementVNode)('svg',{'aria-label':'Like',class:'x1lliihq x1n2onr6 x5n08af',fill:'#8e8e8e',height:'12',role:'img',viewBox:'0 0 24 24',width:'12'},[(0,i.createElementVNode)('path',{d:'M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z'})],-1)),(0,i.createTextVNode)(' '+(0,i.toDisplayString)(t.commentData.like),1)])):(0,i.createCommentVNode)('v-if',!0)])]))}});a(6924);const nu=(0,Xe.A)(eu,[['__scopeId','data-v-0b415a01']]),tu='1111';function au(e){let n=0;for(let t=0;t<e.length;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}return Math.abs(n)%200-50}async function iu(){await l.ST.worldInit(),console.log(`世界书名称:${l.ST.worldName}`),l.ST.userName=await triggerSlash('/pass {{user}}'),l.ST.userHead=await triggerSlash('/pass {{userAvatarPath}}')??'',l.Instagram.userHead=l.ST.userHead,console.log(`取到user头像:${l.ST.userHead}`),l.ST.charName=await triggerSlash('/pass {{char}}'),l.ST.charHead=await triggerSlash('/pass {{charAvatarPath}}')??'',l.RedNote.randomHead='https://aguacloud.uk/f/zQPfg/2YSzwbdXs64VobO.thumb.1000_0.jpeg\r\nhttps://aguacloud.uk/f/wjJs6/4ESbWq4EHo1AQGX.thumb.1000_0.jpeg\r\nhttps://aguacloud.uk/f/YgqhW/EWS063x8fVXLeA0.thumb.1000_0.jpeg\r\nhttps://aguacloud.uk/f/DwOf2/M6SPlb1YtBY0y3O.thumb.1000_0.jpeg\r\nhttps://aguacloud.uk/f/qPLUz/q4S8ZopWux5bad9.thumb.1000_0.jpeg\r\nhttps://aguacloud.uk/f/g5KhR/20230411130021_0aca1.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/mA8hw/xDS5Eng0c21d7oE.thumb.1000_0.png\r\nhttps://aguacloud.uk/f/Q8esY/y9SYEV8pfbdXev4.thumb.1000_0.png\r\nhttps://aguacloud.uk/f/pjQtq/20230131141132_9c433.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/kXViL/V2S11zpOHmYYx7v.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/2jRTx/DWSPP318sdVV1P4.jpg\r\nhttps://aguacloud.uk/f/ORXHZ/aLSLLx53H0XXaeb.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/aAxfB/oVSqqJveHg443G9.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/Xr5hk/B8SVVm1xClwwMxd.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/bg3u6/3BSDW3znHzExmbj.thumb.1000_0.jpeg\r\nhttps://aguacloud.uk/f/AzEi1/20230131141540_e2389.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/19ptQ/20230131141447_a6c04.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/ep6fp/20230131141447_838af.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/BNgF7/20230131141540_92072.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/Jj9hO/20230325112808_307b9.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/lR4U9/20230325112808_aadc1.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/xYrTQ/20230325112808_08762.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/WapuQ/V2SoO7vDHm6NxOb.thumb.1000_0.jpg\r\nhttps://aguacloud.uk/f/5kWtp/1mSg09ZQSQVb3xe.thumb.1000_0.jpg'.split(/\r?\n/g),l.QQ.chars={},l.QQ.chathistory={},l.QQ.post=[],l.Instagram.posts=[],l.ST.isMobile=await SillyTavern.isMobile(),await async function(){const e={'手机-表情包':{name:'手机-表情包',enabled:!1,position:{type:'after_character_definition'},strategy:{type:'selective',keys:['此世界书仅存放数据,永不触发']},content:Zp},'手机-随机头像':{name:'手机-随机头像',enabled:!1,position:{type:'after_character_definition'},strategy:{type:'selective',keys:['此世界书仅存放数据,永不触发']},content:Gp},'手机-基本设置':{name:'手机-基本设置',enabled:!1,position:{type:'after_character_definition'},strategy:{type:'selective',keys:['此世界书仅存放数据,永不触发']},content:Xp},'手机-角色':{name:'手机-角色',enabled:!0,position:{type:'after_character_definition'},strategy:{type:'constant'},content:''},'手机-格式':{name:'手机-格式',enabled:!0,position:{type:'after_character_definition',order:3333},strategy:{type:'constant'},content:Jp}};let n=!1;for(const t in e){const a=l.ST.getEntry([t],!0);a?('手机-格式'===t&&a.content!==e[t].content||a&&!a?.content)&&(n=!0,await setLorebookEntries(l.ST.worldName,[{uid:a.uid,content:e[t].content}])):(n=!0,await createWorldbookEntries(l.ST.worldName,[e[t]]))}n&&(n=!1,await l.ST.worldInit());l.ST.entries=l.ST.entries.filter(e=>{let t=!1;return e.name.match(/手机-格式\d+-/)&&(t=!0,n=!0),!t});const t=l.ST.getEntry(['手机-角色'],!0);if(t?.content){const e=new s;e.loadText(t.content);let n=!1;for(const t of e.getAllSections()){if('群聊'!=e.readValue(t,'类型'))continue;const a=t.match(/[0-9a-zA-Z]+/);if(a&&a[0]==t&&6==t.length)continue;n=!0;const i=l.GetRandomId(6,!0);e.writeValue(i,'群名',t),e.getAllKeys(t).map(n=>{const a=e.readValue(t,n);e.writeValue(i,n,a)}),e.removeSection(t)}n&&(t.content=e.getAllText())}const a=l.ST.getEntry(['手机-界面基本设置'],!0);if(a?.content){console.log('存在旧的格式世界书!!!!!!!!!!!!');const e=new s,t=new s,i=l.ST.getEntry(['手机-基本设置'],!0);e.loadText(a.content),t.loadText(i.content);['外框颜色','内框颜色','侧边按钮'].map(n=>{const a=e.readValue('下面是基本设置',n);t.writeValue('基本设置',n,a)}),i.content=t.getAllText(),a.name='删除此项',l.ST.entries=l.ST.entries.filter(e=>'删除此项'!=e.name),n=!0}n&&await replaceWorldbook(l.ST.worldName,l.ST.entries)}(),await function(){let e=!1;const n=getTavernRegexes({scope:'character'});let t=n.some(e=>'/<PhoneAnalysis>[\\s\\S]+?<\\/PhoneAnalysis>/g'===e.find_regex);t||(n.push({id:'7df2d177-0e2d-4e42-b9c2-d849e00ad9fe',script_name:'隐藏手机思维链',enabled:!0,run_on_edit:!0,scope:'character',find_regex:'/<PhoneAnalysis>[\\s\\S]+?<\\/PhoneAnalysis>/g',replace_string:'',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!0},min_depth:null,max_depth:null}),e=!0);const a=n.find(e=>'/<phone>[\\s\\S]+?<\\/phone>/g'===e.find_regex);a&&a.enabled&&(a.enabled=!1,e=!0);const i='/(?:<msg>|<douyin_msg>|<rednote>|<douyin>|<tinder>|<instagram>|<instagram_msg>)([\\s\\S]+?)(?:<\\/msg>|<\\/douyin_msg>|<\\/rednote>|<\\/douyin>|<\\/tinder>|<\\/instagram>|<\\/instagram_msg>)/g',o='d3d73027-2924-4951-ae16-4b7061dfd96f',r=n.findIndex(e=>e.id===o||'气泡正则1 - 添加代码块'===e.script_name);-1!==r?n[r].find_regex!==i&&(console.log('检测到旧版气泡正则，正在更新...'),n[r].find_regex=i,n[r].replace_string='```\n$0\n```',e=!0):(n.push({id:'d3d73027-2924-4951-ae16-4b7061dfd96f',script_name:'气泡正则1 - 添加代码块',enabled:!0,run_on_edit:!0,scope:'character',find_regex:i,replace_string:'```\n$0\n```',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);t=n.some(e=>'/<\\/rednote>\\n*```\\n*```\\n*<rednote>/g'===e.find_regex),t||(n.push({id:'325ef7c5-da1e-4f64-89cc-1e39ef15a828',script_name:'气泡正则2 - 去除重复代码块 - 小红书',enabled:!0,run_on_edit:!0,scope:'character',find_regex:'/<\\/rednote>\\n*```\\n*```\\n*<rednote>/g',replace_string:'</rednote>\n<rednote>',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);t=n.some(e=>'/<\\/douyin>\\n*```\\n*```\\n*<douyin>/g'===e.find_regex),t||(n.push({id:'325ef7c5-da1e-4f64-89cc-1e39ef15a829',script_name:'气泡正则2 - 去除重复代码块 - 抖音',enabled:!0,run_on_edit:!0,scope:'character',find_regex:'/<\\/douyin>\\n*```\\n*```\\n*<douyin>/g',replace_string:'</douyin>\n<douyin>',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);t=n.some(e=>'/<\\/msg>\\n*```\\n*```\\n*<msg>/g'===e.find_regex),t||(n.push({id:'f8d90bf0-5f5f-4964-8e86-9080e2430320',script_name:'气泡正则2 - 去除重复代码块 - 消息',enabled:!0,run_on_edit:!0,scope:'character',find_regex:'/<\\/msg>\\n*```\\n*```\\n*<msg>/g',replace_string:'</msg>\n<msg>',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);t=n.some(e=>'/<\\/douyin_msg>\\n*```\\n*```\\n*<douyin_msg>/g'===e.find_regex),t||(n.push({id:'f8d90bf0-5f5f-4964-8e86-9080e2430321',script_name:'气泡正则2 - 去除重复代码块 - 抖音私信',enabled:!0,run_on_edit:!0,scope:'character',find_regex:'/<\\/douyin_msg>\\n*```\\n*```\\n*<douyin_msg>/g',replace_string:'</douyin_msg>\n<douyin_msg>',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);t=n.some(e=>'/<\\/tinder>\\n*```\\n*```\\n*<tinder>/g'===e.find_regex),t||(n.push({id:'f8d90bf0-5f5f-4964-8e86-9080e2430322',script_name:'气泡正则2 - 去除重复代码块 - Tinder',enabled:!0,run_on_edit:!0,scope:'character',find_regex:'/<\\/tinder>\\n*```\\n*```\\n*<tinder>/g',replace_string:'</tinder>\n<tinder>',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);const s='/<\\/instagram>\\n*```\\n*```\\n*<instagram>/g';n.some(e=>e.find_regex===s)||(n.push({id:'ig-dup-fix-001',script_name:'气泡正则2 - 去除重复代码块 - Instagram',enabled:!0,run_on_edit:!0,scope:'character',find_regex:s,replace_string:'</instagram>\n<instagram>',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);const l='/<\\/instagram_msg>\\n*```\\n*```\\n*<instagram_msg>/g';n.some(e=>e.find_regex===l)||(n.push({id:'ig-msg-dup-fix-001',script_name:'气泡正则2 - 去除重复代码块 - Instagram私信',enabled:!0,run_on_edit:!0,scope:'character',find_regex:l,replace_string:'</instagram_msg>\n<instagram_msg>',source:{user_input:!0,ai_output:!0,slash_command:!1,world_info:!1},destination:{display:!0,prompt:!1},min_depth:null,max_depth:null}),e=!0);e&&(replaceTavernRegexes(n,{scope:'character'}),console.log('自动更新了所需要的正则'))}(),l.ST.chatId=await triggerSlash('/pass {{chatId}}'),await async function(){try{const e=l.ST.getEntry(['手机-基本设置'],!0);if(!e)return;const n=new s;n.loadText(e.content);const t=n.readValue('基本设置','世界书版本');if(!t||Number(tu)>Number(t)){let t=!1;const a=l.ST.getEntry(['手机-格式'],!0);a&&(await setLorebookEntries(l.ST.worldName,[{uid:a.uid,content:Jp,position:'after_character_definition',order:3333}]),t=!0);const i=l.ST.getEntry(['手机-规则重述'],!0);i&&(console.log(`删除世界书:${i.uid}`),await deleteLorebookEntries(l.ST.worldName,[i.uid])),t&&(n.writeValue('基本设置','世界书版本',tu),await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}]))}l.phone.wallpaper=n.readValue('基本设置','主屏壁纸')||'',l.phone.icons.QQ=n.readValue('基本设置','图标-QQ')||'',l.phone.icons.RedNote=n.readValue('基本设置','图标-RedNote')||'',l.phone.icons.Douyin=n.readValue('基本设置','图标-Douyin')||'',l.phone.icons.Tinder=n.readValue('基本设置','图标-Tinder')||'',l.phone.icons.Instagram=n.readValue('基本设置','图标-Instagram')||'',l.phone.colorSettings.background=n.readValue('基本设置','内框颜色'),l.phone.colorSettings.border=n.readValue('基本设置','外框颜色'),l.phone.colorSettings.button=n.readValue('基本设置','侧边按钮'),l.phone.sendModel=n.readValue('基本设置','发送模式')||'normal',l.phone.navButton=Boolean(n.readValue('基本设置','导航按键')),l.Douyin.userName=n.readValue('基本设置','抖音昵称')||'',l.Douyin.userHead=n.readValue('基本设置','抖音头像')||'',l.Douyin.userDouyinId=n.readValue('基本设置','抖音号')||'88888888',l.Douyin.following=Number(n.readValue('基本设置','抖音关注'))||0,l.Douyin.followers=Number(n.readValue('基本设置','抖音粉丝'))||0,l.Douyin.friends=Number(n.readValue('基本设置','抖音朋友'))||0,l.Douyin.baseFollowing=l.Douyin.following,l.Douyin.baseFollowers=l.Douyin.followers,l.Douyin.baseFriends=l.Douyin.friends,l.Instagram.userName=n.readValue('基本设置','Instagram昵称')||'',l.Instagram.userHead=n.readValue('基本设置','Instagram头像')||l.ST.userHead,l.Instagram.userBio=n.readValue('基本设置','Instagram签名')||'',l.Instagram.followers=n.readValue('基本设置','Instagram粉丝')||'0',l.Instagram.following=n.readValue('基本设置','Instagram关注')||'0',n.readValue('基本设置','Tinder匹配列表')&&(console.log('Detected legacy Tinder data in Worldbook. Cleaning up...'),n.sections['基本设置']&&(delete n.sections['基本设置']['Tinder匹配列表'],delete n.sections['基本设置']['Tinder不喜欢列表'],delete n.sections['基本设置']['Tinder陌生人列表'],delete n.sections['基本设置']['Tinder账号状态'],delete n.sections['基本设置']['Tinder注销理由'],delete n.sections['基本设置'].ChatID,await setLorebookEntries(l.ST.worldName,[{uid:e.uid,content:n.getAllText()}]),console.log('Legacy Tinder data removed from Worldbook.'))),l.Tinder.userName=n.readValue('基本设置','Tinder昵称')||'',l.Tinder.userHead=n.readValue('基本设置','Tinder头像')||'',l.Tinder.userBio=n.readValue('基本设置','Tinder签名')||'';const a=getVariables({type:'chat'}).TinderState;if(a)a.matches&&(l.Tinder.matches=a.matches,l.Tinder.matches.forEach(e=>{const n=e.id||e.name;l.Tinder.chathistory[n]||(l.Tinder.chathistory[n]={msgs:[],unread:0,lastMsg:'You matched! Say hi.',time:''})})),a.noped&&(l.Tinder.noped=a.noped),a.generatedStrangers&&(l.Tinder.generatedStrangers=a.generatedStrangers),a.userAlbum&&(l.Tinder.userAlbum=a.userAlbum),a.chathistory&&(l.Tinder.chathistory={...l.Tinder.chathistory,...a.chathistory}),a.accountStatus&&(l.Tinder.accountStatus=a.accountStatus),a.deletionReason&&(l.Tinder.deletionReason=a.deletionReason);else{console.log('No Tinder chat variables found. Starting fresh Tinder session.'),l.Tinder.matches=[],l.Tinder.chathistory={},l.Tinder.noped=[],l.Tinder.generatedStrangers=[],l.Tinder.userAlbum=[];const e=n.readValue('基本设置','Tinder相册');if(e)try{l.Tinder.userAlbum=JSON.parse(e)}catch(e){console.error('Failed to parse Tinder album from WB:',e)}}const i=n.readValue('基本设置','气泡颜色');i&&(l.QQ.default.bubble=i);const o=n.readValue('基本设置','字体颜色');o&&(l.QQ.default.text=o),console.log(`${JSON.stringify(l.phone.colorSettings)}`)}catch{}}(),await async function(){let e='';const n=l.ST.getEntry(['手机-表情包'],!0);if(!n)return;e=n.content;if(!e)return;e=e.replace(/http:\/\/sharkpan/g,'https://sharkpan'),e=e.replace(/--\n/g,'--');const t=new RegExp('(.+?)--(http.+)','g'),a=[...e.matchAll(t)];if(!a)return;for(const e of a)l.emoji[e[1]]=e[2];let i=l.ST.getEntry(['手机-发给Ai的表情包列表'],!0);const o=`<手机可使用的表情包列表>\n${JSON.stringify(Object.keys(l.emoji))}\n</手机可使用的表情包列表>`;if(!i)return void(i=await createWorldbookEntries(l.ST.worldName,[{name:'手机-发给Ai的表情包列表',enabled:!0,position:{type:'at_depth',role:'system',depth:4,order:3333},strategy:{type:'constant'},content:o}]));await setLorebookEntries(l.ST.worldName,[{uid:i.uid,content:o}])}(),await async function(){let e='';const n=l.ST.getEntry(['手机-随机头像'],!0);if(!n)return;e=n.content;if(!e)return;const t=e.trim().matchAll(/^http.+$/gm);for(const e of t){const n={url:e[0],count:0};l.RandomHead.push(n)}}(),await function(){const e=l.ST.getEntry(['手机-角色'],!0)?.content;if(!e)return;l.QQ.charini.loadText(e);for(const e of l.QQ.charini.getAllSections()){let n='';const t={};if('char'==e)n=l.ST.charName,t.name=n,t.head=l.QQ.charini.readValue(e,'头像')||l.ST.charHead;else{n=e;const a=l.QQ.charini.readValue(e,'群名');t.name=a||n,'char'==l.QQ.charini.readValue(e,'头像')?t.head=l.ST.charHead:t.head=l.QQ.charini.readValue(e,'头像')||l.GetRandomHead(),t.members=l.QQ.charini.readValue(e,'群成员')||'',t.content=l.QQ.charini.readValue(e,'群作用')||''}const{bgColor:a,textColor:i}=l.generateBubbleColor();t.bubble=l.QQ.charini.readValue(e,'气泡颜色')||a,t.text=l.QQ.charini.readValue(e,'字体颜色')||i,t.background=l.QQ.charini.readValue(e,'聊天壁纸')||'',t.phone=l.QQ.charini.readValue(e,'手机型号')||'隐藏机型',t.inputColor=l.QQ.charini.readValue(e,'输入框颜色')||'#FFFFFF',t.douyinId=l.QQ.charini.readValue(e,'抖音号')||'',t.douyinName=l.QQ.charini.readValue(e,'抖音昵称')||'',t.douyinHead=l.QQ.charini.readValue(e,'抖音头像')||'',t.douyinFollowing=Number(l.QQ.charini.readValue(e,'抖音关注'))||0,t.douyinFollowers=Number(l.QQ.charini.readValue(e,'抖音粉丝'))||0,t.douyinFriends=Number(l.QQ.charini.readValue(e,'抖音朋友'))||0,t.douyinBaseFollowing=t.douyinFollowing,t.douyinBaseFollowers=t.douyinFollowers,t.douyinBaseFriends=t.douyinFriends,t.tinderName=l.QQ.charini.readValue(e,'Tinder昵称')||l.QQ.charini.readValue(e,'TinderName')||'',t.tinderBio=l.QQ.charini.readValue(e,'Tinder签名')||l.QQ.charini.readValue(e,'TinderBio')||'',t.tinderHead=l.QQ.charini.readValue(e,'Tinder头像')||l.QQ.charini.readValue(e,'TinderHead')||'',t.instagramId=l.QQ.charini.readValue(e,'Instagram号')||l.QQ.charini.readValue(e,'InstagramId')||'',t.instagramName=l.QQ.charini.readValue(e,'Instagram昵称')||l.QQ.charini.readValue(e,'InstagramName')||'',t.instagramBio=l.QQ.charini.readValue(e,'Instagram签名')||l.QQ.charini.readValue(e,'InstagramBio')||'',t.instagramHead=l.QQ.charini.readValue(e,'Instagram头像')||l.QQ.charini.readValue(e,'InstagramHead')||'',t.instagramFollowers=l.QQ.charini.readValue(e,'Instagram粉丝')||l.QQ.charini.readValue(e,'InstagramFollowers')||'0',t.instagramFollowing=l.QQ.charini.readValue(e,'Instagram关注')||l.QQ.charini.readValue(e,'InstagramFollowing')||'0';const o=l.QQ.charini.readValue(e,'Tinder相册');if(o)try{t.tinderAlbum=JSON.parse(o)}catch(e){console.error('Failed to parse Char Tinder album:',e),t.tinderAlbum=[]}else t.tinderAlbum=[];const r=l.Tinder.matches.findIndex(e=>e.id&&e.id===n||e.name===t.tinderName||e.name===t.name);if(-1!==r){const e=l.Tinder.matches[r];e.id||(e.id=n),t.tinderName&&(e.name=t.tinderName),t.tinderHead&&(e.head=t.tinderHead),t.tinderBio&&(e.bio=t.tinderBio),t.tinderAlbum&&t.tinderAlbum.length>0&&(e.album=t.tinderAlbum)}const s=l.QQ.charini.readValue(e,'类型');'群聊'==s?t.chartype='Group':'npc'==s.toLowerCase()?t.chartype='npc':t.chartype='friend','friend'==t.chartype&&l.QQ.charini.readValue(e,'备注')&&(t.name=l.QQ.charini.readValue(e,'备注')),l.QQ.chars[n]=t}}(),l.resetDouyinStats()}async function ou(e){const n=e.message;if(!n)return!1;const t=function(e){return e?e=e.replace(/<think[ing]*?>[\s\S]+?<\/think[ing]*?>/gi,''):''}(n),a=t.matchAll(/([a-zA-Z]+\.[a-zA-Z]+)\((.+)\);/g);let i=!1;for(const n of a){const t=n[1],a=n[2].trim().replace(/^["']|["']$/g,'').split(/['"]\s*?,\s*?['"]/g);t.match(/qq|rednote|douyin/i)&&(i=!0,ru(t,a,e))}return i}async function ru(e,n,t){if(0!=n.length)if(('qq.private'==(e=e.toLowerCase())||'qq.group'==e)&&n.length>=4){let t='';const a=su(n[2]);for(const i of a){let a=!1;if('qq.private'==e){const e=n[0].match(new RegExp(`${l.ST.userName}和(.+?)的私聊`))||n[0].match(new RegExp(`(.+?)和${l.ST.userName}的私聊`));if(e)t=e[1],c(t);else{const e=n[0].match(/(.+?)和(.+?)的私聊/);if(!e)return;t=(`${e[1]}和${e[2]}的私聊`in l.QQ.chars||(e[2],e[1],l.QQ.chars),`${e[1]}和${e[2]}的私聊`),a=!0,i.chartype='private',c(t,'friend',{banSend:!0},!1)}}else t=n[0],c(t,'Group');let o='';o='qq.private'==e?'private':'Group',t in l.QQ.chathistory==0&&(l.QQ.chathistory[t]={chartype:o,msgs:[]}),i.sender=n[1]==l.ST.userName?'user':n[1],'content'in i==0&&(i.content=''),i.time=n[3];try{l.QQ.addMsg(t,i)}catch(e){console.log(`添加新消息时出现错误:${e}`)}}}else if('qq.setgroupname'==e&&n.length>=4){let e=!0;n[0]in l.QQ.chars==0&&(c(n[0],'Group'),e=!1);const t=`${n[2]}修改群名称为"${n[1]}"`;l.QQ.chars[n[0]].name=n[1],e&&t&&l.QQ.addMsg(n[0],{content:t,time:n[3],sender:'system',msgtype:'system'})}else if('qq.post'==e&&n.length>=4){let e=n[0],a=!1;if(l.QQ.post.map(n=>{n.id!=e||(a=!0)}),a){const n=await async function(e,n){if(!e||!e.message)return;let t='';for(;;){let e=!1;if(t=Math.random().toString(36).substring(2,8),l.QQ.post.map(n=>{n.id!=t||(e=!0)}),!e)break}console.log(`重新取到的ID:${t}`);const a=e.message.replaceAll(`'${n}'`,`'${t}'`);return await setChatMessages([{message_id:e.message_id,message:a}],{refresh:'all'}),t}(t,e)||'';if(!n)return;e=n}const i={id:e,sender:n[1],time:n[3],see:n[4],like:n[5],imgs:[],comment:[],content:''};let o=n[2];const r=o.matchAll(/\[(.+?)-(.+?)\]/g);for(const e of r)if(o=o.replace(e[0],''),'img'==e[1])i.imgs.push({imgtype:'img',content:e[2]});else if(e[2]in l.emoji){const n=l.emoji[e[2]];i.imgs.push({imgtype:'emoji',url:n})}else i.imgs.push({imgtype:'img',content:`AI编了个不存在的表情包:${e[2]}`});i.content=o,l.QQ.post.unshift(i)}else if('qq.comment'==e&&n.length>=3){const e=n[0],t=l.QQ.post.find(n=>n.id==e);if(!t)return;t.comment.push({sender:n[1],content:n[2]})}else if('rednote.post'==e&&n.length>=9){const e={id:n[0],sender:n[1],img:n[2],title:n[3],content:n[4],time:n[5],like:n[6],star:n[7],comment:n[8]};l.RedNote.addPost(e)}else if('rednote.comment'==e){const e=n[0],t=l.RedNote.post.find(n=>n.id==e);if(!t)return;const a=n[2]||'momo',i=d(a,'RedNote').head,o={content:n[1],sender:a,time:n[3],like:n[4],head:i};t.comments.unshift(o)}else if('douyin.post'==e&&n.length>=7){let e=n[1];const t=d(e,'Douyin');e=t.name;const a=t.head,i={id:n[0],sender:e,head:a,title:n[2],content:n[3],video:n[4],time:n[5],like:n[6],comment:n[7]||'0',collect:n[8]||'0',share:n[9]||'0',music:'原声',isLike:!1,comments:[]},o=l.Douyin.videos.find(e=>e.id===i.id);if(l.Douyin.addVideo(i),!o){const n=au(i.id);if(e==l.Douyin.userName||e==l.ST.userName)l.Douyin.followers=(l.Douyin.followers||0)+n,l.Douyin.followers<0&&(l.Douyin.followers=0);else{const t=Object.values(l.QQ.chars).find(n=>n.name===e||n.douyinName===e);t&&(t.douyinFollowers=(t.douyinFollowers||0)+n,t.douyinFollowers<0&&(t.douyinFollowers=0))}}}else if('douyin.comment'==e&&n.length>=3){const e=n[0],t=l.Douyin.videos.find(n=>n.id===e);if(!t)return;let a=n[1]||'momo';const i=d(a,'Douyin');a=i.name;const o=i.head;if(t.comments.some(e=>e.sender===a&&e.content===n[2]&&e.time===(n[3]||'')))return;t.comments.unshift({sender:a,head:o,content:n[2],time:n[3]||'',like:n[4]||'0',replyTo:n[5]||''})}}function su(e){const n=e.match(/\[(.+?)-(.+?)\]/);if(!n)return[{msgtype:'text',content:e}];let t=n[1];if(['bqb','zz','yy','music','img'].includes(t)||(t='img'),'bqb'==t||'img'==t){const a=e.replace(n[0],'').trim();if('bqb'==t){if(l.emoji[n[2]]){const e=[];return a&&e.push({msgtype:'text',content:a}),e.push({msgtype:'emoji',emoji:l.emoji[n[2]]||'',additionalText:'',content:n[2]}),e}{const e=[];return a&&e.push({msgtype:'text',content:a}),e.push({msgtype:'img',additionalText:'',content:`AI编的表情包:\n${n[2]}`}),e}}return[{msgtype:'img',additionalText:a,content:n[2]}]}if('yy'==t)return[{msgtype:'voice',content:n[2],voicetime:Math.ceil(n[2].length/4).toString()}];if('music'==t){const e=n[2].split('$');return e.length<2?[{msgtype:'text',content:'##Ai输出格式错误了的歌曲分享'}]:[{msgtype:'music',song:e[0],singer:e[1],content:''}]}return'zz'==t?[{msgtype:'transfer',content:`转账${n[2]}`,count:n[2]}]:[{msgtype:'img',content:'未处理类型'}]}async function lu(e){e||(e=3);const n=await triggerSlash('/pass {{lastMessageId}}');if(!n)return void console.log('最新楼层为空');const t=await getChatMessages(`0-${n}`);t.length>0&&(l.QQ.chathistory={},l.QQ.post=[],l.RedNote.post=[],l.RedNote.activePost='',l.Douyin.videos=[],l.Douyin.chathistory={},l.resetDouyinStats(),l.Tinder.chathistory={},l.Instagram.chathistory={});for(const e of t){const n=e.message;if(n)try{const t=[...n.matchAll(l.regexBubble.msgRegex)];if(t.length>0)for(const e of t){const n=e[1],t=e[2];let a='';t.indexOf('群:')>-1?a=t.replace('群:',''):n==l.ST.userName?a=t:t==l.ST.userName?a=n:(a=`${n}和${t}的私聊`,a in l.QQ.chars==0&&(a=`${t}和${n}的私聊`),c(a,'friend',{banSend:!0},!1));const i=su(e[3]),o=e[4];for(const e of i)'content'in e==0&&(e.content=''),e.sender=n==l.ST.userName?'user':n,e.time=o,t.trim().indexOf('群:')>-1&&(e.chartype='Group',c(a,'Group')),n==l.ST.userName||t==l.ST.userName?(e.chartype='private',c(a)):t.trim().indexOf('群:')>-1?(e.chartype='Group',c(a,'Group')):(e.chartype='private',c(a,'friend',{banSend:!0},!1)),l.QQ.addMsg(a,e)}const a=[...n.matchAll(l.regexBubble.douyinMsgRegex)];if(a.length>0)for(const e of a){const n=e[1],t=n.indexOf('|'),a=n.indexOf('|',t+1),i=n.lastIndexOf('|');if(-1===t||-1===a||-1===i||a===i)continue;const o=n.substring(0,t).trim(),r=n.substring(t+1,a).trim(),s=n.substring(a+1,i).trim(),p=n.substring(i+1).trim(),m=d(o,'Douyin'),u=d(r,'Douyin'),A=m.id,h=u.id;let g='';h.indexOf('群:')>-1?g=h.replace('群:',''):'user'==A?g=h:'user'==h?g=A:(g=`${A}和${h}的私聊`,g in l.QQ.chars==0&&(g=`${h}和${A}的私聊`),c(g,'Group',{banSend:!0}));const C=su(s);for(const e of C)'content'in e==0&&(e.content=''),e.sender='user'==A?'user':A,e.time=p,h.trim().indexOf('群:')>-1?e.chartype='Group':'user'==A||'user'==h?(g in l.QQ.chars||c(g,'friend'),e.chartype='private'):e.chartype='Group',l.Douyin.addMsg(g,e)}const i=[...n.matchAll(l.regexBubble.rednoteRegex)];for(const e of i){const n=e[1].split('|');if(0==n.length)continue;const t=n[0];if(9==n.length){const e={id:t,sender:n[1],img:n[2],title:n[3],content:n[4],time:n[5],like:n[6],star:n[7],comment:n[8]};l.RedNote.addPost(e)}else if(5==n.length){const e=l.RedNote.post.find(e=>e.id==t);if(!e)continue;const a=n[1]||'momo',i=d(a,'RedNote').head,o={content:n[2],sender:a,time:n[3],like:n[4],head:i};e.comments.unshift(o)}}const o=[...n.matchAll(l.regexBubble.tinderRegex)];if(o.length>0)for(const e of o){const n=e[1];if(n.startsWith('delete_account')){const e=n.split('|'),t=e.length>1?e[1]:'User requested via command';l.Tinder.accountStatus='deleted',l.Tinder.deletionReason=t,l.Tinder.matches=[],l.Tinder.chathistory={},l.Tinder.noped=[],l.Tinder.userAlbum=[],l.Tinder.userName='',l.Tinder.userBio='',l.Tinder.userHead='',l.Tinder.saveSettings();continue}if(n.startsWith('update_profile|')){const e=n.split('|');if(e.length>=4){const n=e[1],t=e[2],a=e[3],i=e.length>=5?e[4]:null;if(n===l.Tinder.userName||n===l.ST.userName){if(l.Tinder.userName=n,l.Tinder.userBio=t,a&&'keep'!==a&&(l.Tinder.userHead=a),i)try{const e=JSON.parse(i);Array.isArray(e)&&(l.Tinder.userAlbum=e)}catch(e){console.error('Failed to parse user album json',e)}l.Tinder.saveSettings()}else{const e=Object.keys(l.QQ.chars).find(e=>l.QQ.chars[e].name===n||l.QQ.chars[e].tinderName===n);if(!e){const e=l.Tinder.matches.find(e=>e.name===n);if(e){if(e.bio=t,a&&'keep'!==a&&(e.head=a),i)try{const n=JSON.parse(i);Array.isArray(n)&&(e.album=n)}catch(e){console.error('Failed to parse match album json',e)}l.Tinder.saveSettings()}}if(e){const o=l.QQ.chars[e];if(o.tinderName=n,o.tinderBio=t,a&&'keep'!==a&&(o.tinderHead=a),i)try{const e=JSON.parse(i);Array.isArray(e)&&(o.tinderAlbum=e)}catch(e){console.error('Failed to parse char album json',e)}l.QQ.saveChars()}}}continue}const t=n.split('|');if(t.length>=3){let e=t[0],n='user',a='',i='';t.length>=4?(e=t[0].trim(),n=t[1].trim(),a=t[2].trim(),i=t[3].trim()):(e=t[0].trim(),a=t[1].trim(),i=t[2].trim()),e===l.ST.userName&&(e='user'),n===l.ST.userName&&(n='user');let o='';if('user'===e)o=n;else if('user'===n)o=e;else{const t=[e,n].sort();o=`${t[0]} & ${t[1]}`}let r=o;if(o.includes(' & ')){const[e,n]=o.split(' & '),t=e=>{if('user'===e)return;let n=!1;e in l.QQ.chars&&(n=!0),!n&&Object.values(l.QQ.chars).some(n=>n.tinderName===e)&&(n=!0),!n&&l.Tinder.matches.some(n=>n.name===e)&&(n=!0),n||c(e,'friend')};t(e),t(n)}else{const e=e=>e?e.trim().toLowerCase():'',n=e(o),t=Object.entries(l.QQ.chars).find(([_,t])=>e(t.tinderName)===n);if(t)r=t[0];else if(o in l.QQ.chars)r=o;else{const t=Object.entries(l.QQ.chars).find(([t,a])=>e(a.name)===n||e(t)===n);if(t)r=t[0];else{const t=n.length>1?Object.entries(l.QQ.chars).filter(([_,t])=>{const a=e(t.name),i=e(t.tinderName),o=a&&(a.includes(n)||n.length>a.length&&n.includes(a)),r=i&&(i.includes(n)||n.length>i.length&&n.includes(i));return o||r}):[];if(t.length>0)r=t[0][0];else{const t=l.Tinder.matches.find(t=>e(t.name)===n||e(t.id)===n);t&&t.id?r=t.id:c(o,'friend')}}}}const s=su(a);for(const n of s)l.Tinder.addMsg(r,{...n,sender:e,time:i})}}const r=[...n.matchAll(l.regexBubble.instagramMsgRegex)];if(r.length>0)for(const e of r){const n=e[1].split('|');let t='',a='user',i='',o='';if(n.length>=4)t=n[0].trim(),a=n[1].trim(),i=n[2].trim(),o=n[3].trim();else{if(!(n.length>=3))continue;t=n[0].trim(),i=n[1].trim(),o=n[2].trim()}t!==l.ST.userName&&'{{user}}'!==t||(t='user'),a!==l.ST.userName&&'{{user}}'!==a||(a='user');let r='';if('user'===t)r=a;else if('user'===a)r=t;else{const e=[t,a].sort();r=`${e[0]} & ${e[1]}`}let s=r,c=t;if('user'!==t){c=d(t,'Instagram').id}if('user'!==s&&!r.includes(' & ')){s=d(r,'Instagram').id}const p=su(i);for(const e of p)l.Instagram.addMsg(s,{...e,sender:c,time:o})}const s=[...n.matchAll(l.regexBubble.instagramRegex)];for(const e of s){const n=e[1].split('|');if(n.length<5)continue;const t=n[0];if(5===n.length||6===n.length){const e=l.Instagram.posts.find(e=>e.id==t);if(e){let t=n[1];t===l.ST.userName&&(t='user');const a=d(t,'Instagram');t=a.name;const i=n[2],o=n[3],r=n[4]||'0';e.comments.some(e=>e.sender===t&&e.content===i&&e.time===o)||e.comments.unshift({sender:t,content:i,time:o,like:r})}continue}let a=n[1];a===l.ST.userName&&(a='user');a=d(a,'Instagram').name;let i=[];try{i=JSON.parse(n[2])}catch(e){i=n[2].split(/[,，](?=(?:[^"]*"[^"]*")*[^"]*$)/).map(e=>e.trim())}Array.isArray(i)||(i=[i]);let o=[];try{n.length>=7&&(o=JSON.parse(n[6]))}catch(e){console.error('Failed to parse Instagram comments JSON',e)}let r='';n.length>=8&&(r=n[7]);let s=[];if(n.length>=9)try{s=JSON.parse(n[8])}catch(e){console.error('Failed to parse Instagram tagged users JSON',e)}let c='';n.length>=10&&(c=n[9]);const p={id:t,sender:a,imgs:i.map(e=>e&&(e.match(/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i)||e.startsWith('http'))?{url:e,type:'image'}:{content:e,type:'text'}),content:n[3],time:n[4],likes:n[5]||'0',comments:o,location:r,taggedUsers:s,music:c,liked:!1,saved:!1};l.Instagram.addPost(p)}const p=/\(发布了Instagram帖子\)\n([\s\S]+?)(?=\n\(|\n<|$)/g,m=[...n.matchAll(p)];for(const n of m){const t=n[1],a=t.split('\n');let i='',o='',r='',s='',c='';for(const e of a){const n=e.trim();n.startsWith('配文：')?i=n.substring(3).trim():n.startsWith('图片/视频：')?o=n.substring(6).trim():n.startsWith('地点：')?r=n.substring(3).trim():n.startsWith('音乐：')?s=n.substring(3).trim():n.startsWith('提到：')&&(c=n.substring(3).trim())}const p=t+(e.message_id||'');let m=0;for(let e=0;e<p.length;e++){m=(m<<5)-m+p.charCodeAt(e),m|=0}const u='ig_'+Math.abs(m).toString(36);let A=e.sender||'Unknown';A=d(A,'Instagram').name;const h=[];if(o){let e=[];try{const n=JSON.parse(o);e=Array.isArray(n)?n.map(String):[String(n)]}catch{e=o.split(/[,，](?=(?:[^"]*"[^"]*")*[^"]*$)/).map(e=>e.trim())}const n=/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i;for(const t of e)t.match(n)||t.startsWith('http')?h.push({url:t,type:'image'}):h.push({content:t,type:'text'})}const g={id:u,sender:A,imgs:h,content:i,time:'刚刚',likes:'0',comments:[],location:r,taggedUsers:c?c.split(/[,，]/).map(e=>e.trim().replace('@','')):[],music:s,liked:!1,saved:!1};l.Instagram.addPost(g)}const u=[],A=/```(?:json)?\s*([\s\S]+?)\s*```/gi,h=[...n.matchAll(A)];for(const e of h)try{const n=e[1].trim();if(n.startsWith('[')&&n.endsWith(']')){const e=JSON.parse(n);Array.isArray(e)&&u.push(e)}}catch{}if(0===u.length){let e=n.indexOf('[');for(;-1!==e;){let t=1,a=-1,i=!1,o=!1;for(let r=e+1;r<n.length;r++){const e=n[r];if(o)o=!1;else if('\\'!==e)if('"'!==e){if(!i)if('['===e)t++;else if(']'===e&&(t--,0===t)){a=r;break}}else i=!i;else o=!0}if(-1!==a){const t=n.substring(e,a+1);try{const e=JSON.parse(t);if(Array.isArray(e)){e.some(e=>e&&'object'==typeof e&&e.sender&&(e.content||e.images))&&u.push(e)}}catch(e){}e=n.indexOf('[',a+1)}else e=n.indexOf('[',e+1)}}for(const n of u)for(const t of n)if(t.sender&&(t.images||t.content)){const n=JSON.stringify(t)+(e.message_id||'');let a=0;for(let e=0;e<n.length;e++){a=(a<<5)-a+n.charCodeAt(e),a|=0}const i='ig_json_'+Math.abs(a).toString(36);let o=t.sender;const r=d(o,'Instagram');o=r.name;const s=r.head,c=[];if(Array.isArray(t.images))for(const e of t.images){const n=/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i;e&&(e.match(n)||e.startsWith('http'))?c.push({url:e,type:'image'}):c.push({content:e,type:'text'})}const p=[];if(Array.isArray(t.comments))for(const e of t.comments){const n=e.sender,t=d(n,'Instagram');p.push({sender:t.name,head:t.head,content:e.content,time:e.time||''})}const m={id:i,sender:o,head:s,imgs:c,content:t.content||'',time:t.time||'刚刚',likes:t.likes?String(t.likes):'0',comments:p,location:t.location||'',taggedUsers:t.taggedUsers||[],music:t.music||'',liked:!1,saved:!1};l.Instagram.addPost(m)}const g=[...n.matchAll(l.regexBubble.douyinRegex)];for(const e of g){const n=e[1].split('|');if(0!=n.length)if(n.length>=7){let e=n[1];const t=d(e,'Douyin');e=t.name;const a=t.head,i={id:n[0],sender:e,head:a,title:n[2],content:n[3],video:n[4],time:n[5],like:n[6],comment:n[7]||'0',collect:n[8]||'0',share:n[9]||'0',music:n[10]||'原声',isLike:!1,comments:[]},o=l.Douyin.videos.find(e=>e.id===i.id);if(l.Douyin.addVideo(i),!o){const n=au(i.id);if(e==l.Douyin.userName||e==l.ST.userName)l.Douyin.followers=(l.Douyin.followers||0)+n,l.Douyin.followers<0&&(l.Douyin.followers=0);else{const t=Object.values(l.QQ.chars).find(n=>n.name===e||n.douyinName===e);t&&(t.douyinFollowers=(t.douyinFollowers||0)+n,t.douyinFollowers<0&&(t.douyinFollowers=0))}}}else if(n.length>=3){const e=n[0],t=l.Douyin.videos.find(n=>n.id===e);if(t){let e=n[1]||'momo';const a=n[2],i=n[3]||'',o=n[4]||'0';let r=n[5]||'';if(r.startsWith('@')){const e=r.substring(1);r=d(e,'Douyin').name||e}else if(r){r=d(r,'Douyin').name||r}const s=d(e,'Douyin');e=s.name;const l=s.head;t.comments.some(n=>n.sender===e&&n.content===a&&n.time===i)||t.comments.unshift({sender:e,head:l,content:a,time:i,like:o,replyTo:r})}}}}catch(n){console.log(`解析楼层:${e.message_id}时出现错误:\n${n}`)}}l.loadRead();for(let n=0;n<e&&!(t.length-1-n<0);n++){const e=t[t.length-1-n];await cu(e)}}async function cu(e){const n=e.message;if('string'!=typeof n||!n)return;const t=l.regexBubble.msgRegex,a=l.regexBubble.douyinMsgRegex,o=l.regexBubble.rednoteRegex,r=l.regexBubble.douyinRegex,s=l.regexBubble.tinderRegex,c=l.regexBubble.instagramRegex,p=l.regexBubble.instagramMsgRegex,m=/QQ\.Post\((.+?)\);/g;t&&(t.lastIndex=0),a&&(a.lastIndex=0),o&&(o.lastIndex=0),r&&(r.lastIndex=0),s&&(s.lastIndex=0),c&&(c.lastIndex=0),p&&(p.lastIndex=0),m.lastIndex=0;const u=!!t&&t.test(n),A=!!a&&a.test(n),h=!!o&&o.test(n),g=!!r&&r.test(n),C=!!s&&s.test(n),f=!!c&&c.test(n),v=!!p&&p.test(n),b=m.test(n);if(!(u||A||h||g||C||f||v||b))return;t&&(t.lastIndex=0),a&&(a.lastIndex=0),o&&(o.lastIndex=0),r&&(r.lastIndex=0),s&&(s.lastIndex=0),c&&(c.lastIndex=0),p&&(p.lastIndex=0),m.lastIndex=0;const x=new Set;if(r){const e=[...n.matchAll(r)];for(const n of e){const e=n[1].split('|');e.length>=7&&x.add(e[0])}}const y=retrieveDisplayedMessage(Number(e.message_id)).find('.baibai_regexBubble, .baibai_regexInstagramMsg, .baibai_regexTinder, .baibai_regexInstagram, .baibai_regexQQPost, .baibai_regexRedNote, .baibai_regexDouyin, pre');if(y.length<=0)return;for(const n of y){const m=n.textContent||'',u=/QQ\.Post\((.+?)\);/g;t&&(t.lastIndex=0),a&&(a.lastIndex=0),o&&(o.lastIndex=0),r&&(r.lastIndex=0),s&&(s.lastIndex=0),c&&(c.lastIndex=0),p&&(p.lastIndex=0);const A=t?[...m.matchAll(t)]:[],h=a?[...m.matchAll(a)]:[],g=o?[...m.matchAll(o)]:[],C=r?[...m.matchAll(r)]:[],f=s?[...m.matchAll(s)]:[],v=c?[...m.matchAll(c)]:[],b=p?[...m.matchAll(p)]:[],y=[...m.matchAll(u)],B=[];try{const e=m.trim();if(e.startsWith('[')&&e.endsWith(']')){const n=JSON.parse(e);if(Array.isArray(n)&&n.length>0){const e=n[0];e.sender&&(e.images||e.content)&&B.push(n)}}}catch{}if(A.length<=0&&h.length<=0&&g.length<=0&&C.length<=0&&f.length<=0&&v.length<=0&&b.length<=0&&y.length<=0&&B.length<=0)continue;const w=$(n),k=w.parent();if(A.length>0||h.length>0){const t=$('<div class="baibai_regexBubble">')[0];k.hasClass('TH-render')?(k.append(t),w.remove()):w.replaceWith(t);const a={message_id:e.message_id,message_name:'楼层气泡',messages:[],to:t},o=h.length>0,r=o?h:A;for(const e of r){let n,t,i,r;if(o){const a=e[1].split('|');if(!(a.length>=2))continue;n=a[0].trim(),t=a[1].trim();n=d(n,'Douyin').id,3===a.length?(i=a[2].trim(),r=''):(r=a[a.length-1].trim(),i=a.slice(2,a.length-1).join('|').trim())}else n=e[1],t=e[2],i=e[3],r=e[4];const s=su(i);for(const e of s)'content'in e==0&&(e.content=''),e.sender=n==l.ST.userName||'user'==n?'user':n,e.time=r,a.messages.push(e)}const s=(0,i.h)(i.Teleport,{to:a.to},(a.messages??[]).map(e=>(0,i.h)(o?fi:ne,{bubble:e,senderinfo:l.QQ.chars[e?.sender]})));(0,i.render)(s,n)}else if(g.length>0)for(const e of g){const t=e[1].split('|');if(0==t.length||9!=t.length)continue;const a=t[0],o=l.RedNote.post.find(e=>e.id===a);if(!o)continue;const r=$('<div class="baibai_regexRedNote">')[0];k.hasClass('TH-render')?(k.append(r),w.remove()):w.replaceWith(r);const s=(0,i.h)(i.Teleport,{to:r},[(0,i.h)(na,{cardContent:o,onClick:()=>{l.RedNote.activePost=a,l.phone.show=!0,l.phone.activeApp='RedNote'}})]);(0,i.render)(s,n)}else if(C.length>0){const e=$('<div class="baibai_douyin_container" style="display: flex; flex-direction: column; gap: 5px;"></div>');k.hasClass('TH-render')?(k.append(e),w.remove()):w.replaceWith(e);for(const t of C){const a=t[1].split('|');if(0==a.length)continue;const o=a[0],r=l.Douyin.videos.find(e=>e.id===o),s=$('<div class="baibai_regexDouyin">')[0];if(e.append(s),r)if(a.length>=3&&a.length<=6){if(x.has(o))continue;const e={sender:a[1]||'momo',content:a[2],time:a[3]||'',like:a[4]||'0',replyTo:a[5]||'',head:''};let t=e.sender;const c=d(t,'Douyin');t=c.name;const p=c.head;e.sender=t,e.head=p;const m=(0,i.h)(i.Teleport,{to:s},[(0,i.h)(ym,{commentData:e,video:r,onClick:()=>{const e=l.Douyin.videos.findIndex(e=>e.id===o);-1!==e&&(l.Douyin.activeVideoIndex=e),l.phone.show=!0,l.phone.activeApp='Douyin'}})]);(0,i.render)(m,n)}else{const e=(0,i.h)(i.Teleport,{to:s},[(0,i.h)(cm,{cardContent:r,onClick:()=>{const e=l.Douyin.videos.findIndex(e=>e.id===o);-1!==e&&(l.Douyin.activeVideoIndex=e),l.phone.show=!0,l.phone.activeApp='Douyin'}})]);(0,i.render)(e,n)}else s.innerText=`视频加载失败: ${o}`}}else if(f.length>0){const t=$('<div class="baibai_regexTinder">')[0];k.hasClass('TH-render')?(k.append(t),w.remove()):w.replaceWith(t);const a={message_id:e.message_id,message_name:'Tinder Bubble',messages:[],to:t};for(const e of f){const n=e[1];if(n.startsWith('delete_account')||n.startsWith('update_profile'))continue;const t=n.split('|');let i=t[0],o='',r='';if(t.length>=4)i=t[0].trim(),o=t[2].trim(),r=t[3].trim();else{if(!(t.length>=3))continue;i=t[0].trim(),o=t[1].trim(),r=t[2].trim()}i===l.ST.userName&&(i='user');let s=i;if('user'!==i){const e=e=>e?e.trim().toLowerCase():'',n=e(i),t=Object.entries(l.QQ.chars).find(([_,t])=>e(t.tinderName)===n);if(t)s=t[0];else if(i in l.QQ.chars)s=i;else{const t=Object.entries(l.QQ.chars).find(([t,a])=>e(a.name)===n||e(t)===n);if(t)s=t[0];else{const t=n.length>1?Object.entries(l.QQ.chars).filter(([_,t])=>{const a=e(t.name),i=e(t.tinderName),o=a&&(a.includes(n)||n.length>a.length&&n.includes(a)),r=i&&(i.includes(n)||n.length>i.length&&n.includes(i));return o||r}):[];if(t.length>0)s=t[0][0];else{const t=l.Tinder.matches.find(t=>e(t.name)===n||e(t.id)===n);t&&t.id&&(s=t.id)}}}}const c=su(o);for(const e of c)a.messages.push({...e,sender:s,displayName:i,time:r,chartype:'private'})}const o=(0,i.h)(i.Teleport,{to:a.to},(a.messages??[]).map(e=>(0,i.h)(Zr,{bubble:e,senderinfo:l.QQ.chars[e?.sender]})));(0,i.render)(o,n)}else if(b.length>0){const t=$('<div class="baibai_regexInstagramMsg">')[0];k.hasClass('TH-render')?(k.append(t),w.remove()):w.replaceWith(t);const a={message_id:e.message_id,message_name:'Instagram Msg Bubble',messages:[],to:t};for(const e of b){const n=e[1].split('|');let t='',i='',o='';if(n.length>=4)t=n[0].trim(),i=n[2].trim(),o=n[3].trim();else{if(!(n.length>=3))continue;t=n[0].trim(),i=n[1].trim(),o=n[2].trim()}t!==l.ST.userName&&'{{user}}'!==t||(t='user');let r=t;if('user'!==t){r=d(t,'Instagram').id}const s=su(i);for(const e of s)a.messages.push({...e,sender:r,time:o})}const o=(0,i.h)(i.Teleport,{to:a.to},(a.messages??[]).map(e=>(0,i.h)(Ym,{bubble:e,senderinfo:l.QQ.chars[e?.sender]})));(0,i.render)(o,n)}else if(v.length>0){const e=$('<div class="baibai_instagram_container" style="display: flex; flex-direction: column; gap: 10px;"></div>');k.hasClass('TH-render')?(k.append(e),w.remove()):w.replaceWith(e);for(const t of v){const a=t[1].split('|');if(a.length<5)continue;const o=a[0];if(5===a.length||6===a.length){const t=l.Instagram.posts.find(e=>e.id==o);if(t){const r={sender:a[1],content:a[2],time:a[3],like:a[4],replyTo:6===a.length?a[5].replace('@',''):'',head:''};let s=r.sender;const c=d(s,'Instagram');s=c.name;const p=c.head;r.sender=s,r.head=p;const m=$('<div class="baibai_regexInstagramComment">')[0];e.append(m);const u=(0,i.h)(i.Teleport,{to:m},[(0,i.h)(nu,{commentData:r,post:t,onClick:()=>{l.Instagram.activePost=o,l.phone.show=!0,l.phone.activeApp='Instagram'}})]);(0,i.render)(u,n)}else{const n=$('<div>')[0];n.innerText=`Instagram Post not found: ${o}`,e.append(n)}}else{const t=l.Instagram.posts.find(e=>e.id==o);if(t){const a=$('<div class="baibai_regexInstagram">')[0];e.append(a);const r=(0,i.h)(i.Teleport,{to:a},[(0,i.h)(_c,{postContent:t,isInside:!0,onClick:()=>{l.Instagram.activePost=o,l.phone.show=!0,l.phone.activeApp='Instagram'}})]);(0,i.render)(r,n)}else{const n=$('<div>')[0];n.innerText=`Instagram Post not found: ${o}`,e.append(n)}}}}else if(y.length>0){const e=$('<div class="baibai_qqpost_container" style="display: flex; flex-direction: column; gap: 10px;"></div>');k.hasClass('TH-render')?(k.append(e),w.remove()):w.replaceWith(e);for(const t of y){const a=t[1].trim().replace(/^["']|["']$/g,'').split(/['"]\s*?,\s*?['"]/g);if(a.length<4)continue;const o=a[0],r=l.QQ.post.find(e=>e.id==o);if(r){const t=$('<div class="baibai_regexQQPost">')[0];e.append(t);const a=(0,i.h)(i.Teleport,{to:t},[(0,i.h)(Sn,{post:r})]);(0,i.render)(a,n)}}}else if(B.length>0){const t=$('<div class="baibai_instagram_container" style="display: flex; flex-direction: column; gap: 10px;"></div>');k.hasClass('TH-render')?(k.append(t),w.remove()):w.replaceWith(t);const a=[],o=B[0];for(const n of o){const o=JSON.stringify(n)+(e.message_id||'');let r=0;for(let e=0;e<o.length;e++){r=(r<<5)-r+o.charCodeAt(e),r|=0}const s='ig_json_'+Math.abs(r).toString(36),c=l.Instagram.posts.find(e=>e.id===s);if(c){const e=$('<div class="baibai_regexInstagram">')[0];t.append(e),a.push((0,i.h)(i.Teleport,{to:e},[(0,i.h)(_c,{postContent:c,isInside:!0,onClick:()=>{l.Instagram.activePost=c.id,l.phone.show=!0,l.phone.activeApp='Instagram'}})]))}}if(a.length>0){const e=(0,i.h)('div',a);(0,i.render)(e,n)}}}return[]}console.log('手机加载了11.29 9:01');const du=(0,i.createApp)(Rp);async function pu(){try{uu(),Au()}catch{}let e=await p.getData('height'),n=await p.getData('width');l.phone.navButton=Boolean(await p.getData('navButton')),e&&n||(l.ST.isMobile?(n=.85*($('#chat').width()||0),e=$('#chat').height()||0):(n=400,e=800)),l.phone.width.now=n||l.phone.height.min,l.phone.height.now=e||l.phone.width.min;const t=$('<div>').attr('script_id',getScriptId());$('body').append(t),du.mount(t[0]),function(){try{if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const e=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone());$('head').append(e)}catch{console.log('移动css样式时出错')}}()}async function mu(e,n){console.log(e),'消息生成完成'==e&&(l.generate=!1,console.log(`最新楼层:${n}`),n-=1,lu())}function uu(){try{$(`head > div[script_id="${getScriptId()}"]`).remove()}catch{console.log('移除样式时出现错误')}}function Au(){try{$(`div[script_id="${getScriptId()}"]`).remove()}catch{console.log('移除div时出现错误')}}function hu(){const e=new Date,n=`${String(e.getHours()).padStart(2,'0')}:${String(e.getMinutes()).padStart(2,'0')}`;l.phone.time=n}$(async()=>{try{replaceScriptButtons([{name:'手机显隐切换',visible:!0},{name:'重新处理所有消息',visible:!0}]),await iu(),await async function(e){if(console.log('getAllChatMessages'),l.lock)triggerSlash('/echo 处理中,请稍后再试');else{l.lock=!0;try{l.backup();const n=await triggerSlash('/pass {{lastMessageId}}');if(console.log(`lastId:${n}`),!n)return l.QQ.chathistory={},l.QQ.post=[],l.RedNote.post=[],void(l.RedNote.activePost='');const t=await getChatMessages(`0-${n}`);console.log(`messagesLength:${t.length}`),t.length>0&&(l.QQ.chathistory={},l.QQ.post=[],l.RedNote.post=[],l.RedNote.activePost='',l.Douyin.videos=[],l.Douyin.chathistory={},l.resetDouyinStats(),l.Tinder.chathistory={},l.Instagram.chathistory={});for(const n of t){const t=await ou(n);e&&n.message_id==e&&(t&&l.phone.autoShow,!t&&l.phone.autoHide)}l.loadRead(),console.log(l.QQ.chathistory)}catch(e){console.error(e)}finally{l.lock=!1}}}(),await pu(),await lu(),console.log('手机加载完成!!!!!!!!!!!!!!!!!'),console.log(`isMobile:${l.ST.isMobile}`),eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED,()=>{console.log('消息渲染完成!!!!!'),lu()}),eventOn(tavern_events.CHAT_CHANGED,()=>{mu('聊天切换'),lu()}),eventOn(tavern_events.MESSAGE_UPDATED,()=>{mu('消息更新'),lu()}),eventOn(tavern_events.GENERATION_ENDED,e=>mu('消息生成完成',e)),eventOn(tavern_events.MESSAGE_SWIPED,()=>{mu('消息切换'),lu()}),eventOn(tavern_events.MESSAGE_DELETED,()=>{mu('消息删除'),lu()}),eventOn(tavern_events.MESSAGE_SENT,()=>{console.log('消息已发送'),l.generate=!0}),eventOn(tavern_events.GENERATION_STOPPED,()=>{console.log('生成暂停'),l.generate=!1})}catch(e){console.error(e),toastr.error(`手机出现错误:${e}`)}}),eventOn(getButtonEvent('手机显隐切换'),()=>{l.phone.show=!l.phone.show}),eventOn(getButtonEvent('重新处理所有消息'),async()=>{console.log('重新处理所有消息'),await lu()}),$(window).on('pagehide',()=>{console.log('触发了pagehide');try{du.unmount(),uu(),Au()}catch{}}),setInterval(hu,1e3),hu(),hu();
//# sourceMappingURL=index.js.map
